import{D as e}from"./utils-lib.js?v=1734676359";import{c as a,s,ax as l,r as t,i as r,e as o,bT as u,ag as i,ah as m,o as p,k as n,l as c,p as d,a5 as v}from"./base-lib.js?v=1734676359";import{b as g,i as f,h as b}from"./form-item.js?v=1734676359";import{D as x,f as j,s as h,e as w,c as _,g as P}from"./index127.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./index91.js?v=1734676359";import"./index90.js?v=1734676359";import"./column.js?v=1734676359";import"./useStore3.js?v=1734676359";import"./useController.js?v=1734676359";import"./validator.js?v=1734676359";const y={class:"p-[2rem]"};const H=a({__name:"php-form",setup(a,{expose:H}){const O=x(),{versionOptions:q,extendOptions:C,templateOptions:k,extendsupOptions:V,isEdit:D}=s(O),S=l("popupClose",(()=>{})),U=t(),{BtForm:B,submit:E,param:F}=e({data:j,options:e=>r((()=>[g("名称","name",{attrs:{class:"!w-[320px]",placeholder:"请输入环境名称",disabled:D.value},rules:[{required:!0,message:"请输入环境名称",trigger:"blur"}]}),f("版本","version",q.value,{attrs:{class:"!w-[22rem]",disabled:D.value,onChange:e=>{h(e)}},rules:[{required:!0,message:"请选择PHP版本",trigger:"change"}]}),b("PHP扩展源",(()=>o(u,{modelValue:e.value.repo_url,"onUpdate:modelValue":a=>e.value.repo_url=a,class:"!w-[32rem]",placeholder:"请选择或输入PHP扩展源","fetch-suggestions":(e,a)=>{a(C.value)},"popper-class":"my-extautocomplete"},{default:({item:a})=>o("div",{class:a.value===e.value.repo_url?"bg-[#f5f7fa] flex items-center justify-between px-[2rem]":"flex items-center justify-between px-[2rem]"},[o("div",{class:a.value===e.value.repo_url?"bt-link w-[38rem] truncate":"w-[38rem] truncate"},[a.value+"(".concat(a.label,")")])])})),"repo_url",{attrs:{class:"!w-[22rem]"},rules:[{required:!0,message:"请输入或选择PHP扩展源",trigger:"change"}]}),...D.value?[]:[f("扩展模板","template",k.value,{attrs:{class:"!w-[22rem]",onChange:a=>{const s=k.value.find((e=>e.value===a));s&&(e.value.exts=s.ext.split(","))}},rules:[{required:!1,message:"请选择PHP扩展模板",trigger:"change"}]})],b("扩展",(()=>{let a;return o(m,{ref:e=>U.value=e,class:"!w-[32rem]",modelValue:e.value.exts,"onUpdate:modelValue":a=>e.value.exts=a,filterable:!0,multiple:!0,"collapse-tags":!0,"collapse-tags-tooltip":!0,"reserve-keyword":!1,placeholder:"请选择扩展，可多选(可粘贴识别多个扩展，用,分隔)","filter-method":a=>w(a,V,e.value.version,F,U)},"function"==typeof(s=a=V.value.map((e=>o(i,{key:e.value,label:e.label,value:e.value},null))))||"[object Object]"===Object.prototype.toString.call(s)&&!v(s)?a:{default:()=>[a]});var s}),"exts",{rules:[{required:!0,message:"请选择扩展，可多选(可粘贴识别多个扩展，用,分隔)",trigger:"change"}]})])),submit:async(e,a,s)=>{await a(),_(e.value,S)}});return p((()=>{P(F)})),H({onConfirm:E}),(e,a)=>(n(),c("div",y,[o(d(B))]))}});export{H as default};
