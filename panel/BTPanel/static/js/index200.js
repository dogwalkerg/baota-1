import{x as e,R as l,j as a,e as s,t,c as i,a4 as d,aa as c}from"./utils-lib.js?v=1734676359";import{c as o,s as m,i as r,k as n,l as u,q as v,p,e as f,v as _,y as h,I as x,aX as g,bH as b,x as y,C as w,D as V,au as C,o as j,Q as I,aa as k,A as U,a1 as z,B as D,M as H,ay as A}from"./base-lib.js?v=1734676359";import{a0 as F}from"./store.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./store2.js?v=1734676359";import"./index88.js?v=1734676359";import"./validator.js?v=1734676359";import"./index91.js?v=1734676359";import"./column.js?v=1734676359";const L={class:"flex flex-col h-[40rem]"},M={class:"item-card"},N={class:"item"},q={class:"title"},B=["src"],O={class:"con"},P={class:"item-card"},Q={class:"item"},R={class:"con"},X={class:"item"},$={class:"con overflow-ellipsis flex-1 break-all"},E={class:"item"},G={class:"con"},J={class:"item-card"},K={class:"item"},S={class:"con"},T={class:"item"},W={class:"con"},Y={class:"item"},Z={class:"con"},ee={class:"item-card !border-b-0"},le={class:"item"},ae={class:"con"},se={class:"item"},te={class:"con"},ie=s(o({__name:"base",setup(s){const t=F(),{fileItem:i}=m(t),d=r((()=>"".concat(i.value.path,"/").concat(i.value.name).replace(/\/\//g,"/")));return(s,t)=>{const c=a;return n(),u("div",L,[v("div",M,[v("div",N,[v("div",q,[v("img",{class:"w-[5rem] h-[5rem]",src:"/static/images/file_icon/".concat(p(i).is_dir?"folder_win10":"file",".png"),alt:""},null,8,B)]),v("div",O,[f(c,{width:"38rem",modelValue:p(i).name,"onUpdate:modelValue":t[0]||(t[0]=e=>p(i).name=e),disabled:""},null,8,["modelValue"])])])]),v("div",P,[v("div",Q,[t[2]||(t[2]=v("div",{class:"title"},"类型：",-1)),v("div",R,_(p(i).st_type||"未知文件"),1)]),v("div",X,[t[3]||(t[3]=v("div",{class:"title"},"文件路径:",-1)),v("div",$,[h(_(p(d))+" ",1),v("i",{class:"svgtofont-icon-copy cursor-pointer hover:text-primary text-[1.4rem] ml-[4px] align-middle",onClick:t[1]||(t[1]=l=>p(e)({value:"".concat(p(i).path,"/").concat(p(i).name)}))})])]),v("div",E,[t[4]||(t[4]=v("div",{class:"title"},"大小:",-1)),v("div",G,_(p(i).st_size),1)])]),v("div",J,[v("div",K,[t[5]||(t[5]=v("div",{class:"title"},"权限:",-1)),v("div",S,_(p(i).mode),1)]),v("div",T,[t[6]||(t[6]=v("div",{class:"title"},"所属组:",-1)),v("div",W,_(p(i).group),1)]),v("div",Y,[t[7]||(t[7]=v("div",{class:"title"},"所属用户:",-1)),v("div",Z,_(p(i).user),1)])]),v("div",ee,[v("div",le,[t[8]||(t[8]=v("div",{class:"title"},"访问时间:",-1)),v("div",ae,_(p(l)(p(i).st_atime)),1)]),v("div",se,[t[9]||(t[9]=v("div",{class:"title"},"修改时间:",-1)),v("div",te,_(p(l)(p(i).st_mtime)),1)])])])}}}),[["__scopeId","data-v-0f41b8ea"]]),de={class:"h-[40rem] pt-[.5rem] overflow-hidden"},ce={class:"h-[36.5rem] overflow-y-auto"},oe={class:"title"},me={class:"con"},re=s(o({__name:"detail",setup(e){const l=F(),{fileItem:a,attrList:s}=m(l);return(e,l)=>(n(),u("div",de,[l[0]||(l[0]=v("div",{class:"item th"},[v("div",{class:"title"},"属性"),v("div",{class:"con"},"值")],-1)),v("div",ce,[(n(!0),u(x,null,g(p(s),(e=>(n(),u("div",{key:e.title,class:"item"},[v("div",oe,_(e.title),1),v("div",me,_(e.value),1)])))),128))])]))}}),[["__scopeId","data-v-7bd1f992"]]),ne={class:"h-[40rem] pt-[.5rem] overflow-hidden"},ue={class:"h-[36.5rem] overflow-y-auto"},ve={class:"w-[14rem]"},pe={class:"w-[8.5rem]"},fe={class:"con"},_e={class:"w-[9rem] text-right"},he=s(o({__name:"history",setup(e){const a=F(),{fileItem:s}=m(a),{showHistory:d,recoverHistory:c}=a;return(e,a)=>{const d=i,o=C;return n(),u("div",ne,[a[1]||(a[1]=b('<div class="item th" data-v-e0521c5d><div class="w-[14rem]" data-v-e0521c5d>修改时间</div><div class="w-[8.5rem]" data-v-e0521c5d>文件大小</div><div class="con" data-v-e0521c5d>MD5</div><div class="w-[9rem] text-right" data-v-e0521c5d>操作</div></div>',1)),v("div",ue,[(n(!0),u(x,null,g(p(s).history,(e=>(n(),u("div",{key:e.md5,class:"item"},[v("div",ve,_(p(l)(e.st_mtime)),1),v("div",pe,_("".concat(p(t)(e.st_size))),1),v("div",fe,_(e.md5),1),v("div",_e,[f(d,{onClick:l=>p(c)(e)},{default:y((()=>a[0]||(a[0]=[h("恢复")]))),_:2},1032,["onClick"])])])))),128)),w(f(o,{description:"暂无历史版本"},null,512),[[V,0===p(s).history.length]])])])}}}),[["__scopeId","data-v-e0521c5d"]]),xe={class:"h-[40rem] overflow-hidden"},ge={class:"flex justify-around"},be={class:"p-4px"},ye={class:"p-4px"},we={class:"p-4px"},Ve={class:"flex items-center pl-[3rem]"},Ce=s(o({__name:"auth",setup(e){const l=F(),{checkList:s}=m(l),{ownerOptions:t,checkNumber:i,changeUser:c,setFileAuths:o,reversePermission:r,getFileAuths:_}=l;return j((()=>{_()})),(e,l)=>{const m=I,_=k,x=a,g=d,b=U;return n(),u("div",xe,[v("div",ge,[v("fieldset",be,[l[9]||(l[9]=v("legend",null,"所有者",-1)),f(_,{class:"flex flex-col",style:{gap:"4px"},modelValue:p(s).owner,"onUpdate:modelValue":l[0]||(l[0]=e=>p(s).owner=e),onChange:p(r)},{default:y((()=>[f(m,{class:"ml-[1rem]",label:"r"},{default:y((()=>l[6]||(l[6]=[h("读取")]))),_:1}),f(m,{class:"ml-[1rem]",label:"w"},{default:y((()=>l[7]||(l[7]=[h("写入")]))),_:1}),f(m,{class:"ml-[1rem]",label:"x"},{default:y((()=>l[8]||(l[8]=[h("执行")]))),_:1})])),_:1},8,["modelValue","onChange"])]),v("fieldset",ye,[l[13]||(l[13]=v("legend",null,"用户组",-1)),f(_,{class:"flex flex-col",style:{gap:"4px"},modelValue:p(s).group,"onUpdate:modelValue":l[1]||(l[1]=e=>p(s).group=e),onChange:p(r)},{default:y((()=>[f(m,{class:"ml-[1rem]",label:"r"},{default:y((()=>l[10]||(l[10]=[h("读取")]))),_:1}),f(m,{class:"ml-[1rem]",label:"w"},{default:y((()=>l[11]||(l[11]=[h("写入")]))),_:1}),f(m,{class:"ml-[1rem]",label:"x"},{default:y((()=>l[12]||(l[12]=[h("执行")]))),_:1})])),_:1},8,["modelValue","onChange"])]),v("fieldset",we,[l[17]||(l[17]=v("legend",null,"公共",-1)),f(_,{class:"flex flex-col",modelValue:p(s).public,"onUpdate:modelValue":l[2]||(l[2]=e=>p(s).public=e),style:{gap:"4px"},onChange:p(r)},{default:y((()=>[f(m,{class:"ml-[1rem]",label:"r"},{default:y((()=>l[14]||(l[14]=[h("读取")]))),_:1}),f(m,{class:"ml-[1rem]",label:"w"},{default:y((()=>l[15]||(l[15]=[h("写入")]))),_:1}),f(m,{class:"ml-[1rem]",label:"x"},{default:y((()=>l[16]||(l[16]=[h("执行")]))),_:1})])),_:1},8,["modelValue","onChange"])])]),v("div",Ve,[f(x,{width:"6rem",modelValue:p(s).auth,"onUpdate:modelValue":l[3]||(l[3]=e=>p(s).auth=e),onInput:p(i),class:"!w-6rem",type:"number",min:"0",max:"777",oninput:"if(value){value=value.replace(/[^\\d]/g,'')} if(value<=0){value=0} if(value>777){value=777}"},null,8,["modelValue","onInput"]),l[20]||(l[20]=v("div",{class:"mx-[1rem]"},"权限，所有者",-1)),f(g,{modelValue:p(s).user,"onUpdate:modelValue":l[4]||(l[4]=e=>p(s).user=e),options:p(t),class:"!w-[10rem]",onChange:p(c)},null,8,["modelValue","options","onChange"]),f(m,{class:"ml-[1rem]",modelValue:p(s).isDir,"onUpdate:modelValue":l[5]||(l[5]=e=>p(s).isDir=e)},{default:y((()=>l[18]||(l[18]=[h("应用到子目录")]))),_:1},8,["modelValue"]),f(b,{type:"primary",class:"!ml-[2rem]",onClick:p(o)},{default:y((()=>l[19]||(l[19]=[h("应用")]))),_:1},8,["onClick"])])])}}}),[["__scopeId","data-v-1ce83970"]]),je={class:"p-2rem"},Ie=o({__name:"index",props:{compData:{default:()=>({fileItem:{},tab:"routine"})}},setup(e){const l=F(),{activeName:a,load:s}=m(l),{getFileItem:t,$reset:i}=l;return j((()=>{t()})),z((()=>{i()})),(e,l)=>{const t=A,i=c,d=D("bt-loading");return w((n(),u("div",je,[f(i,{modelValue:p(a),"onUpdate:modelValue":l[0]||(l[0]=e=>H(a)?a.value=e:null),type:"card"},{default:y((()=>[f(t,{label:"常规",name:"routine",lazy:""},{default:y((()=>[f(ie)])),_:1}),f(t,{label:"详细信息",name:"detail",lazy:""},{default:y((()=>[f(re)])),_:1}),f(t,{label:"历史版本",name:"history",lazy:""},{default:y((()=>[f(he)])),_:1}),f(t,{label:"权限",name:"auth",lazy:""},{default:y((()=>[f(Ce)])),_:1})])),_:1},8,["modelValue"])])),[[d,p(s)],[d,"正在获取文件信息，请稍候...","title"]])}}});export{Ie as default};
