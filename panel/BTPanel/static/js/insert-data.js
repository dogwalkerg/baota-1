import{c as a,r as e,w as t,k as s,l as o,e as r,x as m,I as l,aX as p,J as n,p as d,z as u,N as c,a7 as i,a4 as f}from"./base-lib.js?v=1734676359";import{G as _,j as w,e as h}from"./utils-lib.js?v=1734676359";import{updateTableData as D,createTableData as b}from"./database.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";const v={class:"p-[20px] max-h-[50rem] overflow-auto"},y=h(a({__name:"insert-data",props:{compData:{default:{keys:[],row:{},path:"",table:"",refresh:()=>{}}}},setup(a,{expose:h}){const y=a,k=e(),g=e({});t((()=>y.compData.keys),(()=>{var a;null==(a=y.compData.keys)||a.forEach((a=>{g.value[a.name]=y.compData.row?y.compData.row[a.name]:""}))}),{immediate:!0});const j={path:[{required:!0,message:"请选择数据库文件",trigger:["blur","change"]}]};return h({onConfirm:async a=>{await k.value.validate();let e={path:y.compData.path,table:y.compData.table,new_data:g.value,where_data:y.compData.row};const t=y.compData.row;t||delete e.where_data,e=JSON.stringify(e),await _({loading:"正在提交，请稍后...",request:t?D({data:e}):b({data:e}),message:!0}),a(),y.compData.refresh()}}),(a,e)=>{const t=w,_=i,h=f;return s(),o("div",v,[r(h,{model:d(g),ref_key:"insertDataForm",ref:k,rules:j,onSubmit:e[0]||(e[0]=c((()=>{}),["prevent"]))},{default:m((()=>[(s(!0),o(l,null,p(a.compData.keys,((a,e)=>(s(),o(l,null,[1!==a.pk?(s(),n(_,{label:a.name,prop:a.name,key:e},{default:m((()=>[r(t,{type:"text",modelValue:d(g)[a.name],"onUpdate:modelValue":e=>d(g)[a.name]=e,name:"item.name",width:"28rem"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label","prop"])):u("",!0)],64)))),256))])),_:1},8,["model"])])}}}),[["__scopeId","data-v-a0d5c770"]]);export{y as default};
