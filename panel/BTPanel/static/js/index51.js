import{u as e,am as l,an as a,bI as s,bK as t,a4 as o,bQ as n,F as r,aa as i,e as m,ao as u}from"./utils-lib.js?v=1734676359";import{c as p,i as c,o as d,k as f,l as h,p as y,J as v,x,q as b,e as g,M as k,z as _,y as C,s as w,I as V,aX as j,G as T,A as B,ay as q,ah as S,ag as R}from"./base-lib.js?v=1734676359";import{_ as L}from"./index99.js?v=1734676359";import{r as M,i as P,g as U,h as A,p as D,j as H,k as I,l as z,m as F,n as O,s as W,o as E,q as G,v as J,w as K,T as N,x as Q,y as X,z as Y,A as Z,B as $,C as ee,D as le,b as ae}from"./useController2.js?v=1734676359";import{_ as se}from"./index100.js?v=1734676359";import{_ as te}from"./index90.js?v=1734676359";import{_ as oe}from"./index101.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./useStore6.js?v=1734676359";import"./index272.js?v=1734676359";import"./column.js?v=1734676359";import"./index91.js?v=1734676359";import"./validator.js?v=1734676359";const ne={class:"flex items-center"},re={class:"flex items-center"},ie={class:"mr-1rem"},me={class:"mr-1rem"},ue={class:"flex items-center mr-1rem"},pe=p({__name:"index",setup(n){const{payment:r}=e(),i=s({options:[{label:"登录日志",value:"login"},{label:"操作日志",value:"action"}],key:"ftpType"}),m=t({options:[{label:"全部",value:"all"},{label:"上传",value:"upload"},{label:"下载",value:"download"},{label:"删除",value:"delete"},{label:"重命名",value:"rename"}],key:"type",other:{style:"width: 10rem"}}),{BtTable:u,BtSearch:p,BtPage:w,BtRefresh:V,BtRadioButton:j,BtTableSelect:T,refresh:B,param:q}=l({request:M,columns:c((()=>"login"===q.value.ftpType?[{label:"用户名",prop:"user"},{label:"登录ip",prop:"ip"},{label:"状态",prop:"status"},{label:"登陆时间",prop:"in_time"},{label:"登出时间",prop:"out_time"}]:[{label:"操作ip",prop:"ip"},{label:"文件",prop:"file"},{label:"操作类型",prop:"type"},{label:"操作时间",prop:"time"}])),extension:[i,m,a(H)]});return d((()=>{P.value=!0})),(e,l)=>{const a=o,s=te,t=se;return f(),h("div",null,["ltd"===y(r).authType?(f(),v(s,{key:0},{"header-left":x((()=>[b("div",ne,[l[1]||(l[1]=b("span",{class:"!w-[6.8rem]"},"ftp用户名：",-1)),g(a,{filterable:"",onChange:y(B),class:"!w-[16rem] lt-xl:w-[12rem]",modelValue:y(U),"onUpdate:modelValue":l[0]||(l[0]=e=>k(U)?U.value=e:null),options:y(A)},null,8,["onChange","modelValue","options"])])])),"header-right":x((()=>[b("div",re,[b("div",ie,["action"===y(q).ftpType?(f(),v(y(T),{key:0})):_("",!0)]),b("div",me,[g(y(p),{placeholder:"请输入搜索关键字",class:"!lt-xl:w-[14rem] !at-xl:w-[14rem]"})]),b("div",ue,[l[2]||(l[2]=C(" 日志类型： ")),g(y(j))]),g(y(V))])])),content:x((()=>["login"===y(q).ftpType?(f(),v(y(u),{key:0})):(f(),v(y(u),{key:1}))])),"footer-right":x((()=>[g(y(w))])),_:1})):(f(),v(t,{key:1,data:y(D),class:"px-[20%] my-[8rem]"},null,8,["data"]))])}}}),ce={class:"flex items-center mb-[12px] justify-between flex-1 flex-wrap"},de={class:"flex items-center"},fe={key:0,class:"flex items-center flex-nowrap"},he={class:"flex items-center"},ye=m(p({__name:"index",setup(l){const{mainHeight:a}=e(),s=I(),{mysqlActive:t,checkList:o}=w(s);return d(z),(e,l)=>{const s=B,m=n,u=r,p=L,c=q,d=i;return f(),v(d,{type:"bg-card",modelValue:y(t),"onUpdate:modelValue":l[6]||(l[6]=e=>k(t)?t.value=e:null),onTabClick:y(J)},{default:x((()=>[(f(!0),h(V,null,j(y(F),((e,n)=>(f(),v(c,{label:e.label,name:e.value,key:n},{default:x((()=>[b("div",ce,[b("div",de,[g(s,{class:"!mr-[8px]",onClick:y(O)},{default:x((()=>l[7]||(l[7]=[C(" 清空日志 ")]))),_:1},8,["onClick"]),"mysqlError"===y(t)?(f(),h("div",fe,[l[8]||(l[8]=C(" 级别： ")),g(m,{modelValue:y(o),"onUpdate:modelValue":l[0]||(l[0]=e=>k(o)?o.value=e:null),onChange:l[1]||(l[1]=e=>y(z)(y(W))),class:"mr-[12px] flex !flex-nowrap",options:y(E)},null,8,["modelValue","options"])])):_("",!0)]),b("div",he,[g(u,{class:"mr-1rem w-[26rem]",modelValue:y(W),"onUpdate:modelValue":l[2]||(l[2]=e=>k(W)?W.value=e:null),onSearch:l[3]||(l[3]=e=>y(z)(y(W))),onClear:l[4]||(l[4]=()=>W.value=""),placeholder:"请输入搜索关键字"},null,8,["modelValue"]),g(p,{onRefresh:l[5]||(l[5]=e=>y(z)(y(W)))})])]),g(oe,{content:y(G),isHtml:!0,autoScroll:!0,fullScreen:{title:"全屏查看-Mysql日志",onRefresh:()=>y(z)(y(W))},style:T("height:".concat(y(a)-246,"px"))},null,8,["content","fullScreen","style"])])),_:2},1032,["label","name"])))),128))])),_:1},8,["modelValue","onTabClick"])}}}),[["__scopeId","data-v-dc20b744"]]),ve={class:"flex items-center"},xe=p({__name:"index",setup(e){const a=I(),{refreshPlugin:s}=w(a),{getPluginLogData:t}=a,o=u(N),{BtTable:n,BtPage:r,BtSearch:i,BtRefresh:m,BtBatch:p,refresh:c}=l({request:async e=>{const{p:l,limit:a,search:s}=e;return t({p:l,ROWS:a,search:s})},columns:K.value,extension:[o]});return s.value=c,(e,l)=>{const a=te;return f(),h("div",null,[g(a,null,{"header-right":x((()=>[b("div",ve,[g(y(i),{class:"mr-1rem !lt-lg:w-[16rem]",placeholder:"请输入搜索关键字"}),g(y(m))])])),content:x((()=>[g(y(n))])),"footer-left":x((()=>[g(y(p))])),"footer-right":x((()=>[g(y(r))])),_:1})])}}}),be={class:"items-start flex"},ge={key:2,class:"flex items-center mr-8px"},ke={class:"flex items-center"},_e=p({__name:"index",setup(l){const{mainWidth:a}=e(),{getMenuList:s}=I(),{menuOptions:t,currentName:o,phpData:n,phpChecked:i,logsMsg:m,logPath:u}=w(I());return d((async()=>{await s(),t.value.length&&Q(t.value[0])})),(e,l)=>{const s=B,p=R,c=S,d=r;return f(),h("div",be,[g(ae,{logsType:"soft",onTabClick:y(le),"menu-options":y(t),logContent:y(m)},{LogView:x((()=>[y(X)?(f(),h("div",{key:0,style:T("width:".concat(y(a)-290,"px"))},["Mysql"===y(o)?(f(),v(ye,{key:0})):_("",!0),"FTP"===y(o)?(f(),v(pe,{key:1})):_("",!0),y(Y).includes(y(o))?(f(),v(xe,{key:2,path:y(u)},null,8,["path"])):_("",!0)],4)):_("",!0)])),LogLeft:x((()=>["Mysql"!=y(o)&&y(u)?(f(),v(s,{key:0,class:"!m-0",type:"default",onClick:y(Z)},{default:x((()=>l[4]||(l[4]=[C(" 导出日志 ")]))),_:1},8,["onClick"])):_("",!0),"Mysql"!=y(o)?(f(),v(s,{key:1,class:"!m-0 !mx-[8px]",type:"default",onClick:y($)},{default:x((()=>l[5]||(l[5]=[C(" 清空日志 ")]))),_:1},8,["onClick"])):_("",!0),"Php"===y(o)?(f(),h("div",ge,[l[6]||(l[6]=C(" php版本： ")),g(c,{onChange:y(ee),modelValue:y(i),"onUpdate:modelValue":l[0]||(l[0]=e=>k(i)?i.value=e:null),class:"!w-[8rem] mr-[4px]"},{default:x((()=>[(f(!0),h(V,null,j(y(n),((e,l)=>(f(),v(p,{key:l,label:e.version,value:e.version},null,8,["label","value"])))),128))])),_:1},8,["onChange","modelValue"])])):_("",!0)])),LogRight:x((()=>[b("div",ke,[g(d,{class:"!w-[26rem] mr-1rem",modelValue:y(W),"onUpdate:modelValue":l[1]||(l[1]=e=>k(W)?W.value=e:null),onSearch:l[2]||(l[2]=e=>y(Q)({name:y(o)},y(W))),placeholder:"请输入日志内容名称"},null,8,["modelValue"]),g(y(L),{onRefresh:l[3]||(l[3]=e=>y(Q)({name:y(o)},y(W)))})])])),_:1},8,["onTabClick","menu-options","logContent"])])}}});export{_e as default};
