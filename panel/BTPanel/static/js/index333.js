import{c as a,h as e,r as o,o as s,k as d,l as n,e as l,x as m,p as r,q as t,y as i,v as _,N as u,P as c,a7 as p,a4 as f}from"./base-lib.js?v=1734676359";import{M as v}from"./ssl.js?v=1734676359";import{b}from"./utils-lib.js?v=1734676359";import{g as w}from"./useStore10.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";const y={class:"p-[16px]"},j={slot:"append"},g=a({__name:"index",props:{compData:{type:Object,default:()=>{}}},emits:["close"],setup(a,{expose:g,emit:h}){const D=b(),{refs:{isRefreshDomainList:V}}=w(),x=a,k=h,q=e({domain_name:"",domain_dns_value:"",dns_id:"",record_type:"A",domain:""}),A=o(null),C={domain_name:[{validator:(a,e,o)=>{e?o():o(new Error("请填写域名前缀"))},trigger:"blur"}],domain_dns_value:[{validator:(a,e,o)=>{e?o():o(new Error("请输入记录值"))},trigger:"blur"}]};return s((()=>{x.compData.row.dns_id&&(q.dns_id=x.compData.row.dns_id,q.domain=".".concat(x.compData.row.domain))})),g({onConfirm:async()=>{try{await A.value.validate();const a=D.load("正在解析域名，请稍候..."),e=await v({dns_id:q.dns_id,domain_name:"".concat(q.domain_name).concat(q.domain),domain_dns_value:q.domain_dns_value,record_type:q.record_type,fun_name:"create_dns_record"});D.request(e),a&&a.close(),e.status&&(V.value=!0,q.domain_name="",q.domain_dns_value="",q.dns_id="",q.record_type="A",q.domain="",k("close"))}catch(a){}}}),(a,e)=>{const o=c,s=p,v=f;return d(),n("div",y,[l(v,{ref_key:"formRef",ref:A,size:"small",rules:C,model:r(q),class:"relative w-full","label-position":"right",onSubmit:e[2]||(e[2]=u((()=>{}),["prevent"]))},{default:m((()=>[l(s,{label:"主机记录",prop:"domain_name"},{default:m((()=>[l(o,{modelValue:r(q).domain_name,"onUpdate:modelValue":e[0]||(e[0]=a=>r(q).domain_name=a),class:"!w-[43rem]",placeholder:"请填写域名前缀，支持多级，如：ab.cd.ef"},{default:m((()=>[t("template",j,[i(_(r(q).domain),1)])])),_:1},8,["modelValue"])])),_:1}),l(s,{label:"记录值",prop:"domain_dns_value"},{default:m((()=>[l(o,{modelValue:r(q).domain_dns_value,"onUpdate:modelValue":e[1]||(e[1]=a=>r(q).domain_dns_value=a),class:"!w-[43rem]",placeholder:"请输入记录值，一般为服务器IP、CDN地址、邮件服务域名"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])}}});export{g as default};
