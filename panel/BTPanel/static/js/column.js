import{aR as t,ai as e,r as l,aS as a,b as s,aT as n,x as o,p as i,ap as r,t as p,aU as u}from"./utils-lib.js?v=1734676359";import{c,r as d,aD as m,i as b,e as v,y as h,m as f,ao as x,ap as k,an as w,az as g}from"./base-lib.js?v=1734676359";import{_ as y}from"./index91.js?v=1734676359";const C=s(),V=(a,s="path")=>{t(),e("Path",a[s]),l.push({path:"/files"})},q=c({props:{onClickPwd:{type:Function,required:!0},modelValue:{type:String,default:""}},setup(t){const e=n("copy",16),l=d(!1),a=d(!0);m((()=>{a.value=!!t.modelValue}));const s=b((()=>l.value?"svgtofont-icon-eye-close":"svgtofont-icon-browse")),i=()=>t.onClickPwd();return()=>v("div",null,[a.value?v("div",{class:"flex items-center"},[l.value?v("span",{class:"block truncate max-w-[140px]"},[t.modelValue]):v("span",null,[h("**********")]),v("i",{class:"mx-4 cursor-pointer text-[#333] text-[15px] ".concat(s.value),title:"显示密码",onClick:()=>l.value=!l.value},null),v("i",{id:e,"data-clipboard-text":t.modelValue,class:"svgtofont-el-document-copy cursor-pointer text-[#333] text-[15px] copy svgtofont-icon-copy",title:"复制密码",onClick:()=>{return e=t.modelValue,void o({value:e});var e}},null)]):v("div",null,[v("span",{class:"text-[#999]"},[h("无法获取密码，请点击"),v("span",{class:"text-danger cursor-pointer",onClick:i},[h("改密")]),h("重置密码!")])])])}}),B=c({name:"BtTableStatus",props:{data:{type:Array,default:()=>["未启动","运行中"]},isIcon:{type:Boolean,default:!0},modelValue:{type:[Boolean,Number],default:!0}},setup:(t,{attrs:e})=>()=>v("span",f({class:"bt-".concat(t.modelValue?"link":"danger")},e),[v("span",{class:"flex items-center"},[v("span",null,[t.data[Number(t.modelValue)]]),t.isIcon&&v("i",{class:"ml-[2px] text-[1.2rem] svgtofont-icon-".concat(t.modelValue?"start":"stop")},null)])])}),z=()=>({type:"selection",width:36}),H=(t={prop:"path"})=>({label:t.label||"根目录",prop:t.prop,minWidth:t.width||200,isCustom:!0,render:e=>v("span",{class:"flex !justify-start inline-block bt-link leading-[16px]",onClick:()=>V(e,t.prop),title:"点击打开目录"},[e[t.prop]])}),P=(t,e)=>({width:16,type:"toping",label:t.label||"",subtitle:"置顶",className:"cols-toping",render:l=>{e||(e="sort");const a=t.param||e||"",s=Boolean(l[a])&&"0"!==l[a];return v("div",{onClick:()=>t.event(l,s?"untop":"top")},[v("i",{style:"color:".concat(s?"#EFB958":"#C7BDA9"),class:"svgtofont-icon-top cursor-pointer text-[1.6rem] ".concat(s?"":"table-no-top opacity-80")},null)])}}),S=t=>({label:"备注",prop:"ps",isCustom:!0,showOverflowTooltip:!1,width:t.width||120,minWidth:t.minWidth||120,render:e=>{var l;const s={lt:"<",gt:">",nbsp:" ",amp:"&",quot:'"',"#x27":"'",apos:"'"},n=t.prop?t.prop:"ps";let o=(null==(l=e[n])?void 0:l.replace(/&(lt|gt|nbsp|amp|quot|#x27);/gi,(function(t,e){return s[e]})))||"";return v("input",{type:"text",value:o,class:"bt-table-input w-full",placeholder:"点击编辑备注",onBlur:l=>{const s=l.target;o!==(null==s?void 0:s.value)&&(o=s.value,t.request?t.request(e,o):(async({id:t,ps:e},l)=>{const s=C.load("正在修改备注信息，请稍后...");try{const s=await a({id:t,table:l,ps:e});C.request(s)}catch(n){}finally{s.close()}})({id:e.id,ps:o},t.table))},onKeyup:t=>{if("Enter"===t.key){const e=t.target;null==e||e.blur()}}},null)}}),W=t=>(i(t.prop)&&(t.prop="status"),i(t.data)&&(t.data=["未启动","运行中"]),{label:"状态",prop:t.prop,width:t.width||80,minWidth:t.sortable?80:70,isCustom:!0,sortable:t.sortable||!1,render:e=>{let l=!!Number(e[t.prop]);return t.function?t.function(e):(["running","start"].includes(e[t.prop])&&(l=!0),["exited","stop","created"].indexOf(e[t.prop])>-1&&(l=!1),v(B,{modelValue:l,data:t.data,onClick:()=>t.event(e)},null))}}),j=(t={prop:"password"})=>({label:"密码",prop:t.prop||"password",minWidth:130,width:t.width,isCustom:!0,render:e=>v(q,{modelValue:e[t.prop||"password"],onClickPwd:()=>t.event&&t.event(e)},null)}),N=t=>({label:"容量",isLtd:!0,minWidth:80,width:t.width||"auto",isCustom:!(null==t?void 0:t.hasOwnProperty("isCustom"))||t.isCustom,render:e=>{var l;if("PHPMOD"===(null==(l=null==e?void 0:e.project_config)?void 0:l.type))return"--";let a=!1;const{quota:s}=e,n=!(null==s?void 0:s.size);if(n)return v("span",{class:"bt-link",onClick:()=>{t.event(e,n)}},["未配置"]);const o=1024*s.size*1024,i=Number((s.used/o*100).toFixed(2))||0,r=s.used/1024/1024>0?(s.used/1024/1024).toFixed(2):"0.00";return s.size>0&&s.used>=o&&(a=!0),a?v("span",{class:"bt-link !text-danger",onClick:()=>{t.event(e,n)}},["容量已满"]):v("span",{class:i>80?"el-link--danger bt-link":"el-link--primary bt-link",onClick:()=>{t.event(e,n)}},[r,h(" / "),s.size,h(" MB")])}}),O=t=>({label:"备份",prop:t.prop,minWidth:180,isCustom:!0,render:e=>v("div",{class:"flex items-center"},[v("span",{class:e.backup_count>0?"text-primary cursor-pointer":"text-[#f0ad4e] cursor-pointer",onClick:()=>t.event?t.event(e,"back"):null},[e.backup_count>0?"有备份(".concat(e.backup_count,")"):"点击备份"]),v("span",{class:"mx-[4px]"},[h("|")]),v("span",{class:"bt-link",onClick:()=>t.event?t.event(e,"import"):null},[h("导入")])])}),T=t=>({isCustom:!0,...t,render:e=>v("span",{class:"bt-link",onClick:()=>t.event?t.event(e):null,title:t.title},[t.text])}),_=(t,e)=>{let l=0;return r(t)||(l=t.reduce(((t,e)=>t+(e.width||40)),0)+20),{label:(null==e?void 0:e.label)||"操作",align:"right",fixed:e&&"boolean"==typeof e.fixed?e.fixed:"right",width:(null==e?void 0:e.width)||l,render:(e,l)=>{const a=[];let s=t;return r(t)&&(s=t(e)),s.forEach(((t,n)=>{if(t.render)return a.push(t.render(e,l));if(t.isHide&&t.isHide(e))return!1;if(t.isMore){const l=t.menu.filter((t=>!t.isHide));return a.push(v(w,{class:"h-[1.6rem]",onCommand:l=>t.onClick(l,e)},{default:()=>v("span",{class:"text-primary flex items-center"},[h("更多"),v("span",{class:"svgtofont-el-arrow-down"},null)]),dropdown:()=>v(x,null,{default:()=>l.map((t=>v(k,{command:t.key},{default:()=>[t.title]})))})})),!1}const o="function"==typeof t.isHide&&t.isHide(e);a.push(v("span",{onClick:a=>t.onClick(e,l,a),title:t.title,class:o?"hidden":"bt-link"},[t.title])),s.length-1!==n&&a.push(v(y,null,null))})),g("div",a)}}},F=t=>({label:"大小",prop:t.prop,width:t.width||80,render:t=>p(Number(t.size),!0)}),M=()=>({label:"操作结果",prop:"batchStatus",width:124,showOverflowTooltip:!0,render:t=>{const e={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#x27;":"'"},l=(()=>{switch(t.batchStatus){case 0:return"等待执行";case 1:return"执行成功";case 2:return(null==t?void 0:t.message)||(null==t?void 0:t.msg)||"执行失败"}return"-"})().replace(/&amp;|&lt;|&gt;|&quot;|&#39;|&#x27;/g,(t=>e[t]));return v("div",{innerHTML:l,class:"inline-clock truncate !w-[10rem] ".concat(t.batchStatus?1===t.batchStatus?"text-primary":"text-danger":"text-warning")},null)}}),D=t=>({label:t.label||"状态",prop:t.prop||"status",width:80,render:e=>{const l=t.prop||"status";return v(u,{modelValue:e[l],"onUpdate:modelValue":t=>e[l]=t,onChange:l=>t.event(l,e),size:t.size||"small"},null)}});export{B,z as a,W as b,M as c,P as d,N as e,O as f,S as g,H as h,F as i,j,T as k,D as l,V as o,_ as u};
