var a;import{G as o,S as s,t,b as e,k as i,c as r}from"./utils-lib.js?v=1734676359";import{_ as l}from"./index90.js?v=1734676359";import{_ as n}from"./index97.js?v=1734676359";import{C as p,i as d,o as m}from"./index13.js?v=1734676359";import{S as c,T as u}from"./useMethod2.js?v=1734676359";import{s as w,r as f,h as j,R as _,c as h,o as x,aJ as b,B as g,k as v,l as y,e as C,x as k,C as T,p as U,y as z,z as M}from"./base-lib.js?v=1734676359";import{u as O}from"./column.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./index101.js?v=1734676359";import"./index99.js?v=1734676359";import"./index107.js?v=1734676359";import"./useMethod3.js?v=1734676359";import"./database.js?v=1734676359";import"./validator.js?v=1734676359";import"./index91.js?v=1734676359";const R=e(),S=p(),{rowData:q}=w(S),A=f(!1),B=f([]),D=f(0),G=j({cron_id:(null==(a=q.value)?void 0:a.id)||0,p:1,rows:10}),H=_([{label:"文件名称",prop:"name",showOverflowTooltip:!0},{label:"备份时间",prop:"addtime"},{label:"备份到",prop:"filename",showOverflowTooltip:!0},{label:"文件大小",render:a=>t(a.size)},O([{onClick:async a=>{try{const o=await u({cron_id:a.cron_id,filename:a.filename});o.status?o.data.is_loacl?window.open("/download?filename="+encodeURIComponent(o.data.path)):window.open(o.data.path):R.error(o.msg)}catch(o){}},title:"下载"}])]),I=async()=>{try{await o({loading:A,request:c({...G,cron_id:q.value.id}),data:{data:[Array,B],page:s(D)}})}catch(a){}},J={class:"p-[20px]"},E={key:0},F=h({__name:"index",emits:["close"],setup(a,{emit:o}){const s=o,t=()=>{s("close")};return x((()=>I())),(a,o)=>{const s=i,e=n,p=l,c=r,u=b("bt-tips"),w=g("bt-loading");return v(),y("div",J,[C(p,null,{content:k((()=>[T(C(s,{"max-height":400,column:U(H),data:U(B)},null,8,["column","data"]),[[w,U(A)],[w,"正在加载中，请稍候...","title"]])])),"footer-right":k((()=>[C(e,{total:U(D),page:U(G).p,"onUpdate:page":o[0]||(o[0]=a=>U(G).p=a),row:U(G).rows,"onUpdate:row":o[1]||(o[1]=a=>U(G).rows=a),onChange:U(I)},null,8,["total","page","row","onChange"])])),_:1}),C(u,{"list-style":"disc",class:"mt-[1rem]"},{default:k((()=>[U(d)?(v(),y("li",E,[C(c,{onClick:o[2]||(o[2]=a=>U(m)(t))},{default:k((()=>o[3]||(o[3]=[z("一键跳转至本地备份目录")]))),_:1})])):M("",!0)])),_:1})])}}});export{F as default};
