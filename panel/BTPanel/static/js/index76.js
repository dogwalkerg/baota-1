import{_ as e}from"./index90.js?v=1734676359";import{R as s,cm as t,o as a,cn as l,u as r,bJ as o,bY as i,E as n}from"./utils-lib.js?v=1734676359";import{s as m,g as c,r as p,e as d,c as u,aJ as g,k as h,J as x,x as _,y as f,p as b,q as v}from"./base-lib.js?v=1734676359";import{e as y}from"./validator.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./index91.js?v=1734676359";import"./column.js?v=1734676359";const j=c("VHOST-LOGS-STORE",(()=>({columns:p([{label:"类型",prop:"log_type",minWidth:40},{label:"类别",prop:"log_level",minWidth:40},{label:"状态",prop:"status",minWidth:50,render:e=>d("span",{class:1===e.log_status?"text-primary":"text-error"},[1===e.log_status?"成功":"失败"])},{label:"内容",prop:"log_body",render:e=>d("div",{class:"flex"},[e.username?d("div",{class:"text-[#909399]"},["用户名: ["+e.username+"]--\x3e"]):"",d("div",null,[e.log_body])])},{label:"执行时间",prop:"log_time",align:"right",minWidth:60,render:e=>s(e.log_time)}]),getLogsList:async e=>{var s;const{data:a}=await t({p:e.p,search:e.search,rows:e.limit});return{data:a.list||[],total:(null==(s=a.page)?void 0:s.count)||0}}}))),B=async e=>{a({title:"清空日志",content:"是否清空日志，是否继续？",onConfirm:async()=>{await l(),e()}})},w=u({__name:"index",setup(s){const{mainHeight:t}=r(),{columns:a,getLogsList:l}=(()=>{const e=j(),s=m(e);return{...e,...s}})(),{BtTable:c,BtSearch:p,BtRefresh:u,BtPage:w,refresh:L}=o({request:l,columns:a.value,extension:[i()]});return(s,a)=>{const l=n,r=g("BtTableCategory"),o=g("BtBatch"),i=e;return h(),x(i,null,{"header-left":_((()=>[d(l,{onClick:a[0]||(a[0]=e=>b(B)(b(L)))},{default:_((()=>a[2]||(a[2]=[f("清除日志")]))),_:1}),v("div",{class:"flex items-center ml-1rem",onClick:a[1]||(a[1]=e=>b(y)({name:"用户管理",type:35,id:62}))},a[3]||(a[3]=[v("i",{class:"svgtofont-desired text-[1.6rem] mr-[4px]"},null,-1),v("span",{class:"bt-link"},"需求反馈",-1)]))])),"header-right":_((()=>[d(r,{class:"!w-[140px] mr-[10px]"}),d(b(p),{placeholder:"请输入用户名称",class:"!w-[270px] mr-[10px]"}),d(b(u))])),content:_((()=>[d(b(c),{"min-height":b(t)},null,8,["min-height"])])),"footer-left":_((()=>[d(o)])),"footer-right":_((()=>[d(b(w))])),_:1})}}});export{w as default};
