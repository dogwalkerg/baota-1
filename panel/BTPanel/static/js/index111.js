import{c as e,s as l,o as a,k as o,J as t,x as r,e as s,q as m,p as d,l as n,I as u,aX as i,z as p,y as c,ag as f,ah as _,a7 as b,a4 as h,a1 as V,b0 as x,bO as y}from"./base-lib.js?v=1734676359";import{j as v,e as w,O as k}from"./utils-lib.js?v=1734676359";import{B as g}from"./index185.js?v=1734676359";import{C as j}from"./index14.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./ace.js?v=1734676359";import"./index100.js?v=1734676359";import"./validator.js?v=1734676359";import"./index91.js?v=1734676359";import"./column.js?v=1734676359";import"./index90.js?v=1734676359";import"./index97.js?v=1734676359";import"./index107.js?v=1734676359";import"./useMethod2.js?v=1734676359";import"./useStore2.js?v=1734676359";const U={class:"flex items-center"},C=w(e({__name:"alert-form",setup(e,{expose:V}){const x=j(),{handleTypeChange:y}=x,{timeType:w,timeForm:k,formDataRef:g,cycleTime:C,timeRule:R}=l(x);return a((()=>y(k.value.type,!0))),V({timeForm:k,formDataRef:g}),(e,l)=>{const a=f,V=_,x=b,j=v,D=h;return o(),t(D,{ref_key:"formDataRef",ref:g,rules:d(R),inline:!0,model:d(k),"label-width":"100px",class:"demo-form-inline"},{default:r((()=>[s(x,{label:"执行周期"},{default:r((()=>{var e,f,_;return[m("div",U,[s(V,{onChange:d(y),class:"!w-[8rem] mr-1rem",modelValue:d(k).type,"onUpdate:modelValue":l[0]||(l[0]=e=>d(k).type=e)},{default:r((()=>[(o(!0),n(u,null,i(d(w),((e,l)=>(o(),t(a,{key:l,label:e.text,value:e.type},null,8,["label","value"])))),128))])),_:1},8,["onChange","modelValue"]),"week"==d(k).type?(o(),t(x,{key:0,class:"el-form-item-item !mr-1rem"},{default:r((()=>[s(V,{class:"!w-[8rem]",modelValue:d(k).week,"onUpdate:modelValue":l[1]||(l[1]=e=>d(k).week=e)},{default:r((()=>[s(a,{label:"周一",value:1}),s(a,{label:"周二",value:2}),s(a,{label:"周三",value:3}),s(a,{label:"周四",value:4}),s(a,{label:"周五",value:5}),s(a,{label:"周六",value:6}),s(a,{label:"周日",value:7})])),_:1},8,["modelValue"])])),_:1})):p("",!0),(null==(e=d(w)[d(C)])?void 0:e.showDay)?(o(),t(x,{key:1,class:"el-form-item-item !mr-1rem",prop:"where1"},{default:r((()=>[s(j,{modelValue:d(k).where1,"onUpdate:modelValue":l[2]||(l[2]=e=>d(k).where1=e),min:1,width:"10rem",type:"number"},{append:r((()=>l[5]||(l[5]=[c(" 天 ")]))),_:1},8,["modelValue"])])),_:1})):p("",!0),(null==(f=d(w)[d(C)])?void 0:f.showHour)?(o(),t(x,{key:2,class:"el-form-item-item !mr-1rem",prop:"hour"},{default:r((()=>[s(j,{modelValue:d(k).hour,"onUpdate:modelValue":l[3]||(l[3]=e=>d(k).hour=e),width:"10rem",max:"23",min:"0",type:"number"},{append:r((()=>l[6]||(l[6]=[c(" 小时 ")]))),_:1},8,["modelValue"])])),_:1})):p("",!0),(null==(_=d(w)[d(C)])?void 0:_.showMinute)?(o(),t(x,{key:3,class:"el-form-item-item",prop:"minute"},{default:r((()=>[s(j,{modelValue:d(k).minute,"onUpdate:modelValue":l[4]||(l[4]=e=>d(k).minute=e),width:"10rem",max:"59",min:"0",type:"number"},{append:r((()=>l[7]||(l[7]=[c(" 分钟 ")]))),_:1},8,["modelValue"])])),_:1})):p("",!0)])]})),_:1})])),_:1},8,["rules","model"])}}}),[["__scopeId","data-v-23c7ae6d"]]),R={class:"p-20px"},D={class:"flex definePicker"},F={class:"text-[1.2rem] flex items-center number"},T={class:"min-h-[3.2rem] flex items-center"},H=w(e({__name:"index",setup(e,{expose:u}){const i=j(),{rules:w,changeScript:U,changeScriptType:H,$reset_add_task:M,initAddTask:Y,onConfirm:A,propsData:I,disabledDate:S,helpList:z}=i,{taskArrangementRef:O,alertFormRef:q,scriptCascaderRef:B,taskForm:J,timeForm:L,argsForm:P,scriptData:X}=l(i);return u({onConfirm:A}),a(Y),V(M),(e,l)=>{const a=v,u=b,i=x,V=f,j=_,M=y,Y=g,A=k,$=h;return o(),n("div",R,[s($,{ref_key:"taskArrangementRef",ref:O,"label-position":"right",rules:d(w),"label-width":"100px",model:d(J)},{default:r((()=>[s(u,{label:"名称",prop:"name"},{default:r((()=>[s(a,{modelValue:d(J).name,"onUpdate:modelValue":l[0]||(l[0]=e=>d(J).name=e),width:"32.2rem",placeholder:"请输入任务名称"},null,8,["modelValue"])])),_:1}),s(C,{ref_key:"alertFormRef",ref:q},null,512),"custom"===d(L).type?(o(),t(u,{key:0,label:"crontab表达式",prop:"crontab_expression"},{default:r((()=>[s(a,{modelValue:d(J).crontab_expression,"onUpdate:modelValue":l[1]||(l[1]=e=>d(J).crontab_expression=e),width:"30rem",placeholder:"请输入crontab表达式"},null,8,["modelValue"])])),_:1})):p("",!0),s(u,null,{default:r((()=>[m("div",D,[s(u,{label:"开始时间"},{default:r((()=>[s(i,{class:"picker",modelValue:d(J).start_time,"onUpdate:modelValue":l[2]||(l[2]=e=>d(J).start_time=e),"value-format":"YYYY-MM-DD HH:mm:ss","disabled-date":d(S),type:"datetime",width:"12rem",placeholder:"请选择开始时间"},null,8,["modelValue","disabled-date"])])),_:1}),s(u,{prop:"exec_count",label:"执行次数","label-width":"0",class:"!mt-0 anotherClass"},{default:r((()=>[m("div",F,[s(a,{modelValue:d(J).exec_count,"onUpdate:modelValue":l[3]||(l[3]=e=>d(J).exec_count=e),width:"13.4rem",min:0,type:"number"},{append:r((()=>l[9]||(l[9]=[c(" 次 ")]))),_:1},8,["modelValue"])])])),_:1})])])),_:1}),s(u,{label:"运行"},{default:r((()=>[m("div",null,[m("div",null,[s(j,{class:"mr-12px !w-[12rem]",modelValue:d(J).on,"onUpdate:modelValue":l[4]||(l[4]=e=>d(J).on=e),onChange:d(H)},{default:r((()=>[s(V,{label:"脚本库",value:"script"}),s(V,{label:"自定义脚本",value:"0"})])),_:1},8,["modelValue","onChange"]),"script"===d(J).on?(o(),t(u,{key:0,prop:"script_id",class:"!inline-block"},{default:r((()=>[s(M,{class:"w-[19rem]",onChange:d(U),"show-all-levels":!1,ref_key:"scriptCascaderRef",ref:B,modelValue:d(J).script_id,"onUpdate:modelValue":l[5]||(l[5]=e=>d(J).script_id=e),props:d(I),placeholder:"请选择脚本,支持搜索",options:d(X),filterable:""},null,8,["onChange","modelValue","props","options"])])),_:1})):p("",!0)]),"0"===d(J).on?(o(),t(Y,{key:0,class:"mt-12px !h-[12rem] !w-[32.2rem]",modelValue:d(J).script_body,"onUpdate:modelValue":l[6]||(l[6]=e=>d(J).script_body=e),"is-zoom":!0},null,8,["modelValue"])):p("",!0)])])),_:1}),s(u,{label:"备注"},{default:r((()=>[s(a,{placeholder:"请输入备注",modelValue:d(J).ps,"onUpdate:modelValue":l[7]||(l[7]=e=>d(J).ps=e),width:"32.2rem"},null,8,["modelValue"])])),_:1}),d(P).is_args?(o(),t(u,{key:1,label:d(P).args_title,prop:"args"},{default:r((()=>[s(a,{placeholder:d(P).args_holder,modelValue:d(J).args,"onUpdate:modelValue":l[8]||(l[8]=e=>d(J).args=e),width:"32.2rem"},null,8,["placeholder","modelValue"])])),_:1},8,["label"])):p("",!0),s(u,{label:"温馨提示"},{default:r((()=>[m("div",T,[s(A,{options:d(z),"list-style":"disc",class:"ml-12px text-[1.2rem] mt-0"},null,8,["options"])])])),_:1})])),_:1},8,["rules","model"])])}}}),[["__scopeId","data-v-e7f14226"]]);export{H as default};
