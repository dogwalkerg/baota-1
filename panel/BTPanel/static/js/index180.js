import{l as t,H as a,M as s,o as e,G as o,k as n,V as r}from"./utils-lib.js?v=1734676359";import{_ as i}from"./index90.js?v=1734676359";import{_ as l}from"./index99.js?v=1734676359";import{c,r as u,h as p,e as m,o as d,B as _,k as f,l as g,x as b,y as h,C as y,p as k,ar as j,A as w}from"./base-lib.js?v=1734676359";import{a as v,u as x,c as E}from"./column.js?v=1734676359";import{b6 as C,b7 as q,b8 as A}from"./useStore3.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./index91.js?v=1734676359";const D={class:"p-[2rem]"},R=c({__name:"index",setup(c){const R=u();u("");const T=p({loading:!1,list:[]}),V=async()=>{o({request:A(),data:{data:[Array,j(T,"list")]},loading:j(T,"loading"),success:t=>{}})},H=async(t,a,s,e)=>{const{label:o,value:n}=e,r=async(t,a)=>{const{id:s}=t;switch(n){case"stop":return await C({id:s,status:"stop"});case"delete":return await q({id:s})}};await t({title:"批量".concat(o),content:"批量".concat(o,"已选的容器组，是否继续操作！"),column:[{label:"文件名",prop:"group_name"},E()],onConfirm:async()=>(await a(r),V(),!1)})},I=[{label:"停止容器组",value:"stop",event:H},{label:"删除容器组",value:"delete",event:H}],L=[v(),{label:"分组名称",prop:"group_name",minWidth:100},{label:"状态",prop:"status",minWidth:70,render:t=>{let a="--";switch(t.status){case 0:a="未启动";break;case 1:a="已启动";break;case 2:a="启动中";break;default:a="启动失败"}return m("span",{class:"inline-block ".concat((2===t.status||t.status,"")," bt-").concat(1===t.status?"link":"danger"),onClick:()=>(async t=>{try{if(2===t.status)return s.error("容器组正在切换状态，请勿重复操作");let a=!0;if(1===t.status&&(a=!1),a&&0===t.order.length)return s.error("容器组内没有容器，无法启动！");const n=a?"开启":"停止";await e({title:"".concat(n,"【").concat(t.group_name,"】容器组"),icon:"question-filled",content:"".concat(n,"容器组状态后，将依次").concat(n,"该容器组内的容器，是否继续操作？")}),await o({request:C({id:t.id,status:a?"start":"stop"}),loading:j(T,"loading"),message:!0,success:V})}catch(a){}})(t)},[m("span",{class:"flex items-center"},[m("span",null,[a]),m("span",{class:2===t.status||4===t.status?"svgtofont-el-loading":"svgtofont-icon-".concat(1===t.status?"start":"stop")},null)])])}},x([{onClick:s=>{t({title:"编辑容器组【".concat(s.group_name,"】"),area:64,btn:"保存",component:()=>a((()=>import("./edit-group-popup.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),compData:{...s,isEdit:!0,refreshEvent:V}})},title:"编辑"},{onClick:async t=>{try{await e({title:"删除容器组【".concat(t.group_name,"】"),content:"您真的要删除容器组【".concat(t.group_name,"】吗？")}),await o({loading:"正在删除...",request:q({id:t.id}),message:!0,success:V})}catch(a){}},title:"删除"}])];return d((()=>{V()})),(s,e)=>{const o=w,c=l,u=n,p=r,d=i,j=_("bt-loading");return f(),g("div",D,[m(d,null,{"header-left":b((()=>[m(o,{type:"primary",onClick:e[0]||(e[0]=s=>(async()=>{t({title:"添加容器组",area:64,showFooter:!0,component:()=>a((()=>import("./edit-group-popup.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),compData:{isEdit:!1,refreshEvent:V}})})())},{default:b((()=>e[1]||(e[1]=[h("添加分组")]))),_:1})])),"header-right":b((()=>[m(c,{onRefresh:V})])),content:b((()=>[y(m(u,{ref_key:"groupTable",ref:R,column:L,"max-height":340,data:k(T).list,description:"容器组列表为空"},null,8,["data"]),[[j,k(T).loading],[j,"正在加载中，请稍后...","title"]])])),"footer-left":b((()=>[m(p,{"table-ref":k(R),options:I},null,8,["table-ref"])])),_:1})])}}});export{R as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
