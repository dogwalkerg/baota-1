import{_ as e}from"./index90.js?v=1734676359";import{_ as a}from"./index97.js?v=1734676359";import{u as s,G as t,M as r,o as i,R as n,k as l}from"./utils-lib.js?v=1734676359";import{_ as o}from"./index99.js?v=1734676359";import{c as m,r as c,h as d,o as p,B as u,k as g,J as f,x as h,q as x,e as _,y as b,C as j,p as w,a2 as v,A as y}from"./base-lib.js?v=1734676359";import{V as k,W as q,X as C}from"./config.js?v=1734676359";import{a as W}from"./column.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./index91.js?v=1734676359";const z={class:"flex items-center"},A={class:"flex items-center"},H=m({__name:"index",setup(m){const{mainHeight:H}=s(),U=c(!1),B=c(0),G=c([]),J=d({page:1,size:10,is_read:!0,sub_type:"all"}),M=async()=>{await t({loading:U,request:k(v(J)),data:{msg_list:[Array,G],count:[Number,B]}})},N=async()=>{if(0===G.value.length)return r.error("暂无消息可设置已读");await i({icon:"warning-filled",title:"全部已读",content:"确定将全部消息标记为已读？"}),await t({loading:"正在设置全部已读，请稍候...",request:q(),message:!0,success:M})},R=async()=>{if(0===G.value.length)return r.error("暂无消息可删除");await i({icon:"warning-filled",title:"全部删除",content:"确定删除全部消息？"}),await t({loading:"正在删除全部消息，请稍候...",request:C(),message:!0,success:M})},V=[W(),{label:"标题内容",minWidth:300,render:e=>_("div",{class:"relative"},[_("span",{class:"hover:cursor-pointer hover:text-primary"},[e.title]),_("div",{class:e.read?"":"dot"},null)])},{label:"提交时间",minWidth:140,render:e=>n(e.create_time)},{label:"类型",minWidth:160,render:e=>_("span",{class:"py-4px px-8px text-[#999] bg-[#f5f7fa]"},[e.msg_types[0]])}];return p((()=>{M()})),(s,t)=>{const r=y,i=o,n=l,m=a,c=e,d=u("bt-loading");return g(),f(c,null,{"header-left":h((()=>[x("div",z,[_(r,{onClick:N},{default:h((()=>t[2]||(t[2]=[b("全部已读")]))),_:1}),_(r,{class:"ml-8px",onClick:R},{default:h((()=>t[3]||(t[3]=[b("全部删除")]))),_:1})])])),"header-right":h((()=>[x("div",A,[_(i,{refresh:M})])])),content:h((()=>[j(_(n,{data:w(G),column:V,"max-height":w(H)-226,description:"消息中心列表为空"},null,8,["data","max-height"]),[[d,w(U)],[d,"正在加载消息中心列表，请稍后...","title"]])])),"footer-right":h((()=>[_(m,{total:w(B),page:w(J).page,"onUpdate:page":t[0]||(t[0]=e=>w(J).page=e),row:w(J).size,"onUpdate:row":t[1]||(t[1]=e=>w(J).size=e),onChange:M},null,8,["total","page","row"])])),_:1})}}});export{H as default};
