import{c as e,r,k as a,l as s,e as l,x as o,q as t,F as d,p as n,N as u,M as v,aT as m,P as i}from"./base-lib.js?v=1734676359";import{b as p,e as c}from"./utils-lib.js?v=1734676359";import{x as f}from"./ssl.js?v=1734676359";import{g as b}from"./useStore10.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";const x={class:"p-[16px]"},y={class:"flex flex-1 justify-start mt-[16px]"},g={class:"flex-1 mr-[2rem]"},_={class:"flex-1"},j=c(e({__name:"index",emits:["close"],setup(e,{expose:c,emit:j}){const{refs:{isRefreshCertificateList:D}}=b(),w=j,V=r(""),h=r(""),k=r(!1),F=r(!1),R=(e,r)=>{var a;if(r.preventDefault(),"key"===e?k.value=!1:F.value=!1,window.FileReader){const s=null==(a=r.dataTransfer)?void 0:a.files;if(s&&s.length>0){const r=s[0],a=new FileReader;a.onload=r=>{var a;(null==(a=r.target)?void 0:a.result)&&("key"===e?V.value=r.target.result:h.value=r.target.result)},a.onerror=()=>{p().error("请上传证书文件")},a.readAsText(r)}else p().error("无效的证书文件拖拽上传")}else p().error("当前浏览器版本不支持文件拖拽上传，请升级浏览器版本")};return c({onConfirm:async()=>{try{const e=await f({key:V.value,csr:h.value});p().request(e),e.status&&(w("close"),D.value=!0)}catch(e){}}}),(e,r)=>{const p=m,c=i;return a(),s("div",x,[l(p,{type:"success",closable:!1},{title:o((()=>r[8]||(r[8]=[t("div",{class:"mr-[3.2rem] text-[1.2rem] pb-[5px]"}," 温馨提示：支持拖拽证书文件上传，并自动识别。 ",-1)]))),_:1}),t("div",y,[t("div",g,[r[9]||(r[9]=t("div",{class:"mb-[.4rem]"},"密钥(KEY)",-1)),t("div",{class:d(["drop-zone mb-[.2rem] p-[.2rem] border border-dashed border-gray-400",{over:n(k)}]),onDragover:r[1]||(r[1]=u((e=>k.value=!0),["prevent"])),onDragleave:r[2]||(r[2]=u((e=>k.value=!1),["prevent"])),onDrop:r[3]||(r[3]=e=>R("key",e))},[l(c,{type:"textarea",rows:22,modelValue:n(V),"onUpdate:modelValue":r[0]||(r[0]=e=>v(V)?V.value=e:null)},null,8,["modelValue"])],34)]),t("div",_,[r[10]||(r[10]=t("div",{class:"mb-[.4rem]"},"证书(PEM格式)",-1)),t("div",{class:d(["drop-zone mb-[.2rem] p-[.2rem] border border-dashed border-gray-400",{over:n(F)}]),onDragover:r[5]||(r[5]=u((e=>F.value=!0),["prevent"])),onDragleave:r[6]||(r[6]=u((e=>F.value=!1),["prevent"])),onDrop:r[7]||(r[7]=e=>R("csr",e))},[l(c,{type:"textarea",rows:22,modelValue:n(h),"onUpdate:modelValue":r[4]||(r[4]=e=>v(h)?h.value=e:null)},null,8,["modelValue"])],34)])])])}}}),[["__scopeId","data-v-9dac88f9"]]);export{j as default};
