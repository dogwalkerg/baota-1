import{_ as a}from"./index90.js?v=1734676359";import{o as e,G as t,k as s,V as i,b as o}from"./utils-lib.js?v=1734676359";import{aB as r}from"./store.js?v=1734676359";import{_ as l,am as n,an as p}from"./store2.js?v=1734676359";import{c as m,r as c,az as d,o as f,k as u,l as h,e as y,x as b,p as j}from"./base-lib.js?v=1734676359";import{a as _,u as x,c as w}from"./column.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./validator.js?v=1734676359";import"./index91.js?v=1734676359";import"./index88.js?v=1734676359";const v={class:"py-[1rem] px-16px"},g=m({__name:"index",setup(m){const g=o(),k=c(),q=c([]),C=[_(),{label:"操作时间",prop:"time",width:180,render:a=>d("span",{},a.time)},{label:"文件路径",prop:"filepath",render:a=>d("span",{},a.filepath)},x([{title:"恢复",isHide:a=>{var e;return 0===(null==(e=a.historys)?void 0:e.length)},onClick:async a=>{await e({title:"恢复历史文件",content:"是否恢复历史文件 ".concat(a.time,"?恢复历史文件后，当前文件内容将会被替换！")}),t({loading:"正在恢复历史文件，请稍后...",request:l({filename:a.filepath,history:a.historys[0]}),success:e=>{e.status?(g.success("恢复成功"),r({path:a.filepath,title:a.fileName,type:"editor"}),H()):g.error("恢复失败")}})}},{title:"删除",onClick:async a=>{await t({loading:"正在删除历史文件，请稍后...",request:n({id:a.id}),message:!0,success:H})}}])],H=async()=>{await t({request:p(),data:[Array,q]})},z=[{label:"删除",value:"delete",event:async(a,e,t,s,i)=>{const o=async a=>await n({id:a.id});await a({title:"批量删除",content:"批量删除选中，是否继续操作？",column:[{prop:"filepath",label:"文件路径"},w()],onConfirm:async()=>(await e(o),H(),!1)})}}];return f((()=>{H()})),(e,t)=>{const o=s,r=i,l=a;return u(),h("div",v,[y(l,null,{content:b((()=>[y(o,{ref_key:"fileTableRef",ref:k,height:"40rem",column:C,description:"列表为空",data:j(q)},null,8,["data"])])),"footer-left":b((()=>[y(r,{"table-ref":j(k),options:j(z)},null,8,["table-ref","options"])])),_:1})])}}});export{g as default};
