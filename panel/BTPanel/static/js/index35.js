import{e,d as l,T as a,M as s,R as t,o as n,G as i,b3 as o,b4 as c,a5 as r,l as u,H as d,af as m,ah as f,p,t as v,b as h,c as k,b5 as x,ae as g,F as C}from"./utils-lib.js?v=1734676359";import{c as _,s as w,r as y,o as b,aB as I,k as L,J as R,x as T,p as F,l as A,e as E,y as S,z as N,I as z,n as j,w as B,q as V,aX as D,C as O,D as P,F as U,aN as M,N as q,v as H,i as K,A as W,ap as $,ao as G,an as J,a$ as Q,g as Y,h as X,R as Z,aY as ee,ar as le,aw as ae,bk as se,a1 as te,B as ne,M as ie,L as oe,G as ce,bl as re,Q as ue,P as de,au as me,aK as fe,bm as pe,bn as ve}from"./base-lib.js?v=1734676359";import{F as he,c as ke,a as xe,g as ge,o as Ce,b as _e,M as we,S as ye,C as be,d as Ie,p as Le,e as Re,f as Te,h as Fe,i as Ae,j as Ee,k as Se,s as Ne,l as ze,m as je,n as Be,q as Ve,r as De,t as Oe,u as Pe,v as Ue,w as Me,x as qe,y as He,z as Ke,A as We,B as $e,D as Ge,E as Je,G as Qe,H as Ye,I as Xe,J as Ze,K as el,L as ll,N as al,O as sl,P as tl,Q as nl,R as il,T as ol}from"./store.js?v=1734676359";import{p as cl,h as rl,i as ul,e as dl}from"./validator.js?v=1734676359";import{C as ml,a as fl,b as pl}from"./default.js?v=1734676359";import{_ as vl}from"./index91.js?v=1734676359";import{_ as hl}from"./index97.js?v=1734676359";import{s as kl}from"./vue-virtual-scroller.esm.js?v=1734676359";import"./vue-virtual-scroller.js?v=1734676359";import{g as xl,d as gl,a as Cl,c as _l,b as wl}from"./store2.js?v=1734676359";import{c as yl,a as bl,u as Il}from"./column.js?v=1734676359";const Ll=e(_({__name:"menu",setup(e,{expose:l}){const a=he(),{fileTabList:s,closeTabs:t}=w(a),{closeOther:n,closeRight:i}=a,o=y(),c=()=>{o.value.visible=!1},r=e=>{o.value&&o.value.visible&&c()};return b((()=>{document.addEventListener("click",r)})),I((()=>{document.removeEventListener("click",r)})),l({show:e=>{o.value.visible=!0,j((()=>{ke(e,o.value.contextmenuRef)}))},hide:c}),(e,l)=>(L(),R(F(fl),{ref_key:"contextmenu",ref:o},{default:T((()=>[F(s).length>1?(L(),A(z,{key:0},[E(F(ml),{onClick:F(n)},{default:T((()=>l[0]||(l[0]=[S("关闭其它")]))),_:1},8,["onClick"]),F(t).index<F(s).length-1?(L(),R(F(ml),{key:0,onClick:F(i)},{default:T((()=>l[1]||(l[1]=[S("关闭右侧")]))),_:1},8,["onClick"])):N("",!0)],64)):N("",!0)])),_:1},512))}}),[["__scopeId","data-v-8843f1b1"]]),Rl={class:"tabs-wrapper"},Tl={class:"tabs"},Fl=["onContextmenu","onClick"],Al={class:"flex items-center",style:{"margin-right":"20px"}},El={class:"file-name"},Sl=["onClick"],Nl={class:"tabs-icon__scroll"},zl={class:"tabs-icon__scroll"},jl=e(_({__name:"index",setup(e,{expose:a}){const s=he(),{fileTabActive:t,fileTabList:n,isAddTabs:i,disabledCutTab:o,scrollWidth:c,showLeftArrow:r,showRightArrow:u,contextRef:d}=w(s),{handleRightClick:m,watchWindowResize:f,watchScrollWidth:p,watchTabsWidth:v,cutTab:h,scrollLeft:k,scrollRight:x,closeTab:g}=s;return B((()=>c.value),(e=>{p(e)})),B((()=>n.value.length),(()=>{v()}),{immediate:!0}),b((()=>{f(),j((()=>{c.value=0}))})),a({watchWindowResize:f}),(e,a)=>{const s=l,c=M;return L(),A("div",Rl,[V("div",Tl,[(L(!0),A(z,null,D(F(n),((e,l)=>(L(),R(c,{enterable:!1,"show-after":2e3,transition:"",key:e.id,content:e.param.path,placement:"bottom"},{default:T((()=>[V("div",{class:U(["tab-item",{on:F(t)===l,disabledTab:F(o)&&F(t)!==l}]),style:{position:"relative"},onContextmenu:q((a=>F(m)(a,e,l)),["prevent"]),onClick:e=>F(h)(l)},[V("div",Al,[E(s,{src:"/file/file-dir.svg",class:"w-[1.8rem]"}),V("div",El,H(e.label),1)]),V("div",{class:"close",slot:"reference",onClick:q((l=>F(g)(e,e.id)),["stop"])},a[3]||(a[3]=[V("i",{class:"svgtofont-el-close"},null,-1)]),8,Sl)],42,Fl)])),_:2},1032,["content"])))),128)),E(c,{content:"点击添加新窗口",placement:"bottom","show-after":500},{default:T((()=>[O(V("i",{class:U(["tab-add-item svgtofont-el-plus !cursor-pointer",{disabledTab:F(o)}]),onClick:a[0]||(a[0]=e=>F(xe)({path:"/www"}))},null,2),[[P,F(i)]])])),_:1}),E(Ll,{ref_key:"contextRef",ref:d},null,512)]),V("div",null,[O(V("div",Nl,[V("i",{class:"svgtofont-el-caret-left",onClick:a[1]||(a[1]=e=>F(k)())})],512),[[P,F(r)]]),O(V("div",zl,[V("i",{class:"svgtofont-el-caret-right",onClick:a[2]||(a[2]=e=>F(x)())})],512),[[P,F(u)]])])])}}}),[["__scopeId","data-v-5acc63ce"]]),Bl={class:"nav nav-btn"},Vl={class:"left flex items-center flex-wrap"},Dl={class:"inline-flex items-center"},Ol={class:"items-center inline-flex"},Pl=["title"],Ul={class:"max-w-[16rem] text-space"},Ml={class:"text-[#999]"},ql={class:"flex items-center"},Hl={class:"flex items-center truncate"},Kl=["title"],Wl={class:"!max-w-[12rem] truncate inline-block"},$l={class:"right flex items-center"},Gl={key:0,class:"flex items-center text-[#f0ad4e] mr-8px"},Jl={class:"right flex items-center"},Ql={class:"flex items-center"},Yl=e(_({__name:"index",setup(e){const s=he(),{mainWidth:t,copyFilesData:n,fileTabActiveData:i,diskList:o,favoriteList:c,fileBatchNum:r}=w(s),{cloudList:u,actionsBtn:d,fileBatchEvent:m,handleChangeMenuIcon:f,handleChangeMenuList:p,handleCommand:v,openPlugin:h,collectCommand:k,createCommand:x,initNavBtn:g}=s,C=K((()=>t.value>1460));return b((()=>{g(),j((()=>{const e=setInterval((async()=>{if(window.$extension){const l=await window.$extension();a(l.extensionElement)&&!l.extensionElement&&clearTimeout(e),l.extensionElement&&(l.extensionElement({custom:{getDiskList:ge}}),clearTimeout(e))}}),1e3)}))})),(e,a)=>{var s;const g=W,_=$,w=l,y=G,b=J,I=vl,j=M,B=Q;return L(),A("div",Bl,[V("div",Vl,[E(b,{class:"",onCommand:F(v),"show-timeout":250},{dropdown:T((()=>[E(y,null,{default:T((()=>[E(_,{command:"upload",class:"upload-btn"},{default:T((()=>a[8]||(a[8]=[V("span",{class:"upload-icon !mr-[.6rem]"},null,-1),S("上传文件/文件夹")]))),_:1}),E(_,{command:"openUrlLinkDown",divided:""},{default:T((()=>[V("div",Dl,[E(w,{src:"/file/url-down.svg",class:"w-[1.6rem] align-middle mr-4px"}),a[9]||(a[9]=S(" URL链接下载 "))])])),_:1}),(L(!0),A(z,null,D(F(u),(e=>(L(),R(_,{key:e.command,command:e.command},{default:T((()=>[V("div",Ol,[E(w,{src:"/file/".concat(e.icon,".svg"),class:"mr-4px w-[1.6rem] align-middle"},null,8,["src"]),S(" "+H(e.name)+" ",1),a[10]||(a[10]=V("i",{class:"svgtofont-icon-ltd ml-4px text-[#A88E5F] !text-1.8rem"},null,-1))])])),_:2},1032,["command"])))),128))])),_:1})])),default:T((()=>[E(g,{class:"upload-btn",onClick:F(Ce)},{default:T((()=>a[7]||(a[7]=[V("span",{class:"upload-icon"},null,-1),S("上传/下载"),V("i",{class:"svgtofont-el-arrow-down el-icon--right"},null,-1)]))),_:1},8,["onClick"])])),_:1},8,["onCommand"]),E(b,{onCommand:F(x),"show-timeout":250},{dropdown:T((()=>[E(y,null,{default:T((()=>[E(_,{command:"file"},{default:T((()=>[E(w,{src:"/file_icon/file_text2.png",class:"mr-4px mt-4px w-[1.6rem] align-text-bottom"}),a[13]||(a[13]=S("新建空白文本"))])),_:1}),E(_,{command:"dir"},{default:T((()=>[E(w,{src:"/file_icon/folder_win10.png",class:"mr-4px mt-4px w-[1.6rem] align-text-bottom"}),a[14]||(a[14]=S("新建文件夹 "))])),_:1}),E(_,{command:"link"},{default:T((()=>[E(w,{class:"mr-4px w-[1.6rem] align-text-bottom",src:"/file/url-down.svg"}),a[15]||(a[15]=S("新建软链接文件"))])),_:1})])),_:1})])),default:T((()=>[E(g,null,{default:T((()=>[E(w,{class:"mr-4px w-[1.4rem] align-bottom",src:"/file_icon/folder_create.png"}),a[11]||(a[11]=S(" 新建")),a[12]||(a[12]=V("i",{class:"svgtofont-el-arrow-down el-icon--right"},null,-1))])),_:1})])),_:1},8,["onCommand"]),E(g,{class:"search-btn",onClick:F(_e)},{default:T((()=>a[16]||(a[16]=[V("span",{class:"flex items-center"},[V("span",{class:"search-icon"}),S("文件内容搜索")],-1)]))),_:1},8,["onClick"]),E(b,{onCommand:F(k),"show-timeout":250},{dropdown:T((()=>[E(y,{class:"max-h-[23rem] overflow-auto"},{default:T((()=>[E(_,{command:"manger"},{default:T((()=>a[18]||(a[18]=[V("i",{class:"svgtofont-el-arrow-down svgtofont-el-setting text-[1.4rem]"},null,-1),V("span",null,"管理",-1)]))),_:1}),(L(!0),A(z,null,D(F(c),(e=>(L(),R(_,{key:e.path,command:e},{default:T((()=>[V("div",{class:"h-[2.7rem]",title:e.path},[E(w,{src:"".concat("file"===e.type?"/file_icon/file_text2.png":"/file_icon/folder_win10.png"),class:"mr-4px mt-4px w-[1.6rem] align-top"},null,8,["src"]),V("span",Ul,[S(H(e.name),1),V("span",Ml," ("+H(e.path)+")",1)])],8,Pl)])),_:2},1032,["command"])))),128))])),_:1})])),default:T((()=>[E(g,{onClick:F(we)},{default:T((()=>a[17]||(a[17]=[V("span",{class:"file-menu-icon favorites-file-icon mr-4px"},null,-1),S("收藏夹"),V("i",{class:"svgtofont-el-arrow-down el-icon--right"},null,-1)]))),_:1},8,["onClick"])])),_:1},8,["onCommand"]),E(g,{class:"search-btn",onClick:F(ye)},{default:T((()=>a[19]||(a[19]=[S(" 分享列表 ")]))),_:1},8,["onClick"]),E(g,{class:"terminal-btn !ml-0",onClick:F(be)},{default:T((()=>a[20]||(a[20]=[V("div",{class:"flex items-center"},[V("span",{class:"fileTerminal-icon"}),S("终端")],-1)]))),_:1},8,["onClick"]),E(g,{class:"record-btn",onClick:F(Ie)},{default:T((()=>a[21]||(a[21]=[V("div",{class:"flex items-center"},[V("span",{class:"record-icon"}),S(" 文件操作记录 ")],-1)]))),_:1},8,["onClick"]),a[28]||(a[28]=V("div",{id:"extension-cosfs"},null,-1)),V("div",ql,[1===(null==(s=F(o))?void 0:s.length)?(L(),R(g,{key:0,class:"search-btn !mr-0",onClick:a[0]||(a[0]=e=>F(Le)("/"))},{default:T((()=>{var e;return[V("span",Hl,[a[22]||(a[22]=V("i",{class:"svgtofont-file-hdd text-1.8rem mr-4px svg-icon"},null,-1)),S(" "+H("/(根目录)".concat((null==(e=F(o)[0])?void 0:e.size[2])||"")),1)])]})),_:1})):(L(),R(b,{key:1,onCommand:F(Le)},{dropdown:T((()=>[E(y,null,{default:T((()=>[(L(!0),A(z,null,D(F(o),((e,l)=>(L(),R(_,{command:e.path,key:l},{default:T((()=>[V("div",{class:"inline-block w-full flex items-center",title:"".concat(e.path,"（").concat(e.size[2]||"","）")},[V("div",Wl,H(l?e.path:"/(根目录)")+"("+H(e.size[2]||"")+")",1)],8,Kl)])),_:2},1032,["command"])))),128))])),_:1})])),default:T((()=>[E(g,{onClick:a[1]||(a[1]=e=>F(Le)("/"))},{default:T((()=>{var e;return[a[23]||(a[23]=V("i",{class:"svgtofont-file-hdd text-1.8rem mr-4px svg-icon"},null,-1)),S(" "+H("/(根目录)".concat((null==(e=F(o)[0])?void 0:e.size[2])||"")),1),a[24]||(a[24]=V("i",{class:"svgtofont-el-arrow-down el-icon--right"},null,-1))]})),_:1})])),_:1},8,["onCommand"]))]),E(I),E(j,{class:"item",effect:"dark",placement:"bottom-end"},{content:T((()=>a[25]||(a[25]=[V("div",{class:"w-[26rem] whitespace-pre-wrap"},"企业级防篡改保护核心数据和系统避免受恶意复改和破坏，确保数据的安全性和完整性",-1)]))),default:T((()=>[E(g,{class:"temper-btn",onClick:a[2]||(a[2]=e=>F(h)("tamper_core",75))},{default:T((()=>a[26]||(a[26]=[V("span",{class:"flex items-center"},[V("span",{class:"temper-icon mr-4px"}),S("企业级防篡改")],-1)]))),_:1})])),_:1}),E(j,{class:"item",effect:"dark",content:"文件同步能在两台服务器之间保持文件一致性",placement:"bottom-end"},{default:T((()=>[E(g,{class:"rsync-btn",onClick:a[3]||(a[3]=e=>F(h)("rsync",70))},{default:T((()=>a[27]||(a[27]=[V("span",{class:"flex items-center"},[V("span",{class:"rsync-icon mr-4px"}),S("文件同步")],-1)]))),_:1})])),_:1})]),V("div",$l,[F(r).length?N("",!0):O((L(),A("div",Gl,a[29]||(a[29]=[V("i",{class:"svgtofont-el-info-filled text-[#f0ad4e] mt-2px mr-4px text-[1.3rem]"},null,-1),S(" 文件操作可使用右键 ")]),512)),[[P,F(C)]]),O(V("div",Jl,[E(B,null,{default:T((()=>[(L(!0),A(z,null,D(F(d),(e=>O((L(),R(g,{key:e.type,class:"!mr-[-1px]",onClick:l=>e.handler()},{default:T((()=>[V("span",{class:U([e.icon,"file-menu-icon mr-4px"])},null,2),S(H(e.label),1)])),_:2},1032,["onClick"])),[[P,F(t)>(e.hide||0)]]))),128)),F(t)<1620?(L(),R(b,{key:0,onCommand:F(m)},{dropdown:T((()=>[E(y,{class:"batch-btn-list"},{default:T((()=>[E(_,{command:"copy"},{default:T((()=>a[31]||(a[31]=[V("span",{class:"file-menu-icon copy-file-icon"},null,-1),S("复制")]))),_:1}),E(_,{command:"cut"},{default:T((()=>a[32]||(a[32]=[V("span",{class:"file-menu-icon cut-file-icon"},null,-1),S("剪切")]))),_:1}),E(_,{command:"compress"},{default:T((()=>a[33]||(a[33]=[V("span",{class:"file-menu-icon compress-file-icon"},null,-1),S("压缩")]))),_:1}),E(_,{command:"auth"},{default:T((()=>a[34]||(a[34]=[V("span",{class:"file-menu-icon authority-file-icon"},null,-1),S("权限")]))),_:1}),E(_,{command:"del"},{default:T((()=>a[35]||(a[35]=[V("span",{class:"file-menu-icon delete-file-icon"},null,-1),S("删除")]))),_:1})])),_:1})])),default:T((()=>[E(g,{class:"!m-0 border",style:{"border-left":"1px solid #dcdfe6"}},{default:T((()=>a[30]||(a[30]=[S("更多"),V("i",{class:"svgtofont-el-arrow-down el-icon--right"},null,-1)]))),_:1})])),_:1},8,["onCommand"])):N("",!0)])),_:1})],512),[[P,F(r).length>1]]),O(E(I,null,null,512),[[P,F(r).length>1]]),O(E(g,{onClick:F(Re)},{default:T((()=>a[36]||(a[36]=[S("粘贴")]))),_:1},8,["onClick"]),[[P,F(n).files.length>0]]),E(g,{onClick:a[4]||(a[4]=e=>F(Te)())},{default:T((()=>a[37]||(a[37]=[V("i",{class:"svgtofont-el-delete mr-4px"},null,-1),S("回收站 ")]))),_:1}),V("div",Ql,[V("span",{onClick:a[5]||(a[5]=(...e)=>F(p)&&F(p)(...e)),class:U(["list"===F(i).type?"active":"","menu-type menu-left list-view"])},a[38]||(a[38]=[V("span",{class:"list-icon"},null,-1)]),2),V("span",{onClick:a[6]||(a[6]=(...e)=>F(f)&&F(f)(...e)),class:U(["list"!==F(i).type?"active":"","menu-type icon-view"])},a[39]||(a[39]=[V("span",{class:"grid-icon"},null,-1)]),2)])])])}}}),[["__scopeId","data-v-d8599599"]]),Xl=""+new URL("../images/file/share-list-active.svg",import.meta.url).href,Zl=""+new URL("../images/file/favorite-list-star.svg",import.meta.url).href,ea=""+new URL("../icons/icon-top.svg",import.meta.url).href,la=""+new URL("../images/file_icon/icon-new-file-lock.svg",import.meta.url).href,aa=""+new URL("../images/file_icon/icon-new-file-unlock.svg",import.meta.url).href,sa=Y("FILES-LOG-ANALYZE-STORE",(()=>{const e=y({});let l=null;const a=X({limit:200,auto:!1,time:5,search:"",data:"",last:"",file:""}),n=y(!1),i=async()=>{const e={file:a.file,limit:a.limit,search:a.search};a.last=t((new Date).getTime());try{n.value=!0;const l=await xl({data:JSON.stringify(e)});a.data=l.data.data}catch(l){}finally{n.value=!1}};return{compData:e,loading:n,quickForm:a,limitOptions:[{label:"200/行",value:200},{label:"500/行",value:500},{label:"1000/行",value:1e3},{label:"2000/行",value:2e3},{label:"5000/行",value:5e3}],changeLimit:e=>{a.limit=e},getLog:i,setAutoRefresh:()=>{a.auto?l=setInterval((()=>{i()}),1e3*a.time):clearInterval(l)},checkTime:e=>{const l=Number(e.replace(/[^\d]/g,""));a.time=l<2?2:l,s.warn("最小刷新时间为2秒")},init:()=>{Object.assign(a,{limit:200,auto:!1,time:5,search:"",data:"",last:"",file:Fe(e.value.fileItem.fileName)}),i()},$reset:()=>{n.value=!1,l&&clearInterval(l)}}})),ta=Y("FILES-VIRUS-SCAN-STORE",(()=>{const e=y(""),l=y("loading"),a=y(!1),t=y("");let u=null;const d=y(),m=X({scanInfo:"",scanCount:0,scanningCount:0,scanningText:"进行中",shellCount:0}),f=y([]),p=y(""),v=(e,a)=>{if("token error"===a.data)return s.error("token error"),void(null==u||u.close());const t=JSON.parse(a.data);m.scanInfo=t.info,t.is_count&&(m.scanCount=t.count,m.scanningCount=t.is_count),t.path&&f.value.push({path:t.path,name:t.path.substring(t.path.lastIndexOf("/")+1)}),t.result&&(l.value="success",m.scanningText="已完成",m.scanInfo="扫描已完成",m.scanningCount=m.scanCount,m.shellCount=t.result.length,t.result.length>0&&(l.value="danger"),s.success("扫描完成！"),null==u||u.close())},h=async e=>{await n({title:"提示",content:"确定删除文件【"+e.path+"】，删除后文件将移至回收站，是否继续操作？",icon:"warning",type:"calc"}),i({loading:"正在删除文件，请稍后...",request:gl({path:e.path,type:"File"}),message:!0,success:l=>{l.status&&(f.value=f.value.filter((l=>l.path!==e.path)))}})},k=async e=>{await n({title:"提示",content:"是否确定提交误报反馈",type:"calc"}),i({loading:"正在提交误报反馈，请稍后...",request:c({filename:e.path}),message:!0,success:l=>{l.stauts&&(f.value=f.value.filter((l=>l.path!==e.path)))}})},x=async e=>{p.value=e.path,await i({loading:"正在获取文件内容，请稍后...",request:Cl({path:e.path}),success:e=>{t.value=e.data.data,a.value=!0}})},g=Z([bl(),{label:"文件名",prop:"name",width:160},{label:"文件路径",prop:"path"},Il([{onClick:k,title:"误报"},{onClick:x,title:"打开文件",width:70},{onClick:h,title:"删除"}])]),C=[{label:"删除",value:"delete",event:async(e,l,a,s,t)=>{const n=async e=>await gl({path:e.path,type:"File"});await e({title:"批量删除",content:"批量删除选中文件，删除后文件将移至回收站，是否继续操作？",column:[{prop:"path",label:"文件路径"},yl()],onConfirm:async()=>(await l(n),f.value=f.value.filter((e=>!a.value.some((l=>l.path===e.path)))),!1)})}}];return{path:e,scanLoad:l,scanningData:m,tableColumns:g,tableData:f,scanTableRef:d,batchOptions:C,editorPopup:a,editorValue:t,saveFile:async()=>{await i({loading:"正在保存文件，请稍后...",request:o({path:p.value,data:t.value,encoding:"utf-8"}),message:!0})},cancelScan:async()=>{await n({title:"提示",content:"查杀正在进行中，确定要停止扫描吗？"}),m.scanningText="已取消",l.value="success",null==u||u.close()},scanData:async()=>{f.value=[],u=r({route:"/ws_panel",onMessage:v}),l.value="loading",m.scanningText="进行中",m.scanInfo="正在扫描中...",null==u||u.send({"x-http-token":window.vite_public_request_token}),null==u||u.send({def_name:"ws_webshell_check",mod_name:"files",path:e.value,ws_callback:"1"})},$reset:()=>{f.value=[],l.value="loading",a.value=!1,t.value="",p.value="",Object.assign(m,{scanInfo:"",scanCount:0,scanningCount:0,scanningText:"进行中",shellCount:0})}}})),na=Y("FILES-RIGHT-MENU-STORE",(()=>{const e=he(),{authType:l,copyFilesData:a,createListType:t}=w(e),{refreshFilesList:i,watchCreateListType:o}=e,c=Ae(),{contextRow:r,isBatch:p}=w(c),v=y(null),h=y(!0),k=()=>{r.value&&(r.value.isFav=!r.value.isFav,g())},x=()=>{v.value.visible=!1},g=()=>{r.value&&(h.value=!0)};return{authType:l,refreshFilesList:i,contextmenu:v,showOpen:h,contextRow:r,isBatch:p,copyFilesData:a,watchCurrentRow:g,openCloud:async(e,a="down")=>{if("ltd"!==l.value)cl({sourceId:73});else try{const{data:l}=await m({sName:e});if(!l.setup)return void rl({name:l.name,type:"i",pluginInfo:l});const s={type:a,zName:l.title,pname:e};s.rowData=r.value,De(s)}catch(s){f(s)}},openEvent:(e,a,t)=>{a.includes("压缩预览")?"ltd"!==l.value?cl({disablePro:!0,sourceId:171}):t?Be(e):s.error("暂不支持该类型文件预览"):Ve(e)},handleReName:e=>{e.oldName=e.fileName,e.isReName=!0},show:e=>{v.value.visible=!0,j((()=>{ke(e,v.value.contextmenuRef)}))},hide:x,handleClickOutside:e=>{v.value&&v.value.visible&&x()},create:e=>{t.value=e,o(e)},toping:async()=>{var e;Array.isArray(r.value)||((null==(e=r.value)?void 0:e.isTop)&&await n({title:"取消置顶文件",content:"您是否要取消置顶【".concat(r.value.fileName,"】？")}),r.value&&je(r.value,r.value.isTop?"unset":"set"))},share:async()=>{var e;r.value&&!Array.isArray(r.value)&&((null==(e=r.value)?void 0:e.isShare)?ze(r.value):Ne(r.value))},collection:async()=>{r.value&&!Array.isArray(r.value)&&(r.value.isFav?(await n({title:"收藏文件",icon:"warning",content:"您是否要取消【".concat(r.value.fileName,"】的收藏？")}),Se(r.value,k)):Ee(r.value,k))},openLogAnalyze:e=>{const{compData:l}=w(sa());l.value={fileItem:e},u({title:"【".concat(e.fileName,"】日志写入分析"),area:85,component:()=>d((()=>import("./index186.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)})},openTrojanScan:e=>{const l=ta(),{path:a}=w(l);a.value=e.path,u({title:"木马扫描【".concat(e.fileName,"】"),area:85,component:()=>d((()=>import("./index187.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)})}}})),ia={key:0},oa={key:3,class:"right-menu-divider"},ca={key:1},ra={key:2},ua=e(_({__name:"index",setup(e,{expose:l}){const a=na(),{contextRow:s,isBatch:t,authType:n,contextmenu:i,showOpen:o,copyFilesData:c}=w(a),{refreshFilesList:r,openEvent:u,handleReName:d,show:m,hide:f,handleClickOutside:p,openCloud:v,create:h,toping:k,share:x,collection:g,openLogAnalyze:C,openTrojanScan:_,watchCurrentRow:y}=a,z=K((()=>{var e;let l="";if("dir"===(null==(e=s.value)?void 0:e.type))l="打开";else{if(!s.value)return l;switch(Oe(s.value.ext)){case"images":l="预览";break;case"video":l="播放";break;case"compress":q?l=s.value.ext.toUpperCase()+"压缩预览":o.value=!1;break;default:l="编辑"}}return l})),j=K((()=>{let e=!1;return s.value?("images"!==Oe(s.value.ext)&&"video"!==Oe(s.value.ext)||(e=!0),e):e})),B=K((()=>{var e;let l="";return l=0==(null==(e=s.value)?void 0:e.isShare)?"外链分享":"取消分享",l})),D=K((()=>{var e;let l="";return l=(null==(e=s.value)?void 0:e.isTop)?"取消置顶":"置顶",l})),U=K((()=>{var e;let l="";return l=(null==(e=s.value)?void 0:e.isFav)?"取消收藏":"添加到收藏夹",l})),M=K((()=>{var e;let l=!0;return"dir"!==(null==(e=s.value)?void 0:e.type)&&(l=!1),s.value&&null!=Pe.get(s.value.path)&&(l=!1),l})),q=K((()=>{var e;return["zip","rar","gz","tar","war","tgz","bz2","7z","tar.gz"].includes((null==(e=s.value)?void 0:e.ext)||"")}));return K((()=>{var e;let l=!1;return(null==(e=s.value)?void 0:e.isSearch)&&(l=!0),l})),b((()=>{y(),document.addEventListener("click",p)})),I((()=>{document.removeEventListener("click",p)})),l({show:m,hide:f}),(e,l)=>{const a=ee;return L(),R(F(fl),{ref_key:"contextmenu",ref:i},{default:T((()=>{var e,i;return[Array.isArray(F(s))||!(null==(e=F(s))?void 0:e.fileName)||F(t)?N("",!0):(L(),A("div",ia,[F(o)||F(q)?(L(),R(F(ml),{key:0,onClick:l[0]||(l[0]=e=>F(u)(F(s),F(z),F(q)))},{default:T((()=>[l[36]||(l[36]=V("span",{class:"file-menu-icon open-file-icon"},null,-1)),S(" "+H(F(z)),1)])),_:1})):N("",!0),"dir"===F(s).type?(L(),R(F(ml),{key:1,onClick:l[1]||(l[1]=e=>F(xe)(F(s)))},{default:T((()=>l[37]||(l[37]=[V("span",{class:"file-menu-icon open-tab-icon"},null,-1),S("在新窗口打开")]))),_:1})):N("",!0),"sql"===F(s).ext?(L(),R(F(ml),{key:2,onClick:l[2]||(l[2]=e=>F(Ue)(F(s)))},{default:T((()=>l[38]||(l[38]=[V("span",{class:"file-menu-icon"},null,-1),S("导入数据库")]))),_:1})):N("",!0),F(o)||F(q)?(L(),A("div",oa)):N("",!0),"dir"!==F(s).type?(L(),R(F(ml),{key:4,onClick:l[3]||(l[3]=e=>F(Me)(F(s)))},{default:T((()=>l[39]||(l[39]=[V("span",{class:"file-menu-icon download-file-icon"},null,-1),S("下载")]))),_:1})):N("",!0),"dir"!==F(s).type&&"bt_split"!==F(s).ext&&"bt_split_json"!==F(s).ext?(L(),R(F(ml),{key:5,onClick:l[4]||(l[4]=e=>F(qe)(F(s)))},{default:T((()=>l[40]||(l[40]=[V("span",{class:"file-menu-icon"},null,-1),S("文件拆分")]))),_:1})):N("",!0),"dir"!==F(s).type&&"bt_split_json"===F(s).ext?(L(),R(F(ml),{key:6,onClick:l[5]||(l[5]=e=>F(He)(F(s)))},{default:T((()=>l[41]||(l[41]=[V("span",{class:"file-menu-icon"},null,-1),S("文件合并")]))),_:1})):N("",!0),E(F(ml),{onClick:F(g)},{default:T((()=>[l[42]||(l[42]=V("span",{class:"file-menu-icon favorites-file-icon"},null,-1)),S(H(F(U)),1)])),_:1},8,["onClick"]),E(F(ml),{onClick:F(x)},{default:T((()=>[l[43]||(l[43]=V("span",{class:"file-menu-icon not-elf-icon svgtofont-el-share text-[#31dc48] font-bold !text-[1.6rem]"},null,-1)),S(H(F(B)),1)])),_:1},8,["onClick"]),"ltd"===F(n)?(L(),R(F(ml),{key:7,onClick:F(k)},{default:T((()=>[l[44]||(l[44]=V("span",{class:"file-menu-icon toping-icon"},null,-1)),S(H(F(D)),1)])),_:1},8,["onClick"])):N("",!0),F(M)?(L(),R(F(ml),{key:8,onClick:l[6]||(l[6]=e=>F(Ke)(F(s)))},{default:T((()=>l[45]||(l[45]=[V("span",{class:"file-menu-icon rsync-icon"},null,-1),S("文件同步")]))),_:1})):N("",!0),"log"===F(s).ext?(L(),R(F(ml),{key:9,onClick:l[7]||(l[7]=e=>F(C)(F(s)))},{default:T((()=>l[46]||(l[46]=[V("span",{class:"file-menu-icon"},null,-1),S("监听日志")]))),_:1})):N("",!0),l[65]||(l[65]=V("div",{class:"right-menu-divider"},null,-1)),"dir"===F(s).type?(L(),R(F(ml),{key:10,onClick:l[8]||(l[8]=e=>F(_)(F(s)))},{default:T((()=>l[47]||(l[47]=[V("i",{class:"file-menu-icon svgtofont-icon-bug-scan not-elf-icon svgtofont-el-orange text-[#c77f22] !text-[1.6rem]"},null,-1),S("木马扫描")]))),_:1})):N("",!0),"dir"!==F(s).type?(L(),R(F(pl),{key:11},{title:T((()=>l[48]||(l[48]=[V("span",null,[V("span",{class:"file-menu-icon upload-file-icon"}),V("span",{class:"align-text-top"},"上传到云存储")],-1)]))),default:T((()=>[E(F(ml),{onClick:l[9]||(l[9]=e=>F(v)("bos","upload"))},{default:T((()=>l[49]||(l[49]=[V("div",{class:"flex items-center w-full"},[V("div",{class:"flex items-center"},[V("span",{class:"file-menu-icon baidu-icon"}),S("百度云存储")]),V("i",{class:"svgtofont-icon-ltd ml-4px text-[#A88E5F] !text-1.8rem"})],-1)]))),_:1}),E(F(ml),{onClick:l[10]||(l[10]=e=>F(v)("alioss","upload"))},{default:T((()=>l[50]||(l[50]=[V("div",{class:"flex items-center w-full"},[V("div",{class:"flex items-center"},[V("span",{class:"file-menu-icon ali-icon"}),S("阿里云存储")]),V("i",{class:"svgtofont-icon-ltd ml-4px text-[#A88E5F] !text-1.8rem"})],-1)]))),_:1}),E(F(ml),{onClick:l[11]||(l[11]=e=>F(v)("txcos","upload"))},{default:T((()=>l[51]||(l[51]=[V("div",{class:"flex items-center w-full"},[V("div",{class:"flex items-center"},[V("span",{class:"file-menu-icon txcos-icon"}),S("腾讯云存储")]),V("i",{class:"svgtofont-icon-ltd ml-4px text-[#A88E5F] !text-1.8rem"})],-1)]))),_:1}),E(F(ml),{onClick:l[12]||(l[12]=e=>F(v)("obs","upload"))},{default:T((()=>l[52]||(l[52]=[V("div",{class:"flex items-center w-full"},[V("div",{class:"flex items-center"},[V("span",{class:"file-menu-icon huawei-icon"}),S("华为云存储")]),V("i",{class:"svgtofont-icon-ltd ml-4px text-[#A88E5F] !text-1.8rem"})],-1)]))),_:1})])),_:1})):N("",!0),E(F(ml),{onClick:l[13]||(l[13]=e=>F(We)(F(s),"auth"))},{default:T((()=>l[53]||(l[53]=[V("span",{class:"file-menu-icon authority-icon"},null,-1),S("权限")]))),_:1}),l[66]||(l[66]=V("div",{class:"right-menu-divider"},null,-1)),E(F(ml),{onClick:l[14]||(l[14]=e=>F($e)(F(s),"copy"))},{default:T((()=>l[54]||(l[54]=[V("span",{class:"file-menu-icon copy-file-icon"},null,-1),S("复制")]))),_:1}),E(F(ml),{onClick:l[15]||(l[15]=e=>F($e)(F(s),"cut"))},{default:T((()=>l[55]||(l[55]=[V("span",{class:"file-menu-icon cut-file-icon"},null,-1),S("剪切")]))),_:1}),O(E(F(ml),{onClick:F(Re)},{default:T((()=>l[56]||(l[56]=[V("span",{class:"file-menu-icon paste-icon"},null,-1),S("粘贴")]))),_:1},8,["onClick"]),[[P,0!==F(c).files.length]]),E(F(ml),{onClick:l[16]||(l[16]=e=>F(d)(F(s)))},{default:T((()=>l[57]||(l[57]=[V("span",{class:"file-menu-icon rename-file-icon"},null,-1),S("重命名")]))),_:1}),E(F(ml),{onClick:l[17]||(l[17]=e=>F(Ge)(F(s)))},{default:T((()=>l[58]||(l[58]=[V("span",{class:"file-menu-icon delete-file-icon"},null,-1),S("删除")]))),_:1}),l[67]||(l[67]=V("div",{class:"right-menu-divider"},null,-1)),E(F(ml),{onClick:l[18]||(l[18]=e=>F(Je)(F(s)))},{default:T((()=>l[59]||(l[59]=[V("span",{class:"file-menu-icon compress-file-icon"},null,-1),S("创建压缩")]))),_:1}),"dir"!==F(s).type&&F(j)?(L(),R(F(ml),{key:12,onClick:l[19]||(l[19]=e=>F(Qe)(F(s)))},{default:T((()=>l[60]||(l[60]=[V("span",{class:"file-menu-icon format-file-icon"},null,-1),S("格式转换")]))),_:1})):N("",!0),F(q)?(L(),R(F(ml),{key:13,onClick:l[20]||(l[20]=e=>F(Ye)(F(s)))},{default:T((()=>l[61]||(l[61]=[V("span",{class:"file-menu-icon decompress-file-icon"},null,-1),S("解压")]))),_:1})):N("",!0),"ltd"===F(n)?(L(),R(F(ml),{key:14,onClick:l[21]||(l[21]=e=>F(Xe)(F(s)))},{default:T((()=>l[62]||(l[62]=[V("span",{class:"file-menu-icon create-copy-icon"},null,-1),S("创建副本")]))),_:1})):N("",!0),l[68]||(l[68]=V("div",{class:"right-menu-divider"},null,-1)),"ltd"===F(n)&&"dir"!==F(s).type?(L(),R(F(ml),{key:15,onClick:l[22]||(l[22]=e=>F(Ze)(F(s)))},{default:T((()=>l[63]||(l[63]=[V("span",{class:"file-menu-icon email-icon"},null,-1),S("发送到邮箱")]))),_:1})):N("",!0),E(F(ml),{onClick:l[23]||(l[23]=e=>F(We)(F(s)))},{default:T((()=>l[64]||(l[64]=[V("span",{class:"file-menu-icon status-icon"},null,-1),S("属性")]))),_:1})])),F(t)&&Array.isArray(F(s))?(L(),A("div",ca,[E(F(ml),{onClick:l[24]||(l[24]=e=>F(el)(F(s),"copy"))},{default:T((()=>l[69]||(l[69]=[V("span",{class:"file-menu-icon copy-file-icon"},null,-1),S("复制")]))),_:1}),E(F(ml),{onClick:l[25]||(l[25]=e=>F(el)(F(s),"cut"))},{default:T((()=>l[70]||(l[70]=[V("span",{class:"file-menu-icon cut-file-icon"},null,-1),S("剪切")]))),_:1}),E(F(ml),{onClick:l[26]||(l[26]=e=>F(ll)(F(s)))},{default:T((()=>l[71]||(l[71]=[V("span",{class:"file-menu-icon authority-icon"},null,-1),S("权限")]))),_:1}),E(F(ml),{onClick:l[27]||(l[27]=e=>F(Je)(F(s)))},{default:T((()=>l[72]||(l[72]=[V("span",{class:"file-menu-icon compress-file-icon"},null,-1),S("创建压缩")]))),_:1}),E(F(ml),{onClick:l[28]||(l[28]=e=>F(Qe)(F(s)))},{default:T((()=>l[73]||(l[73]=[V("span",{class:"file-menu-icon format-file-icon"},null,-1),S("格式转换")]))),_:1}),E(F(ml),{onClick:l[29]||(l[29]=e=>F(al)(F(s)))},{default:T((()=>l[74]||(l[74]=[V("span",{class:"file-menu-icon delete-file-icon"},null,-1),S("删除")]))),_:1})])):N("",!0),(null==(i=F(s))?void 0:i.fileName)||F(t)?N("",!0):(L(),A("div",ra,[E(F(ml),{onClick:F(r)},{default:T((()=>l[75]||(l[75]=[V("span",{class:"file-menu-icon refresh-icon"},null,-1),S("刷新")]))),_:1},8,["onClick"]),l[88]||(l[88]=V("div",{class:"right-menu-divider"},null,-1)),E(F(ml),{onClick:F(sl)},{default:T((()=>l[76]||(l[76]=[V("span",{class:"file-menu-icon upload-icon"},null,-1),S("上传")]))),_:1},8,["onClick"]),E(F(pl),null,{title:T((()=>l[77]||(l[77]=[V("span",null,[V("span",{class:"file-menu-icon folder_create"}),V("span",{class:"align-text-top"},"新建文件夹/文件 ")],-1)]))),default:T((()=>[E(F(ml),{onClick:l[30]||(l[30]=e=>F(h)("dir"))},{default:T((()=>l[78]||(l[78]=[V("span",{class:"file-menu-icon dirF-icon"},null,-1),S("新建文件夹")]))),_:1}),E(F(ml),{onClick:l[31]||(l[31]=e=>F(h)("file"))},{default:T((()=>l[79]||(l[79]=[V("span",{class:"file-menu-icon file-icon"},null,-1),S("新建文件")]))),_:1}),E(F(ml),{onClick:F(tl)},{default:T((()=>l[80]||(l[80]=[V("span",{class:"file-menu-icon dirLink-icon"},null,-1),S("软链接文件")]))),_:1},8,["onClick"])])),_:1}),E(F(pl),null,{title:T((()=>l[81]||(l[81]=[V("span",null,[V("span",{class:"file-menu-icon download-file-icon"}),V("span",{class:"align-text-top"},"从云存储下载")],-1)]))),default:T((()=>[E(F(ml),{onClick:l[32]||(l[32]=e=>F(v)("bos"))},{default:T((()=>l[82]||(l[82]=[V("div",{class:"flex items-center w-full"},[V("div",{class:"flex items-center"},[V("span",{class:"file-menu-icon baidu-icon"}),S("百度云存储")]),V("i",{class:"svgtofont-icon-ltd ml-4px text-[#A88E5F] !text-1.8rem"})],-1)]))),_:1}),E(F(ml),{onClick:l[33]||(l[33]=e=>F(v)("alioss"))},{default:T((()=>l[83]||(l[83]=[V("div",{class:"flex items-center w-full"},[V("div",{class:"flex items-center"},[V("span",{class:"file-menu-icon ali-icon"}),S("阿里云存储")]),V("i",{class:"svgtofont-icon-ltd ml-4px text-[#A88E5F] !text-1.8rem"})],-1)]))),_:1}),E(F(ml),{onClick:l[34]||(l[34]=e=>F(v)("txcos"))},{default:T((()=>l[84]||(l[84]=[V("div",{class:"flex items-center w-full"},[V("div",{class:"flex items-center"},[V("span",{class:"file-menu-icon txcos-icon"}),S("腾讯云存储")]),V("i",{class:"svgtofont-icon-ltd ml-4px text-[#A88E5F] !text-1.8rem"})],-1)]))),_:1}),E(F(ml),{onClick:l[35]||(l[35]=e=>F(v)("obs"))},{default:T((()=>l[85]||(l[85]=[V("div",{class:"flex items-center w-full"},[V("div",{class:"flex items-center"},[V("span",{class:"file-menu-icon huawei-icon"}),S("华为云存储")]),V("i",{class:"svgtofont-icon-ltd ml-4px text-[#A88E5F] !text-1.8rem"})],-1)]))),_:1})])),_:1}),E(F(ml),{onClick:F(be)},{default:T((()=>l[86]||(l[86]=[V("span",{class:"file-menu-icon terminals-icon"},null,-1),S("终端")]))),_:1},8,["onClick"]),0!==F(c).files.length?(L(),R(a,{key:0,class:"!mt-0 !mb-0"})):N("",!0),O(E(F(ml),{onClick:F(Re)},{default:T((()=>l[87]||(l[87]=[V("span",{class:"file-menu-icon paste-icon"},null,-1),S("粘贴")]))),_:1},8,["onClick"]),[[P,0!==F(c).files.length]])]))]})),_:1},512)}}}),[["__scopeId","data-v-12c80b99"]]),da={key:0,class:"svgtofont-el-loading animate-spin mr-2px"},ma={class:"text-primary cursor-pointer"},fa={key:0},pa={key:1},va={class:"p-12px w-[28rem]"},ha={key:0,class:"bg-[#f4f4f5] text-[#909399] !mb-12px !py-[.5rem] !pr-0 !pl-[1rem] rounded-[.4rem]"},ka={class:"text-[1.2rem]"},xa={class:"item"},ga={class:"truncate w-[16rem] inline-block ml-1rem"},Ca={class:"item"},_a={class:"con"},wa={class:"item"},ya={class:"con"},ba={class:"item"},Ia={class:"con"},La={class:"item"},Ra={class:"con"},Ta={class:"item"},Fa={class:"con"},Aa={class:"item"},Ea={class:"con"},Sa={class:"item"},Na={class:"con"},za=e(_({__name:"index",props:{row:{},status:{type:Boolean,default:!1}},setup(e){const l=h(),s=e,n=Ae(),{authType:o,diskAnalysis:c}=w(n),{buyPlugin:r}=n,u=y(!1),d=y("defalut"),m=le(s,"row"),f=le(s,"status"),k=y("计算");B((()=>f.value),(e=>{var l;u.value=e,d.value="",a(e)&&!e&&(null==(l=m.value)?void 0:l.diskInfo)&&(k.value=v(m.value.diskInfo.total_asize))}),{immediate:!0});return(e,a)=>{const s=M,n=ee,f=ae;return L(),A("a",{class:"flex items-center",title:"点击计算大小",onClick:a[2]||(a[2]=e=>(async e=>{c.value.reqEnd&&c.value.isSetup&&"ltd"===o.value?await i({loading:u,request:_l({path_list:JSON.stringify([e.path]),is_refresh:!1}),success:a=>{a.status?(m.value.diskInfo=Object.values(a.data)[0]?Object.values(a.data)[0]:e,k.value=v(m.value.diskInfo.total_asize)):l.error(a.msg)}}):await i({loading:u,request:wl({path:e.path}),success:l=>{m.value.diskInfo={...e,size:l.data},k.value=l.data}}),d.value=""})(F(m)))},[F(u)?(L(),A("span",da)):N("",!0),V("div",ma,[F(p)(F(m).diskInfo)?(L(),A("span",fa,"计算")):(L(),A("span",pa,[E(f,{placement:"right","popper-class":"myPopover",trigger:"hover",width:"304"},{reference:T((()=>[V("span",null,H(F(k)),1)])),default:T((()=>[V("div",va,[F(c).isSetup?N("",!0):(L(),A("div",ha,[V("span",ka,H(F(c).isBuy||"ltd"===F(o)?"安装":"购买")+"硬盘分析工具畅享更多信息， ",1),V("a",{class:"text-[1.2rem] btlink",onClick:a[0]||(a[0]=(...e)=>F(r)&&F(r)(...e))},"立即"+H(F(c).isBuy||"ltd"===F(o)?"安装":"购买"),1)])),a[14]||(a[14]=V("div",{class:"item"},[V("div",{class:"title !text-[#333]"},"目录详情"),V("div",{class:"con"})],-1)),V("div",xa,[a[3]||(a[3]=V("div",{class:"title"},"目录路径:",-1)),E(s,{effect:"light",content:F(m).diskInfo.full_path||F(m).diskInfo.path,placement:"top"},{default:T((()=>[V("div",ga,H(F(m).diskInfo.full_path||F(m).diskInfo.path),1)])),_:1},8,["content"])]),V("div",Ca,[a[4]||(a[4]=V("div",{class:"title"},"目录大小:",-1)),V("div",_a,H(F(m).diskInfo.size||F(k)),1)]),V("div",wa,[a[5]||(a[5]=V("span",{class:"ltd-icon"},null,-1)),a[6]||(a[6]=V("div",{class:"title"},"文件夹数量:",-1)),V("div",ya,H(F(m).diskInfo.full_path?F(m).diskInfo.dir_num:"----------"),1)]),V("div",ba,[a[7]||(a[7]=V("span",{class:"ltd-icon"},null,-1)),a[8]||(a[8]=V("div",{class:"title"},"文件数量:",-1)),V("div",Ia,H(F(m).diskInfo.full_path?F(m).diskInfo.file_num:"----------"),1)]),V("div",La,[a[9]||(a[9]=V("div",{class:"title"},"权限:",-1)),V("div",Ra,[S(H(F(m).diskInfo.accept||F(m).diskInfo.rootLevel)+" ",1),V("a",{class:"ml-[2rem] bt-link",onClick:a[1]||(a[1]=e=>F(We)(F(m),"auth"))},"修改权限")])]),V("div",Ta,[a[10]||(a[10]=V("div",{class:"title"},"所属用户:",-1)),V("div",Fa,H(F(m).diskInfo.user),1)]),E(n,{class:"!my-[1rem]"}),V("div",Aa,[a[11]||(a[11]=V("div",{class:"title"},"最后修改时间:",-1)),V("div",Ea,H(F(m).time),1)]),V("div",Sa,[a[12]||(a[12]=V("span",{class:"ltd-icon"},null,-1)),a[13]||(a[13]=V("div",{class:"title"},"权限变更时间:",-1)),V("div",Na,H(F(m).diskInfo.full_path?F(t)(F(m).diskInfo.ctime):"-----------"),1)])])])),_:1})]))])])}}}),[["__scopeId","data-v-106bd099"]]),ja={class:"table-head flex h-[3.6rem]"},Ba={class:"flex flex-shrink-0 w-[30px] px-[10px]"},Va={class:"custom-td"},Da=["onClick"],Oa={key:0,class:"flex flex-col ml-8px justify-center"},Pa=["onClick","onTouchend","onContextmenu"],Ua={class:"custom-td w-[30px]"},Ma=["onClick"],qa=["id"],Ha={class:"custom-td w-[420px] flex justify-between items-center"},Ka={class:"flex items-center w-[50%] flex-1"},Wa=["src"],$a=["onClick","title"],Ga={class:"flex items-center cursor-pointer item-option"},Ja=["onClick"],Qa=["onClick"],Ya=["onClick"],Xa=["onClick"],Za={class:"custom-td w-[120px]"},es=["onClick"],ls={class:"custom-td w-[100px]"},as={class:"custom-td w-[100px]"},ss={class:"custom-td w-[160px]"},ts=["onMouseenter","onMouseleave"],ns=["title"],is={class:"custom-td flex-1 justify-end min-w-[30.4rem] file-action"},os={class:"hidden"},cs=["onClick"],rs=["onClick"],us=["onClick"],ds=["onClick"],ms=["onClick"],fs=["onClick"],ps=["onClick"],vs=["onClick"],hs=["onClick"],ks=["onClick"],xs=["onClick"],gs=e(_({__name:"index",setup(e,{expose:l}){const a=Ae(),{mainHeight:s,headData:t,dataList:n,selectList:i,fileBatchNum:o,checkedAll:c,imgPathItem:r,imgIndex:u,showViewer:d,imgList:m,scrollHeight:f,scrollHeightBottom:p,isShowShadow:h,context:k,contextRow:x,isBatch:g,scrollRef:C,imageList:_,navBtnHeight:I,fileTabActiveData:j}=w(a),{bindMouseDown:M,clickName:W,handleBlurCheck:$,handleEvent:G,handleRightClick:J,handleCheckFile:Q,handleCheckAll:Y,handleFileLock:X,handleEnPsView:Z,handleLvPsView:ee,handleSetPs:le,handleReName:ae,openImgView:fe,opearationIconClick:pe,onReNameKeyup:ve,sortTable:he,closeImgPreView:ke,init:xe,$reset:ge}=a;se();const Ce=K((()=>i.value.length>0&&i.value.length!=n.value.length)),_e=K((()=>new Set(i.value))),we=y(Math.random());return B((()=>n.value),(()=>{we.value=Math.random(),M()})),b((()=>{xe()})),te((()=>{ge()})),l({handleCheckAll:Y,selectList:i}),(e,l)=>{const a=ue,o=de,r=me,x=ne("input-select"),g=ne("blur-check"),_=ne("bt-loading");return L(),A("div",{class:"h-full files-list",onContextmenu:l[4]||(l[4]=q((e=>F(J)(e,null)),["prevent"]))},[V("div",ja,[V("div",Ba,[V("div",Va,[E(a,{indeterminate:F(Ce),modelValue:F(c),"onUpdate:modelValue":l[0]||(l[0]=e=>ie(c)?c.value=e:null),onChange:F(Y)},null,8,["indeterminate","modelValue","onChange"])])]),(L(!0),A(z,null,D(F(t),((e,l)=>(L(),A("div",{class:U("files-head-item  ".concat(e.class||"")),style:ce(("operation"!=e.type?"width:".concat(e.width,"rem;"):"")+e.style),key:l,onClick:l=>F(he)(e)},[V("span",null,H(e.label),1),e.sortable?(L(),A("div",Oa,[V("i",{class:U("svgtofont-el-caret-top text-[1.6rem] leading-[.6rem] hover:text-[#20a53a90] text-[#CBCBCB] ".concat("asc"===e.sort?"!text-primary":""))},null,2),V("i",{class:U("svgtofont-el-caret-bottom text-[1.6rem] leading-[.8rem] hover:text-[#20a53a90] text-[#CBCBCB] ".concat("desc"===e.sort?"!text-primary":""))},null,2)])):N("",!0)],14,Da)))),128))]),O((L(),R(F(kl),{key:F(we),class:U(["custom-tbody scrollTable relative",{"shadow-top":F(f)===F(p)&&F(h),"shadow-bottom":0===F(f)&&F(h),"shadow-bottom-top":F(f)>0&&F(f)<F(p)&&F(h)}]),style:ce("height:".concat(F(s)-(F(I)||64)-230,"px")),items:F(n),"item-size":36,buffer:500,"key-field":"vid",ref_key:"scrollRef",ref:C},{default:T((({item:e})=>[V("div",{class:U("custom-tr flex ".concat(F(_e).has(e.path)?"row-checked":"")),onClick:l=>F(G)(l,e),onTouchend:l=>F(G)(l,e),onContextmenu:q((l=>F(J)(l,e)),["prevent"])},[V("div",Ua,[V("div",{class:"custom-checkbox",onClick:l=>F(Q)(e)},[V("i",{id:"vid-"+e.vid,class:"checkbox--icon"},null,8,qa)],8,Ma)]),V("div",Ha,[V("div",Ka,[e.isSmallImage?(L(),A("img",{key:0,src:e.isSmallImage,class:"w-[2.4rem] h-[2.4rem]"},null,8,Wa)):(L(),A("i",{key:1,class:U("icon-bg ".concat(["zip","rar","7z","gz","tar.gz","tgz","war"].includes(e.ext)?"compress":e.ext,"-icon"))},null,2)),V("span",{class:U("cursor-pointer hover:text-primary truncate max-w-[84%] ml-[4px] fileName ".concat(e.isReName?"hidden":"")),onClick:l=>F(W)(e),title:e.fileName+e.isLink},H(e.fileName+e.isLink),11,$a),e.isReName?O((L(),R(o,{key:2,modelValue:e.fileName,"onUpdate:modelValue":l=>e.fileName=l,class:"ml-8px",onKeydown:l[1]||(l[1]=oe(q((()=>{}),["stop"]),["native"])),onKeyup:oe((l=>F(ve)(e)),["enter","native"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])),[[x],[g,F($)]]):N("",!0)]),O(V("div",Ga,[e.isSync?(L(),A("span",{key:0,class:"btlink",onClick:l[2]||(l[2]=e=>F(ul)({name:"rsync"}))},H("modules"===e.isSync?"文件同步接收端":"文件同步发送端"),1)):N("",!0),"bt_split_json"===e.ext?(L(),A("span",{key:1,class:"btlink ml-8px",onClick:l=>F(He)(e)},"[文件合并]",8,Ja)):N("",!0),e.isShare?(L(),A("img",{key:2,src:Xl,class:"foot-btn field-share-icon",onClick:l=>F(pe)(e,"share")},null,8,Qa)):N("",!0),e.isFav?(L(),A("img",{key:3,src:Zl,class:"foot-btn field-favorite-icon",onClick:l=>F(pe)(e,"favorite")},null,8,Ya)):N("",!0),e.isTop?(L(),A("img",{key:4,src:ea,class:"foot-btn field-top-icon",onClick:l=>F(pe)(e,"top")},null,8,Xa)):N("",!0)],512),[[P,!e.isReName]])]),V("div",Za,[V("div",{class:"tamper-icon-item cursor-pointer",onClick:l=>F(X)(e)},[e.isLock?(L(),A(z,{key:0},[l[5]||(l[5]=V("span",{class:"btlink"},"受保护",-1)),l[6]||(l[6]=V("img",{src:la,class:"tamper-file-lock"},null,-1))],64)):(L(),A(z,{key:1},[l[7]||(l[7]=V("span",null,"未保护",-1)),l[8]||(l[8]=V("img",{src:aa,class:"tamper-file-unlock"},null,-1))],64))],8,es)]),V("div",ls,H(e.rootLevel+"/"+e.user),1),V("div",as,["dir"===e.type?(L(),R(za,{key:0,row:e,status:e.isDirComputed,class:"size-link"},null,8,["row","status"])):(L(),A(z,{key:1},[S(H(F(v)(e.size)),1)],64))]),V("div",ss,[V("span",null,H(e.time),1)]),V("div",{class:"custom-td min-w-[20rem]",onMouseenter:l=>F(Z)(e),onMouseleave:l=>F(ee)(l,e)},[V("span",{class:U({hidden:e.isPsEdit,"ml-[.1rem] w-[18rem] truncate inline-block":!0}),title:e.ps},H(e.ps),11,ns),e.isPsEdit?(L(),R(o,{key:0,modelValue:e.ps,"onUpdate:modelValue":l=>e.ps=l,onBlur:l=>F(le)(e),onKeyup:l[3]||(l[3]=oe((e=>e.target.blur()),["enter"]))},null,8,["modelValue","onUpdate:modelValue","onBlur"])):N("",!0)],40,ts),V("div",is,[V("div",os,["text"===e.icon&&e.isFile?(L(),A("a",{key:0,class:"btlink",onClick:l=>F(Ve)(e)},"编辑",8,cs)):N("",!0),"images"===e.icon&&e.isFile?(L(),A("a",{key:1,class:"btlink",onClick:l=>F(fe)(e)},"预览",8,rs)):N("",!0),"video"===e.icon&&e.isFile?(L(),A("a",{key:2,class:"btlink",onClick:l=>F(nl)(e)},"播放",8,us)):N("",!0),V("a",{class:"btlink",onClick:l=>F($e)(e,"copy")},"复制",8,ds),V("a",{class:"btlink",onClick:l=>F($e)(e,"cut")},"剪切",8,ms),V("a",{class:"btlink",onClick:l=>F(ae)(e)},"重命名",8,fs),V("a",{class:"btlink",onClick:l=>F(We)(e,"auth")},"权限",8,ps),V("a",{class:"btlink",onClick:l=>F(Je)(e)},"压缩",8,vs),"compress"===e.icon?(L(),A("a",{key:3,class:"btlink",onClick:l=>F(Ye)(e)},"解压",8,hs)):N("",!0),V("a",{class:"btlink",onClick:l=>F(Ge)(e,(()=>{i.value=[]}))},"删除",8,ks),V("a",{class:"btlink",onClick:l=>F(J)(l,e)},l[9]||(l[9]=[S(" 更多 "),V("span",{class:"svgtofont-el-arrow-down !text-[12px] align-bottom"},null,-1)]),8,xs)])])],42,Pa)])),_:1},8,["style","items","class"])),[[_,F(j).loading],[_,"正在加载文件列表，请稍后...","title"]]),0===F(n).length?(L(),A("div",{key:0,class:"flex justify-center items-center absolute left-[45%] top-0",style:ce("height:".concat(F(s)-(F(I)||64)-220-36,"px"))},[E(r,{description:"暂无数据"})],4)):N("",!0),E(ua,{ref_key:"context",ref:k},null,512),F(d)?(L(),R(F(re),{key:1,onClose:F(ke),initialIndex:F(u),"url-list":F(m)},null,8,["onClose","initialIndex","url-list"])):N("",!0)],32)}}}),[["__scopeId","data-v-85a64753"]]),Cs={class:"file-main-view"},_s={class:"flex px-12px pt-12px justify-between"},ws={class:"flex items-center"},ys={class:"mr-[1rem]"},bs={key:1,class:"svgtofont-el-loading animate-spin"},Is={key:2,class:"cursor-pointer",style:{color:"green"}},Ls={class:""},Rs=e(_({__name:"index",setup(e){const l=he(),{mainHeight:a,fileTabActiveData:s,dirLength:t,fileLength:n,navBtnHeight:i,listView:o,btnPopover:c,size:r,sizeShow:u,sizeLoad:d,dataList:m}=w(l),{refreshFilesList:f,unbindKeydown:p,sizeComputed:v,checkRoot:h,initMain:x}=l;return b((()=>{x()})),te((()=>{p()})),(e,l)=>{const p=k,x=ae,g=hl;return L(),A("div",Cs,[E(fe,{name:"fade",mode:"out-in"},{default:T((()=>[V("div",null,[V("div",{class:"relative",style:ce({height:"".concat(F(a)-(F(i)||64)-193,"px")})},[E(gs,{ref_key:"listView",ref:o,data:F(m)},null,8,["data"])],4)])])),_:1}),V("div",_s,[V("div",ws,[V("span",ys,"共"+H(F(t))+"个目录，"+H(F(n))+"个文件，文件大小",1),E(x,{trigger:"hover",placement:"top-start",width:"260","popper-class":F(c)?"popper-danger whitespace-pre-wrap !transition-none":"whitespace-pre-wrap",content:F(c)?"当前目录为系统根目录（/）,执行获取文件大小将占用大量磁盘IO,将导致服务器运行缓慢。":"安装《堡塔硬盘分析工具》可以一键扫描所有目录大小 "},{reference:T((()=>[V("div",{onClick:l[0]||(l[0]=(...e)=>F(v)&&F(v)(...e)),onMouseover:l[1]||(l[1]=(...e)=>F(h)&&F(h)(...e))},[F(u)||F(d)?N("",!0):(L(),R(p,{key:0},{default:T((()=>l[5]||(l[5]=[S("计算")]))),_:1})),F(d)?(L(),A("span",bs)):N("",!0),F(u)&&!F(d)?(L(),A("span",Is,H(F(r)),1)):N("",!0)],32)])),_:1},8,["popper-class","content"])]),V("div",Ls,[E(g,{page:F(s).param.p,"onUpdate:page":l[2]||(l[2]=e=>F(s).param.p=e),row:F(s).param.showRow,"onUpdate:row":l[3]||(l[3]=e=>F(s).param.showRow=e),rowList:[100,500,1e3,1500,2e3],total:F(s).total,onChange:l[4]||(l[4]=e=>F(f)())},null,8,["page","row","total"])])])])}}}),[["__scopeId","data-v-4e742a02"]]),Ts={class:"file-operation-area relative"},Fs={class:"nav"},As={class:"nav-path"},Es={class:"path-input"},Ss={class:"fold-dir-list"},Ns=["onClick"],zs=["onClick"],js={class:"path-name"},Bs=["onClick"],Vs={class:"fold-dir-list"},Ds=["onClick"],Os={class:"navSearch"},Ps={class:"absolute right-[5.4rem] top-0 flex items-center"},Us=e(_({__name:"index",setup(e){const l=he(),{mainHeight:a,mainWidth:s,navBtnHeight:t,disabledCutTab:n,dirPath:i,pathInputRef:o,pathInputMode:c,pathListGroup:r,more:u,searchVal:m,searchHistory:f,searchRef:p,isChildren:v}=w(l),{$reset:h,refreshFilesList:k,searchEvent:_,handleDragOff:I,refreshList:R,cutPathInputMode:S,cutDirPath:N,getCurrentFoldDirList:K,goBack:W,init:$}=l,G=y(),J=y(x("Path"));return B((()=>J.value),(e=>{j((()=>{e?ol(e):k()}))}),{immediate:!0}),B((()=>s.value),(e=>{j((()=>{var e;const l=document.querySelector(".nav-btn"),a=(null==l?void 0:l.offsetHeight)||0;t.value=a,null==(e=G.value)||e.watchWindowResize()}))})),B((()=>c.value),(()=>{c.value||j((()=>{var e;null==(e=o.value)||e.select()}))})),b((()=>{$(),j((()=>{d((()=>import("./index188.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)}))})),te(h),(e,l)=>{const s=M,t=me,d=g,h=C,x=ue,w=ve;return L(),A("div",{class:"file-manager min-w-[1150px]",style:ce("height:".concat(F(a)-32,"px"))},[V("div",Ts,[V("div",{class:"p-[16px] h-full w-full flex flex-col relative",onDragenter:l[11]||(l[11]=q((()=>{}),["prevent"])),onDragover:l[12]||(l[12]=q((e=>F(I)(e)),["prevent"]))},[E(jl,{ref_key:"filesTabs",ref:G},null,512),V("div",Fs,[V("div",As,[V("div",{class:"back rounded-l-[.2rem] relative",onClick:l[0]||(l[0]=(...e)=>F(W)&&F(W)(...e))},[V("i",{class:U(["svgtofont-el-back",{disabledBack:F(n)}])},null,2)]),V("div",Es,[O(V("input",{"onUpdate:modelValue":l[1]||(l[1]=e=>ie(i)?i.value=e:null),ref_key:"pathInputRef",ref:o,type:"text",class:"h-full w-full pl-8px",onBlur:l[2]||(l[2]=e=>F(S)(!0)),onKeydown:l[3]||(l[3]=q((()=>{}),["stop"])),onKeyup:l[4]||(l[4]=oe((e=>F(N)(F(i),!0)),["enter"]))},null,544),[[pe,F(i)],[P,!F(c)]]),O(V("div",{class:"path-list-group",onClick:l[6]||(l[6]=e=>F(S)(!1))},[O(V("div",{class:"svgtofont-el-arrow-left font-bold px-[.2rem] h-full leading-[2.9rem] cursor-pointer border-l border-r border-white relative hover:border-#e1e1e1 hover:bg-[#f5f7fa]",onClick:l[5]||(l[5]=q((e=>F(u).showUl=!0),["stop"]))},[O(V("ul",Ss,[(L(!0),A(z,null,D(F(u).list,((e,a)=>(L(),A("li",{class:"fold-dir-item",key:a},[E(s,{effect:"dark",content:e.path,placement:"right","show-after":500},{default:T((()=>[V("div",{class:"w-full flex items-center",onClick:q((l=>F(N)(e.path)),["stop"])},[l[13]||(l[13]=V("span",{class:"dir-icon flex-shrink-0 !h-[1.6rem]"},null,-1)),V("span",null,H(e.name),1)],8,Ns)])),_:2},1032,["content"])])))),128))],512),[[P,F(u).showUl]])],512),[[P,F(u).showMore]]),(L(!0),A(z,null,D(F(r),((e,a)=>O((L(),A("div",{key:a,class:"path-group-item",onClick:q((l=>F(N)(e.path)),["stop"])},[E(s,{effect:"dark",content:e.name,placement:"bottom","show-after":500},{default:T((()=>[V("span",js,H(e.name),1)])),_:2},1032,["content"]),V("div",{class:"svgtofont-el-arrow-right path-name-icon",onClick:q((l=>F(K)(e.path,a)),["stop"])},[O((L(),A("ul",Vs,[(L(!0),A(z,null,D(e.list,((e,a)=>(L(),A("li",{class:"fold-dir-item",key:a},[E(s,{effect:"dark",content:e.path,placement:"right","show-after":500},{default:T((()=>[V("div",{class:"w-full flex items-center",onClick:q((l=>F(N)(e.path)),["stop"])},[l[14]||(l[14]=V("span",{class:"dir-icon flex-shrink-0 !h-[1.6rem]"},null,-1)),V("span",null,H(e.name),1)],8,Ds)])),_:2},1032,["content"])])))),128)),O(E(t,{"image-size":60,description:"暂无数据"},null,512),[[P,!e.list.length]])])),[[P,e.showFold],[w,e.loading]])],8,Bs)],8,zs)),[[P,e.show]]))),128))],512),[[P,F(c)]])]),V("span",{class:"refresh rounded-r-[.2rem]",onClick:l[7]||(l[7]=(...e)=>F(R)&&F(R)(...e))},[V("i",{class:U({"svgtofont-el-refresh-right":!F(n),"svgtofont-el-loading cursor-not-allowed animate-spin":F(n)})},null,2)]),V("div",{class:"flex items-center ml-8px w-[10rem]",onClick:l[8]||(l[8]=e=>F(dl)({name:"文件管理",type:21,isCard:!0}))},l[15]||(l[15]=[V("i",{class:"svgtofont-desired text-[1.6rem]"},null,-1),V("span",{class:"bt-link"},"需求反馈",-1)]))]),V("div",Os,[E(h,{disabledPopover:!1,class:"!w-[30rem]",ref_key:"searchRef",ref:p,modelValue:F(m),"onUpdate:modelValue":l[9]||(l[9]=e=>ie(m)?m.value=e:null),onSearch:F(_),placeholder:"搜索文件/目录",clearable:!1},{default:T((()=>[E(d,{list:{historyList:F(f),recommendList:F(il)},name:"files",keys:"get_list",onUpdate:F(k),onSearch:F(_)},null,8,["list","onUpdate","onSearch"])])),_:1},8,["modelValue","onSearch"]),V("div",Ps,[E(x,{modelValue:F(v),"onUpdate:modelValue":l[10]||(l[10]=e=>ie(v)?v.value=e:null),class:""},{default:T((()=>l[16]||(l[16]=[V("span",{class:"text-[#999]"},"包含子目录",-1)]))),_:1},8,["modelValue"])])])]),E(Yl),E(Rs)],32)])],4)}}}),[["__scopeId","data-v-4e49b383"]]),Ms=Object.freeze(Object.defineProperty({__proto__:null,default:Us},Symbol.toStringTag,{value:"Module"}));export{sa as F,ta as a,Ms as i};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
