import{c as e,h as a,r as t,o as l,k as s,l as o,e as c,x as m,p as i,y as r,P as n,a7 as d,a4 as p}from"./base-lib.js?v=1734676359";import{b as u,j as f}from"./utils-lib.js?v=1734676359";import{g as y}from"./useStore10.js?v=1734676359";import{B as b}from"./ssl.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";const _={class:"p-2rem"},g=e({__name:"index",props:{compData:{default:()=>{}}},emits:["close"],setup(e,{expose:g,emit:h}){const j=e,x=h,{refs:{isRefreshCertificateList:D}}=y(),V=a({title:"",cycle:30}),v=t({cycle:[{required:!0,message:"请输入剩余天数",trigger:"blur"},{validator:(e,a,t)=>{/^[1-9]\d*$/.test(a)?t():t(new Error("请输入大于0的正整数"))},trigger:["blur","change"]}]});return l((()=>{(()=>{var e;if((null==(e=j.compData)?void 0:e.domainName)&&j.compData.domainName.length>0){const e=j.compData.domainName.slice(0,2).join("|"),a=j.compData.domainName.length>2?"|...":"";V.title="".concat(j.compData.title," (").concat(e).concat(a,")")}else V.title=j.compData.title})()})),g({onConfirm:async()=>{let e;try{e=u().load("正在配置证书自动续期，请稍候...");const a=await b({index:j.compData.index,cycle:V.cycle,name:V.title});u().request(a),a.status&&(D.value=!0,x("close"))}catch(a){}finally{e&&e.close()}}}),(e,a)=>{const t=n,l=d,u=f,y=p;return s(),o("div",_,[c(y,{rules:i(v),model:i(V),"label-width":"100px"},{default:m((()=>[c(l,{label:"证书"},{default:m((()=>[c(t,{class:"!w-[28rem]",modelValue:i(V).title,"onUpdate:modelValue":a[0]||(a[0]=e=>i(V).title=e),disabled:""},null,8,["modelValue"])])),_:1}),c(l,{label:"剩余天数",prop:"cycle"},{default:m((()=>[c(u,{modelValue:i(V).cycle,"onUpdate:modelValue":a[1]||(a[1]=e=>i(V).cycle=e),width:"14rem",textType:"天",min:"1",type:"number"},{append:m((()=>a[2]||(a[2]=[r(" 天 ")]))),_:1},8,["modelValue"])])),_:1})])),_:1},8,["rules","model"])])}}});export{g as default};
