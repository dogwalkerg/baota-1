import{c as e,o as s,k as l,l as a,q as t,e as i,x as n,p as r,y as p,v as c,F as o,z as d,J as u,I as m,aX as y,bq as f,ah as x,A as k,aN as g,aA as v,ag as _,f as b,ay as h}from"./base-lib.js?v=1734676359";import{d as I,c as j,e as w}from"./utils-lib.js?v=1734676359";import{_ as C}from"./index91.js?v=1734676359";import{I as M,x as U,y as L}from"./validator.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./column.js?v=1734676359";const S=""+new URL("../images/soft_ico/icon_plug.svg",import.meta.url).href,T={class:"install-plugin"},V={class:"header"},H={class:"header-left"},A={class:"header-title"},q={class:"text-[16px] font-bold flex items-center truncate h-[20px]"},D={class:"ml-[4px]"},z={class:"mt-[8px]"},P={class:"mr-[10px] text-[#888] text-[13px] flex items-center"},R={class:"header-right"},F={class:"illustrate"},J=["innerHTML"],N=["innerHTML"],X={class:"tips-list"},B={key:0,class:"!text-danger"},E={key:1,class:"!text-danger"},G={key:3},K=w(e({__name:"index",props:{compData:{default:()=>({type:"i",name:"",pluginInfo:void 0})}},emits:["close","refresh"],setup(e,{emit:w}){const K=M(),{init:O,cutPluginActiveInfo:Q,install:W,repair:Y,update:Z,pluginPictureSrc:$}=K,{pluginModuleInfo:ee,pluginActiveInfo:se,versionModel:le,pluginImgSrc:ae,pluginTitle:te,pluginLabel:ie,compData:ne}=U(),re=e;return s((async()=>{ne.value=re.compData,await O()})),(e,s)=>{const w=I,M=f,U=C,K=j,O=_,ne=x,re=k,pe=g,ce=b,oe=h,de=v;return l(),a("div",T,[t("div",V,[t("div",H,[i(w,{src:r(ae),class:"h-[35px] w-[40px] mr-[10px]",type:"img"},{error:n((()=>s[7]||(s[7]=[t("img",{src:S,class:"w-[4rem] h-[4rem]",alt:""},null,-1)]))),_:1},8,["src"]),t("div",A,[t("span",q,[p(c(r(te))+" ",1),t("span",D,c(r(ee).currentVersion||r(se).fullVersion),1),!r(ee).isSystem&&13!==r(ee).type&&r(ie).length>0?(l(),a("span",{key:0,class:o(r(ie)[2]+" border-[1px] p-[4px] font-500 text-[14px] ml-[5px]")},c(r(ie)[1]),3)):d("",!0)]),t("span",z,[t("span",P,[r(ee).isUpdate?(l(),u(M,{key:0,"is-dot":"",class:"item"},{default:n((()=>[p(" 最新版本："+c("".concat(r(se).fullVersion)),1)])),_:1})):d("",!0),r(ee).isSystem||!r(ee).isInstall&&!r(ee).isUpdate?d("",!0):(l(),a(m,{key:1},[r(ee).isInstall?d("",!0):(l(),u(U,{key:0})),t("span",null,"更新时间："+c(r(se).updateTime),1),i(U),i(K,{class:"font-normal",onClick:s[0]||(s[0]=e=>r(L)(r(ee)))},{default:n((()=>s[8]||(s[8]=[t("span",{class:"text-[13px]"},"更新日志",-1)]))),_:1})],64))])])])]),t("div",R,[r(le).version.length>1&&r(ee).isInstall?(l(),a(m,{key:0},[i(ne,{modelValue:r(le).value,"onUpdate:modelValue":s[1]||(s[1]=e=>r(le).value=e),class:"!w-[140px]",onChange:r(Q)},{default:n((()=>[(l(!0),a(m,null,y(r(le).version,(e=>(l(),u(O,{key:e.key,value:e.key,disabled:e.disabled,label:e.title},null,8,["value","disabled","label"])))),128))])),_:1},8,["modelValue","onChange"]),i(U,{class:"mx-[1rem]"})],64)):d("",!0),r(ee).isSystem&&r(ee).isInstall?(l(),a(m,{key:1},[r(ee).compile?(l(),u(pe,{key:0,placement:"top",enterable:!0},{content:n((()=>s[9]||(s[9]=[t("span",null,"安装时间较长，性能最大化，适合生产环境",-1)]))),default:n((()=>[i(re,{class:"mr-[4px]",onClick:s[2]||(s[2]=e=>r(W)(0))},{default:n((()=>s[10]||(s[10]=[p("编译安装")]))),_:1})])),_:1})):d("",!0),i(pe,{placement:"top",enterable:!1},{content:n((()=>s[11]||(s[11]=[t("span",null,"安装时间极快，版本与稳定性略低于编译安装，适合快速部署测试",-1)]))),default:n((()=>[i(re,{type:"primary",onClick:s[3]||(s[3]=e=>r(W)(1))},{default:n((()=>[p(c(r(ee).compile?"极速安装":"立即安装"),1)])),_:1})])),_:1})],64)):r(ee).isInstall?(l(),u(re,{key:2,type:"primary",onClick:s[4]||(s[4]=e=>r(W)())},{default:n((()=>s[12]||(s[12]=[p(" 立即安装 ")]))),_:1})):d("",!0),r(ee).isRepair?(l(),u(re,{key:3,type:"primary",onClick:s[5]||(s[5]=e=>r(Y)())},{default:n((()=>s[13]||(s[13]=[p(" 立即修复 ")]))),_:1})):d("",!0),r(ee).isUpdate?(l(),u(re,{key:4,type:"primary",onClick:s[6]||(s[6]=e=>r(Z)())},{default:n((()=>s[14]||(s[14]=[p(" 立即更新 ")]))),_:1})):d("",!0)])]),r(ee).introduction.length?(l(),u(de,{key:0,"tab-position":"left",class:"carousel"},{default:n((()=>[(l(!0),a(m,null,y(r(ee).introduction,((e,s)=>(l(),u(oe,{label:e[0],lazy:"",key:s},{default:n((()=>[i(ce,{src:r($)(s),class:"max-h-[100%] object-scale-down","preview-src-list":[r($)(s)]},null,8,["src","preview-src-list"])])),_:2},1032,["label"])))),128))])),_:1})):d("",!0),t("div",F,[r(ee).isUpdate?(l(),a(m,{key:1},[s[16]||(s[16]=t("div",{class:"title"},"更新日志：",-1)),t("div",{class:"content",innerHTML:r(se).updateMsg},null,8,N)],64)):(l(),a(m,{key:0},[s[15]||(s[15]=t("div",{class:"title"},"插件说明：",-1)),t("div",{class:"content",innerHTML:r(ee).ps},null,8,J)],64))]),t("ul",X,[s[19]||(s[19]=t("li",null,"如果已存在此插件，文件将被替换！",-1)),r(ee).isSystem?d("",!0):(l(),a("li",B,"请手动安装插件扩展和依赖环境，如果未安装，将无法正常使用该插件")),r(ee).isMysqlUpdate?(l(),a("li",E,"更新数据库有风险,建议在更新前,先备份您的数据库！")):d("",!0),r(ee).isUpdate?(l(),a(m,{key:2},[s[17]||(s[17]=t("li",{class:"!text-danger"},"更新过程可能会导致服务中断,请须知",-1)),s[18]||(s[18]=t("li",{class:"!text-danger"},"建议您在服务器负载闲时进行软件更新",-1))],64)):(l(),a("li",G,"安装过程可能需要几分钟时间，请耐心等候!"))])])}}}),[["__scopeId","data-v-fbc41c8b"]]);export{K as default};
