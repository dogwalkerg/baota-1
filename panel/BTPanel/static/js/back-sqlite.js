import{_ as a}from"./index90.js?v=1734676359";import{R as t,t as s,G as e,k as i}from"./utils-lib.js?v=1734676359";import{c as o,r,az as l,o as n,B as p,k as m,l as d,e as c,x as f,y as u,C as h,p as y,A as g}from"./base-lib.js?v=1734676359";import{backupSqlite as b,delSqliteBackup as j,getSqliteBackup as w}from"./database.js?v=1734676359";import{u as _}from"./column.js?v=1734676359";import{g as k}from"./useMethod3.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./index91.js?v=1734676359";import"./validator.js?v=1734676359";const x={class:"p-[20px] h-full"},q=o({__name:"back-sqlite",props:{compData:{default:()=>({})}},setup(o){const{refreshTableList:q}=k(),C=o,O=r(!1),v=r([]),D=async()=>{try{await e({loading:"正在备份数据库，请稍后...",message:!0,request:b({data:JSON.stringify({path:C.compData.path})})}),N(),q()}catch(a){}},J=[{label:"名称",prop:"name",showOverflowTooltip:!0},{label:"时间",width:160,render:a=>l("span",t(a.mtime))},{label:"大小",render:a=>s(a.size)},_([{onClick:a=>{window.open("/download?filename="+a.filepath)},title:"下载"},{onClick:async a=>{try{await e({loading:"正在删除数据库备份文件...",message:!0,request:j({data:JSON.stringify({file:a.filepath})})}),N(),q()}catch(t){}},title:"删除"}])],N=async()=>{await e({loading:O,request:w({data:JSON.stringify({path:C.compData.path})}),data:[Array,v]})};return n((()=>{N()})),(t,s)=>{const e=g,o=i,r=a,l=p("bt-loading");return m(),d("div",x,[c(r,null,{"header-left":f((()=>[c(e,{type:"primary",onClick:D},{default:f((()=>s[0]||(s[0]=[u("备份")]))),_:1})])),content:f((()=>[h(c(o,{ref:"routeBackup",data:y(v),"max-height":400,column:J},null,8,["data"]),[[l,y(O)],[l,"正在加载中，请稍后...","title"]])])),_:1})])}}});export{q as default};
