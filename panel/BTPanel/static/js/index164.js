import{l as a,H as t,G as e,k as s,o as l}from"./utils-lib.js?v=1734676359";import{_ as o}from"./index90.js?v=1734676359";import{c as r,r as i,o as n,k as p,l as d,e as m,x as c,y as u,p as _,q as b,v,z as f,I as y,aX as h,A as g}from"./base-lib.js?v=1734676359";import{getMysqlCloudServer as j,getModulesCloudServer as w,removeServer as x,removeModuleServer as k}from"./database.js?v=1734676359";import{g as q,w as A}from"./useMethod3.js?v=1734676359";import{u as C}from"./column.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./validator.js?v=1734676359";import"./index91.js?v=1734676359";const E={class:"p-[20px]"},H={class:"ml-20px mt-12px leading-8 text-[1.2rem] list-disc"},O={key:0},S={key:1},D=r({__name:"index",setup(r){const{refs:{tabActive:D,isHaveServer:I},refreshTableList:J}=q(),L=i([]),N=[{content:"支持阿里云、腾讯云等云厂商的云数据库"},{content:"注意1：请确保本服务器有访问数据库的权限"},{content:"注意2：请确保填写的管理员帐号具备足够的权限"}],T=e=>{a({title:"".concat(e?"编辑":"添加","远程数据库"),area:[42],compData:{row:e,refreshEvent:()=>z()},showFooter:!0,component:()=>t((()=>import("./add-cloud-server.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)})},z=async()=>{const a=await e({loading:"正在获取数据中，请稍后...",request:"mysql"===D.value?j():w({data:JSON.stringify({type:D.value})},D.value),data:[Array,a=>a.filter((a=>0!==a.id))]});return L.value=a||[],I.value=a.length,a},F=[{prop:"db_host",label:"服务器地址",width:120},{prop:"db_port",label:"数据库端口"},{prop:"db_type",label:"数据库类型"},{prop:"db_user",label:"管理员名称"},{prop:"db_password",label:"管理员密码",width:150},{label:"备注",prop:"ps"},C([{onClick:a=>T(a),title:"编辑"},{onClick:a=>(async a=>{await l({title:"删除【".concat(a.db_host,"】远程数据库"),content:"该操作仅删除管理关系以及面板中的数据库记录，不会删除远程数据库中的数据,是否继续？",icon:"warning-filled"}),await e({loading:"正在删除中，请稍后...",request:"mysql"===D.value?x({id:a.id}):k({data:JSON.stringify({id:a.id})},D.value),message:!0}),z(),J()})(a),title:"删除"}])];return n((()=>{z()})),(a,t)=>{var e,l;const r=g,i=s,n=o;return p(),d("div",E,[m(n,null,{"header-left":c((()=>[m(r,{type:"primary",onClick:t[0]||(t[0]=a=>T())},{default:c((()=>t[1]||(t[1]=[u("添加远程数据库")]))),_:1})])),content:c((()=>[m(i,{column:_(F),data:_(L),"max-height":300},null,8,["column","data"])])),_:1}),b("ul",H,[(null==(e=_(A))?void 0:e.length)&&_(A)[0]?(p(),d("li",O,v(_(A)[0]),1)):f("",!0),(p(),d(y,null,h(N,((a,t)=>b("li",{key:t},v(a.content),1))),64)),(null==(l=_(A))?void 0:l.length)&&_(A)[1]?(p(),d("li",S,v(_(A)[1]),1)):f("",!0)])])}}});export{D as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
