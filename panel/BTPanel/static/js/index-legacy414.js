!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e=function(){return n};var r,n={},a=Object.prototype,o=a.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",s=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function p(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{p({},"")}catch(r){p=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var a=e&&e.prototype instanceof x?e:x,o=Object.create(a.prototype),c=new O(n||[]);return i(o,"_invoke",{value:U(t,r,c)}),o}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}n.wrap=f;var y="suspendedStart",m="suspendedYield",d="executing",v="completed",g={};function x(){}function _(){}function w(){}var b={};p(b,u,(function(){return this}));var k=Object.getPrototypeOf,L=k&&k(k(S([])));L&&L!==a&&o.call(L,u)&&(b=L);var E=w.prototype=x.prototype=Object.create(b);function j(t){["next","throw","return"].forEach((function(e){p(t,e,(function(t){return this._invoke(e,t)}))}))}function P(e,r){function n(a,i,c,u){var s=h(e[a],e,i);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"==t(p)&&o.call(p,"__await")?r.resolve(p.__await).then((function(t){n("next",t,c,u)}),(function(t){n("throw",t,c,u)})):r.resolve(p).then((function(t){l.value=t,c(l)}),(function(t){return n("throw",t,c,u)}))}u(s.arg)}var a;i(this,"_invoke",{value:function(t,e){function o(){return new r((function(r,a){n(t,e,r,a)}))}return a=a?a.then(o,o):o()}})}function U(t,e,n){var a=y;return function(o,i){if(a===d)throw Error("Generator is already running");if(a===v){if("throw"===o)throw i;return{value:r,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var u=q(c,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===y)throw a=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=d;var s=h(t,e,n);if("normal"===s.type){if(a=n.done?v:m,s.arg===g)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a=v,n.method="throw",n.arg=s.arg)}}}function q(t,e){var n=e.method,a=t.iterator[n];if(a===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=r,q(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var o=h(a,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,g;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,g):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,g)}function N(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(N,this),this.reset(!0)}function S(e){if(e||""===e){var n=e[u];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function t(){for(;++a<e.length;)if(o.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=r,t.done=!0,t};return i.next=i}}throw new TypeError(t(e)+" is not iterable")}return _.prototype=w,i(E,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:_,configurable:!0}),_.displayName=p(w,l,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,p(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},n.awrap=function(t){return{__await:t}},j(P.prototype),p(P.prototype,s,(function(){return this})),n.AsyncIterator=P,n.async=function(t,e,r,a,o){void 0===o&&(o=Promise);var i=new P(f(t,e,r,a),o);return n.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},j(E),p(E,l,"Generator"),p(E,u,(function(){return this})),p(E,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},n.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(T),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,a){return c.type="throw",c.arg=t,e.next=n,a&&(e.method="next",e.arg=r),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),s=o.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;T(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:S(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),g}},n}function r(t,e,r,n,a,o,i){try{var c=t[o](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,a)}function n(t){return function(){var e=this,n=arguments;return new Promise((function(a,o){var i=t.apply(e,n);function c(t){r(i,a,o,c,u,"next",t)}function u(t){r(i,a,o,c,u,"throw",t)}c(void 0)}))}}System.register(["./utils-lib-legacy.js?v=1734676359","./index-legacy90.js?v=1734676359","./base-lib-legacy.js?v=1734676359","./column-legacy.js?v=1734676359","./site-legacy.js?v=1734676359","./validator-legacy.js?v=1734676359","./useStore-legacy7.js?v=1734676359"],(function(t,r){"use strict";var a,o,i,c,u,s,l,p,f,h,y,m,d,v,g,x,_,w,b,k,L,E,j,P,U,q,N,T,O,S,z,I,R,A,C,$,D,G,B,F,X,W;return{setters:[function(t){a=t.G,o=t.l,i=t.H,c=t.o,u=t.ah,s=t.bR,l=t.b,p=t.al,f=t.bX,h=t.an,y=t.O},function(t){m=t._},function(t){d=t.r,v=t.e,g=t.y,x=t.h,_=t.I,w=t.aN,b=t.c,k=t.k,L=t.l,E=t.x,j=t.p},function(t){P=t.u,U=t.a,q=t.c,N=t.g},function(t){T=t.getProxyUrlData,O=t.editProxyUrlDataRemark,S=t.delProxyUrlData,z=t.addProxyUrlData,I=t.editProxyUrlInfo,R=t.setProxyUrlCustom,A=t.addProxyUrlReplace,C=t.proxyUrlCache,$=t.proxyUrlCompress,D=t.proxyUrlAddLimit,G=t.delProxyUrlReplace,B=t.proxyUrlBatchDelLimit,F=t.proxyUrlDelLimit},function(t){X=t.f},function(t){W=t.u}],execute:function(){var H,M=l(),Y=W().siteInfo,Z=d({}),J=d(!1),K=[{content:"支持添加多个不同目录的代理"},{content:"如添加后访问异常请尝试清理浏览器缓存"}],Q=function(){var t=n(e().mark((function t(){var r;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a({request:T({site_name:Y.value.name}),data:{data:Array}});case 3:if(r=t.sent,Array.isArray(r.data)){t.next=6;break}return t.abrupt("return",{data:[],total:0});case 6:return t.abrupt("return",{data:r.data,total:r.data.length});case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",{data:[],total:0});case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}(),V=function(){o({isAsync:!0,title:"添加URL代理",area:60,btn:"确认",component:function(){return i((function(){return r.import("./add-url-proxy-legacy2.js?v=1734676359")}),void 0,r.meta.url)}})},tt=function(){var t=n(e().mark((function t(r,n){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({loading:"正在修改URL代理备注，请稍后...",request:O({site_name:Y.value.name,proxy_path:r.proxy_path,remark:n}),message:!0});case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),et=function(t){Z.value=t,o({isAsync:!0,title:"URL代理设置【".concat(t.proxy_path,"】"),area:[76,60],component:function(){return i((function(){return r.import("./setting-legacy2.js?v=1734676359")}),void 0,r.meta.url)},compData:{row:t}})},rt=function(){var t=n(e().mark((function t(r){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("/"!==r.proxy_path){t.next=3;break}return M.error("根目录不能删除"),t.abrupt("return");case 3:return t.next=5,c({title:"删除反向代理【".concat(r.proxy_path,"】"),width:"35rem",icon:"warning-filled",content:"您真的要删除反向代理【".concat(r.proxy_path,"】吗？")});case 5:return t.next=7,a({loading:"正在删除，请稍后...",request:S({site_name:Y.value.name,proxy_path:r.proxy_path}),message:!0});case 7:t.sent.status&&(J.value=!0);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),nt=(t("e",[{content:"目标：可以填写你需要代理的站点，目标如果选URL地址则必须为可正常访问的URL，如果选UNIX则必须是套接字文件"},{content:"http地址示例：http://127.0.0.1:15700"},{content:"unix地址示例：/tmp/panel.sock"},{content:function(){return v("span",null,[g("发送域名：将域名添加到请求头传递到后端服务器，默认为目标URL域名，若设置不当可能导致代理无法正常访问，例如："),v("br",null,null),g("http://192.168.100.20:19888，则发送域名保持$http_host即可"),v("br",null,null),g("http://www.bt.cn，则发送域名应当改为www.bt.cn"),v("br",null,null),g("上面例子仅为常见情况，请以实际为准")])}}]),t("t",[{label:"URL地址",value:"http"},{label:"UNIX地址",value:"unix"}]),t("u",x({targetType:"http",sitename:"",cachetime:1,proxysite:"http://",todomain:"$http_host",path:"",ps:"",websocket:!1}))),at=(t("p",d(!1)),t("f",d(!1)),t("d",d(!1))),ot=t("b",d()),it=(t("c",x({proxyname:[{required:!0,message:"请输入代理名称",trigger:"blur"},{validator:function(t,e,r){e.length<3?r(new Error("代理名称必须大于3个字符串")):e.match(/^[a-zA-Z0-9_.-]+$/g)?r():r(new Error("代理名称不能包含特殊字符"))}}],proxysite:[{required:!0,message:"请输入目标地址",trigger:"blur"},{validator:function(t,e,r){if(e)if("unix"!==nt.targetType){var n=e.replace(/^http[s]?:\/\//,"");n=n.replace(/(:|\?|\/|\\)(.*)$/,""),/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/.test(n)?nt.todomain="$http_host":nt.todomain=n,r()}else r();else r(new Error("http"===nt.targetType?"目标地址不能为空":"请选择sock文件"))}},{}],todomain:[{required:!0,message:"请输入发送域名",trigger:["blur","change"]}],path:[{required:!0,message:"请输入根目录",trigger:"blur"}]})),t("s",n(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:nt.proxysite="http"===nt.targetType?"http://":"";case 1:case"end":return t.stop()}}),t)})))),t("h",(function(t){if("unix"!==nt.targetType){var e=t.replace(/^http[s]?:\/\//,"");e=e.replace(/(:|\?|\/|\\)(.*)$/,""),nt.todomain=e}else nt.todomain="$http_host"})),t("a",(function(){X({type:"file",path:nt.proxysite,change:function(t){nt.proxysite=t}})})),t("o",n(e().mark((function t(){var r,n,o,i,c,u,s;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=nt.path,n=nt.proxysite,o=nt.todomain,i=nt.targetType,c=nt.ps,u={site_name:Y.value.name,proxy_path:r,proxy_pass:n,proxy_host:o,proxy_type:i,remark:c},t.next=4,ot.value.validate();case 4:return t.next=6,a({loading:at,request:z(u),message:!0});case 6:return(s=t.sent).status&&(J.value=!0),t.abrupt("return",s.status);case 9:case"end":return t.stop()}}),t)})))),t("g",d("proxy"))),ct=t("m",d({proxy_type:"",proxy_path:"",proxy_pass:"",proxy_host:"$http_host",ip_limit:{},basic_auth:{},proxy_cache:{},gzip:{},sub_filter:{},websocket:{},proxy_log:{},custom_config:[],proxy_conf:"",remark:"",template_proxy_conf:""})),ut=t("i",n(e().mark((function t(){var r;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,T({site_name:Y.value.name,proxy_path:Z.value.proxy_path});case 3:if((r=t.sent).status){t.next=7;break}return M.error(r.msg),t.abrupt("return");case 7:ct.value=r.data.data,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),u(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))),st=t("E",d(!1)),lt=t("D",x({targetType:"http",sitename:"",proxysite:"",todomain:"$http_host",path:"",ps:"",websocket:!1,proxy_connect_timeout:30,proxy_send_timeout:30,proxy_read_timeout:30})),pt=(t("G",x({proxysite:[{required:!0,message:"请输入目标url",trigger:"blur",validator:function(t,e,r){e?r():r(new Error("目标URL不能为空"))}}],todomain:[{required:!0,message:"请输入发送域名",trigger:["blur","change"]}],proxy_connect_timeout:[{required:!0,message:"请输入连接超时时间",trigger:["blur","change"],validator:function(t,e,r){e?isNaN(Number(e))?r(new Error("请输入数字")):r():r(new Error("连接超时时间不能为空"))}}],proxy_send_timeout:[{required:!0,message:"请输入后端请求超时时间",trigger:["blur","change"],validator:function(t,e,r){e?isNaN(Number(e))?r(new Error("请输入数字")):r():r(new Error("后端请求超时时间不能为空"))}}],proxy_read_timeout:[{required:!0,message:"请输入代理响应超时时间",trigger:["blur","change"],validator:function(t,e,r){e?isNaN(Number(e))?r(new Error("请输入数字")):r():r(new Error("代理响应超时时间不能为空"))}}]})),t("C",(function(t){var e=t.proxy_type,r=t.proxy_pass,n=t.proxy_host,a=t.proxy_path,o=t.remark,i=t.global_websocket,c=t.websocket,u=t.timeout;lt.targetType=e,lt.proxysite=r,lt.todomain=n,lt.path=a,lt.ps=o,st.value=i,lt.websocket=null==c?void 0:c.websocket_status,lt.proxy_connect_timeout=null==u?void 0:u.proxy_connect_timeout,lt.proxy_send_timeout=null==u?void 0:u.proxy_send_timeout,lt.proxy_read_timeout=null==u?void 0:u.proxy_read_timeout})),t("F",n(e().mark((function t(){var r,n,o,i,c,u,s,l,p,f,h;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=lt.path,n=lt.proxysite,o=lt.todomain,i=lt.targetType,c=lt.ps,u=lt.websocket,s=lt.proxy_connect_timeout,l=lt.proxy_send_timeout,p=lt.proxy_read_timeout,f={site_name:Y.value.name,proxy_path:r,proxy_pass:n,proxy_host:o,proxy_type:i,remark:c,websocket:u?1:0,proxy_connect_timeout:s,proxy_send_timeout:l,proxy_read_timeout:p},t.next=4,ot.value.validate();case 4:return t.next=6,a({loading:at,request:I(f),message:!0});case 6:return h=t.sent,t.abrupt("return",h.status);case 8:case"end":return t.stop()}}),t)})))),t("J",'一行一条配置，请以;结尾，例如：\nproxy_set_header Cookie "cookie_name=cookie_value";\nallow 192.168.1.0/24;\naccess_log /www/wwwlogs/xxx.log;'),t("I",x({config:""}))),ft=(t("L",[{content:"注意：一行一条配置，请以;结尾"},{content:function(){return v(_,null,[g("案例："),v("br",null,null),g("重定向请求：return 301 /new-page;"),v("br",null,null),g("重写URL：rewrite ^/blog/(.*)$ /$1 break;"),v("br",null,null),g("文件上传限制：client_max_body_size 10M;"),v("br",null,null),g("处理特定http方法："),v("br",null,null),g("limit_except POST "),"{",g(" "),v("br",null,null),g("    allow 192.168.1.0/24;"),v("br",null,null),g("    deny all;"),v("br",null,null),"}",v("br",null,null),g("限制请求速率：limit_rate 100k;"),v("br",null,null)])}},{content:"保存配置前请核对配置是否正确，错误的配置可能会导致反向代理无法正常访问"}]),t("K",function(){var t=n(e().mark((function t(r){var n,a;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={site_name:Y.value.name,proxy_path:ct.value.proxy_path,custom_conf:pt.config},t.next=4,R(n);case 4:return a=t.sent,M.request(a),t.abrupt("return",a.status);case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),t("H",(function(){pt.config=ct.value.custom_conf||""})),t("N",x({subfilter:[]}))),ht=(t("P",[{content:"规则解释如下"},{content:"g：替换所有匹配到的关键字"},{content:"i：不区分大小写"},{content:"o：只替换匹配到的第一个"},{content:"r：使用正则表达式"}]),function(){var t=n(e().mark((function t(r){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a({loading:"正在删除，请稍后...",request:G({site_name:Y.value.name,proxy_path:ct.value.proxy_path,oldstr:r.oldstr,newstr:r.newstr}),message:!0});case 2:ut();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),yt=function(t){var e=[t.oldstr,t.newstr],r=t.sub_type.replace(/g/g,""),n=r.includes("i")?"不区分大小写":"",a=r.includes("o")?"只替换第一个":"",o=r.includes("r")?"使用正则表达式":"";switch(r.length){case 0:return"效果:将全部'".concat(e[0],"'替换为'").concat(e[1],"''");case 1:return"效果:将".concat(a?"":"全部","'").concat(e[0],"'替换为'").concat(e[1],"'，匹配时").concat(n||a||o);case 2:return"效果:将".concat(a?"":"全部","'").concat(e[0],"'替换为'").concat(e[1],"'，匹配时").concat(n||a||o,"并且").concat(o||a||n);case 3:return"效果:将'".concat(e[0],"'替换为'").concat(e[1],"'，匹配时").concat(n,"、").concat(a,"并且").concat(o)}},mt=(t("Q",(function(t){try{ft.subfilter=t.sub_filter_str}catch(e){}})),t("O",d([{label:"原关键词",prop:"oldstr"},{label:"替换词",prop:"newstr"},{label:"规则",prop:"mode",width:50,render:function(t){return v(w,{class:"item",effect:"dark","open-delay":500,content:yt(t),placement:"top-start"},{default:function(){return[v("div",{class:"flex items-center"},["".concat(t.sub_type)])]}})}},P([{title:"删除",onClick:function(t){ht(t)}}])])),t("M",(function(){Object.assign(mt,{oldstr:"",newstr:""}),dt.value=[],vt.value="默认效果:将全部'http://www.bt.cn'替换为'https://www.bt.cn'",o({isAsync:!0,title:"添加内容替换【".concat(ct.value.proxy_path,"】"),area:60,btn:"确认",component:function(){return i((function(){return r.import("./setting-replace-add-legacy2.js?v=1734676359")}),void 0,r.meta.url)},compData:{proxy_path:ct.value.proxy_path,subs_filter:ct.value.subs_filter}})})),t("k",x({oldstr:"",newstr:""}))),dt=(t("w",{oldstr:[s({message:"请输入原关键词"})]}),t("r",d([]))),vt=t("q",d("默认效果:将全部'http://www.bt.cn'替换为'https://www.bt.cn'")),gt=t("v",d()),xt=(t("l",(function(t){xt(dt.value)})),t("n",(function(t){var e=t.includes("i")?"不区分大小写":"",r=t.includes("o")?"只替换第一个":"",n=t.includes("r")?"使用正则表达式":"";switch(t.length){case 0:vt.value="默认效果:将全部".concat(mt.oldstr,"替换为").concat(mt.newstr);break;case 1:vt.value="效果:将".concat(r?"":"全部").concat(mt.oldstr,"替换为").concat(mt.newstr,"，匹配时").concat(e||r||n);break;case 2:vt.value="效果:将".concat(r?"":"全部").concat(mt.oldstr,"替换为").concat(mt.newstr,"，匹配时").concat(e||r||n,"并且").concat(n||r||e);break;case 3:vt.value="效果:将".concat(mt.oldstr,"替换为").concat(mt.newstr,"，匹配时").concat(e,"、").concat(r,"并且").concat(n)}}))),_t=(t("j",n(e().mark((function t(){var r,n;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,gt.value.validate();case 2:return r={site_name:Y.value.name,oldstr:mt.oldstr,newstr:mt.newstr,proxy_path:ct.value.proxy_path,sub_type:dt.value.length?dt.value.join(""):"g"},t.next=5,a({loading:at,request:A(r),message:!0});case 5:return(n=t.sent).status&&ut(),t.abrupt("return",n.status);case 8:case"end":return t.stop()}}),t)})))),t("V",d())),wt=t("R",x({status:!1,time:"",unit:"m"})),bt=(t("T",[{label:"分钟",value:"m"},{label:"小时",value:"h"},{label:"天",value:"d"}]),t("W",[{content:"缓存是一种用于加速网站性能和提高用户体验的技术"},{content:"开启后资源会被缓存，如果影响网站访问请关闭"},{content:"缓存键由主机名、URI 和请求参数组成"},{content:"默认忽略的响应头有：Set-Cookie|Cache-Control|expires|X-Accel-Expires"},{content:"默认缓存的静态资源有：css|js|jpg|jpeg|gif|png|webp|woff|eot|ttf|svg|ico|css.map|js.map"}]),t("S",(function(t){bt()})),t("U",n(e().mark((function t(){var r,n;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={site_name:Y.value.name,proxy_path:ct.value.proxy_path,cache_status:wt.status?1:0,expires:"".concat(wt.time).concat(wt.unit)},t.next=3,_t.value.validate();case 3:return t.next=5,a({loading:at,request:C(r),message:!0});case 5:return n=t.sent,t.abrupt("return",n.status);case 7:case"end":return t.stop()}}),t)}))))),kt=t("a0",d()),Lt=t("Y",x({status:!1,type:"",level:1,minLength:"",unit:"m"})),Et=(t("_",[{label:"k",value:"k"},{label:"m",value:"m"}]),t("a2",[{content:"用于对 HTTP 响应的内容进行压缩，以减少数据传输量，提高网站性能和加载速度"},{content:"压缩级别1-9，例如：1为压缩速度最快，但压缩率较低；9为压缩速度最慢，但压缩率最高，建议默认"},{content:"如果开启gzip后影响网站正常访问，请关闭此功能 和请求参数组成"}]),t("a1",{type:[{required:!0,message:"请输入压缩类型",trigger:["blur","change"]}],minLength:[{required:!0,message:"请输入正确的压缩最小长度",trigger:"blur",validator:function(t,e,r){e?isNaN(Number(e))?r(new Error("请输入数字")):Number(e)<1?r(new Error("请输入正确数字")):r():r(new Error("压缩最小长度不能为空"))}},{}]}),t("X",(function(t){Lt.status=t.gzip_status,Lt.type=t.gzip_types,Lt.level=t.gzip_comp_level;var e="",r="m";t.gzip_min_length&&t.gzip_min_length.length>1&&(e=t.gzip_min_length.slice(0,-1),r=t.gzip_min_length.slice(-1)),Lt.minLength=e,Lt.unit=r})),t("Z",(function(t){Et()})),t("$",n(e().mark((function t(){var r,n;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={site_name:Y.value.name,proxy_path:ct.value.proxy_path,gzip_status:Lt.status?1:0,gzip_min_length:"".concat(Lt.minLength).concat(Lt.unit),gzip_comp_level:Lt.level,gzip_types:Lt.type},t.next=3,kt.value.validate();case 3:return t.next=5,a({loading:at,request:$(r),message:!0});case 5:return n=t.sent,t.abrupt("return",n.status);case 7:case"end":return t.stop()}}),t)}))))),jt=(t("a4",d()),t("a3",d()),t("a7",x({loading:!1,type:"black",white:[],black:[]}))),Pt=t("aa",(function(t){jt.white=t.ip_white.map((function(t){return{ip:t,type:"white"}})),jt.black=t.ip_black.map((function(t){return{ip:t,type:"black"}}))})),Ut=function(){var t=n(e().mark((function t(r){var n,o,i;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=!!Array.isArray(r),t.next=3,c({title:"".concat(n?"批量删除":"删除").concat("white"===jt.type?"白":"黑","名单"),content:"".concat(n?"批量删除选中的ip，是否继续操作？":"删除".concat("white"===jt.type?"白":"黑","名单【").concat(r.ip,"】，是否继续操作？"))});case 3:return o={site_name:Y.value.name,proxy_path:ct.value.proxy_path},n?(o.ips=r.map((function(t){return t.ip})).join("\n"),o.ip_type=jt.type):(o.ip=r.ip,o.ip_type=r.type),i=n?B:F,t.next=8,a({loading:"正在删除，请稍后...",request:i(o),message:!0});case 8:t.sent.status&&ut();case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),qt=(t("a8",d([U(),{label:"IP",prop:"ip",minWidth:120},P([{title:"删除",onClick:function(t){Ut(t)}}])])),t("a9",[{label:"删除IP",value:"delete",event:(H=n(e().mark((function t(r,a,o,i,c){var u;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=function(){var t=n(e().mark((function t(r){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F({site_name:Y.value.name,proxy_path:ct.value.proxy_path,ip:r.ip,ip_type:"ipBlackList"===it.value?"black":"white"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.next=3,r({title:"批量删除",content:"批量删除选中的ip，是否继续操作？",column:[{prop:"ip",label:"IP"},q()],onConfirm:function(){var t=n(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a(u);case 2:return ut(),t.abrupt("return",!1);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()});case 3:case"end":return t.stop()}}),t)}))),function(t,e,r,n,a){return H.apply(this,arguments)})}]),t("a6",(function(){jt.type="ipBlackList"===it.value?"black":"white",Pt(ct.value.ip_limit)})),t("a5",(function(){qt.value.address="",o({isAsync:!0,title:"添加IP".concat("ipBlackList"===it.value?"黑":"白","名单【").concat(ct.value.proxy_path,"】"),area:40,btn:"确认",component:function(){return i((function(){return r.import("./setting-ip-add-legacy2.js?v=1734676359")}),void 0,r.meta.url)},compData:{name:Y.value.name,proxy_path:ct.value.proxy_path,listType:jt.type,refreshEvent:function(){ut()}}})})),t("y",d({types:jt.type,address:""}))),Nt=t("A",d()),Tt=(t("z",[{content:"一行一条配置，多个IP请换行"}]),t("B",{address:[{validator:function(t,e,r){e.length>0?r():r(new Error("请输入IP地址"))},trigger:["blur","change"]}]}),t("x",n(e().mark((function t(){var r,n,o;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=qt.value.address,n={site_name:Y.value.name,proxy_path:ct.value.proxy_path,ip_type:"ipBlackList"===it.value?"black":"white",ips:r},t.next=4,Nt.value.validate();case 4:return t.next=6,a({loading:at,request:D(n),message:!0});case 6:return(o=t.sent).status&&ut(),t.abrupt("return",o.status);case 9:case"end":return t.stop()}}),t)})))),b({__name:"index",setup:function(t){var e=p({options:[{label:"添加URL代理",type:"button",active:!0,onClick:V}]}).BtOperation,r=f({request:Q,columns:[{label:"代理目录",prop:"proxy_path",minWidth:120},{label:"目标",prop:"proxy_pass",minWidth:200},N({request:tt,prop:"remark"}),P([{onClick:et,title:"设置"},{onClick:rt,title:"删除"}])],extension:[h(J)]}).BtTable;return function(t,n){var a=m,o=y;return k(),L("div",null,[v(a,{class:"h-[59rem]"},{"header-left":E((function(){return[v(j(e))]})),content:E((function(){return[v(j(r),{"max-height":560})]})),_:1}),v(o,{class:"mt-[2rem] ml-[1.6rem]",options:j(K)},null,8,["options"])])}}})),Ot=Object.freeze(Object.defineProperty({__proto__:null,default:Tt},Symbol.toStringTag,{value:"Module"}));t("ab",Ot)}}}))}();
