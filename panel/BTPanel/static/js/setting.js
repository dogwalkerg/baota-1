import{g as e,i as l,f as a,j as t,t as s,k as o,l as u,b as n,m as d,d as r,n as m,q as p,r as i,v as c,w as _,x as f,y as b,z as y,A as V,B as h,C as x,D as v,E as g,F as k,G as w,H as U,I as C,J as j,K as z,L,M as B,N as R,O as T,P as I,Q as P,R as F,S as O,T as S,U as X,V as q,W as A,X as D,Y as H,Z as J,_ as N}from"./index368.js?v=1734676359";import{j as Q,O as W,al as E,k as G,V as K,X as M,e as Y}from"./utils-lib.js?v=1734676359";import{c as Z,w as $,o as ee,B as le,k as ae,l as te,C as se,p as oe,J as ue,x as ne,e as de,I as re,aX as me,y as pe,a7 as ie,ag as ce,ah as _e,Q as fe,aN as be,A as ye,a4 as Ve,q as he,D as xe,aj as ve,r as ge,z as ke}from"./base-lib.js?v=1734676359";import{_ as we}from"./index90.js?v=1734676359";import"./column.js?v=1734676359";import"./index91.js?v=1734676359";import"./useStore3.js?v=1734676359";import"./validator.js?v=1734676359";import"./useController.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";const Ue={class:"p-[20px]"},Ce=Z({__name:"setting-proxy",setup:m=>($((()=>l.value),(()=>{e(l.value)})),ee((()=>{e(l.value)})),(e,l)=>{const m=Q,p=ie,i=ce,c=_e,_=fe,f=be,b=ye,y=Ve,V=le("bt-loading");return ae(),te("div",Ue,[se((ae(),ue(y,{ref_key:"proxyFormRef",ref:n,model:oe(t),rules:oe(d),"label-width":"110px",disabled:oe(r)},{default:ne((()=>[de(p,{label:"代理目录",prop:"path"},{default:ne((()=>[de(m,{modelValue:oe(t).path,"onUpdate:modelValue":l[0]||(l[0]=e=>oe(t).path=e),disabled:"",placeholder:"请输入代理目录",width:"42rem"},null,8,["modelValue"])])),_:1}),de(p,{label:"目标",prop:"targetType"},{default:ne((()=>[de(c,{class:"!w-[16rem]",modelValue:oe(t).targetType,"onUpdate:modelValue":l[1]||(l[1]=e=>oe(t).targetType=e),placeholder:"请选择"},{default:ne((()=>[(ae(!0),te(re,null,me(oe(s),(e=>(ae(),ue(i,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),de(p,{label:" ",prop:"proxysite"},{default:ne((()=>[de(m,{modelValue:oe(t).proxysite,"onUpdate:modelValue":l[2]||(l[2]=e=>oe(t).proxysite=e),placeholder:"请输入目标URL",width:"42rem"},null,8,["modelValue"])])),_:1}),de(p,{label:"发送域名(host)",prop:"todomain"},{default:ne((()=>[de(m,{modelValue:oe(t).todomain,"onUpdate:modelValue":l[3]||(l[3]=e=>oe(t).todomain=e),placeholder:"请输入发送域名",width:"42rem"},null,8,["modelValue"])])),_:1}),de(p,{label:"备注"},{default:ne((()=>[de(m,{modelValue:oe(t).ps,"onUpdate:modelValue":l[4]||(l[4]=e=>oe(t).ps=e),placeholder:"请输入备注,可为空",width:"42rem"},null,8,["modelValue"])])),_:1}),de(p,{label:"websocket支持"},{default:ne((()=>[de(f,{disabled:!oe(o),effect:"dark",content:"全局websocket已开启，不允许单独关闭",placement:"top"},{default:ne((()=>[de(_,{disabled:oe(o),modelValue:oe(t).websocket,"onUpdate:modelValue":l[5]||(l[5]=e=>oe(t).websocket=e)},null,8,["disabled","modelValue"])])),_:1},8,["disabled"])])),_:1}),de(p,{label:"连接超时时间",prop:"proxy_connect_timeout"},{default:ne((()=>[de(m,{modelValue:oe(t).proxy_connect_timeout,"onUpdate:modelValue":l[6]||(l[6]=e=>oe(t).proxy_connect_timeout=e),textType:"秒",width:"41rem"},{append:ne((()=>l[9]||(l[9]=[pe(" 秒 ")]))),_:1},8,["modelValue"])])),_:1}),de(p,{label:"后端请求超时时间",prop:"proxy_send_timeout"},{default:ne((()=>[de(m,{modelValue:oe(t).proxy_send_timeout,"onUpdate:modelValue":l[7]||(l[7]=e=>oe(t).proxy_send_timeout=e),textType:"秒",width:"41rem"},{append:ne((()=>l[10]||(l[10]=[pe(" 秒 ")]))),_:1},8,["modelValue"])])),_:1}),de(p,{label:"代理响应超时时间",prop:"proxy_read_timeout"},{default:ne((()=>[de(m,{modelValue:oe(t).proxy_read_timeout,"onUpdate:modelValue":l[8]||(l[8]=e=>oe(t).proxy_read_timeout=e),textType:"秒",width:"41rem"},{append:ne((()=>l[11]||(l[11]=[pe(" 秒 ")]))),_:1},8,["modelValue"])])),_:1}),de(p,{label:" "},{default:ne((()=>[de(b,{type:"primary",onClick:oe(u)},{default:ne((()=>l[12]||(l[12]=[pe("保存")]))),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules","disabled"])),[[V,oe(a)]])])})}),je={class:"p-[20px]"},ze=Z({__name:"setting-custom",setup:e=>($((()=>l.value.custom_conf),(e=>{e&&(p.config=e)})),ee(m),(e,l)=>{const t=Q,s=ie,o=ye,u=Ve,n=W,d=le("bt-loading");return ae(),te("div",je,[se((ae(),ue(u,{ref:"customFormRef",model:oe(p),"label-width":"100px",disabled:oe(r)},{default:ne((()=>[de(s,{label:"需要插入的配置",prop:"config"},{default:ne((()=>[de(t,{modelValue:oe(p).config,"onUpdate:modelValue":l[0]||(l[0]=e=>oe(p).config=e),placeholder:oe(i),type:"textarea",width:"42rem",rows:6,resize:"none"},null,8,["modelValue","placeholder"])])),_:1}),de(s,{label:" "},{default:ne((()=>[de(o,{type:"primary",onClick:oe(c)},{default:ne((()=>l[1]||(l[1]=[pe("保存")]))),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","disabled"])),[[d,oe(a)]]),de(n,{options:oe(_),class:"mt-2rem ml-[20px]"},null,8,["options"])])})}),Le=Z({__name:"setting-replace",setup(e){$((()=>l.value.sub_filter),(()=>{h(l.value.sub_filter)}));const{BtOperation:a}=E({options:[{label:"添加内容替换",type:"button",active:!0,onClick:f}]});return(e,l)=>{const t=G,s=we,o=W,u=le("bt-loading");return ae(),te("div",null,[de(s,null,{"header-left":ne((()=>[de(oe(a))])),content:ne((()=>[se((ae(),ue(t,{ref:"siteProxyTable",data:oe(b).subfilter,"max-height":350,column:oe(y)},{empty:ne((()=>l[0]||(l[0]=[he("div",{class:"flex items-center justify-center"},"当前列表为空",-1)]))),_:1},8,["data","column"])),[[u,"正在加载中，请稍后...","title"]])])),_:1}),de(o,{options:oe(V)},null,8,["options"])])}}}),Be={class:"p-[20px]"},Re={class:"mt-[1.6rem]"},Te={class:"flex items-center"},Ie={class:"ml-[20px]"},Pe=Z({__name:"setting-cache",setup:e=>($((()=>l.value.proxy_cache),(e=>{if(e){x.status=e.cache_status;let l="",a="m";e.expires.length>1&&(l=e.expires.slice(0,-1),a=e.expires.slice(-1)),x.time=l,x.unit=a}})),(e,l)=>{const t=ve,s=ie,o=Q,u=ce,n=_e,d=ye,m=Ve,p=W,i=le("bt-loading");return ae(),te("div",Be,[se((ae(),ue(m,{ref_key:"cacheFormRef",ref:w,class:"h-[38rem]",model:oe(x),"label-width":"100px",rules:e.cacheFormRules,disabled:oe(r)},{default:ne((()=>[de(s,{label:"缓存开关",prop:"status"},{default:ne((()=>[de(t,{modelValue:oe(x).status,"onUpdate:modelValue":l[0]||(l[0]=e=>oe(x).status=e),onChange:oe(v)},null,8,["modelValue","onChange"])])),_:1}),se(he("div",Re,[de(s,{label:"缓存时间",prop:"time"},{default:ne((()=>[he("div",Te,[de(o,{modelValue:oe(x).time,"onUpdate:modelValue":l[1]||(l[1]=e=>oe(x).time=e)},null,8,["modelValue"]),de(s,{prop:"unit"},{default:ne((()=>[de(n,{class:"ml-[1rem] !w-[8rem]",modelValue:oe(x).unit,"onUpdate:modelValue":l[2]||(l[2]=e=>oe(x).unit=e),placeholder:"请选择"},{default:ne((()=>[(ae(!0),te(re,null,me(oe(g),(e=>(ae(),ue(u,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])])),_:1})],512),[[xe,oe(x).status]]),de(s,{label:" "},{default:ne((()=>[se(de(d,{type:"primary",class:"!mt-[1.6rem]",onClick:oe(k)},{default:ne((()=>l[3]||(l[3]=[pe("保存")]))),_:1},8,["onClick"]),[[xe,oe(x).status]])])),_:1})])),_:1},8,["model","rules","disabled"])),[[i,oe(a)]]),he("div",Ie,[de(p,{options:oe(U)},null,8,["options"])])])})}),Fe={class:"p-[20px]"},Oe={class:"mt-[1.6rem]"},Se={class:"flex items-center"},Xe={class:"ml-[20px]"},qe=Z({__name:"setting-compress",setup:e=>($((()=>l.value.gzip),(e=>{e?C(e):j.status=!1})),ee((()=>{C(l.value.gzip)})),(e,l)=>{const t=ve,s=ie,o=Q,u=ce,n=_e,d=ye,m=Ve,p=W,i=le("bt-loading");return ae(),te("div",Fe,[se((ae(),ue(m,{ref_key:"compressFormRef",ref:R,class:"h-[38rem]",model:oe(j),rules:oe(T),"label-width":"100px",disabled:oe(r)},{default:ne((()=>[de(s,{label:"内容压缩",prop:"status"},{default:ne((()=>[de(t,{modelValue:oe(j).status,"onUpdate:modelValue":l[0]||(l[0]=e=>oe(j).status=e),onChange:oe(z)},null,8,["modelValue","onChange"])])),_:1}),se(he("div",Oe,[de(s,{label:"压缩类型",prop:"type"},{default:ne((()=>[de(o,{modelValue:oe(j).type,"onUpdate:modelValue":l[1]||(l[1]=e=>oe(j).type=e),type:"textarea",width:"42rem",rows:6,resize:"none"},null,8,["modelValue"])])),_:1}),de(s,{label:"压缩级别",prop:"level"},{default:ne((()=>[de(n,{class:"!w-[42rem]",modelValue:oe(j).level,"onUpdate:modelValue":l[2]||(l[2]=e=>oe(j).level=e)},{default:ne((()=>[(ae(),te(re,null,me(9,(e=>de(u,{key:e,label:e,value:String(e)},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1}),de(s,{label:"压缩最小长度",prop:"minLength"},{default:ne((()=>[he("div",Se,[de(o,{modelValue:oe(j).minLength,"onUpdate:modelValue":l[3]||(l[3]=e=>oe(j).minLength=e)},null,8,["modelValue"]),de(s,{prop:"unit"},{default:ne((()=>[de(n,{class:"ml-[1rem] !w-[8rem]",modelValue:oe(j).unit,"onUpdate:modelValue":l[4]||(l[4]=e=>oe(j).unit=e),placeholder:"请选择"},{default:ne((()=>[(ae(!0),te(re,null,me(oe(L),(e=>(ae(),ue(u,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])])),_:1})],512),[[xe,oe(j).status]]),se(de(s,{label:" ",class:"mt-[1.6rem]"},{default:ne((()=>[de(d,{type:"primary",onClick:oe(B)},{default:ne((()=>l[5]||(l[5]=[pe("保存")]))),_:1},8,["onClick"])])),_:1},512),[[xe,oe(j).status]])])),_:1},8,["model","rules","disabled"])),[[i,oe(a)]]),he("div",Xe,[de(p,{options:oe(I)},null,8,["options"])])])})}),Ae=Z({__name:"setting-ip-list",setup(e){const a=ge();$((()=>l.value.ip_limit),(e=>{e?A(e):(S.white=[],S.black=[])}),{deep:!0});const{BtOperation:t}=E({options:[{label:"添加IP".concat("ipBlackList"===P.value?"黑":"白","名单"),type:"button",active:!0,onClick:F}]});return ee(O),(e,l)=>{const s=G,o=K,u=we,n=W;return ae(),te("div",null,[de(u,null,{"header-left":ne((()=>[de(oe(t))])),content:ne((()=>["ipBlackList"!==oe(P)?(ae(),ue(s,{key:0,ref_key:"tableListRef",ref:a,data:oe(S).white,"max-height":390,column:oe(X)},{empty:ne((()=>l[0]||(l[0]=[he("div",{class:"flex items-center justify-center"},"当前列表为空",-1)]))),_:1},8,["data","column"])):(ae(),ue(s,{key:1,ref_key:"tableListRef",ref:a,data:oe(S).black,"max-height":390,column:oe(X)},{empty:ne((()=>l[1]||(l[1]=[he("div",{class:"flex items-center justify-center"},"当前列表为空",-1)]))),_:1},8,["data","column"]))])),"footer-left":ne((()=>[de(o,{"table-ref":oe(a),options:oe(q)},null,8,["table-ref","options"])])),_:1}),"ipBlackList"!==oe(P)?(ae(),ue(n,{key:0,class:"mt-[2rem] ml-[1.6rem]",options:[{content:"注意：设置IP白名单后会默认禁止除白名单以外的所有IP访问"}]})):ke("",!0)])}}}),De={class:"p-[20px]"},He={class:"ml-[0px]"},Je=Z({__name:"setting-buffer",setup:e=>($((()=>l.value.proxy_buffering),(e=>{D.status=!!e}),{immediate:!0}),(e,l)=>{const a=ve,t=ie,s=Ve,o=W;return ae(),te("div",De,[de(s,{class:"h-[38rem]",model:oe(D),"label-width":"140px"},{default:ne((()=>[de(t,{label:"proxy_buffering开关",prop:"status"},{default:ne((()=>[de(a,{modelValue:oe(D).status,"onUpdate:modelValue":l[0]||(l[0]=e=>oe(D).status=e),onChange:oe(H)},null,8,["modelValue","onChange"])])),_:1})])),_:1},8,["model"]),he("div",He,[de(o,{options:oe(J)},null,8,["options"])])])})}),Ne=Y(Z({__name:"setting",setup(e){const{BtTabs:l}=M({type:"card",value:P,options:[{label:"反向代理",name:"proxy",lazy:!0,render:()=>de(Ce,null,null)},{label:"自定义配置",name:"custom",lazy:!0,render:()=>de(ze,null,null)},{label:"内容替换",name:"replace",lazy:!0,render:()=>de(Le,null,null)},{label:"缓存",name:"cache",lazy:!0,render:()=>de(Pe,null,null)},{label:"内容压缩",name:"compress",lazy:!0,render:()=>de(qe,null,null)},{label:"IP黑名单",name:"ipBlackList",lazy:!0,render:()=>de(Ae,null,null)},{label:"IP白名单",name:"ipWhiteList",lazy:!0,render:()=>de(Ae,null,null)},{label:"buffer缓冲",name:"buffer",lazy:!0,render:()=>de(Je,null,null)}]});return $((()=>P.value),(()=>{N()})),ee((async()=>{N()})),(e,a)=>(ae(),ue(oe(l),{class:"p-[1.6rem]"}))}}),[["__scopeId","data-v-a6b5220f"]]);export{Ne as default};
