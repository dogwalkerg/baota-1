!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}var e=["type"];function n(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function r(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function o(e,n,r){return(n=function(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,n||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function i(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.includes(n)||{}.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function a(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */a=function(){return n};var e,n={},r=Object.prototype,o=r.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},u="function"==typeof Symbol?Symbol:{},c=u.iterator||"@@iterator",l=u.asyncIterator||"@@asyncIterator",s=u.toStringTag||"@@toStringTag";function f(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(e){f=function(t,e,n){return t[e]=n}}function p(t,e,n,r){var o=e&&e.prototype instanceof b?e:b,a=Object.create(o.prototype),u=new N(r||[]);return i(a,"_invoke",{value:P(t,n,u)}),a}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}n.wrap=p;var d="suspendedStart",y="suspendedYield",v="executing",m="completed",g={};function b(){}function w(){}function x(){}var _={};f(_,c,(function(){return this}));var j=Object.getPrototypeOf,k=j&&j(j(I([])));k&&k!==r&&o.call(k,c)&&(_=k);var O=x.prototype=b.prototype=Object.create(_);function S(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function C(e,n){function r(i,a,u,c){var l=h(e[i],e,a);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==t(f)&&o.call(f,"__await")?n.resolve(f.__await).then((function(t){r("next",t,u,c)}),(function(t){r("throw",t,u,c)})):n.resolve(f).then((function(t){s.value=t,u(s)}),(function(t){return r("throw",t,u,c)}))}c(l.arg)}var a;i(this,"_invoke",{value:function(t,e){function o(){return new n((function(n,o){r(t,e,n,o)}))}return a=a?a.then(o,o):o()}})}function P(t,n,r){var o=d;return function(i,a){if(o===v)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=L(u,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var l=h(t,n,r);if("normal"===l.type){if(o=r.done?m:y,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function L(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,L(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=h(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function I(n){if(n||""===n){var r=n[c];if(r)return r.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var i=-1,a=function t(){for(;++i<n.length;)if(o.call(n,i))return t.value=n[i],t.done=!1,t;return t.value=e,t.done=!0,t};return a.next=a}}throw new TypeError(t(n)+" is not iterable")}return w.prototype=x,i(O,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:w,configurable:!0}),w.displayName=f(x,s,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,f(t,s,"GeneratorFunction")),t.prototype=Object.create(O),t},n.awrap=function(t){return{__await:t}},S(C.prototype),f(C.prototype,l,(function(){return this})),n.AsyncIterator=C,n.async=function(t,e,r,o,i){void 0===i&&(i=Promise);var a=new C(p(t,e,r,o),i);return n.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(O),f(O,s,"Generator"),f(O,c,(function(){return this})),f(O,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},n.values=I,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=o.call(a,"catchLoc"),l=o.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;T(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},n}function u(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){u(i,r,o,a,c,"next",t)}function c(t){u(i,r,o,a,c,"throw",t)}a(void 0)}))}}System.register(["./utils-lib-legacy.js?v=1734676359","./index-legacy90.js?v=1734676359","./index-legacy100.js?v=1734676359","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1734676359","./site-legacy.js?v=1734676359","./index-legacy117.js?v=1734676359","./index-legacy124.js?v=1734676359","./base-lib-legacy.js?v=1734676359","./validator-legacy.js?v=1734676359","./index.vue_vue_type_style_index_0_scoped_03ce946a_lang-legacy.js?v=1734676359","./column-legacy.js?v=1734676359","./useController-legacy3.js?v=1734676359","./useStore-legacy7.js?v=1734676359","./useController-legacy4.js?v=1734676359","./useStore-legacy8.js?v=1734676359","./__commonjsHelpers__-legacy.js?v=1734676359","./index-legacy116.js?v=1734676359","./index-legacy91.js?v=1734676359","./index-legacy107.js?v=1734676359","./useStore-legacy9.js?v=1734676359","./useMethod-legacy5.js?v=1734676359"],(function(t,n){"use strict";var o,u,l,s,f,p,h,d,y,v,m,g,b,w,x,_,j,k,O,S,C,P,L,E,T,N,I,B,H,F,G,W,A,D,R,M,q,V,Y,z,J,Q,U,K,X,Z,$,tt,et,nt,rt,ot,it,at,ut,ct,lt,st,ft,pt,ht,dt,yt,vt,mt,gt,bt,wt;return{setters:[function(t){o=t.u,u=t.al,l=t.am,s=t.p,f=t.t,p=t.an,h=t.bf,d=t.bg,y=t.H,v=t.ao,m=t.h},function(t){g=t._},function(t){b=t._},function(t){w=t._},function(t){x=t.delSorted,_=t.addSiteTypes,j=t.modifySiteTypes,k=t.removeSiteType},function(t){O=t.B},function(t){S=t.u},function(t){C=t.c,P=t.t,L=t.s,E=t.w,T=t.e,N=t.y,I=t.az,B=t.o,H=t.n,F=t.k,G=t.l,W=t.p,A=t.x,D=t.q,R=t.F,M=t.M,q=t.A},null,null,function(t){V=t.a,Y=t.b,z=t.h,J=t.e,Q=t.g,U=t.u},function(t){K=t.u,X=t.a,Z=t.b,$=t.e,tt=t.o},function(t){et=t.S},function(t){nt=t.t,rt=t.o,ot=t.a,it=t.b,at=t.c,ut=t.r,ct=t.d,lt=t.e,st=t.g,ft=t.p,pt=t.f,ht=t.h,dt=t.i,yt=t.j,vt=t.k,mt=t.l,gt=t.m,bt=t.n},function(t){wt=t.SITE_PHP_STORE},null,null,null,null,null,null],execute:function(){var xt={class:"p-[20px] pb-[24px]"};t("default",C({__name:"index",setup:function(t){var C=o(),_t=C.payment,jt=C.mainHeight,kt=C.plugin,Ot=P(_t.value).authType,St=L(et()),Ct=St.activeType,Pt=St.isRefreshList,Lt=St.searchWidth,Et=et().getClassList,Tt=L(wt()),Nt=Tt.pluginInfo,It=Tt.scanData,Bt=wt().getPhpList;E($,(function(t){null!=t&&t.pluginInfo&&(Nt.value=t.pluginInfo)}),{immediate:!0,deep:!0});var Ht,Ft,Gt,Wt=S({key:"type",name:"PHP分类",options:function(){return[{label:"全部分类",value:"all"}]},event:{get:(Ht=c(a().mark((function t(){var e,n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Et();case 2:return e=t.sent,n=e.data,ht.value=n,t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)}))),function(){return Ht.apply(this,arguments)}),add:function(t){return _(t,Ct.value)},update:function(t){return j(t,Ct.value)},delete:function(t){return k(t,Ct.value)}},ignore:["0","-2"],field:"name"}),At=v(bt),Dt=u({options:[{type:"button",label:"添加站点",active:!0,onClick:ct},{type:"dropdown",label:"高级设置",onClick:dt,options:[{label:"修改默认页面",onClick:dt},{label:"默认站点",onClick:function(){return dt("defaultSite")}},{label:"PHP命令行版本",onClick:function(){return dt("phpCommandLine")}},{label:"HTTPS防窜站",onClick:function(){return dt("httpsOfficersSite")}},{label:"TLS设置",onClick:function(){return dt("tlsSetting")}},{label:"全局设置",onClick:function(){return dt("globalSetting")}},{label:"关联数据库",onClick:function(){return dt("associatedDatabase")}}]},{type:"custom",render:function(){return T(q,{onClick:yt},{default:function(){var t,e;return[N("漏洞扫描"),T("span",{class:"ml-4px py-1px px-4px text-white text-center font-bold ".concat((null===(t=It.value)||void 0===t?void 0:t.loophole_num)>0?"bg-[red]":"bg-[#f0ad4e]")},[null===(e=It.value)||void 0===e?void 0:e.loophole_num])]}})}},{type:"custom",render:function(){return T(q,{onClick:vt},{default:function(){var t,e;return[N("网站安全"),T("span",{class:"ml-4px py-1px px-4px text-white text-center font-bold ".concat((null===(t=It.value)||void 0===t?void 0:t.web_scaning_times)>0?"bg-[red]":"bg-[#f0ad4e]")},[null===(e=It.value)||void 0===e?void 0:e.web_scaning_times])]}})}},{type:"custom",render:function(){return T(O,{class:"ml-1rem",isRequest:!1,pluginInfo:Nt.value},null)}}]}).BtOperation,Rt=l({request:(Gt=c(a().mark((function t(n){var o,u,c,l;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.type,u=i(n,e),t.next=3,Bt(r(r({type:s(o)||"all"===o?"-1":o},u),{},{table:"sites",order:Zt.order||""}));case 3:return c=t.sent,l=JSON.parse(localStorage.getItem("/site/php_column")||"[]"),c.data.forEach((function(t){t.isWaf=null==l||!l.length||l[1].isCustom})),nt.value=c.data,t.abrupt("return",c);case 8:case"end":return t.stop()}}),t)}))),function(t){return Gt.apply(this,arguments)}),sort:(Ft=c(a().mark((function t(e){var n,r,o,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.column,n=e.prop,r=e.order,o=n,r){t.next=9;break}return o="",t.next=6,x();case 6:Zt.order="",t.next=11;break;case 9:i={orderName:o,orderStatus:"ascending"===r?"asc":"desc"},Zt.order="".concat(i.orderName," ").concat(i.orderStatus);case 11:Kt();case 12:case"end":return t.stop()}}),t)}))),function(t){return Ft.apply(this,arguments)}),columns:[V(),{subtitle:"WAF图标",isCustom:!0,isLtd:!0,isHide:!0,showClick:function(t){Zt.data.forEach((function(e){e.isWaf=t}))}},K({label:"网站名",type:Ct.value,openPlugin:rt,onClick:ot}),Y({width:80,sortable:"custom",event:mt,data:["已停止","运行中"]}),{label:"备份",width:65,isCustom:!0,render:function(t){return T("span",{onClick:function(){return it(t)},class:"".concat(t.backup_count?"text-[#20a53a]":"text-warning"," cursor-pointer")},[t.backup_count?"有(".concat(t.backup_count,")"):"无备份"])}},z({prop:"path",labelClassName:"php-table-path",minWidth:140}),r(r({},J({event:function(t){return ot(r(r({},t),{},{tabName:"flowQuota"}),"directory")}})),{},{isCustom:!1}),{label:"日流量",width:80,isCustom:!0,isLtd:!0,render:function(t){return"free"===Ot.value?T("span",{class:"cursor-pointer bt-link",onClick:function(){at(t)}},[N("查看")]):kt.value.total?null!=t&&null!==(e=t.net)&&void 0!==e&&e.hasOwnProperty("one_day_total_flow")?f((null==t||null===(n=t.net)||void 0===n?void 0:n.one_day_total_flow)||0,!0,2):"--":T("span",{class:"cursor-pointer bt-link",onClick:function(){at(t)}},[N("查看")]);var e,n}},X(),Q({table:"sites",minWidth:110,width:"auto"}),{label:"PHP",isCustom:!0,minWidth:80,width:80,render:function(t){var e=!t.php_version_status;return T("span",{class:"cursor-pointer "+(e&&"静态"!==t.php_version?"bt-warn":"bt-link"),onClick:function(){return ot(t,"php")}},[e&&"静态"!==t.php_version?t.php_version+"[未安装]":"其它"==t.php_version?"自定义":t.php_version])}},Z({onClick:function(t){ot(t,"ssl")}}),{label:"拨测告警",isCustom:!1,width:78,render:function(t){return I("span",{class:"bt-link",onClick:function(){var e;ot(r(r({},t),{},{otherName:"siteAlarm"}),"PHPMOD"===(null==t||null===(e=t.project_config)||void 0===e?void 0:e.type)?"otherSettings":"siteAlarm")}},"设置")}},U([{onClick:function(t){rt(t,"monitor-setting")},title:"统计"},{onClick:function(t){rt(t,"bt_waf")},title:"WAF"},{title:"设置",onClick:function(t){return ot(t)}},{title:"删除",onClick:function(t){return gt(t)}}])],extension:[Wt,At,p(Pt),h("search",{name:"sites",key:"php",list:ut.value}),d()],empty:function(){return T("span",null,[N("您的列表为空，您可以"),T("span",{class:"bt-link",onClick:ct},[N("添加一个项目")])])}}),Mt=Rt.BtTable,qt=Rt.BtPage,Vt=Rt.BtRefresh,Yt=Rt.BtTableCategory,zt=Rt.BtRecommendSearch,Jt=Rt.BtColumn,Qt=Rt.BtBatch,Ut=Rt.BtErrorMask,Kt=Rt.refresh,Xt=Rt.categoryRef,Zt=Rt.config;return B((function(){H((function(){lt.value=Xt(),y((function(){return n.import("./index-legacy279.js?v=1734676359")}),void 0,n.meta.url),y((function(){return n.import("./index-legacy280.js?v=1734676359")}),void 0,n.meta.url),st()}))})),function(t,e){var n=b,r=m,o=g;return F(),G("div",null,[T(w,{ref_key:"envRef",ref:$,onInit:W(Kt)},null,8,["onInit"]),T(W(Ut)),T(o,null,{"header-left":A((function(){return[T(W(Dt)),D("div",{class:"flex items-center ml-1rem",onClick:e[0]||(e[0]=function(){return W(tt)&&W(tt).apply(void 0,arguments)})},e[2]||(e[2]=[D("i",{class:"svgtofont-desired text-[1.6rem]"},null,-1),D("span",{class:"bt-link"},"需求反馈",-1)]))]})),"header-right":A((function(){return[T(W(Yt),{class:"!w-[140px] mr-[10px]"}),T(W(zt),{type:"php",placeholder:"请输入域名或备注",class:R(["mr-[10px]","!w-[".concat(W(Lt),"px]")])},null,8,["class"]),T(W(Vt),{class:"mr-[10px]"}),T(W(Jt))]})),content:A((function(){return[T(W(Mt),{"max-height":W(jt)-220},null,8,["max-height"])]})),"footer-left":A((function(){return[T(W(Qt))]})),"footer-right":A((function(){return[T(W(qt))]})),popup:A((function(){return[T(r,{title:"插件预览",modelValue:W(ft),"onUpdate:modelValue":e[1]||(e[1]=function(t){return M(ft)?ft.value=t:null}),area:66},{default:A((function(){return[D("div",xt,[T(n,{data:W(pt)},null,8,["data"])])]})),_:1},8,["modelValue"])]})),_:1})])}}}))}}}))}();
