!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function n(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */n=function(){return r};var t,r={},a=Object.prototype,l=a.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},u="function"==typeof Symbol?Symbol:{},o=u.iterator||"@@iterator",s=u.asyncIterator||"@@asyncIterator",c=u.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(t){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var a=t&&t.prototype instanceof b?t:b,l=Object.create(a.prototype),u=new V(n||[]);return i(l,"_invoke",{value:P(e,r,u)}),l}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}r.wrap=d;var v="suspendedStart",m="suspendedYield",h="executing",y="completed",g={};function b(){}function x(){}function w(){}var _={};f(_,o,(function(){return this}));var k=Object.getPrototypeOf,L=k&&k(k(N([])));L&&L!==a&&l.call(L,o)&&(_=L);var C=w.prototype=b.prototype=Object.create(_);function S(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function A(t,r){function n(a,i,u,o){var s=p(t[a],t,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==e(f)&&l.call(f,"__await")?r.resolve(f.__await).then((function(e){n("next",e,u,o)}),(function(e){n("throw",e,u,o)})):r.resolve(f).then((function(e){c.value=e,u(c)}),(function(e){return n("throw",e,u,o)}))}o(s.arg)}var a;i(this,"_invoke",{value:function(e,t){function l(){return new r((function(r,a){n(e,t,r,a)}))}return a=a?a.then(l,l):l()}})}function P(e,r,n){var a=v;return function(l,i){if(a===h)throw Error("Generator is already running");if(a===y){if("throw"===l)throw i;return{value:t,done:!0}}for(n.method=l,n.arg=i;;){var u=n.delegate;if(u){var o=T(u,n);if(o){if(o===g)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===v)throw a=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=h;var s=p(e,r,n);if("normal"===s.type){if(a=n.done?y:m,s.arg===g)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a=y,n.method="throw",n.arg=s.arg)}}}function T(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var l=p(a,e.iterator,r.arg);if("throw"===l.type)return r.method="throw",r.arg=l.arg,r.delegate=null,g;var i=l.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function V(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function N(r){if(r||""===r){var n=r[o];if(n)return n.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var a=-1,i=function e(){for(;++a<r.length;)if(l.call(r,a))return e.value=r[a],e.done=!1,e;return e.value=t,e.done=!0,e};return i.next=i}}throw new TypeError(e(r)+" is not iterable")}return x.prototype=w,i(C,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:x,configurable:!0}),x.displayName=f(w,c,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,f(e,c,"GeneratorFunction")),e.prototype=Object.create(C),e},r.awrap=function(e){return{__await:e}},S(A.prototype),f(A.prototype,s,(function(){return this})),r.AsyncIterator=A,r.async=function(e,t,n,a,l){void 0===l&&(l=Promise);var i=new A(d(e,t,n,a),l);return r.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(C),f(C,c,"Generator"),f(C,o,(function(){return this})),f(C,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},r.values=N,V.prototype={constructor:V,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&l.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,a){return u.type="throw",u.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var o=l.call(i,"catchLoc"),s=l.call(i,"finallyLoc");if(o&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&l.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},r}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(t,r,n){return(r=function(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,r||"default");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==e(r)?r:r+""}(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function u(e,t,r,n,a,l,i){try{var u=e[l](i),o=u.value}catch(e){return void r(e)}u.done?t(o):Promise.resolve(o).then(n,a)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var l=e.apply(t,r);function i(e){u(l,n,a,i,o,"next",e)}function o(e){u(l,n,a,i,o,"throw",e)}i(void 0)}))}}System.register(["./utils-lib-legacy.js?v=1734676359","./base-lib-legacy.js?v=1734676359","./site-legacy.js?v=1734676359","./useStore-legacy11.js?v=1734676359","./useController-legacy7.js?v=1734676359","./useStore-legacy7.js?v=1734676359","./index-legacy90.js?v=1734676359","./ssl-legacy.js?v=1734676359","./useStore-legacy10.js?v=1734676359","./useMethod-legacy6.js?v=1734676359","./__commonjsHelpers__-legacy.js?v=1734676359","./index-legacy91.js?v=1734676359","./column-legacy.js?v=1734676359","./useController-legacy3.js?v=1734676359","./validator-legacy.js?v=1734676359","./useStore-legacy9.js?v=1734676359","./useMethod-legacy5.js?v=1734676359"],(function(e,r){"use strict";var a,i,u,s,c,f,d,p,v,m,h,y,g,b,x,w,_,k,L,C,S,A,P,T,j,O,V,N,D,E,I,q,B,U,F,M,G,H,R,J,W,z,X,Y,Q,Z,$,K,ee,te,re,ne,ae,le,ie,ue,oe,se,ce,fe,de,pe,ve,me,he,ye,ge,be,xe,we,_e,ke,Le,Ce,Se,Ae,Pe,Te;return{setters:[function(e){a=e.G,i=e.l,u=e.H,s=e.d,c=e.b,f=e.e,d=e.bZ,p=e.c,v=e.O,m=e.u,h=e.x,y=e.a6,g=e.a4,b=e.F,x=e.k,w=e.h,_=e.aa},function(e){k=e.c,L=e.r,C=e.i,S=e.o,A=e.B,P=e.C,T=e.p,j=e.k,O=e.l,V=e.q,N=e.e,D=e.x,E=e.F,I=e.bm,q=e.v,B=e.D,U=e.I,F=e.aX,M=e.z,G=e.y,H=e.aT,R=e.A,J=e.J,W=e.a7,z=e.ag,X=e.ah,Y=e.P,Q=e.aw,Z=e.a4,$=e.h,K=e.w,ee=e.M,te=e.ae,re=e.ad,ne=e.Q,ae=e.at,le=e.av,ie=e.n,ue=e.R},function(e){oe=e.getBusSslProductList,se=e.applyCertOrderPay,ce=e.applyTrustAsiaCert,fe=e.verifyTrustAsiaCret,de=e.getDomainList,pe=e.validateDomain,ve=e.authDomainApi,me=e.setCertToSite},function(e){he=e.u},function(e){ye=e.C,ge=e.l,be=e.s,xe=e.u},function(e){we=e.u},function(e){_e=e._},function(e){ke=e.k,Le=e.s,Ce=e.l,Se=e.m},function(e){Ae=e.g},function(e){Pe=e.d,Te=e.r},null,null,null,null,null,null,null],execute:function(){var je={class:"ssl-container w-[90%] py-[2rem] mx-[auto] overflow-y-auto"},Oe={class:"ssl-bus-pay-form"},Ve={class:"ssl-line"},Ne={class:"ssl-content"},De={class:"ssl-box mb-[.4rem]"},Ee={class:"ssl-number-select"},Ie={class:"ssl-service"},qe={class:"flex items-center"},Be={class:"ssl-line h-[20rem]"},Ue={class:"ssl-content"},Fe={class:"ssl-option-list w-full"},Me=["onClick"],Ge={class:"ssl-type-title"},He={class:"ssl-type-tips"},Re={key:0,class:"ssl-subscript-tips"},Je={class:"ssl-tips-list mb-[.4rem]"},We={class:"mt-[.4rem]"},ze={class:"ssl-line"},Xe={class:"ssl-content"},Ye={class:"ssl-option-list"},Qe=["onClick"],Ze={class:"ssl-type-title !font-normal border-none"},$e={key:0,class:"ssl-subscript-tips"},Ke={class:"ssl-tips-list mb-[.4rem]"},et={class:"mt-[.4rem]"},tt={class:"ssl-line"},rt={class:"ssl-content"},nt={class:"ssl-option-list"},at=["onClick"],lt={class:"ssl-type-title !font-normal border-none"},it={key:0,class:"ssl-subscript-tips"},ut={class:"ssl-tips-list mb-[.4rem]"},ot={class:"mt-[.4rem]"},st={class:"ssl-line"},ct={class:"ssl-content"},ft={class:"ssl-option-list"},dt=["onClick"],pt={class:"ssl-type-title !font-normal border-none"},vt={key:0,class:"ssl-subscript-tips"},mt={class:"ssl-tips-list mb-[.4rem]"},ht={class:"mt-[.4rem]"},yt={class:"ssl-line"},gt={class:"ssl-content"},bt={class:"ssl-option-list"},xt=["onClick"],wt={class:"ssl-type-title !font-normal border-none"},_t={key:0,class:"ssl-subscript-tips"},kt={class:"ssl-tips-list mb-[.4rem]"},Lt={class:"mt-[.4rem]"},Ct={class:"flex justify-between w-full w-[90%] mx-[auto]"},St={class:"flex flex-col"},At={class:"mb-[4px]"},Pt={class:"mr-[1rem]"},Tt={class:"flex flex-col"},jt={class:"flex h-[2.2rem] items-end mb-[4px]"},Ot={class:"text-[#FC6D26] text-[1.2rem]"},Vt={class:"text-[2rem] font-bold"},Nt={class:"pl-[6rem] text-[1.2rem] text-[#aaa] line-through"},Dt={class:"flex items-center"},Et=k({__name:"index",emits:["close"],setup:function(e,t){t.emit;var f=c(),d=he(),p=d.sslApplicationInfo,v=d.productInfo,m=d.orderInfo,h=L(!1);L(0);var y=L(0),g=L(null),b=L(null),x={single:["仅支持绑定一个二级域名或者子域名，例如 bt.com、cloud.bt.com、dnspod.cloud.bt.com的其中之一 。","如需要绑定同级的所有子域名，例如*.bt.com，请购买泛域名证书。"],wildcard:["带通配符的域名，例如：*.bt.com、*.cloud.bt.com均为泛域名，包含同一级的全部子域名。","注意泛域名不支持跨级，例如*.bt.com 不包含 *.cloud.bt.com的支持"]},w={0:[],1:["宝塔提供9:00 - 24:00的人工部署证书部署服务，帮助客户排查部署证书部署生效问题，快速上线"],2:["宝塔提供9:00 - 24:00的人工部署国密算法证书部署服务，帮助客户排查部署证书部署生效问题，快速上线"]},_=L({num:1,certClassAcitve:"OV",certClass:[{name:"OV证书",title:"推荐企业使用",value:"OV",tips:[],data:[]},{name:"DV证书",title:"推荐个人，测试使用",value:"DV",subscript:"热销",tips:[]},{name:"EV证书",title:"推荐大型政企使用，高安全性",value:"EV",tips:[]}],certBrandAcitve:"",certBrand:[{name:"Positive",title:"Positive",value:"Positive",tips:[]},{name:"锐安信",title:"锐安信",value:"锐安信",tips:[]},{name:"CFCA",title:"CFCA",value:"CFCA",tips:[]},{name:"Digicert",title:"Digicert",value:"Digicert",tips:[]},{name:"GeoTrust",title:"GeoTrust",value:"GeoTrust",tips:[]},{name:"Sectigo",title:"Sectigo",value:"Sectigo",tips:[]}],certTypeAcitve:"single",certType:[{name:"single",title:"单域名",value:"single",tips:[]},{name:"multiple",title:"多域名",value:"multiple",tips:[]},{name:"wildcard",title:"泛域名",value:"wildcard",tips:[]}],certLifeAcitve:1,certLife:[{name:"1年",title:"1年",value:1,tips:[]},{name:"2年",title:"2年",value:2,tips:[]},{name:"3年",title:"3年",value:3,tips:[]},{name:"4年",title:"4年",value:4,tips:[]},{name:"5年",title:"5年",value:5,tips:[]}],certDeployAcitve:1,certDeploy:[{name:"不需要",title:"不需要",value:0,tips:[]},{name:"部署服务",title:"部署服务",value:1,tips:[]},{name:"部署服务（国密）",title:"部署服务（国密）",value:2,tips:[]}]}),k=L({}),J=L({addPrice:0,productName:"",price:0,totalPrice:0,originalPrice:0,deploymentPrice:0,pid:0,years:1,yearsPrice:0,number:1,extraNumber:0,extraPrice:0,install:1}),W=L({oid:0,wxcode:"",alicode:"",qq:"",orderInfo:{}}),z={defalutList:[],domianNumList:[],classList:[],brandList:[],typeList:[]},X=C((function(){var e=_.value.certClass.filter((function(e){return e.value===_.value.certClassAcitve}));return e&&e.length>0?e[0].tips:[]})),Y=C((function(){var e=_.value.certBrand.filter((function(e){return e.value===_.value.certBrandAcitve}));return e&&e.length>0?e[0].tips:[]})),Q=C((function(){var e=_.value.certType.filter((function(e){return e.value===_.value.certTypeAcitve}));return e&&e.length>0?e[0].tips:[]})),Z=C((function(){var e=_.value.certLife.filter((function(e){return e.value===parseInt(_.value.certLifeAcitve)}));return e&&e.length>0?e[0].tips:[]})),$=C((function(){var e=_.value.certDeploy.filter((function(e){return e.value===parseInt(_.value.certDeployAcitve)}));return e&&e.length>0?e[0].tips:[]})),K=function(){var e=o(n().mark((function e(){var t,r,a,i,u;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h.value=!0,e.next=4,oe();case 4:t=e.sent,r=t.data,a=r.info,i=r.data,u=r.administrator,k.value=a.recommend,ne(),ee(a),te(i),ae(),p.value=l({},u),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0);case 20:return e.prev=20,h.value=!1,e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[0,17,20,23]])})));return function(){return e.apply(this,arguments)}}(),ee=function(e){var t=e.type,r=e.brand,n=e.times;_.value.certClass=be(_.value.certClass,t,(function(e,t){return t["".concat(e.value).toLowerCase()]})),x.multiple=x.single,_.value.certType=be(_.value.certType,x),_.value.certDeploy=be(_.value.certDeploy,w),_.value.certBrand=be(_.value.certBrand,r,(function(e,t){return t["Positive"!==e.value?"".concat(e.value).toLowerCase():"Positive"]})),_.value.certLife=be(_.value.certLife,n,(function(e,t){return t[e.value+"_year"]}))},te=function(e){var t=[];e.forEach((function(e){var r,n=null===(r=e.type.match(/(OV|DV|EV)/))||void 0===r?void 0:r[0],a=-1!==e.code.indexOf("wildcard"),i=e.add_price>0,u=a?"wildcard":i?"multiple":"single";"Digicert"===e.brand&&(u=a?"wildcard":"single"),t.push(l(l({},e),{type:n,certType:u,isMulti:i}))})),z.defalutList=t},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.num,r=e.classify,n=e.brand,a=e.type,l=e.life,i=e.deploy,u=_.value;return t||(t=u.num),r||(r=u.certClassAcitve),n||(n=u.certBrandAcitve),a||(a=u.certTypeAcitve),l||(l=u.certLifeAcitve),i||(i=u.certDeployAcitve),{num:t,classify:r,brand:n,type:a,life:l,deploy:i}},ne=function(){_.value.certClassAcitve="OV",_.value.certBrandAcitve=le(),_.value.certTypeAcitve="single",_.value.certLifeAcitve=1,_.value.certDeployAcitve=1},ae=function(){ue(z.defalutList),ie(),me()},le=function(){var e;return k.value[null===(e=_.value.certClassAcitve)||void 0===e?void 0:e.toLowerCase()]},ie=function(){var e=z.domianNumList,t=z.classList,r=z.brandList;z.typeList;_.value.certClass.forEach((function(t){var r=e.some((function(e){return e.type===t.value}));"EV"==t.value&&"wildcard"===_.value.certTypeAcitve&&(r=!1),t.disable=!r})),_.value.certBrand.forEach((function(e){var r=!t.some((function(t){return t.brand===e.value}));if(e.hidden=r,e.subscript=e.value===le()?"推荐":"",e.value===_.value.certBrandAcitve&&e.hidden){var n;_.value.certBrandAcitve=le();var a=null==z||null===(n=z.classList)||void 0===n?void 0:n.filter((function(e){return e.brand===_.value.certBrandAcitve}));a.length>0&&(z.brandList=a,de(a))}})),_.value.certType.forEach((function(e){var t=!r.some((function(t){return t.certType===e.value}));"single"===e.value&&_.value.num>1&&(t=!0),"multiple"===e.value&&1===_.value.num&&(t=!0),"multiple"===e.value&&_.value.num>1&&(t=!1),e.hidden=t}))},ue=function(e){var t=re().num,r=e.filter((function(e){return!(t>1)||e.isMulti}));r.length>0&&(z.domianNumList=r,ce(r))},ce=function(e){var t=re().classify,r=e.filter((function(e){return e.type===t}));r.length>0&&(z.classList=r,fe(r))},fe=function(e){var t=re().brand,r=e.filter((function(e){return e.brand===t}));r.length>0&&(z.brandList=r,de(r))},de=function(e){var t=re().type;1===e.length&&(_.value.certTypeAcitve=e[0].certType);var r=e.filter((function(e){var r="multiple"===_.value.certTypeAcitve&&"wildcard"!==e.certType&&e.isMulti,n="wildcard"===_.value.certTypeAcitve&&"wildcard"===e.certType&&e.isMulti;return e.certType===t||r||n}));r.length>0&&(z.typeList=r)},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_.value.num,t=e;if("number"!=typeof e?(e=Number(e.data),t=Number(_.value.num)||1):t=Number(_.value.num+e)||1,t&&(t<1||t>99))return _.value.num=t<1?1:99,f.error("域名数量范围为1-99");_.value.num=t,"wildcard"!==_.value.certTypeAcitve&&(_.value.certTypeAcitve=_.value.num>1?"multiple":"single"),ae()},ve=function(e,t,r){r||(r=_.value[t].filter((function(t){return t.value===e}))),r.disable||("".concat(t,"Acitve")in _.value&&(_.value["".concat(t,"Acitve")]=e),ae())},me=function(){var e=z.typeList[0]||null;if(y.value=(null==e?void 0:e.num)||0,e){var t=re(),r=t.num,n=t.life,a=t.deploy,l=e.price,i=e.other_price,u=e.add_price,o=e.pid,s=e.num,c=r-s<0?0:r-s,f=[0,e.install_price,e.install_price_v2][a],d=u*c,p=(d+l)*n+f,v=i+d+f;J.value={addPrice:u||0,productName:e.title,price:l,totalPrice:p,originalPrice:v,deploymentPrice:f,pid:o,years:n,yearsPrice:l*n,number:s,extraNumber:c,extraPrice:d,install:Number(a)}}},ge=function(){var e=o(n().mark((function e(){var t,r,i,u,o,s,c,d,p,v,m,h,y,g;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=J.value,r=t.pid,i=t.install,u=t.years,o=t.extraNumber,s={pdata:JSON.stringify({pid:r,install:i,years:u,num:o})},e.next=5,a({loading:"正在创建商业证书订单，请稍后...",request:se(s),data:{status:Boolean,"msg.oid":[Number,"oid"],"msg.wxcode":[String,"wxcode"],"msg.alicode":[String,"alicode"],"msg.qq":[String,"qq"],"msg.order_info":[Object,"orderInfo"],msg:[String,function(e){return e}]}});case 5:if(c=e.sent,d=c.oid,p=c.wxcode,v=c.alicode,m=c.qq,h=c.orderInfo,y=c.status,g=c.msg,y){e.next=9;break}return e.abrupt("return",f.error(g));case 9:W.value={oid:d,wxcode:p,alicode:v,qq:m,orderInfo:h},xe(l(l({},W.value),{},{productInfo:J.value})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0);case 16:return e.prev=16,e.finish(16);case 18:case"end":return e.stop()}}),e,null,[[0,13,16,18]])})));return function(){return e.apply(this,arguments)}}(),be=function(e,t,r){return e.map((function(e,n){var a=r?r(e,t):t[e.value];return l(l({},e),{},{tips:a})}))},xe=function(e){v.value=e.productInfo,m.value=e.orderInfo,i({title:"支付商业证书订单",area:[60],component:function(){return u((function(){return r.import("./pay-bus-ssl-legacy2.js?v=1734676359")}),void 0,r.meta.url)},compData:e})};return S((function(){K()})),function(e,t){var r=H,n=s,a=R,l=A("bt-loading");return P((j(),O("div",{class:"",ref_key:"sslContainer",ref:g},[V("div",je,[N(r,{type:"error",closable:!1,class:"!p-[1.2rem]"},{title:D((function(){return t[3]||(t[3]=[V("span",{class:"text-[1.3rem] flex items-center"},[V("span",{class:"svgtofont-hint-confirm-icon !text-[2rem]"}),V("span",null," 禁止含有诈骗、赌博、色情、木马、病毒等违法违规业务信息的站点申请SSL证书，如有违反，撤销申请，停用账号。 ")],-1)])})),_:1}),V("div",Oe,[V("div",Ve,[t[6]||(t[6]=V("div",{class:"ssl-label"},"域名数量",-1)),V("div",Ne,[V("div",De,[V("div",Ee,[V("div",{class:E(["del-number",{"is-disable":1===T(_).num}]),onClick:t[0]||(t[0]=function(e){return pe(-1)})},null,2),P(V("input",{type:"number",class:"input-number",min:"1",max:"99","onUpdate:modelValue":t[1]||(t[1]=function(e){return T(_).num=e}),onInput:pe},null,544),[[I,T(_).num]]),V("div",{class:E(["add-number",{"is-disable":99===T(_).num}]),onClick:t[2]||(t[2]=function(e){return pe(1)})},null,2)]),V("div",Ie,[N(ye,{placement:"right"},{default:D((function(){return[V("div",qe,[N(n,{src:"../icons/service-icon.svg",class:"mx-[.4rem] w-1.6rem h-1.6rem"}),t[4]||(t[4]=V("span",{class:"ml5"},"教我选择？",-1))])]})),_:1})]),P(V("div",{class:"ssl-tips"},"默认包含"+q(T(y))+"个域名，超出数量每个域名"+q(T(J).addPrice)+"元/个/年",513),[[B,0!==T(J).addPrice]])]),t[5]||(t[5]=V("div",{class:"ssl-tips"},"请选择当前证书包含的域名数量",-1))])]),V("div",Be,[t[7]||(t[7]=V("div",{class:"ssl-label"},"证书分类",-1)),V("div",Ue,[V("div",Fe,[(j(!0),O(U,null,F(T(_).certClass,(function(e){return j(),O("div",{class:E(["ssl-option-item w-[29rem] flex-col justify-center items-center mr-[1rem]",{"is-active":e.value===T(_).certClassAcitve,"is-disabled":e.disable,"!hidden":e.hidden}]),key:e.value,onClick:function(t){return ve(e.value,"certClass",e)}},[V("div",Ge,q(e.name),1),V("div",He,q(e.title),1),e.subscript?(j(),O("em",Re,q(e.subscript),1)):M("",!0)],10,Me)})),128))]),V("div",Je,[(j(!0),O(U,null,F(T(X),(function(e){return j(),O("p",We,q(e),1)})),256))])])]),V("div",ze,[t[8]||(t[8]=V("div",{class:"ssl-label"},"证书品牌",-1)),V("div",Xe,[V("div",Ye,[(j(!0),O(U,null,F(T(_).certBrand,(function(e){return j(),O("div",{class:E(["ssl-option-item min-w-[9rem]",{"is-active":e.value===T(_).certBrandAcitve,"is-disabled":e.disable,"!hidden":e.hidden}]),key:e.value,onClick:function(t){return ve(e.value,"certBrand",e)}},[V("div",Ze,q(e.title),1),e.subscript?(j(),O("em",$e,q(e.subscript),1)):M("",!0)],10,Qe)})),128))]),V("div",Ke,[(j(!0),O(U,null,F(T(Y),(function(e){return j(),O("p",et,q(e),1)})),256))])])]),V("div",tt,[t[9]||(t[9]=V("div",{class:"ssl-label"},"证书类型",-1)),V("div",rt,[V("div",nt,[(j(!0),O(U,null,F(T(_).certType,(function(e){return j(),O("div",{class:E(["ssl-option-item min-w-[9rem]",{"is-active":e.value===T(_).certTypeAcitve,"is-disabled":e.disable,"!hidden":e.hidden}]),key:e.value,onClick:function(t){return ve(e.value,"certType",e)}},[V("div",lt,q(e.title),1),e.subscript?(j(),O("em",it,q(e.subscript),1)):M("",!0)],10,at)})),128))]),V("div",ut,[(j(!0),O(U,null,F(T(Q),(function(e){return j(),O("p",ot,q(e),1)})),256))])])]),V("div",st,[t[10]||(t[10]=V("div",{class:"ssl-label"},"购买年限",-1)),V("div",ct,[V("div",ft,[(j(!0),O(U,null,F(T(_).certLife,(function(e){return j(),O("div",{class:E(["ssl-option-item min-w-[9rem]",{"is-active":e.value===T(_).certLifeAcitve}]),key:e.value,onClick:function(t){return ve(e.value,"certLife",e)}},[V("div",pt,q(e.title),1),e.subscript?(j(),O("em",vt,q(e.subscript),1)):M("",!0)],10,dt)})),128))]),V("div",mt,[(j(!0),O(U,null,F(T(Z),(function(e){return j(),O("p",ht,q(e),1)})),256))])])]),V("div",yt,[t[11]||(t[11]=V("div",{class:"ssl-label"},"部署服务",-1)),V("div",gt,[V("div",bt,[(j(!0),O(U,null,F(T(_).certDeploy,(function(e){return j(),O("div",{class:E(["ssl-option-item min-w-[9rem]",{"is-active":e.value===T(_).certDeployAcitve}]),key:e.value,onClick:function(t){return ve(e.value,"certDeploy",e)}},[V("div",wt,q(e.title),1),e.subscript?(j(),O("em",_t,q(e.subscript),1)):M("",!0)],10,xt)})),128))]),V("div",kt,[(j(!0),O(U,null,F(T($),(function(e){return j(),O("p",Lt,q(e),1)})),256))])])])])]),V("div",{class:"ssl-info-view rounded-sm sticky bottom-0",ref_key:"sslApplyInfo",ref:b},[V("div",Ct,[V("div",St,[V("div",At,[t[12]||(t[12]=G(" 商品包含：")),V("span",Pt,q("".concat(T(J).productName," - 默认包含").concat(T(J).number,"个域名 ").concat(T(J).yearsPrice,"元/").concat(T(J).years,"年"))+q(T(J).extraNumber>0?"，额外超出".concat(T(J).extraNumber,"个域名").concat(T(J).extraPrice.toFixed(2),"元/").concat(T(J).years,"年"):""),1)]),V("div",Tt,[V("div",jt,[t[13]||(t[13]=V("span",null,"总计费用：",-1)),V("div",Ot,[V("span",Vt,q(T(J).totalPrice.toFixed(2)),1),V("span",null,"元/"+q(T(J).years)+"年",1),P(V("span",null,"（包含部署服务）",512),[[B,T(J).install]])])]),V("div",Nt,"原价"+q(T(J).originalPrice.toFixed(2))+"元/"+q(T(J).years)+"年",1)])]),V("div",Dt,[N(a,{size:"large",type:"primary",onClick:ge},{default:D((function(){return t[14]||(t[14]=[G("立即购买")])})),_:1})])])],512)])),[[l,T(h)],[l,"正在获取商业证书信息，请稍后...","title"]])}}}),It=f(Et,[["__scopeId","data-v-9d519852"]]),qt={class:"relative p-[1.6rem] w-[90%] mx-[auto]"},Bt={class:"text-[1.2rem] flex items-center"},Ut={class:"leading-7 mt-[.2rem] flex items-center"},Ft={class:"flex flex-row"},Mt=k({__name:"index",emits:["close"],setup:function(e,t){var r=t.emit,i=c(),u=r;we();var s=[{content:"注意：请勿将SSL证书用于非法网站，一经发现，吊销证书。",class:"text-danger"},{content:"申请之前，请确保域名已解析，如未解析会导致审核失败(包括根域名)。"},{content:"宝塔SSL申请的是免费版TrustAsia DV SSL CA - G5证书，仅支持单个域名申请。"},{content:"建议使用二级域名为www的域名申请证书,此时系统会默认赠送顶级域名为可选名称"},{content:"在未指定SSL默认站点时,未开启SSL的站点使用HTTPS会直接访问到已开启SSL的站点"},{content:'测试SSL申请注意事项及教程<a href="https://www.bt.cn/bbs/thread-33113-1-1.html" target="_blank" class="btlink"> 使用帮助</a>',isHtml:!0}],f=L(),m=L(),h=L({domain:"",orgName:"",orgRegion:"",orgCity:"",orgAddress:"",orgPhone:"",orgPostalCode:"",orgDivision:"总务"}),y=L({orgName:[{required:!0,message:"请输入个人/公司名称",trigger:["blur","change"]}],orgRegion:[{required:!0,message:"请输入所在省份",trigger:["blur","change"]}],orgCity:[{required:!0,message:"请输入所在市/县",trigger:["blur","change"]}],orgAddress:[{required:!0,message:"请输入个人/公司地址",trigger:["blur","change"]}],orgPhone:[{required:!0,message:"请输入手机号码",validator:function(e,t,r){d(t)?r():r(new Error("请输入正确的手机号码"))},trigger:["blur","change"]}],orgPostalCode:[{required:!0,message:"请输入邮政编码",validator:function(e,t,r){6===t.length?r():r(new Error("请输入正确的邮政编码"))},trigger:["blur","change"]}]}),g=function(){var e=o(n().mark((function e(){var t,r,o,s,c,f,d,p;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.value.validate();case 2:if(!e.sent){e.next=31;break}return e.prev=4,e.next=7,a({loading:"正在提交证书申请资料，请稍后...",request:ce(l({},h.value))});case 7:if(t=e.sent,r=t.status,o=t.data,s=t.msg,!r){e.next=23;break}return u("close"),i.success(o.msg||s||"申请成功"),e.next=16,a({loading:"正在验证证书申请状态，请稍后...",request:fe({partnerOrderId:o.partnerOrderId,siteName:h.value.domain})});case 16:c=e.sent,f=c.status,d=c.data,p=c.msg,f?"COMPLETED"==d.stateCode?i.success("验证成功！"):i.success("等待CA验证中，若长时间未能成功验证，请登录官网使用DNS方式重新申请..."):i.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,message:p,type:"error",duration:0,showClose:!0}),e.next=24;break;case 23:i.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,message:(null==o?void 0:o.msg)||s,type:"error",duration:0,showClose:!0});case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(4);case 29:return e.prev=29,e.finish(29);case 31:case"end":return e.stop()}}),e,null,[[4,26,29,31]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=o(n().mark((function e(){var t,r,a,l;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.prev=1,t=i.load("正在获取所有域名列表，请稍后..."),e.next=5,de();case 5:a=e.sent,l=a.data,f.value=l,null!==(r=f.value)&&void 0!==r&&null!==(r=r.data)&&void 0!==r&&r.length&&(h.value.domain=f.value.data[0].name),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(1);case 13:return e.prev=13,t&&t.close(),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,11,13,16]])})));return function(){return e.apply(this,arguments)}}();return S((function(){b()})),function(e,t){var r=p,n=H,a=W,l=z,i=X,u=Y,o=Q,c=R,d=Z,b=v;return j(),O("div",qt,[N(n,{type:"error",closable:!1},{title:D((function(){return[V("span",Bt,[t[9]||(t[9]=V("span",{class:"svgtofont-hint-confirm-icon !text-[2rem]"},null,-1)),V("div",Ut,[t[8]||(t[8]=G(" 提示：尊敬的用户您好，感谢您对宝塔免费证书的支持，由于证书签发机制的调整，原一年的免费证书，将缩短至90天。本调整将于2024年4月25日生效。请注意及时续签。 ")),N(r,{href:"https://www.trustasia.com/view-free-ssl-one-year-adjustment-announcement/",target:"_blank"},{default:D((function(){return t[7]||(t[7]=[G(" 查看详情 ")])})),_:1})])])]})),_:1}),N(d,{class:"mt-[1rem]",rules:T(y),ref_key:"applySslInfoForm",ref:m,model:T(h),"label-width":"100px"},{default:D((function(){return[N(a,{label:"证书信息"},{default:D((function(){return t[10]||(t[10]=[V("span",{class:"text-primary"}," TrustAsia TLS RSA CA(免费版)",-1)])})),_:1}),N(a,{label:"域名",prop:"domain"},{default:D((function(){return[N(i,{modelValue:T(h).domain,"onUpdate:modelValue":t[0]||(t[0]=function(e){return T(h).domain=e}),class:"!w-[36rem]",filterable:"",placeholder:"请选择"},{default:D((function(){var e;return[(j(!0),O(U,null,F(null===(e=T(f))||void 0===e?void 0:e.data,(function(e){return j(),J(l,{key:e.id,label:e.name,value:e.name},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),N(a,{label:"个人/公司名称",prop:"orgName"},{default:D((function(){return[N(o,{placement:"top-start",effect:"dark",width:200,trigger:"hover",content:"请输入个人/公司名称，必填项"},{reference:D((function(){return[N(u,{modelValue:T(h).orgName,"onUpdate:modelValue":t[1]||(t[1]=function(e){return T(h).orgName=e}),placeholder:"请输入个人/公司名称，必填项",class:"!w-[36rem]"},null,8,["modelValue"])]})),_:1})]})),_:1}),N(a,{label:"所在地区",prop:"orgRegion"},{default:D((function(){return[V("div",Ft,[N(o,{placement:"top-start",effect:"dark",width:200,trigger:"hover",content:"请输入所在省份，必填项"},{reference:D((function(){return[N(u,{modelValue:T(h).orgRegion,"onUpdate:modelValue":t[2]||(t[2]=function(e){return T(h).orgRegion=e}),placeholder:"请输入所在省份，必填项",class:"mr-[1.6rem] !w-[17rem]"},null,8,["modelValue"])]})),_:1}),N(o,{placement:"top-start",effect:"dark",width:200,trigger:"hover",content:"请输入所在市/县，必填项"},{reference:D((function(){return[N(u,{modelValue:T(h).orgCity,"onUpdate:modelValue":t[3]||(t[3]=function(e){return T(h).orgCity=e}),placeholder:"请输入所在市/县，必填项",class:"!w-[17.4rem]"},null,8,["modelValue"])]})),_:1})])]})),_:1}),N(a,{label:"地址",prop:"orgAddress"},{default:D((function(){return[N(o,{placement:"top-start",effect:"dark",width:200,trigger:"hover",content:"请输入个人/公司地址，必填项"},{reference:D((function(){return[N(u,{modelValue:T(h).orgAddress,"onUpdate:modelValue":t[4]||(t[4]=function(e){return T(h).orgAddress=e}),placeholder:"请输入个人/公司地址，必填项",class:"!w-[36rem]"},null,8,["modelValue"])]})),_:1})]})),_:1}),N(a,{label:"手机",prop:"orgPhone"},{default:D((function(){return[N(o,{placement:"top-start",effect:"dark",width:200,trigger:"hover",content:"请输入手机号码，必填项"},{reference:D((function(){return[N(u,{modelValue:T(h).orgPhone,"onUpdate:modelValue":t[5]||(t[5]=function(e){return T(h).orgPhone=e}),placeholder:"请输入手机号码，必填项",class:"!w-[36rem]"},null,8,["modelValue"])]})),_:1})]})),_:1}),N(a,{label:"邮政编码",prop:"orgPostalCode"},{default:D((function(){return[N(o,{placement:"top-start",effect:"dark",width:200,trigger:"hover",content:"请输入邮政编码，必填项"},{reference:D((function(){return[N(u,{modelValue:T(h).orgPostalCode,"onUpdate:modelValue":t[6]||(t[6]=function(e){return T(h).orgPostalCode=e}),placeholder:"请输入邮政编码，必填项",class:"!w-[36rem]"},null,8,["modelValue"])]})),_:1})]})),_:1}),N(a,{label:" "},{default:D((function(){return[N(c,{type:"primary",onClick:g},{default:D((function(){return t[11]||(t[11]=[G("申请证书")])})),_:1})]})),_:1})]})),_:1},8,["rules","model"]),N(b,{options:s,listStyle:"disc",class:"ml-[2rem] bottom-0"})])}}}),Gt={class:"py-[1.6rem] relative w-[90%] mx-[auto]"},Ht={key:0},Rt={class:"!max-h-[20rem] overflow-auto"},Jt=["title"],Wt={key:1},zt={class:"!max-h-[20rem] overflow-auto"},Xt=["title"],Yt={class:"p-[1.5rem]"},Qt={class:"ml-[.4rem] text-danger"},Zt={class:"max-h-[38rem] overflow-auto"},$t={key:0,class:"flex justify-end"},Kt=k({__name:"index",emits:["close"],setup:function(e,r){r.emit;var l=m().mainHeight,i=c(),u=we().siteInfo,s=he(),f=s.setApplyInfo,d=s.letApplyInfo,p=Ae().refs.isRefreshDomainConfigList,_=$({resource:"0",autoWildcard:!1,auth_to:!1,checkAll:!1,domain:[],checkList:[]}),k=L(!1);L([]);var C=L([]),I=$({}),B=L(!1),H=[{content:"注意：请勿将SSL证书用于非法网站",class:"text-danger"},{content:"如开启后无法使用HTTPS访问，请检查安全组是否正确放行443端口"},{content:"在DNS验证中，我们提供了多种自动化DNS-API，并提供了手动模式"},{content:"使用DNS接口申请证书可自动续期，手动模式下证书到期后需重新申请"}],Y=L([{label:"解析域名",prop:"domain"},{label:"记录值",prop:"auth_value",render:function(e,t){var r="dns"===I.auth_type?e.auth_value:e.file_path;return N("div",{class:"flex items-center"},[N("div",{class:"truncate w-[15rem]"},[r]),N("span",{class:"svgtofont-icon-copy ml-[4px] text-[#666] text-[1.6rem] w-[1.6rem] cursor-pointer",onClick:function(){return h({value:r})}},null)])}},{label:"类型",prop:"type",render:function(e,t){return"dns"===I.auth_type?N("span",null,[e.type]):N("div",{class:"flex items-center"},[N("div",{class:"truncate w-[15rem]"},[e.content]),N("span",{class:"svgtofont-icon-copy ml-[4px] text-[#666] text-[1.6rem] w-[1.6rem] cursor-pointer",onClick:function(){return h({value:e.content})}},null)])}},{label:"必需",prop:"must",width:100}]),ue=L([]),oe=L(!1),se=L(""),ce=L([{text:"解析域名需要一定时间来生效,完成所以上所有解析操作后,请等待1分钟后再点击验证按钮"},{text:""},{text:"若您使用的是宝塔云解析插件,阿里云DNS,DnsPod作为DNS,可使用DNS接口自动解析"}]),fe=function(){var e=o(n().mark((function e(){var t,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge();case 2:return t=e.sent,e.next=5,a({request:pe({index:I.index}),message:!1});case 5:r=e.sent,t._props.onCancel(),!0===r.status?(B.value=!1,ye(r,!0)):be(r,C.value,I);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),de=function(){var e=o(n().mark((function e(t){var r,a,l;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge();case 2:return r=e.sent,e.next=5,ve({index:I.index,domain:t.domain});case 5:a=e.sent,l=a.data,r._props.onCancel(),"valid"===l.status?i.success("验证成功"):!0===l.status?(B.value=!1,ye(l,!0)):be(l,t.data,I);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ye=function(){var e=o(n().mark((function e(t){var r,l,i,o,s=arguments;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.index,l=s.length>1&&void 0!==s[1]&&s[1],i=s.length>2&&void 0!==s[2]?s[2]:u.value.name,e.next=5,a({loading:"正在部署证书，请稍候...",request:me({index:r,siteName:i}),message:!1,data:{status:Boolean,msg:String}});case 5:o=e.sent,xe(o,l);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=L([]),Oe=L(""),Ve=L([]),Ne=L(null),De=L([]),Ee=L(!0),Ie=L(""),qe=L(!1),Be=function(){var e=o(n().mark((function e(){var t,r,a,l,u,o=arguments;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,r={site_id:"1"===_.resource?je.value.join(","):Oe.value},k.value=!0,t=i.load("正在获取域名列表，请稍后..."),e.next=7,Ce(r);case 7:if(a=e.sent,l=a.data,_.domain=l.map((function(e){return e.name})),Ve.value=l,"1"!==_.resource){e.next=16;break}return u=_.checkList.filter((function(e){return je.value.includes(e.site_id)})),e.next=15,ie();case 15:u.forEach((function(e){var t=Ve.value.find((function(t){return t.name===e.name}));t&&Ne.value.toggleRowSelection(t,!0)}));case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1);case 21:return e.prev=21,t&&t.close(),k.value=!1,e.finish(21);case 25:case"end":return e.stop()}}),e,null,[[1,18,21,25]])})));return function(){return e.apply(this,arguments)}}(),Ue=function(){var e=o(n().mark((function e(){var t,r,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=i.load("正在获取站点列表，请稍后..."),e.next=4,Se();case 4:if(r=e.sent,!(a=r.data).length){e.next=11;break}return De.value=a,Ee.value&&(je.value[0]=a[0].id,Oe.value=a[0].id,Ee.value=!1),e.next=11,Be();case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0);case 16:return e.prev=16,t&&t.close(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,13,16,19]])})));return function(){return e.apply(this,arguments)}}(),Fe=function(e){if(!e.row.name.includes(Ie.value)&&qe.value)return"!hidden"},Me=function(e){_.checkList=e},Ge=function(e){_.checkList=e},He=function(){var e=o(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Be();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Re=function(){var e=o(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"1"===_.resource?je.value=t:Oe.value=t,e.next=3,Be();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Je=function(e){qe.value=!0,Ie.value=e},We=function(){qe.value=!0},ze=function(){Ie.value="",qe.value=!1},Xe=function(e){return e.map((function(e){return e.name}))},Ye=function(){var e=o(n().mark((function e(){var t,r,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==_.checkList.length){e.next=3;break}return i.error("请选择一个域名"),e.abrupt("return");case 3:if("1"!==_.resource||!_.checkList.some((function(e){return 0===e.status}))||_.auth_to){e.next=6;break}return i.error("选中的域名存在未设置DNS接口配置"),e.abrupt("return");case 6:if("1"!==_.resource||!_.autoWildcard||!_.checkList.some((function(e){return-1!==e.name.indexOf("*")}))){e.next=9;break}return i.error("开启自动组合泛域名时不能选择泛域名"),e.abrupt("return");case 9:return t={domains:JSON.stringify(Xe(_.checkList)),auth_type:"1"==_.resource?"dns":"http",auth_to:JSON.stringify(Xe(_.checkList)),auto_wildcard:_.autoWildcard?"1":"0"},"1"==_.resource&&(t.auth_to=_.auth_to?"dns":JSON.stringify(Xe(_.checkList))),e.prev=11,e.next=14,ge();case 14:return r=e.sent,e.next=17,ke(t);case 17:a=e.sent,r._props.onCancel(),Qe(a.data,t),ce.value[1].text="可通过CMD命令来手动验证域名解析是否生效: nslookup -q=txt _acme-challenge.".concat(Xe(_.checkList)[0].replace("*.","")),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(11);case 26:case"end":return e.stop()}}),e,null,[[11,23]])})));return function(){return e.apply(this,arguments)}}(),Qe=function(e,t){if(!1===e.status&&e.hasOwnProperty("msg")&&y(e.msg))i.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,message:e.msg,type:"error",showClose:!0,duration:0});else if(!0!==e.status&&"pending"!==e.status&&void 0===(null==e?void 0:e.save_path))be(e,d.value.dnsTable,d.value.info);else{if("pending"===e.status&&"dns"===t.auth_type){ue.value=[];for(var r=0;r<e.auths.length;r++){var n=[],a=e.auths[r].domain.replace("*.","");n.push({domain:"_acme-challenge.".concat(a),type:"TXT",auth_value:e.auths[r].auth_value,must:"是",force:"是"}),n.push({domain:a,type:"CAA",auth_value:'0 issue "letsencrypt.org"',must:"否",force:"否"}),ue.value.push({domain:e.auths[r].domain,data:n})}return e.hasOwnProperty("error")?oe.value=e.error:oe.value=!1,f(e,t),void(B.value=!0)}Ze(e)}},Ze=function(){var e=o(n().mark((function e(r){var l,u,o,s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l=i.load("正在部署证书，请稍后..."),u=[],u="1"===_.resource?je.value.map((function(e){return De.value.find((function(t){return t.id===e}))})).filter((function(e){return e})).map((function(e){return{siteName:e.name}})):[{siteName:De.value.find((function(e){return e.id===Oe.value})).name}],e.next=6,a({request:Le({BatchInfo:JSON.stringify(u),privkey:r.private_key,fullchain:r.cert+r.root})});case 6:return o=e.sent,s={resultData:[].concat(t(o.data.faildList),t(o.data.successList)),resultTitle:"批量部署结果",resultColumn:[{label:"站点名称",prop:"siteName"},{label:"操作结果",render:function(e){return N("div",{class:e.status?"text-primary":"text-danger"},[e.status?"操作成功":N("span",{class:"flex items-center"},[G("操作失败，"),N(Q,{popperClass:"el-popover-shadow el-light-popover",trigger:"hover",placement:"top-start",enterable:!1,"open-delay":400,"close-delay":0},{default:function(){return[N("span",{class:"inline-block",innerHTML:e.error_msg||"暂无详情"},null)]},reference:function(){return N("span",{class:"text-primary cursor-pointer"},[G("详情")])}})])])}}]},e.next=10,Te(s);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0);case 15:return e.prev=15,l&&l.close(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,12,15,18]])})));return function(t){return e.apply(this,arguments)}}();return K(p,(function(e){e&&(Ue(),p.value=!1)}),{immediate:!0}),S((function(){p.value=!0})),function(e,t){var r=te,n=re,a=W,i=ne,u=z,o=g,s=X,c=b,f=ae,d=R,p=le,m=_e,h=Z,y=v,L=x,C=w,S=A("bt-loading");return j(),O("div",Gt,[N(h,{class:"mb-[2rem]"},{default:D((function(){return[N(a,{label:"验证方法"},{default:D((function(){return[N(n,{modelValue:T(_).resource,"onUpdate:modelValue":t[0]||(t[0]=function(e){return T(_).resource=e}),onChange:He},{default:D((function(){return[N(r,{label:"0",value:"0"},{default:D((function(){return t[5]||(t[5]=[G("文件验证")])})),_:1}),N(r,{label:"1",value:"1"},{default:D((function(){return t[6]||(t[6]=[G("DNS验证(支持通配符)")])})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),"1"==T(_).resource?(j(),O(U,{key:0},[N(a,{label:" ",class:"!mt-[-.3rem]"},{default:D((function(){return[N(i,{modelValue:T(_).auth_to,"onUpdate:modelValue":t[1]||(t[1]=function(e){return T(_).auth_to=e})},{default:D((function(){return t[7]||(t[7]=[G(" 手动解析")])})),_:1},8,["modelValue"])]})),_:1}),N(a,{label:" ",class:"!mt-[-.3rem] !mb-[2rem]"},{default:D((function(){return[N(i,{modelValue:T(_).autoWildcard,"onUpdate:modelValue":t[2]||(t[2]=function(e){return T(_).autoWildcard=e})},{default:D((function(){return t[8]||(t[8]=[G(" 自动组合泛域名")])})),_:1},8,["modelValue"]),t[9]||(t[9]=V("div",{class:"text-[1.2rem]"},"* 如需申请通配符域名请勾选此项，且不要在下方域名列表中选中泛域名",-1))]})),_:1})],64)):M("",!0),N(a,{label:"网站"},{default:D((function(){return[V("div",null,["1"==T(_).resource?(j(),O("div",Ht,[(j(),J(o,{multiple:!0,filterable:"","model-value":T(je),class:"mr-[.8rem] !w-[22rem]",key:T(_).resource,onChange:Re},{default:D((function(){return[V("div",Rt,[(j(!0),O(U,null,F(T(De),(function(e,t){return j(),J(u,{key:t,label:e.name,value:e.id},{default:D((function(){return[V("span",{class:"!w-[22rem] truncate",title:e.name,style:{float:"left"}},q(e.name),9,Jt)]})),_:2},1032,["label","value"])})),128))])]})),_:1},8,["model-value"]))])):(j(),O("div",Wt,[(j(),J(s,{filterable:"","model-value":T(Oe),class:"mr-[.8rem] !w-[22rem]",key:T(_).resource,onChange:Re},{default:D((function(){return[V("div",zt,[(j(!0),O(U,null,F(T(De),(function(e,t){return j(),J(u,{key:t,label:e.name,value:e.id},{default:D((function(){return[V("span",{class:"!w-[22rem] truncate",title:e.name,style:{float:"left"}},q(e.name),9,Xt)]})),_:2},1032,["label","value"])})),128))])]})),_:1},8,["model-value"]))])),t[10]||(t[10]=V("div",{class:"text-[1.2rem] mt-[.5rem]"},"* 根据网站筛选下方域名",-1))])]})),_:1}),N(a,{label:"域名"},{default:D((function(){return[V("div",{class:E(["w-[60rem] !relative border-[1px] border-[#ececec]",T(l)>1e3?"h-[52rem]":"h-[31rem]"])},[N(c,{class:"!absolute right-[1rem] top-[.7rem] z-99 !w-[200px]",modelValue:T(Ie),"onUpdate:modelValue":t[3]||(t[3]=function(e){return ee(Ie)?Ie.value=e:null}),onSearch:Je,onClear:ze,onBlur:We,placeholder:"搜索域名"},null,8,["modelValue"]),N(m,null,{content:D((function(){return[P((j(),J(p,{ref_key:"domainTable",ref:Ne,class:"!mb-[1rem] mt-[-1.2rem]","row-class-name":Fe,onSelectionChange:Me,onSelectAll:Ge,data:T(Ve),"max-height":T(l)<1e3?290:500,description:"列表为空"},{default:D((function(){return[N(f,{type:"selection",width:"35"}),N(f,{prop:"name",label:"域名"},{default:D((function(e){return[e.row.apply_ssl?(j(),J(T(Q),{key:0,placement:"top-start",trigger:"hover",offset:-100},{reference:D((function(){return[V("span",null,q(e.row.name),1)]})),default:D((function(){return[t[11]||(t[11]=V("div",{class:"flex flex-col"},[V("span",null,"Let's Encrypt证书不支持申请IP证书"),V("span",null,"请选择【商用证书】的多域名SSL证书申请")],-1))]})),_:2},1024)):M("",!0)]})),_:1}),N(f,{align:"right"},{default:D((function(e){return["1"!==T(_).resource||0!==e.row.status||T(_).auth_to?M("",!0):(j(),J(d,{key:0,size:"small",type:"primary",class:"ml-auto",onClick:function(t){return T(Pe)(e.row)}},{default:D((function(){return t[12]||(t[12]=[G("配置DNS")])})),_:2},1032,["onClick"]))]})),_:1})]})),_:1},8,["data","max-height"])),[[S,T(k)],[S,"正在加载域名列表，请稍后...","title"]])]})),_:1})],2)]})),_:1}),N(a,{label:" "},{default:D((function(){return[N(d,{type:"primary",onClick:Ye},{default:D((function(){return t[13]||(t[13]=[G("申请证书")])})),_:1})]})),_:1})]})),_:1}),N(y,{options:H,class:"pl-2rem"}),N(C,{modelValue:T(B),"onUpdate:modelValue":t[4]||(t[4]=function(e){return ee(B)?B.value=e:null}),area:70,title:"手动".concat("dns"===T(I).auth_type?"解析TXT记录":"创建验证文件")},{default:D((function(){return[V("div",Yt,[t[16]||(t[16]=G(" 请按以下列表做TXT解析: ")),V("span",Qt,q(T(se)),1),N(m,null,{content:D((function(){return[V("div",Zt,[(j(!0),O(U,null,F(T(ue),(function(e,r){return j(),O(U,null,[e.data.length?(j(),O("div",{key:r},[V("span",null,"验证域名："+q(e.domain),1),N(L,{class:"my-[1rem]",column:T(Y),data:e.data},null,8,["column","data"]),T(oe)?(j(),O("div",$t,[N(d,{type:"default",onClick:function(t){return de(e)}},{default:D((function(){return t[14]||(t[14]=[G("验证")])})),_:2},1032,["onClick"])])):M("",!0)])):M("",!0)],64)})),256))])]})),"footer-right":D((function(){return[T(oe)?M("",!0):(j(),J(d,{key:0,type:"default",onClick:fe},{default:D((function(){return t[15]||(t[15]=[G("验证")])})),_:1}))]})),_:1}),N(y,{list:T(ce),listStyle:"disc",class:"ml-[20px]"},null,8,["list"])])]})),_:1},8,["modelValue","title"])])}}}),er={class:"p-[16px]"};e("default",k({__name:"index",setup:function(e){var t=ue("sslCertificate"),r=L([{label:"商用SSL证书",name:"sslCertificate",render:function(){return N(It,null,null)}},{label:"宝塔证书",name:"testCertificate",render:function(){return N(Mt,null,null)}},{label:"Let's Encrypt",name:"EncryptCertificate",render:function(){return N(Kt,null,null)}}]);return function(e,n){var a=_;return j(),O("div",er,[N(a,{type:"card",modelValue:T(t),"onUpdate:modelValue":n[0]||(n[0]=function(e){return ee(t)?t.value=e:null}),options:T(r)},null,8,["modelValue","options"])])}}}))}}}))}();
