import{D as e,aU as a,aO as l,a4 as t,bR as r,j as o,O as s}from"./utils-lib.js?v=1734676359";import{c as d,i,e as u,o as m,k as n,J as p,x as c,q as h,p as f,y as v,l as y,aX as b,I as g,A as V,ah as _,a7 as j,ag as U}from"./base-lib.js?v=1734676359";import{r as w,l as x,m as A,n as k,o as z}from"./useController11.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./site.js?v=1734676359";import"./column.js?v=1734676359";import"./index91.js?v=1734676359";import"./useStore7.js?v=1734676359";const Z={class:"flex items-center"},R={class:"flex items-center justify-center checked-button"},C=d({__name:"add-redirect",setup(d,{expose:C}){const L=e=>{E.value.redirectdomain=k.value.map((e=>e.name))},$=e=>{E.value.redirectdomain=[]},{BtForm:q,param:E,submit:O}=e({data:()=>{let e={type:!0,holdpath:!0,domainorpath:"domain",redirecttype:"301",redirectpath:"",tourl:"http://",redirectdomain:[],redirectname:""};if(w.value){const{type:a,holdpath:l,...t}=w.value;Object.assign(e,{type:1===a,holdpath:1===l,...t})}return e},options:e=>i((()=>[{type:"custom",render:()=>u(l,{label:"开启重定向"},{default:()=>[u("div",{class:"flex items-center"},[u(a,{modelValue:e.value.type,"onUpdate:modelValue":a=>e.value.type=a},null),u(l,{label:"保留URL参数",style:"margin-left: 4rem;"},{default:()=>[u(a,{modelValue:e.value.holdpath,"onUpdate:modelValue":a=>e.value.holdpath=a},null)]})])]})},{type:"custom",render:()=>u(l,{label:"重定向类型"},{default:()=>[u("div",{class:"flex items-center"},[u(t,{modelValue:e.value.domainorpath,"onUpdate:modelValue":a=>e.value.domainorpath=a,options:[{label:"域名",value:"domain"},{label:"路径",value:"path"}],style:"width: 15rem;"},null),u(l,{label:"重定向方式"},{default:()=>[u(t,{modelValue:e.value.redirecttype,"onUpdate:modelValue":a=>e.value.redirecttype=a,options:[{label:"301（永久重定向）",value:"301"},{label:"302（临时重定向）",value:"302"}],style:"width: 15rem;"},null)]})])]})},{type:"slots",key:"domain",rules:{tourl:[r({message:"请输入目标URL",trigger:"blur"}),{validator:(e,a,l)=>{if("http://"===a||"https://"===a)l(new Error("请输入目标URL"));else{new RegExp("^((https|http|ftp|rtsp|mms)?://)?(([0-9a-zA-Z_!~*'().&=+$%-]+: )?[0-9a-zA-Z_!~*'().&=+$%-]+@)?(([0-9]{1,3}\\.){3}[0-9]{1,3}|([0-9a-zA-Z_!~*'()-]+\\.)*([0-9a-zA-Z][0-9a-zA-Z-]{0,61})?[0-9a-zA-Z]\\.[a-zA-Z]{2,6})(:[0-9]{1,4})?((/?)|(/[0-9a-zA-Z_!~*'().;?:@&=+$,%#-]+)+/?)$").test(a)?l():l(new Error("请输入正确的URL"))}},trigger:["change","input"]}],redirectdomain:[{required:!0,message:"请选择重定向域名",trigger:"change"}],redirectpath:[{required:!0,message:"请输入重定向路径",trigger:"blur"}]}}])),submit:async(e,a)=>(await a(),await x(e.value))});return m(A),C({onConfirm:O}),(e,a)=>{const l=V,t=U,r=_,d=o,i=j,m=s;return n(),p(f(q),{class:"p-[2rem]"},{domain:c((()=>[u(i,{prop:"domain"===f(E).domainorpath?"redirectdomain":"redirectpath",label:"重定向".concat("domain"===f(E).domainorpath?"域名":"路径")},{default:c((()=>[h("div",Z,["domain"===f(E).domainorpath?(n(),p(r,{key:0,"collapse-tags":"",multiple:"",style:{width:"15rem"},modelValue:f(E).redirectdomain,"onUpdate:modelValue":a[0]||(a[0]=e=>f(E).redirectdomain=e)},{header:c((()=>[h("div",R,[u(l,{onClick:L,type:"default"},{default:c((()=>a[3]||(a[3]=[v("全选")]))),_:1}),u(l,{onClick:$,type:"default"},{default:c((()=>a[4]||(a[4]=[v("取消全选")]))),_:1})])])),default:c((()=>[(n(!0),y(g,null,b(f(k),((e,a)=>(n(),p(t,{key:a,value:e.name,label:e.name},null,8,["value","label"])))),128))])),_:1},8,["modelValue"])):(n(),p(d,{key:1,width:"15rem",modelValue:f(E).redirectpath,"onUpdate:modelValue":a[1]||(a[1]=e=>f(E).redirectpath=e),placeholder:"如：/b.com"},null,8,["modelValue"])),u(i,{label:"目标url",prop:"tourl"},{default:c((()=>[u(d,{modelValue:f(E).tourl,"onUpdate:modelValue":a[2]||(a[2]=e=>f(E).tourl=e),width:"24rem"},null,8,["modelValue"])])),_:1})])])),_:1},8,["prop","label"]),u(i,null,{default:c((()=>[u(m,{options:f(z),"list-style":"disc"},null,8,["options"])])),_:1})])),_:1})}}});export{C as default};
