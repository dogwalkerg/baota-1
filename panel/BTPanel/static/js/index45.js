import{c as e,r as t,t as a,o as l,p as s,k as o,l as n,q as i,v as r,z as c,s as d,i as u,J as m,x as p,e as v,K as f,F as y,y as g,d as h,aw as x,bq as w,aS as b,w as _,g as k,b4 as S,n as C,I,aX as T,br as P,bs as L,h as B,M as D,aj as E,B as R,H as j,C as O,X as A,bt as M,bu as F,A as V,aT as H,b5 as U,aN as z,a1 as N,G as q,D as G,b7 as $,bv as K,b2 as W,b3 as J,bw as Q,aE as Z,bx as X,by as Y,R as ee,bn as te,j as ae,L as le,bz as se,P as oe,at as ne,av as ie,T as re,U as ce,ah as de,ay as ue,aA as me,ag as pe}from"./base-lib.js?v=1734676359";import{u as ve,G as fe,bi as ye,l as ge,H as he,bj as xe,e as we,c as be,n as _e,o as ke,T as Se,af as Ce,K as Ie,a2 as Te,bk as Pe,bl as Le,a6 as Be,t as De,ai as Ee,r as Re,bm as je,p as Oe,bn as Ae,k as Me,a9 as Fe,ah as Ve,bo as He,b3 as Ue,bp as ze,M as Ne,bq as qe,S as Ge,br as $e,i as Ke,bs as We,a3 as Je,R as Qe,d as Ze,h as Xe,g as Ye}from"./utils-lib.js?v=1734676359";import{g as et,e as tt,l as at,p as lt,i as st,f as ot,h as nt}from"./validator.js?v=1734676359";import{_ as it}from"./index95.js?v=1734676359";import{H as rt}from"./store3.js?v=1734676359";import{H as ct}from"./store4.js?v=1734676359";import{b as dt,u as ut,o as mt}from"./column.js?v=1734676359";import{c as pt}from"./hooks.js?v=1734676359";const vt={class:"icon-end-time voucher-logo"},ft={class:"ml-[4px] font-bold text-[#ef9f00]"},yt=we(e({__name:"index",setup(e){const d=t([]),{payment:u}=ve(),{voucherOpenTime:m,isGetCoupon:p}=a(u.value),v=async()=>{fe({request:ye(),data:[Array,d]})},f=()=>{ge({area:40,component:()=>he((()=>import("./index263.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),customClass:"voucherFetchView",compData:{isCoupon:d.value,isHome:!0}})};return l((()=>{const e=Number(sessionStorage.getItem("voucherOpenTime"));if(-100!==e){if(e){e-Math.floor(Date.now()/1e3)<=0&&(p.value=!0,sessionStorage.removeItem("voucherOpenTime"),(async()=>{let e=new Date((new Date).toLocaleDateString()).getTime()+6048e5-1;e=Math.floor(e>0?e/1e3:e),fe({request:xe({limit_time:e})}),p.value=!0})())}et({promises:[v],delay:3e3})}})),(e,t)=>s(d).length>0&&!s(p)?(o(),n("div",{key:0,class:"flex items-center px-[1rem] py-[.4rem] mr-[8px] rounded-[2px] recom-bg",onClick:f},[i("span",vt,[i("span",ft,"您有"+r(s(d).length)+"个优惠券待领取",1)])])):c("",!0)}}),[["__scopeId","data-v-af5f04cc"]]),gt={class:"home-header-box flex-1"},ht={class:"mr-[16px] flex items-center"},xt={class:"user-phone"},wt={class:"cursor-pointer flex items-center"},bt={class:"border-dashed border-b-[1px]"},_t={class:"block"},kt={class:"home-header-box"},St=we(e({__name:"index",setup(e){const t=h((()=>he((()=>import("./index264.js?v=1734676359")),__vite__mapDeps([]),import.meta.url))),a=rt(),{bindUser:l,systemInfo:n,panelInfo:_,panelVersion:k}=d(a),S=u((()=>{var e;return n.value.name?null==(e=n.value.name.split(" ")[0])?void 0:e.toLowerCase():""}));return(e,d)=>{const u=x,h=yt,C=it,I=be,T=w,P=b;return o(),m(P,{class:"reset-card-header module-box","body-class":"flex h-[52px] items-center p-0"},{default:p((()=>[i("div",gt,[v(u,{width:"328","popper-class":"el-popover-shadow"},{reference:p((()=>[i("div",ht,[d[6]||(d[6]=i("i",{class:"svgtofont-icon-user mr-[4px] !text-[16px]"},null,-1)),i("span",xt,r(s(l)||"获取中"),1)])])),default:p((()=>[(o(),m(f(s(t))))])),_:1}),i("div",{class:"mr-[16px] inline-flex items-center",onClick:d[0]||(d[0]=e=>s(a).jumpRouter("alarm"))},d[7]||(d[7]=[i("i",{class:"svgtofont-alarm-settings !mr-4px !text-[16px]"},null,-1),i("span",{class:"bt-link"},"告警",-1)])),i("div",{class:"mr-[16px] inline-flex items-center",onClick:d[1]||(d[1]=e=>s(tt)({type:7,isNoRate:!0,isCard:!0}))},d[8]||(d[8]=[i("i",{class:"svgtofont-desired !mr-4px !text-[16px]"},null,-1),i("span",{class:"bt-link"},"需求反馈",-1)])),v(u,{width:"250","popper-class":"el-popover-shadow "},{reference:p((()=>[i("span",wt,[i("i",{class:y("mr-4px !text-[16px] svgtofont-icon-"+s(S))},null,2),i("span",bt," 系统："+r(s(n).name||"获取中"),1)])])),default:p((()=>[i("span",null,[i("span",null,"系统："+r(s(n).simpleName||"获取中"),1),i("span",_t," 持续运行："+r(s(_).runningDays||"获取中"),1)])])),_:1})]),i("div",kt,[v(h),v(C,{"is-home":!0,"disable-pro":!0}),i("span",{class:"versionInfo mr-[16px] bt-hover-link cursor-pointer",onClick:d[2]||(d[2]=(...e)=>s(a).histVersionInfoDialog&&s(a).histVersionInfoDialog(...e))},r((s(_).isBeta?"Beta ":"")+(s(k)||"获取中")),1),s(_).isBeta?(o(),m(I,{key:0,class:"mr-[16px] reset-link bug-feedback",href:"https://www.bt.cn/bbs/forum-39-1.html"},{default:p((()=>d[9]||(d[9]=[g("[找Bug奖宝塔币]")]))),_:1})):c("",!0),v(T,{class:"mr-[16px]","is-dot":"",hidden:!s(_).isUpgrade},{default:p((()=>[i("span",{class:"bt-link",title:"点击获取最新版面板程序",onClick:d[3]||(d[3]=(...e)=>s(a).updateVersionDialog&&s(a).updateVersionDialog(...e))},"更新")])),_:1},8,["hidden"]),i("span",{class:"bt-link mr-[16px]",onClick:d[4]||(d[4]=(...e)=>s(a).onRepair&&s(a).onRepair(...e)),title:"修复面板会获取最新的面板代码程序，包含bug修复"},"修复"),i("span",{class:"bt-link",onClick:d[5]||(d[5]=(...e)=>s(a).restartSeverDialog&&s(a).restartSeverDialog(...e)),title:"点击可选择重启面板或重启服务器"},"重启")])])),_:1})}}}),[["__scopeId","data-v-62953b7b"]]);const Ct=new class{constructor(){this.watchList=new Map;const e=ct();this.refs=d(e),this.useHomeData()}useRunCallback(){for(const[e,t]of this.watchList.entries())e in this.refs&&t(this.refs[e].value)}async useHomeData(){this.stopWatching=_(this.refs.isRefreshData,(e=>{e&&(this.useRunCallback(),this.refs.isRefreshData.value=!1)}),{immediate:!0})}useSetCallback(e,t){this.watchList.set(e,t)}stopUseHomeData(){this.stopWatching&&this.stopWatching()}unload(){this.watchList.size>0&&this.watchList.clear(),this.stopUseHomeData()}},It=(e={})=>_e.post("plugin/get_soft_list",{data:e,check:"object"}),Tt=e=>_e.post("plugin?action=add_index",{data:{sName:e},customType:"model",check:"msg"}),Pt=e=>_e.post("plugin?action=remove_index",{data:{sName:e},customType:"model",check:"msg"}),Lt=(e={})=>_e.post("warning/get_list",{data:e}),Bt=()=>_e.post("system/ReMemory"),Dt=()=>_e.post("warning/get_scan_bar",{check:"object"}),Et=()=>_e.post("safe/security/get_repair_bar",{check:"object",customType:"model"}),Rt=e=>_e.post("panel/overview/AddOverview",{data:e,check:"msg",customType:"model"}),jt=e=>_e.post("panel/overview/SetOverview",{data:e,check:"msg",customType:"model"}),Ot=e=>_e.post("panel/overview/DelOverview",{data:e,check:"msg",customType:"model"}),At=()=>_e.post("warning/get_tmp_result"),Mt=()=>_e.post("warning/kill_get_list"),Ft=()=>_e.post("/safe/exportreport/get_pdf",{check:"object",customType:"model"}),Vt=k("NOTICE-STORE",(()=>{const{panel:e}=ve(),a=S(),l=t({memRealUsed:0,memTotal:0,memFree:0,memShared:0,memAvailable:0,memBuffers:0,memCached:0}),s=t([]),o=t(!1),n=t(!1),i=t(!1),r=t(!1),c=t(!1),d=t([]),m=t([]),p=u((()=>8888===e.value.port)),v=u((()=>o.value||n.value||p.value||i.value||r.value||c.value));Ct.useSetCallback("memory",(e=>{l.value=e;const{memTotal:t,memRealUsed:a}=l.value,s=t-a;o.value=s<64})),Ct.useSetCallback("diskUsage",(e=>{m.value=e,f()})),Ct.useSetCallback("disk",(e=>{s.value=e;s.value.some((e=>parseInt(e.data.inodes[3])>90))?(c.value=!0,d.value=[],d.value=s.value.map((e=>{if(parseInt(e.data.inodes[3])>90)return e.data.path}))):c.value=!1}));const f=()=>{m.value&&Number(m.value[2])<524288&&(r.value=!0)};return{noticeStatus:v,memoryStatus:o,usernameStatus:n,portStatus:p,httpsStatus:i,diskFullStatus:r,inodeFullStatus:c,inodePath:d,detectingHttps:()=>{i.value=!(window.location.protocol.indexOf("https")>=0)},checkFullDisk:f,onClear:async()=>{await ke({type:"calc",title:"释放内存",content:"若您的站点处于有大量访问的状态，释放内存可能带来无法预测的后果，您确定现在就释放内存吗？"}),fe({loading:"正在释放内存，请稍后...",request:Bt(),message:!0})},editPortInfo:()=>{window.localStorage.setItem("config-dialog","port"),a.push({path:"/config/whole"})},jumpConfig:()=>{window.localStorage.setItem("config-dialog","ssl"),a.push({path:"/config/whole"})},jumpFiles:()=>{a.push({path:"/files"})}}})),Ht={class:"mr-16px"},Ut=["title"],zt=we(e({__name:"index",setup(e){const t=Vt(),{noticeStatus:a,memoryStatus:u,usernameStatus:f,portStatus:y,httpsStatus:h,diskFullStatus:x,inodeFullStatus:w,inodePath:_}=d(t);return l((()=>{t.detectingHttps(),t.checkFullDisk(),C((()=>{const e=setInterval((async()=>{if(window.$extension){const t=await window.$extension();Se(t.extensionElement)&&!t.extensionElement&&clearTimeout(e),t.extensionElement&&(t.extensionElement(),clearTimeout(e))}}),1e3)}))})),(e,l)=>{const d=be,k=P,S=L,C=b;return o(),n("div",null,[s(a)?(o(),m(C,{key:0,shadow:"always","body-style":{padding:"0",display:"flex",minHeight:"5.2rem"},class:"module-box min-h-[5.2rem]"},{default:p((()=>[v(S,{class:"playTips",height:"5.6rem",direction:"vertical"},{default:p((()=>[s(u)?(o(),m(k,{key:1},{default:p((()=>[l[3]||(l[3]=i("i",{class:"svgtofont-el-warning-filled mr-[8px] text-[1.8rem]"},null,-1)),l[4]||(l[4]=i("span",{class:"mr-[16px]"},"当前可用物理内存小于64M，这可能导致MySQL自动停止，站点502等错误，请尝试释放内存！",-1)),v(d,{type:"info",title:"该风险不可忽略，请尽快处理",class:"align-middle mr-[16px]","font-size":"1.4rem",disabled:!0,href:"javascript:;"},{default:p((()=>l[1]||(l[1]=[g("[ 不可忽略 ]")]))),_:1}),v(d,{onClick:s(t).onClear,class:"align-middle flex items-center","font-size":"1.4rem"},{default:p((()=>l[2]||(l[2]=[g("[ 立即清理 ]")]))),_:1},8,["onClick"])])),_:1})):c("",!0),s(f)?(o(),m(k,{key:2},{default:p((()=>[l[7]||(l[7]=i("i",{class:"svgtofont-el-warning-filled mr-[8px] text-[1.8rem]"},null,-1)),l[8]||(l[8]=i("div",{class:"mr-[16px]"},"当前面板用户为admin,这可能为面板安全带来风险！",-1)),v(d,{type:"info",title:"该风险不可忽略，请尽快处理",class:"align-middle mr-[16px]","font-size":"1.4rem",disabled:!0,href:"javascript:;"},{default:p((()=>l[5]||(l[5]=[g("[ 不可忽略 ]")]))),_:1}),v(d,{onClick:s(at),class:"align-middle flex items-center","font-size":"1.4rem"},{default:p((()=>l[6]||(l[6]=[g("[ 立即修复 ] ")]))),_:1},8,["onClick"])])),_:1})):c("",!0),s(y)?(o(),m(k,{key:3},{default:p((()=>[l[11]||(l[11]=i("i",{class:"svgtofont-el-warning-filled mr-[8px] text-[1.8rem]"},null,-1)),l[12]||(l[12]=i("div",{class:"mr-[16px]"},"当前面板使用的是默认端口[8888]，可能存在入侵风险，请到面板设置中修改面板端口！",-1)),v(d,{type:"info",title:"该风险不可忽略，请尽快处理",class:"align-middle mr-[16px]","font-size":"1.4rem",disabled:!0,href:"javascript:;"},{default:p((()=>l[9]||(l[9]=[g("[ 不可忽略 ]")]))),_:1}),v(d,{onClick:s(t).editPortInfo,target:"_self",class:"align-middle flex items-center","font-size":"1.4rem"},{default:p((()=>l[10]||(l[10]=[g("[ 立即修复 ] ")]))),_:1},8,["onClick"])])),_:1})):c("",!0),s(h)?(o(),m(k,{key:4},{default:p((()=>[l[15]||(l[15]=i("i",{class:"svgtofont-el-warning-filled mr-[8px] text-[1.8rem]"},null,-1)),l[16]||(l[16]=i("div",{class:"mr-[16px]"},"警告！当前面板使用HTTP访问，可能存在被窃取敏感信息风险，请立即开启【面板SSL】。",-1)),v(d,{type:"info",title:"该风险不可忽略，请尽快处理",class:"align-middle mr-[16px]",disabled:!0,"font-size":"1.4rem",href:"javascript:;"},{default:p((()=>l[13]||(l[13]=[g("[ 不可忽略 ]")]))),_:1}),v(d,{onClick:s(t).jumpConfig,class:"align-middle flex items-center","font-size":"1.4rem"},{default:p((()=>l[14]||(l[14]=[g("[ 立即处理 ]")]))),_:1},8,["onClick"])])),_:1})):c("",!0),s(x)?(o(),m(k,{key:5},{default:p((()=>[l[18]||(l[18]=i("i",{class:"svgtofont-el-warning-filled mr-8px text-[1.8rem]"},null,-1)),l[19]||(l[19]=i("div",{class:"mr-16px"},"警告：检测到磁盘可用空间不足，无法访问面板数据库，请前往文件管理清理",-1)),v(d,{onClick:s(t).jumpFiles,class:"align-middle"},{default:p((()=>l[17]||(l[17]=[g("[ 立即前往 ]")]))),_:1},8,["onClick"])])),_:1})):c("",!0),s(w)?(o(),m(k,{key:6},{default:p((()=>[l[22]||(l[22]=i("i",{class:"svgtofont-el-warning-filled mr-8px text-[1.8rem]"},null,-1)),i("div",Ht,[l[20]||(l[20]=g(" 警告：检测到磁盘【 ")),i("div",{class:"inline-block",title:s(_).join("\n")},[(o(!0),n(I,null,T(s(_),((e,t)=>(o(),n("span",{key:t},r(e),1)))),128))],8,Ut),l[21]||(l[21]=g(" 】Inode使用率超过90%，可用空间不足，请前往文件管理清理 "))]),i("span",{onClick:l[0]||(l[0]=(...e)=>s(t).jumpFiles&&s(t).jumpFiles(...e)),class:"align-middle bt-link"},"[ 立即前往 ]")])),_:1})):c("",!0)])),_:1})])),_:1})):c("",!0),l[23]||(l[23]=i("div",{id:"extension"},null,-1))])}}}),[["__scopeId","data-v-845ee444"]]),Nt=k("HOME-STATE-STORE",(()=>{const e=ct(),{payment:l,push:s}=ve(),{authType:o}=a(l.value),n=t([]),i=t("loadPopover"),r=t(!1),c=t(!0),d=t(null);let u=!1;const m=t([]),p=t({one:0,max:0,five:0,fifteen:0}),f=t({occupy:"",framework:"",coresOccupy:[0,0,0],cpuNumber:0,logicCores:0,cores:0,process:[0,0]}),y=t({memRealUsed:0,memTotal:0,memFree:0,memShared:0,memAvailable:0,memBuffers:0,memCached:0}),g=t([]),h=B({memory:"success",cpu:"success",load:"success"}),x=t(null),w=t(!1),b=t(null),_=t(null),k=t(null),S=new Te,C=B({title:"负载状态",range:0}),I=B({title:"CPU使用率",range:0,desc:"获取中"}),T=B({title:"内存使用率",range:0,desc:"0 / 0(MB)",disabled:!1});Ct.useSetCallback("cpuTimes",(e=>{g.value=[[{title:"用户级别的 CPU 时间百分比",name:"user",value:e.user},{title:"运行带有 “nice” 优先级的进程时使用的 CPU 时间百分比",name:"nice",value:e.nice}],[{title:"系统级别的 CPU 时间百分比",name:"system",value:e.system},{title:"空闲状态的 CPU 时间百分比",name:"idle",value:e.idle}],[{title:"等待 I/O 操作完成的 CPU 时间百分比",name:"iowait",value:e.iowait},{title:"处理硬件中断的 CPU 时间百分比",name:"irq",value:e.irq}],[{title:"处理软件中断的 CPU 时间百分比",name:"softirq",value:e.softirq},{title:"当前 CPU 被其他虚拟机偷取的CPU时间百分比",name:"steal",value:e.steal}],[{title:"运行虚拟机时使用的 CPU 时间百分比",name:"guest",value:e.guest},{title:"运行带有 “nice” 优先级的虚拟机时使用的CPU时间百分比",name:"guest_nice",value:e.guest_nice}]]})),Ct.useSetCallback("load",(e=>{p.value=e,P()})),Ct.useSetCallback("disk",(e=>{m.value=e}));const P=()=>{const{one:e,max:t}=p.value,a=Math.round(e/t*100),l=a>100?100:a;C.range=l<0?0:l,h.load=l>80?"warning":l>90?"danger":"success"};Ct.useSetCallback("cpu",(e=>{f.value=e,L(),(()=>{const{cpuNumber:e,logicCores:t,cores:a}=f.value;I.desc=e&&t&&a?"".concat(a," 核心"):"获取中"})(),D()}));const L=()=>{const{occupy:e}=f.value;I.range=parseFloat(e)||0,I.range>80?h.cpu="warning":I.range>90?h.cpu="danger":h.cpu="success"},D=()=>{let e=[],t=0,a="核心 ",l="";for(let s=0;s<f.value.coresOccupy.length;s++)if(t<2){if(t++,s===f.value.coresOccupy.length-1){a+="".concat(s+1," "),l+="".concat(parseFloat(f.value.coresOccupy[s]).toFixed(1),"% "),e.push({name:a,value:l});break}a+="".concat(s+1," / "),l+="".concat(parseFloat(f.value.coresOccupy[s]).toFixed(1),"% / "),f.value.coresOccupy.length%2==1&&s===f.value.coresOccupy.length-1&&e.push({name:a,value:l})}else t=0,a+="".concat(s+1),l+="".concat(parseFloat(f.value.coresOccupy[s]).toFixed(1),"%"),e.push({name:a,value:l}),a="核心 ",l="";n.value=e};Ct.useSetCallback("memory",(e=>{y.value=e,E()}));const E=()=>{const{memRealUsed:e,memTotal:t}=y.value;if(r.value)return;const a=Math.round(e/t*1e3)/10;h.memory=a>=80?"warning":a>=90?"danger":"success",T.range=a,T.desc="".concat(e," / ").concat(t,"(MB)")},R=async()=>{try{(()=>{let e="";r.value=!0,c.value=!1,T.disabled=!0,d.value=setInterval((()=>{let{range:t}=T;e="..."===e?".":"".concat(e,"."),T.rangeText="释放中".concat(e),t>0&&(t-=.2*t),t=Number(t.toFixed(2)),t<0&&(t=0),T.range=t}),400)})();const{data:e}=await Bt();(e=>{d.value&&clearInterval(d.value);const t=e.memRealUsed-e.memRealUsed,a=Be(t)?t:De(t);T.range=1,T.rangeText="已释放\n ".concat(a),setTimeout((()=>{r.value=!1,T.rangeText="",T.disabled=!1,c.value=!0}),1500)})(e)}catch(e){}},j=t(),O=B({name:"",path:""}),A=B({loading:!0,list:[],total:0}),M=e=>{U(!0,e)},F=async e=>{await ke({title:"删除告警任务",isHtml:!0,icon:"warning-filled",iconColor:"warning",content:"删除后将不再告警此条任务，是否继续？"}),await fe({loading:"正在删除告警任务，请稍后...",request:Pe({id:e.id,name:e.module_type}),message:!0,success:z})},V=[{title:"钉钉",type:"dingding"},{title:"飞书",type:"feishu"},{title:"邮箱",type:"mail"},{title:"企业微信",type:"weixin"},{title:"微信公众号",type:"wx_account"},{title:"短信通知",type:"sms"},{title:"自定义消息通道",type:"webhook"}],H=t([{label:"标题",prop:"title"},dt({event:async e=>{const t=e.status,a=e.title;await ke({title:(t?"停用":"启用")+"告警任务【"+a+"】",content:"".concat(t?"停用":"启用","选中的告警任务后，该告警任务将").concat(t?"停止":"开启","告警，是否继续操作？"),icon:"warning-filled"}),await fe({loading:"正在设置告警状态，请稍后...",request:Le({name:e.module_type,id:e.id,status:t?0:1}),message:!0}),await z()},width:80,data:["已停用","已启用"]}),{label:"告警方式",width:140,showOverflowTooltip:!0,render:e=>{let t=[];return e.sender.forEach((e=>{const a=s.value.config.find((t=>t.id===e));if(null==a?void 0:a.sender_type){const e=V.find((e=>e.type===a.sender_type));(null==e?void 0:e.title)&&t.push("sms"===a.sender_type?e.title:a.data.title?a.data.title+"(".concat(e.title,")"):e.title)}})),v("span",{class:"truncate"},[t.join("、")])}},{label:"告警条件",render:e=>{const t=e.view_msg.match(/<span>(.*?)<\/span>/);return t?t[1]:""}},ut([{title:"编辑",onClick:M},{title:"删除",onClick:F}])]),U=(e,t)=>{ge({title:"进程告警",area:[80],btn:["保存","取消"],component:()=>he((()=>import("./index98.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),compData:{isEdit:e,row:t||{},diyProcessTemplate:!0,diyProcessTemplateTid:["60","61","62"],onRefresh:z}})},z=async()=>{var e;const{data:t}=await Ie();A.list=(null==(e=null==t?void 0:t.data)?void 0:e.filter((e=>["60","61","62"].includes(e.template_id))))||[],A.list.length>0||U(!1),A.loading=!1};return{cpuCoreDesc:n,statePopoverTimr:x,loadInfo:C,loadPopover:b,processAlarmShow:w,tagsType:h,load:p,cpu:f,loadInfoList:g,cpuInfo:I,cpuPopover:_,memoryInfo:T,memoryPopover:k,memory:y,disk:m,getProcessAlarm:async()=>{const{data:e}=await Ce({sName:"task_manager"});e.setup?w.value=!0:w.value=!1},moveStatePopover:async(t,a)=>{if(i.value=a,"ltd"!==o.value)return;const l=async()=>{u||(u=!0,await e.getHomeProcessInfo(),u=!1)};x.value=setInterval(l,5e3),S.removePending({method:"post",url:"/monitor/process_management/specific_resource_load_type"}),await l()},removeStatePopover:()=>{clearInterval(x.value)},onClearMemory:async()=>{try{await ke({type:"calc",title:"释放内存",content:"若您的站点处于有大量访问的状态，释放内存可能带来无法预测的后果，您确定现在就释放内存吗？"}),R()}catch(e){}},$reset:()=>{S.reset(),clearInterval(x.value),clearInterval(d.value)},setPsFormRef:j,setPsForm:O,onConfirmPs:e=>{var t;fe({loading:"正在修改备注，请稍后...",request:(t=O,_e.post("system/set_rname",{data:t,check:"msg"})),message:!0,success:t=>{t.status&&e()}})},processAlarmTableColumn:H,processTableData:A,openProcessAlarm:U,initAlarm:z,hoverType:i}})),qt=k("HOME-STATE-POPOVER-STORE",(()=>{var e;const l=ct(),{specificResource:s,diskQuota:o}=d(l),{payment:n,push:i,getAlarmData:r}=ve(),{authType:c}=a(n.value),u=Nt(),{setPsForm:m}=d(u),p=t(),f=t(),y=t();let g=null;const h=[{desc:"运行堵塞",val:90,color:"#dd2f00"},{desc:"运行缓慢",val:80,color:"#ff9900"},{desc:"运行正常",val:70,color:"#20a53a"},{desc:"运行流畅",val:30,color:"#20a53a"}],x=t("show"),w=t("two"),b=B({loading:!0,list:[]}),_=t((null==(e=i.value)?void 0:e.alarmPopupData)||[]),k={load:{title:"负载",id:"22"},cpu:{title:"cpu",id:"21"},mem:{title:"内存",id:"23"},disk:{title:"磁盘",id:"20"}},S=t({});t();const C=async e=>{var t;S.value={...e,id:e.id||k[null==(t=e.type)?void 0:t.split("-")[0]].id},ge({title:"告警设置",component:()=>he((()=>import("./alarm-config.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),area:56,btn:"保存",onConfirm:A})},I=e=>{let t,a,l;switch(e){case"load":a="平均负载超过";break;case"mem":a="内存超过";break;case"cpu":a="平均CPU超过"}const s=P(e);return t=s.cycle,l=s.count,a||(a=s.text),Oe(t)||Oe(a)?"":"".concat((null==e?void 0:e.includes("disk"))?"":"".concat(t,"分钟内")).concat(a).concat(l,"触发")},T=e=>{var t;const a=k[e.split("-")[0]];return!!Array.isArray(_.value)&&(null==(t=_.value)?void 0:t.find((t=>(null==e?void 0:e.includes("disk"))?t.template_id===a.id&&t.task_data.project===e.split("-")[1]:t.template_id===a.id)))},P=e=>{let t,a,l;const s=T(e);if(s){const o=s.task_data;t=o.cycle,l="".concat(o.count,"%"),e.includes("disk")&&o.project===e.split("-")[1]&&(a=2===o.cycle?"该磁盘用量超过":"该磁盘余量不足",l=2===o.cycle?"".concat(o.count,"%"):"".concat(o.count,"GB"))}return{cycle:t,text:a,count:l}},L=t(!1),D=t(),E=B({num:0,usageRate:0,give:[],option:{},type:"",selectOptions:[],typeDetection:"2"}),R=t(100),j=t([]),O=t([]),A=async()=>{await D.value.validate();const{type:e,data:t,id:a}=S.value;let l={task_data:{...t||{},type:e.includes("disk")?e.split("-")[0]:e,count:parseInt("".concat(E.usageRate)),cycle:e.includes("disk")?parseInt(E.typeDetection):5,project:e.split("-")[1]?e.split("-")[1]:""},time_rule:{send_interval:0,time_range:[0,86399]},number_rule:{day_num:parseInt("".concat(E.num)),total:0},sender:E.give};await fe({loading:"正在保存告警配置，请稍后...",request:Ae({task_data:JSON.stringify(l),template_id:a}),message:!0,success:async t=>{await r(),I(e)}})},M=t([{label:"磁盘路径",prop:"filesystem",render:e=>v("div",{class:"flex items-center"},[v("span",{class:"svgtofont-file-hdd mr-4px !text-16px align-text-bottom"},null),v("span",null,[e.filesystem])])},{label:"总大小",prop:"size"}]),F=e=>{if("0"===e)return 0;const t=e.match(/^(\d+(?:\.\d+)?)(?: )?([a-zA-Z]+)$/);if(!t)throw new Error("Invalid size format: ".concat(e));const a=parseFloat(t[1]),l=t[2].toUpperCase(),s=["B","KB","MB","G","GB","T","TB"].indexOf(l);if(-1===s)throw new Error("Invalid unit: ".concat(l));return a*Math.pow(1024,s)};return{virtualRef:p,popover:f,popoverContent:y,chartColorActive:(e,t)=>{let a={};for(let l=0;l<h.length;l++){const t=h[l];if(e>=t.val){a={...t};break}if(e<30){a={...h[h.length-1]};break}}return t&&(a.color="#dd2f00"),a.val=e,a},dirEvent:(e,t)=>{Ee("Path",e),Re.push({path:"/files"})},init:()=>{g=new ResizeObserver((()=>{f.value&&f.value.updatePopper()})),y.value&&g.observe(y.value)},$reset:()=>{g&&y.value&&g.unobserve(y.value)},authType:c,specificResource:s,tableData:b,foldExpand:x,foldActive:w,useHomeTableColumn:(e,a,l)=>t([{label:"进程名称",minWidth:80,render:e=>{const t="备注：".concat(e.explain,"\n启动路径： ").concat(e.exe_path,"\n运行目录：").concat(e.cwd_path,"\n线程数量：").concat(e.num_threads);return v("span",{title:t},[e.proc_name])}},{label:a,prop:l,minWidth:70},{label:"操作",align:"right",fixed:"right",width:50,render:t=>v("span",{class:"cursor-pointer text-[#20a53a]",onClick:()=>{(async(e,t)=>{if(1!==e.important){const l=t?"结束进程":"释放内存";await ke({type:"calc",title:l,content:"结束".concat(e.proc_name,"进程会导致").concat(e.explain.split("的进程")[0],"无法正常运行，是否结束?")}),await fe({loading:"正在".concat(l,"，请稍后..."),request:(a={pid:e.pid},_e.post("monitor/process_management/kill_process_all",{data:a,customType:"model",check:"msg"})),message:!0})}var a})(t,e)}},[1===t.important?"":"cpu_percent"===l?"结束":"释放"])}]),openProcessAlarmDialog:()=>{ge({title:"进程告警",area:["100","50"],component:()=>he((()=>import("./process-alarm-manage.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)})},openProduct:()=>{lt({sourceId:141})},push:i,devTaskList:_,openAlarmPopup:async(e,t)=>{if(0===t.id)C(t);else try{const a=e?"开启":"关闭";!e&&await ke({title:"".concat(a,"告警"),content:"".concat(a,"告警后，将").concat(e?"":"不再","接收到该项的告警信息，是否继续操作？")});const l=T(t.type);await fe({loading:"正在".concat(a,"告警，请稍后..."),request:je({task_id:l.id,status:e?1:0}),message:!0,success:r})}catch(a){t.flag=!e}},setAlarmDialog:C,createPushStatus:I,getCurrentTask:T,onConfirm:A,giveFormDisabled:L,giveFormRef:D,msgForm:E,maxCapacityAndUsageRate:R,nextData:j,options:O,alarmInfo:()=>{var e;const{type:t,data:a,id:l}=S.value;a?(E.usageRate=a.count,E.num=a.push_count,j.value=a.next_data||[null==(e=O.value[0])?void 0:e.key],-1!==t.indexOf("disk")&&(E.typeDetection=a.cycle.toString()),E.give=a.module):(E.usageRate=80,E.num=3,-1!==t.indexOf("disk")&&(E.typeDetection="2"))},rowData:S,mountColumn:M,computedSpace:(e,t)=>{const a=["B","KB","MB","GB","TB"];let l=F(e)-F(t),s=0;for(;l>=1024&&s<a.length-1;)l/=1024,s++;return l=Math.round(100*l)/100,"".concat(l," ").concat(a[s])},setPsDialog:async e=>{m.value.name=e.ps,m.value.path=e.path,ge({title:"设置磁盘【"+e.path+"】别名",area:45,component:()=>he((()=>import("./index265.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),btn:!0,onConfirm:u.onConfirmPs})},scanRubbishFile:async e=>{st({pluginName:"disk_analysis",source:120,type:"ltd"}),Ee("diskPath",e),Ee("taskStatus","true")},switchTypeDetection:()=>{const{type:e,data:t,id:a}=S.value;E.typeDetection!==t.cycle&&("2"===E.typeDetection?E.usageRate=80:o.value.forEach((t=>{t.diskName===e.split("-")[1]&&(R.value=t.diskQuota,E.usageRate=parseInt((.2*t.diskQuota).toString()))})))}}})),Gt={class:"alarm"},$t={class:"w-[21rem] ml-[0.8rem]"},Kt=we(e({__name:"alarm",props:{type:{},diskName:{}},setup(e){const a=e,c=u((()=>a.type)),m=qt(),{push:f,devTaskList:y}=d(m);_((()=>f.value.alarmPopupData),(e=>{y.value=e}),{deep:!0,immediate:!0});const h=t(!1),x=u((()=>{var e;const t={type:c.value,data:!1,id:0,status:!1},a=m.getCurrentTask(c.value);if(a){const l=a.task_data;(null==(e=c.value)?void 0:e.includes("disk"))?(2===l.cycle?"".concat(l.count,"%"):"".concat(l.count,"GB"),h.value=!!a.status,t.status=!!a.status,t.data={...l,module:a.sender,push_count:a.number_rule.day_num},t.id=a.template_id):(h.value=!!a.status,t.status=!!a.status,t.data={...l,module:a.sender,push_count:a.number_rule.day_num},t.id=a.template_id)}return t}));return _((()=>x.value),(e=>{h.value=e.status}),{deep:!0,immediate:!0}),l((()=>{})),(e,t)=>{const a=E,l=be;return o(),n("div",Gt,[t[4]||(t[4]=i("div",null,[i("span",null,"告警")],-1)),v(a,{size:"small",class:"ml-[0.8rem]",modelValue:s(h),"onUpdate:modelValue":t[0]||(t[0]=e=>D(h)?h.value=e:null),onChange:t[1]||(t[1]=e=>s(m).openAlarmPopup(s(h),s(x)))},null,8,["modelValue"]),t[5]||(t[5]=i("div",{class:"switch"},null,-1)),v(l,{onClick:t[2]||(t[2]=e=>s(m).setAlarmDialog(s(x)))},{default:p((()=>t[3]||(t[3]=[g("设置")]))),_:1}),i("span",$t,r(s(m).createPushStatus(s(c))),1)])}}}),[["__scopeId","data-v-eddb73f9"]]),Wt={class:""},Jt={class:"flex justify-between w-full"},Qt={class:"px-[8px] text-[#666] text-[1.4rem]"},Zt={class:"mt-[12px] mx-[8px] space-y-[1.2rem] text-[#666] text-[1.3rem]"},Xt={class:"flex justify-between items-center w-full"},Yt={class:"px-[8px] text-[#666] text-[1.4rem] leading-[3rem] text-center"},ea={class:"m-[.4rem] space-y-[1.2rem] text-[#666] text-[1.3rem] leading-[1.4rem]"},ta={class:"flex justify-between w-full"},aa={class:"px-[8px] text-[#666] text-[1.4rem] leading-[3rem] text-center"},la={class:"mt-[8px] space-y-[1.2rem]"},sa={key:0,class:"mb-1rem"},oa={class:"flex items-center justify-center flex-nowrap w-full"},na={class:"whitespace-nowrap"},ia=we(e({__name:"popover-content",props:{loadType:{default:""},type:{default:""},processAlarmShow:{type:Boolean,default:!1}},setup(e,{expose:t}){const a=e,{hoverType:l}=d(Nt()),f=qt(),{specificResource:h,authType:x,tableData:w,foldExpand:k,foldActive:S}=d(f),C=u((()=>{const{type:e}=a;return-1!==e.indexOf("未挂载")})),T=u((()=>"loadPopover"===l.value||"cpuPopover"===l.value)),P=u((()=>f.useHomeTableColumn(T.value,T.value?"CPU占用率":"内存使用率",T.value?"cpu_percent":"memory_usage").value)),L=u((()=>"memoryInfo"!==a.loadType)),B=u((()=>"diskInfo"!==a.loadType)),E=u((()=>{const{loadType:e}=a,t={one:"",two:"",three:""};return t.one="memoryInfo"===e?"内存信息":"基础信息","diskInfo"!==e?T.value?("loadInfo"===e?t.two="更多负载信息":"cpuInfo"===e&&(t.two="核心使用率"),t.three="CPU占用率top5的进程信息"):"memoryInfo"===e&&(t.two="内存信息",t.three="内存使用率top5的进程信息"):t.two="Inode信息",t}));return _((()=>h.value),(e=>{"ltd"===x.value?(w.value.loading=!1,T.value?w.value.list=h.value.cpuProcess:w.value.list=h.value.memProcess):(w.value.loading=!1,w.value.list=[])}),{deep:!0,immediate:!0}),_((()=>x.value),(e=>{"ltd"!==e&&(w.value.loading=!1,w.value.list=[])})),t({showTwo:L,showThree:B}),(e,t)=>{const l=M,d=F,u=V,h=be,_=Me,T=b,H=R("bt-loading");return o(),m(T,{shadow:"never",class:"card-popover p-[5px]"},{default:p((()=>[i("div",Wt,[j(e.$slots,"button",{},void 0,!0)]),v(d,{class:"text-[1.2rem]",modelValue:s(k),"onUpdate:modelValue":t[0]||(t[0]=e=>D(k)?k.value=e:null),accordion:!0},{default:p((()=>[v(l,{ref:"base-info",name:"show"},{title:p((()=>[i("div",Jt,[i("span",Qt,r(s(E).one),1)])])),default:p((()=>[i("div",Zt,[j(e.$slots,"base-info",{},void 0,!0)]),s(C)?c("",!0):(o(),n(I,{key:0},[t[2]||(t[2]=i("hr",{style:{width:"calc(100% - 16px)",margin:"12px auto","border-top":"1px solid #f0f0f0"}},null,-1)),v(Kt,{type:e.type,class:"mx-[8px]"},null,8,["type"])],64))])),_:3},512)])),_:3},8,["modelValue"]),s(C)?c("",!0):(o(),m(d,{key:0,class:"text-[1.2rem]",modelValue:s(S),"onUpdate:modelValue":t[1]||(t[1]=e=>D(S)?S.value=e:null),accordion:!0},{default:p((()=>[s(L)?(o(),m(l,{key:0,name:"two"},{title:p((()=>[i("div",Xt,[i("span",Yt,r(s(E).two),1),i("span",null,r("two"===s(S)?"收起":"展开"),1)])])),default:p((()=>[i("div",ea,[j(e.$slots,"content-info",{},void 0,!0)])])),_:3})):c("",!0),s(B)?(o(),m(l,{key:1,name:"three",class:y({"!mb-0":!s(L)})},{title:p((()=>[i("div",ta,[i("span",aa,r(s(E).three),1),i("span",null,r("three"===s(S)?"收起":"展开"),1)])])),default:p((()=>[i("div",la,[i("div",null,[a.processAlarmShow?(o(),n("div",sa,[v(u,{size:"small",onClick:s(f).openProcessAlarmDialog},{default:p((()=>t[3]||(t[3]=[g("进程告警")]))),_:1},8,["onClick"])])):c("",!0),O((o(),m(_,{column:s(P),data:s(w).list,"max-height":450},A({_:2},["ltd"!==s(x)?{name:"empty",fn:p((()=>[i("div",oa,[i("span",na,[t[5]||(t[5]=g("当前为企业版专享功能, ")),v(h,{onClick:s(f).openProduct},{default:p((()=>t[4]||(t[4]=[g("立即购买")]))),_:1},8,["onClick"])])])])),key:"0"}:void 0]),1032,["column","data"])),[[H,s(w).loading]])])])])),_:1},8,["class"])):c("",!0)])),_:3},8,["modelValue"]))])),_:3})}}}),[["__scopeId","data-v-94f0e556"]]),ra={class:"flex items-center justify-between mb-[1.2rem] leading-[2.8rem]"},ca={class:"flex items-center"},da={class:"flex align-left flex-col"},ua={class:"m-[4px] flex items-center"},ma=["title"],pa={class:"m-[4px]"},va={class:"m-[4px]"},fa={class:"flex align-left flex-col !mt-[4px]"},ya={class:"m-[4px]"},ga={class:"m-[4px]"},ha={class:"m-4x flex items-center"},xa={class:"!ml-[4px] !my-[8px]"},wa={class:"!ml-[4px] !my-[8px]"},ba={class:"!ml-[4px] !my-[8px]"},_a=we(e({__name:"disk-popover",props:{custom:{type:Boolean,default:!1},item:{default:[]}},setup(e){const t=e,a=qt(),{mountColumn:l}=d(a),f=u((()=>"None"===t.item.data.path)),h=u((()=>{const e="string"==typeof t.item.data.size?0:parseFloat(t.item.data.size[3].substring(0,t.item.data.size[3].lastIndexOf("%")));return e>=90?"danger":e>=80?"warning":"success"}));return(e,d)=>{const u=H,x=U,w=V,b=z,_=Me;return o(),m(ia,{"load-type":"diskInfo",type:"disk-".concat(t.item.info.title)},{button:p((()=>[s(f)?c("",!0):(o(),n(I,{key:0},[parseInt(t.item.data.inodes[3])>90?(o(),m(u,{key:0,title:"Inode可用不足10%，请前往文件管理清理不必要文件",type:"error",class:"h-[24px] !mb-8px",closable:!1})):c("",!0),i("div",ra,[i("div",ca,[d[2]||(d[2]=i("span",{class:"text-[#666] text-[1.4rem] mr-[4px] ml-[8px]"},"检测到当前磁盘",-1)),v(x,{type:s(h)},{default:p((()=>[g(r("容量占用".concat(t.item.data.size[3].substring(0,t.item.data.size[3].lastIndexOf("%")),"%")),1)])),_:1},8,["type"])]),v(w,{type:"primary",onClick:d[0]||(d[0]=e=>s(a).scanRubbishFile(t.item.info.title))},{default:p((()=>d[3]||(d[3]=[g("立即清理")]))),_:1})])],64))])),"base-info":p((()=>[s(f)?(o(),m(_,{key:1,data:e.item.data.list,column:s(l)},null,8,["data","column"])):(o(),n(I,{key:0},[i("div",da,[i("div",ua,[i("div",{class:"block truncate max-w-[30rem]",title:"挂载点：".concat(e.item.info.title,"\n备注：").concat(e.item.data.rname)},"挂载点： "+r(e.item.info.title+(e.item.data.rname?" (".concat(e.item.data.rname,")"):"")),9,ma),v(b,{placement:"right",content:"点击设置备注"},{default:p((()=>[i("i",{class:"svgtofont-el-edit text-primary ml-[8px] cursor-pointer",onClick:d[1]||(d[1]=t=>s(a).setPsDialog({ps:e.item.data.rname||e.item.info.title,path:e.item.info.title}))})])),_:1})]),i("span",pa,r("共：".concat(e.item.data.size[0])+"，可用：".concat(e.item.data.size[2])+"，\t已用：".concat(e.item.data.size[1])),1),i("span",va,r("未分配：".concat(s(a).computedSpace(e.item.data.size[0],e.item.data.size[1]))),1)]),i("div",fa,[i("span",ya," 文件系统："+r(e.item.data.filesystem),1),i("span",ga," 类型："+r(e.item.data.type+"，系统占用：".concat(e.item.data.size[3])),1)]),i("div",ha,[i("span",null," 磁盘大小："+r(e.item.data.d_size),1),v(b,{class:"item",effect:"dark",content:"根据系统设置的不同，如分区/SWAP/LVM/扩容，可能显示大小不一致，点击查看详情",placement:"top-start"},{default:p((()=>d[4]||(d[4]=[i("a",{class:"bt-ico-ask ml-3",href:"https://www.bt.cn/bbs/thread-136532-1-1.html",target:"_blank"},"?",-1)]))),_:1})])],64))])),"content-info":p((()=>[i("p",xa,"总数："+r(e.item.data.inodes[0]),1),i("p",wa,"已用："+r(e.item.data.inodes[1]),1),i("p",ba,"可用："+r(e.item.data.inodes[2]),1),i("p",{class:y(["!ml-[4px] !my-[8px]",{"text-warning":parseInt(t.item.data.inodes[3])>90&&parseInt(t.item.data.inodes[3])<100,"text-danger":100===parseInt(t.item.data.inodes[3])}])}," 使用率："+r(e.item.data.inodes[3]+(e.item.data.inodes[3].includes("%")?"":"%")),3)])),_:1},8,["type"])}}}),[["__scopeId","data-v-a8a86d42"]]),ka={class:"state-data py-[24px]"},Sa={class:"state-header"},Ca={key:1},Ia={key:1},Ta=["href"],Pa=["title"],La=we(e({__name:"main",props:{visible:{type:Boolean,default:!1},custom:{type:Boolean,default:!1},showDesc:{type:Boolean,default:!0},href:{default:""},info:{default:()=>({title:"",range:0})},disk:{type:Boolean,default:!1},data:{default:()=>({})},type:{default:""},alert:{type:Boolean,default:!1}},emits:["update:visible","openPopover","show","hide"],setup(e,{emit:t}){const a=e,f=qt(),{virtualRef:g,popover:h,popoverContent:w}=d(f),b=u((()=>{const{info:e,alert:t}=a,{desc:l,title:s,range:o,rangeText:n,disabled:i}=e,r=f.chartColorActive(o,t),{color:c}=r;return{title:s,color:c,range:o,disabled:!!i,desc:l||r.desc,rangeText:n||"",position:"bottom-start"}})),_=e=>{const{rangeText:t}=b.value;return t||"".concat(e,"%")};return l((()=>{f.init()})),N(f.$reset),(e,t)=>{const a=z,l=$,d=x,u=K;return o(),n("div",ka,[v(d,{trigger:"hover","virtual-ref":s(g),width:e.custom?"auto":e.disk?300:400,offset:e.custom?1:0,placement:s(b).position,teleported:!1,"show-after":100,"auto-close":0,"popper-class":"el-popover-shadow",onShow:t[1]||(t[1]=t=>e.$emit("show")),onHide:t[2]||(t[2]=t=>e.$emit("hide"))},{reference:p((()=>[i("div",{ref_key:"popoverContent",ref:w,class:"w-full flex flex-col items-center"},[i("div",Sa,["disk"===e.type?(o(),m(a,{key:0,effect:"dark",placement:"top"},{content:p((()=>[i("p",null,["None"!==e.data.path?(o(),n(I,{key:0},[i("div",null,"别名："+r(e.data.rname),1),t[3]||(t[3]=i("div",null,"点击跳转目录",-1))],64)):(o(),n("div",Ca,"点击打开磁盘挂载插件"))])])),default:p((()=>[i("span",{class:"bt-link",onClick:t[0]||(t[0]=t=>s(f).dirEvent(s(b).title,e.data.path))},r(s(b).title),1)])),_:1})):(o(),n("span",Ia,r(s(b).title),1)),e.href?(o(),m(a,{key:2,class:"item",effect:"dark",content:"点击跳转".concat(s(b).title,"教程"),placement:"top-start"},{default:p((()=>[i("a",{class:"bt-ico-ask ml-3",href:e.href,target:"_blank"},"?",8,Ta)])),_:1},8,["content"])):c("",!0)]),O(v(l,{class:y(["cursor-pointer",{"mount-progress":"None"===e.data.path}]),type:"circle",width:105,"stroke-width":7,color:s(b).color,percentage:s(b).range||0,format:_,style:q("color:"+s(b).color)},null,8,["class","color","percentage","style"]),[[u,void 0,"popover"]]),O(i("div",{class:"state-bottom",title:s(b).desc},r(s(b).desc),9,Pa),[[G,e.showDesc]])],512)])),default:p((()=>[j(e.$slots,"default",{},void 0,!0)])),_:3},8,["virtual-ref","width","offset","placement"])])}}}),[["__scopeId","data-v-0029e796"]]),Ba={class:"flex items-center justify-between mb-[1.2rem] leading-[2.8rem]"},Da={class:"flex items-center"},Ea={class:"disk-body-list flex justify-between !m-[4px]"},Ra={id:"load_one"},ja={class:"disk-body-list flex justify-between !m-[4px]"},Oa={id:"load_cpu_times_num"},Aa={class:"disk-item-body",id:"other_info_html"},Ma={class:"table table-fixed whitespace-nowrap"},Fa=["title"],Va=["title"],Ha={class:"flex items-center justify-between mb-[1.2rem] leading-[2.8rem]"},Ua={class:"flex items-center"},za={class:"max-h-[5.8rem] overflow-y-auto"},Na={class:"!m-[4px]"},qa={class:"!m-[4px]"},Ga={class:"flex items-center justify-between mb-[1.2rem] leading-[2.8rem]"},$a={class:"flex items-center"},Ka={class:"flex align-left flex-col"},Wa={class:"flex justify-between mb-[4px]"},Ja={class:"w-[50%]"},Qa={class:"inline-flex justify-start"},Za={class:"w-[50%]"},Xa={class:"inline-flex justify-start"},Ya={class:"flex justify-between mb-[4px]"},el={class:"w-[50%]"},tl={class:"inline-flex justify-start"},al={class:"w-[50%]"},ll={class:"inline-flex justify-start"},sl={class:"flex justify-between mb-[4px]"},ol={class:"w-[50%]"},nl={class:"w-[50%]"},il={class:"inline-flex justify-start"},rl=we(e({__name:"index",setup(e){const t=Nt(),{cpuCoreDesc:a,statePopoverTimr:c,loadInfo:f,loadPopover:y,processAlarmShow:h,tagsType:x,load:w,cpu:k,loadInfoList:S,cpuInfo:C,cpuPopover:P,memoryInfo:L,memoryPopover:B,memory:D,disk:E}=d(t),R=u((()=>"".concat(w.value.one.toFixed(2)," / ").concat(w.value.five.toFixed(2)," / ").concat(w.value.fifteen.toFixed(2)))),j=u((()=>{const{process:e}=k.value;return Array.isArray(e)?"".concat(e[0]," / ").concat(e[1]):"获取中"}));return _((()=>c.value),((e,t)=>{clearInterval(e)}),{immediate:!0}),l((async()=>{et({promises:[t.getProcessAlarm],delay:1e3})})),N(t.$reset),(e,l)=>{const c=U,d=W,u=V,w=J,_=b;return o(),m(_,{class:"module-box w-full","body-style":{padding:0,display:"flex"}},{header:p((()=>l[3]||(l[3]=[i("div",{class:"text-1.6rem text-desc text-auto-ellipsis"},"状态",-1)]))),default:p((()=>[v(w,{span:24,class:"w-full"},{default:p((()=>[v(d,{span:4,xs:12,sm:6,md:6,lg:4},{default:p((()=>[v(La,{info:s(f),onShow:l[0]||(l[0]=e=>s(t).moveStatePopover(s(y),"loadPopover")),onHide:s(t).removeStatePopover,href:"https://www.bt.cn/bbs/thread-11402-1-1.html"},{default:p((()=>[v(ia,{"load-type":"loadInfo",ref_key:"loadPopover",ref:y,type:"load","process-alarm-show":s(h)},{button:p((()=>[i("div",Ba,[i("div",Da,[l[4]||(l[4]=i("span",{class:"text-[#666] text-[1.4rem] mr-[4px] ml-[8px]"},"检测到当前负载",-1)),v(c,{type:s(x).load},{default:p((()=>[g(r("运行达到".concat(s(f).range,"%")),1)])),_:1},8,["type"])])])])),"base-info":p((()=>[i("div",Ea,[l[5]||(l[5]=i("div",null,"最近1/5/15分钟平均负载：",-1)),i("div",Ra,r(s(R)),1)]),i("div",ja,[l[6]||(l[6]=i("div",null,"活动进程数 / 总进程数:",-1)),i("div",Oa,r(s(j)),1)])])),"content-info":p((()=>[i("div",Aa,[i("table",Ma,[i("tbody",null,[(o(!0),n(I,null,T(s(S),((e,t)=>(o(),n("tr",{key:t},[(o(!0),n(I,null,T(e,((e,t)=>(o(),n(I,{key:t},[i("td",{title:e.title,class:"break-all text-ellipsis p-[.4rem]"},[i("span",null,r(e.name),1)],8,Fa),i("td",{title:e.title,class:"break-all text-ellipsis"},[i("span",null,r(e.value),1)],8,Va)],64)))),128))])))),128))])])])])),_:1},8,["process-alarm-show"])])),_:1},8,["info","onHide"])])),_:1}),v(d,{span:4,xs:12,sm:6,md:6,lg:4},{default:p((()=>[v(La,{info:s(C),type:"cpu",onShow:l[1]||(l[1]=e=>s(t).moveStatePopover(s(P),"cpuPopover")),onHide:s(t).removeStatePopover},{default:p((()=>[v(ia,{"load-type":"cpuInfo",type:"cpu",ref_key:"cpuPopover",ref:P,"process-alarm-show":s(h)},{button:p((()=>[i("div",Ha,[i("div",Ua,[l[7]||(l[7]=i("span",{class:"text-[#666] text-[1.4rem] mr-[4px] ml-[8px]"},"检测到当前CPU使用率",-1)),v(c,{type:s(x).cpu},{default:p((()=>[g(r("占用".concat(s(C).range,"%")),1)])),_:1},8,["type"])])])])),"content-info":p((()=>[i("div",za,[(o(!0),n(I,null,T(s(a),((e,t)=>(o(),n("div",{key:t,class:"flex direction-row items-center justify-between mb-[4px]"},[i("span",null,r(e.name),1),i("span",null,r(e.value),1)])))),128))])])),"base-info":p((()=>[i("p",Na,r(s(k).framework),1),i("p",qa,r("".concat(s(k).cpuNumber,"个物理CPU，").concat(s(k).logicCores,"个物理核心，").concat(s(k).cores,"个逻辑核心")),1)])),_:1},8,["process-alarm-show"])])),_:1},8,["info","onHide"])])),_:1}),v(d,{span:4,xs:12,sm:6,md:6,lg:4},{default:p((()=>[v(La,{type:"mem",info:s(L),onShow:l[2]||(l[2]=e=>s(t).moveStatePopover(s(B),"memoryPopover")),onHide:s(t).removeStatePopover},{default:p((()=>[v(ia,{"load-type":"memoryInfo",type:"mem",ref_key:"memoryPopover",ref:B,"process-alarm-show":s(h)},{button:p((()=>[i("div",Ga,[i("div",$a,[l[8]||(l[8]=i("span",{class:"text-[#666] text-[1.4rem] mr-[4px] ml-[8px]"},"检测到当前内存",-1)),v(c,{type:s(x).memory},{default:p((()=>[g(r("占用".concat(s(L).range,"%")),1)])),_:1},8,["type"])]),v(u,{type:"primary",onClick:s(t).onClearMemory},{default:p((()=>l[9]||(l[9]=[g("立即清理")]))),_:1},8,["onClick"])])])),"base-info":p((()=>[i("div",Ka,[i("div",Wa,[i("div",Ja,[l[10]||(l[10]=i("span",{class:"w-[81px] inline-flex justify-end"},"空闲内存：",-1)),i("span",Qa,r(s(D).memFree+" MB"),1)]),i("div",Za,[l[11]||(l[11]=i("span",{class:"w-[81px] inline-flex justify-end"},"已用：",-1)),i("span",Xa,r(s(D).memRealUsed+" MB"),1)])]),i("div",Ya,[i("div",el,[l[12]||(l[12]=i("span",{class:"w-[81px] inline-flex justify-end"},"总内存：",-1)),i("span",tl,r(s(D).memTotal+" MB"),1)]),i("div",al,[l[13]||(l[13]=i("span",{class:"w-[81px] inline-flex justify-end"},"共享：",-1)),i("span",ll,r(s(D).memShared+" MB"),1)])]),i("div",sl,[i("div",ol,[l[14]||(l[14]=i("span",{class:"w-[81px] inline-flex justify-end"},"可分配内存：",-1)),i("span",null,r(s(D).memAvailable+"MB"),1)]),i("div",nl,[l[15]||(l[15]=i("span",{class:"w-[81px] inline-flex justify-end"},"buff/cache：",-1)),i("span",il,r(s(D).memCached+"/"+s(D).memBuffers+" MB"),1)])])])])),_:1},8,["process-alarm-show"])])),_:1},8,["info","onHide"])])),_:1}),(o(!0),n(I,null,T(s(E),((e,a)=>(o(),m(d,{key:a,span:4,xs:12,sm:6,md:6,lg:4},{default:p((()=>[v(La,{type:"disk",info:e.info,onHide:s(t).removeStatePopover,data:e.data,alert:"None"!==e.data.path&&100===parseInt(e.data.inodes[3])},{default:p((()=>[v(_a,{item:e},null,8,["item"])])),_:2},1032,["info","onHide","data","alert"])])),_:2},1024)))),128))])),_:1})])),_:1})}}}),[["__scopeId","data-v-3d181c45"]]);function cl(e,t,a={}){let l;const{document:s=X,...o}=a,n={onUpdate:e=>{!function(e,t,a,l=null){null!=l&&((s=l.item).parentNode&&s.parentNode.removeChild(s),function(e,t,a){const l=e.children[a];e.insertBefore(t,l)}(l.from,l.item,t));var s;const o=D(e),n=o?[...Y(e)]:Y(e);if(a>=0&&a<n.length){const l=n.splice(t,1)[0];C((()=>{n.splice(a,0,l),o&&(e.value=n)}))}}(t,e.oldIndex,e.newIndex,e)}},i=()=>{const t=null==s?void 0:s.querySelector(e);t&&void 0===l&&(l=new Fe(t,{...n,...o}))},r=()=>{null==l||l.destroy(),l=void 0};return Q(i),Z(r),{stop:r,start:i,option:(e,t)=>{if(void 0===t)return null==l?void 0:l.option(e);null==l||l.option(e,t)}}}const dl=k("HOME-OVERVIEW-STORE",(()=>{const e=S(),{mainWidth:l,payment:s}=ve(),{authType:o}=a(s.value),n=t([]),i=t(!1),r=t(!1),c=async()=>{try{const e=await fe({loading:i,request:_e.post("panel/overview/GetOverview",{check:"array",customType:"model"}),data:{data:[Array,n]}});return d(),Promise.resolve(e.data)}catch(e){Ve(e)}finally{i.value=!1,C((()=>{y()}))}},d=()=>{const e=n.value.findIndex((e=>"ssh_log"===e.name));var t;-1!==e&&fe({loading:r,request:(t={log_type:n.value[e].params[0].source},_e.post("/logs/panel/index_ssh_info",{data:t,check:"array",customType:"model"})),success:t=>{Array.isArray(t.data)&&(n.value[e].value=t.data)}})},u=async e=>ge({title:"自定义概览模块",area:100,compData:e,component:()=>he((()=>import("./index266.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)}),m=async()=>ge({title:"备忘录",area:[70,60],component:()=>he((()=>import("./index267.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)}),p=async()=>ge({area:[76,70],component:()=>he((()=>import("./index268.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)}),v=e=>{const{type:t}=e.plugin_info;return"free"===o.value&&(8===t||12===t)||"ltd"!==o.value&&12===t},f=e=>{const{type:t,endtime:a,setup:l}=e.plugin_info,s="total"===e.name?41:"btwaf"===e.name?40:42;if(v(e)&&a<0)return lt({disablePro:8!==t,sourceId:s});st({name:e.name})},y=()=>{cl(".overview-wrapper",n,{animation:500,handle:".move-icon",chosenClass:"ghost",onEnd:async e=>{(async()=>{await fe({request:jt({overview:JSON.stringify(n.value)}),message:!0,success:e=>{e.status||c()}})})()}})},g=()=>{Ee("searchFile","true"),e.push({path:"/files"})},h=t(""),x=t("/www/server/panel/data/memo.txt"),w=ee([]),b=t([]),_=ee(!1),k=ee(0),I=t({val0:0,val1:0,val2:0,val3:0}),T=t(["sites","databases","total","ssh_log"]),P=t(["open_dir"]),L=()=>{let e={};b.value=[],n.value.forEach((t=>{e[t.name]=t})),w.value.forEach((t=>{const a=t.template;t.option.forEach((t=>{const l=e[t.name]||!1;b.value.push({...t,isShow:Boolean(l),showItem:l,template:a,overviewPopover:!1})}))}))},B=(e,t=!1)=>{let a={...e},l=[],s=[];for(const o in I.value)e.params.length&&s.push(I.value[o]);if(0===s.length&&(s=[0]),"open_dir"===e.name){const t=I.value.val0||e.params[0].option[0].source;l=[{name:t,source:t}]}else l=a.params.map(((t,a)=>"select"===t.type?t.option[s[a]]:e.params?e.params[a]:void 0));return delete a.overviewPopover,t?(e.showItem.params=l,a={...e.showItem}):(delete a.showItem,a.params=l),a},D=async e=>{const t=Boolean(e.showItem);if(!t&&6===n.value.length)return e.overviewPopover=!1,C((()=>e.isShow=!1)),Ne.warn("最多只能显示6个模块");const a={overview:JSON.stringify(B(e,t))},l=t&&e.isShow?jt:Rt;fe({loading:"正在".concat(t?"修改":"添加","模块，请稍后..."),request:l(a),message:!0,success:async t=>{e.overviewPopover=!1,e.isShow=!0,E(),t.status&&(await c(),L())}})},E=()=>{I.value={val0:0,val1:0,val2:0,val3:0}},R=async()=>{await fe({loading:_,request:qe(),data:{data:[Array,w]}})};return{mainWidth:l,loading:i,isSshLoading:r,overviewShowList:n,getOverviewData:c,openOverviewTemplate:()=>{u({getOverviewData:c})},openModelDialog:async t=>{switch(t.type){case"base":const a=t.params[0].source,l="/"+(["ftps","sites","databases"].includes(t.name)&&"all"===a?"":a).replace("proxy","nginx");return e.push({path:t.source.href+l});case"model":if("memo"===t.name)return m();if("safety_risk"===t.name)return p();if("ssh_log"===t.name){const{getFirewallStore:t}=await he((()=>import("./useStore4.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),{refs:{sshTabActive:a}}=t();return a.value="login",He("Router-Key",{path:"ssh",children:"loginLog"}),e.push({path:"/firewall/ssh-manger"})}case"plugin":return f(t);default:if("search_file"===t.name)return g();if("open_dir"===t.name)return mt({path:t.params[0].name})}},getModelTitle:e=>{let t=e.title,a=0,l=e.params.length||0,s=["ssh_log"];if(!e.status)return t;if("open_dir"===e.name)return t;l>=2&&(t="");for(let o=l-1;o>=0;o--){let n=e.params[o];(t===n.name||s.indexOf(e.name)>-1)&&(t=""),2!==a&&(1===l&&""!=t&&(t+=" - "),t+="".concat(n.name)+(o===l-1&&l>1?" - ":""),a++),a=0}return t},getPayStatus:v,getModelTips:e=>{switch(e.template){case"base":return"memo"===e.name||"safety_risk"===e.name?"打开".concat(e.title,"模块"):"跳转至".concat(e.title,"页面");case"browse":return"plugin"===e.type?"打开".concat(e.title,"插件"):"打开".concat(e.title,"模块");case"open_dir":return"打开".concat(e.title)}},content:h,path:x,saveFileEvent:async()=>{fe({loading:"正在保存备忘录，请稍后...",request:Ue({path:x.value,data:h.value,encoding:"utf-8"}),message:!0,success:e=>{e.status&&c()}})},getMemoData:async()=>{fe({loading:"正在获取备忘录数据，请稍后...",request:ze(),data:[String,h]})},isLoading:_,overviewModelList:b,supportConfig:T,supportPath:P,form:I,onPathChange:e=>{ot({type:"dir",change:t=>{I.value.val0=t,D(e)}})},getOverviewTemplateData:R,dataAlignment:L,setOverviewTemplateShow:async e=>{try{if(e.isShow&&6===n.value.length)return C((()=>e.isShow=!1)),Ne.warn("最多只能显示6个模块");const t=B(e);!e.isShow&&Oe(e.showItem.id)&&(await R(),(e=b.value.find((t=>t.name===e.name))).isShow=!e.isShow);const a=e.isShow?Rt:Ot,l=e.isShow?{overview:JSON.stringify(t)}:{overview_id:e.showItem.id};fe({loading:"正在".concat(e.isShow?"删除":"添加","模块，请稍后..."),request:a(l),message:!0,data:{data:Array,msg:String,status:Boolean},success:async t=>{t.status&&(e.isShow&&(e.showItem=t.data.length?t.data[t.data.length-1]:e.showItem),await c(),L())}})}catch(t){Ve(t)}},addOverviewFun:D,setPopoverShow:(e,t)=>{b.value[t].overviewPopover=!0,k.value=t;const a=e.showItem.params,l=Object.entries(I.value);for(let s=0;s<l.length&&s<e.params.length;s++){const t=e.params[s];if("select"===t.type){const e=t.option.findIndex((e=>!a||(!a[s]||e.source===a[s].source)));I.value["val"+s]=e}else I.value["val"+s]=a?a[s].source:t.option[s].source}}}})),ul={class:"text-[1.6rem] text-#666 flex justify-between flex-1 items-center"},ml={class:"overview-wrapper draggable-group"},pl=["onClick"],vl={class:"content"},fl={class:"title"},yl={key:0,class:"risk not-install bt-blink"},gl={key:1,class:"model"},hl={class:"to-day"},xl={class:"yester-day"},wl={key:2,class:"path-info bt-link"},bl={key:3,class:"path-info bt-link"},_l={class:"bottom-menu"},kl=we(e({__name:"index",setup(e){const t=dl(),{mainWidth:a,loading:f,isSshLoading:g,overviewShowList:h}=d(t),x=u((()=>{let e=0;const t=a.value<1100?a.value<800?2:4:a.value>1800?8:6,l=Math.floor((a.value-16*t-50)/t);return e=Math.min(Math.max(l,170),260),{width:"".concat(e,"px")}}));return l((async()=>{et({promises:[t.getOverviewData],delay:100})})),(e,a)=>{const l=V,d=J,u=b,w=te,_=R("bt-loading");return O((o(),m(u,{class:"relative module-box",shadow:"always","body-style":{padding:"0",display:"flex"}},{header:p((()=>[i("div",ul,[a[2]||(a[2]=i("span",null,"概览",-1)),v(l,{title:"自定义概览模块",class:"!ml-[1rem]",onClick:a[0]||(a[0]=e=>s(t).openOverviewTemplate())},{default:p((()=>a[1]||(a[1]=[i("i",{class:"svgtofont-el-setting text-[1.4rem]"},null,-1)]))),_:1})])])),default:p((()=>[v(d,{class:"w-full px-2.4rem pb-2.4rem pt-[0.8rem] min-h-[15.2rem]",gutter:15},{default:p((()=>[i("div",ml,[(o(!0),n(I,null,T(s(h),(e=>(o(),n("div",{class:"overview-box",style:q(s(x)),key:e.id,onClick:a=>s(t).openModelDialog(e)},[a[5]||(a[5]=i("i",{class:"svgtofont-icon-drag text-[1.6rem] move-icon",title:"可拖拽"},null,-1)),i("div",vl,[i("span",fl,r(s(t).getModelTitle(e)),1),"base"===e.template?(o(),n("span",{key:0,class:y(["bt-link",{href:"base"===e.template,memo:"memo"===e.name,risk:"safety_risk"===e.name&&e.value[0]>0,"!text-[#CBCBCB]":"memo"===e.name&&!e.value[0]}])},r(e.value[0]||("memo"===e.name?"当前内容为空，点击编辑":e.value[0])),3)):"browse"===e.template?(o(),n(I,{key:1},["plugin"!==e.type||e.plugin_info.setup?"plugin"===e.type||"model"===e.type?O((o(),n("div",gl,[i("div",hl,[a[3]||(a[3]=i("span",{class:""},"今日",-1)),i("span",null,r(e.value[0]),1)]),i("div",xl,[a[4]||(a[4]=i("span",null,"昨日",-1)),i("span",null,r(e.value[1]),1)])])),[[w,s(g)&&"ssh_log"===e.name]]):c("",!0):(o(),n("span",yl,r(s(t).getPayStatus(e)?"未购买":"未安装"),1))],64)):"open_dir"===e.template?(o(),n("span",wl,r(e.params[0].name),1)):"search_file"===e.template?(o(),n("span",bl," 点击搜索内容 ")):c("",!0)]),i("div",_l,r(s(t).getModelTips(e)),1)],12,pl)))),128))])])),_:1})])),_:1})),[[_,s(f)],[_,"正在获取概览数据，请稍候...","title"]])}}}),[["__scopeId","data-v-65b6e5d2"]]),Sl=k("SOFTWARE-STORE",(()=>{const e=S(),a=t(""),l=t(!1),s=t([]),o=t(),n=t([]),i=t([]),r=t(!1),c=t(!1),d=t(0),m=t(!1);let p=t([]),v=[];const f=async(e="")=>{if(!m.value){if(Be(e)&&""!==e){m.value=!0;const t=u((()=>{if(!e)return p.value;const t=e.toLowerCase();return v.filter((e=>e.name.toLowerCase().includes(t)||e.ps.toLowerCase().includes(t)||e.title.toLowerCase().includes(t)))}));return p.value=t.value,void(m.value=!1)}y(e)}},y=ae((async e=>{await fe({loading:m,request:It({p:1,type:-1,tojs:"soft.get_list",query:e,force:0,row:100}),data:{"list.data":[Array,p],"list.page":Ge(d)},success:e=>{p.value=e["list.data"].filter((e=>e.index_display)).concat(e["list.data"].filter((e=>!e.index_display))),v=p.value}})}),5e3),g=e=>{const t=e?v.filter((t=>{if(t.title.toLowerCase().includes(e.trim().toLowerCase()))return{value:t.title}})):v;let a=[];return t.forEach(((e,t,l)=>{a.push({value:e.title})})),a},h=()=>{if(n.value.length<=12&&(s.value.length>0?i.value=[...n.value,...s.value].slice(0,12):i.value=[...n.value].slice(0,12)),i.value.length<12)for(;i.value.length<12;)i.value.push({})},x=e=>{lt({disablePro:!(8===e.type),sourceId:{total:41,btwaf:40,tamper_core:42,bt_security:43,oneav:44,security_notice:56}[e.name]||175})},w=()=>{const e=document.querySelector(".soft-wrapper");Fe.create(e,{animation:500,handle:".soft-move",chosenClass:"ghost",onEnd:async e=>{const t=i.value.splice(e.oldIndex,1)[0];i.value.splice(e.newIndex,0,t),b()}})},b=()=>{let e=i.value.filter((e=>void 0!==e.id&&e.name)).map((e=>e.name)).join("|");var t;fe({request:(t={ssort:e},_e.post("plugin/sort_index",{data:t}))})};return{popShow:c,isGetSoft:r,pluginKeyword:a,recommendList:s,containerRef:o,mySoftList:p,tableLoading:m,softShowList:i,load:async()=>{let e=Math.ceil(d.value/12),t=Math.ceil(p.value.length/12);if(t>=e)return;const{data:a}=await It({p:t+1,type:-1,tojs:"soft.get_list",force:0,row:12});p.value=p.value.concat(a.list.data)},createSoftList:h,getHomeInstallSoftData:async()=>{await fe({loading:r,request:_e.post("plugin/get_index_list"),success:e=>{const t=e.data.filter((e=>e.setup));i.value=t,n.value=t,h(),w()}})},getRecommendInfo:async()=>{await fe({request:$e(),success:e=>{var t;Array.isArray(e.data)&&e.data.length>0&&(s.value=(null==(t=e.data[1])?void 0:t.list)||[])}})},goSoft:()=>{e.push({path:"/soft"})},showPopoverHandle:f,leave:e=>{const t=e.offsetX,l=e.offsetY,s=o.value.offsetWidth,n=o.value.offsetHeight;if(t<0||l<0||t>=s||l>=n){const e=document.querySelector(".soft-search-popover");e&&"none"!=(null==e?void 0:e.style.display)?c.value=!0:(c.value=!1,a.value="")}},querySearch:(e,t)=>{t(g(e))},searchPluginHandle:(e="")=>{""==a.value?(l.value=!1,f()):(l.value=!0,f(a.value))},renderSoftImages:e=>"".concat("/static/img/soft_ico","/ico-").concat(e.replace(/-+[{0-9},\.,]+$/,""),".png"),changeSwitchHandle:async(e,t)=>{const a=v.filter((e=>e.index_display)).length;if(v.length,p.value.length,a>12&&e.index_display)return e.index_display=!e.index_display,Ne.error("首页最多只能显示12个软件!");try{const t=e.index_display?Tt:Pt;await fe({loading:"正在处理，请稍后...",request:t(e.name),message:!0,success:e=>{e.status&&(p.value=p.value.map((e=>(e.name==e.name&&(e.index_display=e.index_display),e))),v=v.map((e=>(e.name==e.name&&(e.index_display=e.index_display),e))),n.value=v.filter((e=>e.index_display))),h()}})}catch(l){e.index_display=!e.index_display}},openSoftView:async e=>(e.endtime>=0||0===e.price?st({name:e.name,pluginInfo:e}):(await ke({title:"购买插件",content:"插件已过期，是否前往购买？"}),x(e)),!1),softStatusColor:e=>e.status||"phpmyadmin"===e.name?"#20A53A":"#FF4949",softStatus:e=>e.status||"phpmyadmin"===e.name?"start":"stop",openRecommendSoftView:e=>{if(e.name&&!e.install&&!Se(e.isBuy))return st({name:e.name,pluginInfo:e}),!1},openSoftPreLink:e=>{window.open(e.preview)},openLtdPayView:x,openInstall:async e=>{const{data:t}=await Ce({sName:e.name});if("-1"===t.task)return Ne.error("当前插件正在安装，不可重复安装");nt({name:t.name,type:"i",pluginInfo:t})}}})),Cl={class:"w-full flex justify-between items-center"},Il={class:"plugin-search"},Tl={class:"pluginInfo"},Pl=["src"],Ll={class:"plugin-desc"},Bl={class:"wrapper soft-wrapper"},Dl=["onClick"],El={key:0,id:"freeTagCon"},Rl={class:"h-38 pt-5 w-full text-center flex justify-center items-center"},jl=["src","custom"],Ol={class:"text-[#999] h-9 leading-9 flex items-center justify-center"},Al={class:"mr-[2px]"},Ml=["onClick"],Fl={class:"h-28 pt-5 w-full text-center flex justify-center items-center"},Vl=["src"],Hl={class:"flex justify-center items-center"},Ul={class:"text-[#999] h-9 leading-9 mr-2"},zl={class:"flex justify-center align-middle mt-2 opacity-70"},Nl=we(e({__name:"index",setup(e){const t=Sl(),{popShow:a,pluginKeyword:u,recommendList:f,containerRef:h,mySoftList:w,tableLoading:k,isGetSoft:S,softShowList:P}=d(t);return _(f,(e=>{e.length>0&&t.createSoftList()}),{immediate:!0}),l((async()=>{await et({promises:[t.getHomeInstallSoftData,t.getRecommendInfo],delay:100}),C((()=>{const{type:e}=pt();if(e.includes("aliyun")){const e=setInterval((async()=>{if(window.$extension){const t=await window.$extension();Se(t.extensionElement)&&!t.extensionElement&&clearTimeout(e),t.extensionElement&&(t.extensionElement(),clearTimeout(e))}}),1e3)}}))})),(e,l)=>{const d=V,f=oe,_=ne,C=E,L=ie,B=x,j=W,A=J,M=b,F=R("table-scroll-load"),H=R("bt-loading");return o(),m(M,{class:"module-box !mb-[0px]",shadow:"always","body-style":{padding:0,display:"flex",height:"calc( 100% - 50px )"}},{header:p((()=>[i("div",Cl,[i("div",{class:"text-[1.6rem] text-#666 cursor-pointer",onClick:l[0]||(l[0]=(...e)=>s(t).goSoft&&s(t).goSoft(...e))},"软件"),v(B,{"popper-class":"myPopover",placement:"right-start",visible:s(a),width:"400",onShow:l[7]||(l[7]=e=>s(t).showPopoverHandle(""))},{reference:p((()=>[v(d,{ref:"softButton",type:"default",title:"软件自定义编辑",onClick:l[6]||(l[6]=e=>a.value=!s(a))},{default:p((()=>l[9]||(l[9]=[i("i",{class:"svgtofont-el-setting text-[1.4rem]"},null,-1)]))),_:1},512)])),default:p((()=>[i("div",{ref_key:"containerRef",ref:h,class:"plugin-box p-[.8rem]",onMouseleave:l[5]||(l[5]=(...e)=>s(t).leave&&s(t).leave(...e))},[i("div",Il,[v(f,{placeholder:"请输入要搜索的应用",modelValue:s(u),"onUpdate:modelValue":l[2]||(l[2]=e=>D(u)?u.value=e:null),"fetch-suggestions":s(t).querySearch,"trigger-on-focus":!1,class:"search-input w-full","popper-class":"soft-search-popover",onKeyup:l[3]||(l[3]=le((e=>s(t).searchPluginHandle("select")),["enter","native"])),onSelect:l[4]||(l[4]=e=>s(t).searchPluginHandle())},{append:p((()=>[v(d,{onClick:l[1]||(l[1]=e=>s(t).searchPluginHandle("select"))},{default:p((()=>l[8]||(l[8]=[i("i",{class:"svgtofont-el-search"},null,-1)]))),_:1})])),_:1},8,["modelValue","fetch-suggestions"])]),O((o(),m(L,{data:s(w),height:"400"},{default:p((()=>[v(_,{width:"260",property:"date",label:"软件名称"},{default:p((e=>[i("div",Tl,[i("img",{class:"plugin-img",src:s(t).renderSoftImages(e.row.name)},null,8,Pl),i("span",Ll,r(e.row.title)+" "+r(e.row.version),1)])])),_:1}),v(_,{property:"setup",sortable:"",label:"首页显示",prop:"index_display"},{default:p((e=>[v(C,{modelValue:e.row.index_display,"onUpdate:modelValue":t=>e.row.index_display=t,"active-color":"#20A53A","inactive-color":"#CDCDCD",width:32,size:"small",onChange:a=>s(t).changeSwitchHandle(e.row,e.$index)},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:1})])),_:1},8,["data"])),[[F,s(t).load],[H,s(k)]])],544)])),_:1},8,["visible"])])])),default:p((()=>[O((o(),m(A,{span:24,class:"w-full h-full"},{default:p((()=>[i("div",Bl,[v(se,null,{default:p((()=>[(o(!0),n(I,null,T(s(P),((e,a)=>(o(),m(j,{key:e.name+"_id",span:6,class:"wrapper-item"},{default:p((()=>[a<12?(o(),n("div",{key:0,class:y(["text-center h-full",e.title?"box-wrapper cursor-pointer relative":""])},[e.id&&e.setup?(o(),n("div",{key:0,onClick:a=>s(t).openSoftView(e)},[l[10]||(l[10]=i("i",{class:"svgtofont-icon-drag text-[1.6em] text-[#999] !hidden absolute right-6 top-6 cursor-move mover soft-move"},null,-1)),e.tag?(o(),n("span",El)):c("",!0),i("div",Rl,[i("img",{src:s(t).renderSoftImages(e.name),class:"w-[4rem]",custom:!s(Ke)},null,8,jl)]),i("div",Ol,[i("span",Al,r(e.title.replace(/PHP-[{0-9},\.]+/,"PHP-")+" "+e.version),1),O(i("i",{style:q("color:".concat(s(t).softStatusColor(e))),class:y("svgtofont-icon-".concat(s(t).softStatus(e)))},null,6),[[G,5===e.type]])])],8,Dl)):s(We)(e)?c("",!0):(o(),n(I,{key:1},[i("div",{onClick:a=>s(t).openRecommendSoftView(e),class:"absolute -left-1.5 -top-1 py-.5 px-2 transform scale-75 bg-[#efefef] text-[#999] opacity-80"},"推荐",8,Ml),i("div",Fl,[i("img",{src:"".concat(s(Ke)?"/static/images":"/static/img","/soft_ico/ico-").concat(e.name,".png"),class:"w-[4rem]"},null,8,Vl)]),i("div",Hl,[i("div",Ul,[g(r(e.title)+" "+r(e.version),1),l[11]||(l[11]=i("span",{class:"text-btColor"},null,-1))])]),i("div",zl,[e.preview?(o(),m(d,{key:0,type:"default",size:"small",onClick:a=>s(t).openSoftPreLink(e),plain:""},{default:p((()=>l[12]||(l[12]=[g("预览")]))),_:2},1032,["onClick"])):c("",!0),e.isBuy?c("",!0):(o(),m(d,{key:1,type:"success",size:"small",plain:"",onClick:a=>s(t).openLtdPayView(e)},{default:p((()=>l[13]||(l[13]=[g("购买")]))),_:2},1032,["onClick"])),e.isBuy&&!e.install?(o(),m(d,{key:2,type:"success",size:"small",plain:"",onClick:a=>s(t).openInstall(e)},{default:p((()=>l[14]||(l[14]=[g("安装")]))),_:2},1032,["onClick"])):c("",!0)])],64))],2)):c("",!0)])),_:2},1024)))),128))])),_:1})])])),_:1})),[[H,s(S)],[H,"正在获取软件列表，请稍后...","title"]])])),_:1})}}}),[["__scopeId","data-v-421d94cf"]]),ql={class:"monitor"},Gl={class:"label mb-[.7rem]"},$l={class:"w-full h-[34rem]"},Kl=we(e({__name:"main",props:re({info:{default:()=>({info:[],option:{}})}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e,{expose:a}){const l=ce(e,"modelValue"),c=t();_(l,(e=>{e&&g(e)}));const{BtECharts:d,getEChart:u,setOption:f,setQuickOption:y}=Je({options:{xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{boundaryGap:[0,"50%"],type:"value"},series:[{name:"成交",type:"line",smooth:!0,symbol:"none",stack:"a",areaStyle:{},data:[]}]}}),g=async e=>{var t;f(h(e)),c.value=await u(),null==(t=c.value)||t.resize()},h=(e={})=>{const t={tooltip:{trigger:"axis",axisPointer:{type:"cross"},formatter:e.formatter},xAxis:{type:"category",boundaryGap:!1,data:e.tData,axisLine:{lineStyle:{color:"#666"}}},yAxis:{type:"value",name:e.unit,boundaryGap:[0,"100%"],splitNumber:e.splitNumber,min:0,splitLine:{lineStyle:{color:"#ddd"}},axisLine:{lineStyle:{color:"#666"}}},series:[]},{legend:a,dataZoom:l,list:s}=e;return a&&(t.legend=a),l&&(t.dataZoom=l),s.forEach((e=>{const a={name:e.name,data:e.data,symbolSize:6,type:e.type||"line",smooth:e.smooth||!0,symbol:e.symbol||"circle",showSymbol:!Oe(e.showSymbol)&&e.showSymbol,sampling:e.sampling||"average",areaStyle:e.areaStyle||{},lineStyle:e.lineStyle||{},itemStyle:e.itemStyle||{color:"rgb(0, 153, 238)"}};t.series.push(a)})),t};return a({echartRef:c,setConfig:g}),(e,t)=>{const a=W,l=J;return o(),n("div",ql,[v(l,{span:24,class:"w-full"},{default:p((()=>[(o(!0),n(I,null,T(e.info,(e=>(o(),m(a,{class:"text-center pt-[3.5rem] px-[1.5rem]",key:e.label,span:6,xs:12,sm:6,md:6,lg:6},{default:p((()=>[i("div",Gl,[O(i("i",{class:"spot rounded-[.5rem] inline-block w-[1rem] h-[1rem] mr-[.3rem]",style:q({"background-color":e.bgColor})},null,4),[[G,e.bgColor]]),i("span",null,r(e.label),1)]),i("div",{class:"text-[1.4rem] text-[#777]",style:q({color:e.color})},r(e.value),5)])),_:2},1024)))),128))])),_:1}),i("div",$l,[j(e.$slots,"default",{},void 0,!0),v(s(d),{class:"!h-[34rem]"})])])}}}),[["__scopeId","data-v-1f6d0cab"]]),Wl=k("HOME-MONITOR-STORE",(()=>{const e=ct(),{isRefreshData:a}=d(e),l=t(!0),s=t(!1),o=t(),n=t(),i=t("net"),r=t(localStorage.getItem("netUnit")||"KB"),c=ee({}),m=ee({}),p=t([]),v=t([]),f=B({net:{selectVal:"ALL",selectList:[],data:{timeList:[],upList:[],downList:[]},info:{up:{label:"上行",value:"0 B",bgColor:"#F7B851"},down:{label:"下行",value:"0 B",bgColor:"#52A9FF"},upTotal:{label:"总发送",value:"0 B"},downTotal:{label:"总接收",value:"0 B"}}},iostat:{selectVal:"ALL",selectList:[],data:{timeList:[],readList:[],writeList:[],tipsList:[]},info:{read:{label:"读取",value:"0 B",bgColor:"#FF4683"},write:{label:"写入",value:"0 B",bgColor:"#6CC0CF"},second:{label:"每秒读写",value:"0次"},io:{label:"IO延迟",value:"0 ms",color:"#20a53a"}}}}),y=t([{label:"KB/s",value:"KB",disable:!1},{label:"MB/s",value:"MB",disable:!1},{label:"GB/s",value:"GB",disable:!1},{label:"TB/s",value:"TB",disable:!1}]);let g;var h;(h=g||(g={})).Net="net",h.Iostat="iostat",Ct.useSetCallback("network",(e=>{var t,a;if(!e)return;p.value=e,"net"===i.value&&_(e,r.value);const l=L("net","data");c.value=k(l),(null==(a=null==(t=P(i.value))?void 0:t.echartRef)?void 0:a.id)&&(s.value=!1),w()})),Ct.useSetCallback("diskIo",(async e=>{var t,a;if(!e)return;v.value=e,"iostat"===i.value&&S(e);const l=L("iostat","data");m.value=I(l),(null==(a=null==(t=P(i.value))?void 0:t.echartRef)?void 0:a.id)&&(s.value=!1),w()}));const x=u((()=>f[i.value].selectVal)),w=()=>{for(const e in f){const t=D(e),a=f[e],{selectList:l}=a;l.length=0,Object.keys(t).forEach((e=>{if("ALL"===e)return a.selectVal||(a.selectVal=e),void l.unshift({label:"所有",value:"ALL"});l.push({label:e,value:e})}))}},b=(e,t)=>{const{up:a,down:l,upTotal:s,downTotal:o}=e;return{up:De(1024*a,!1,2,t),down:De(1024*l,!1,2,t),upTotal:De(1024*s,!1,2,t),downTotal:De(1024*o,!1,2,t)}},_=(e,t)=>{const{info:a}=L("net"),l=e[x.value||"ALL"];if(!l)return;const{up:s,down:o,upTotal:n,downTotal:i}=a,r=b(l,t),c=b(l,"MB");if(s.value=De(1024*l.up,!0,2,t),o.value=De(1024*l.down,!0,2,t),n.value=De(l.upTotal),i.value=De(l.downTotal),100*parseFloat(c.down)==0||100*parseFloat(c.down)==0)y.value=[{label:"KB/s",value:"KB",disable:!1},{label:"MB/s",value:"MB",disable:!0},{label:"GB/s",value:"GB",disable:!0},{label:"TB/s",value:"TB",disable:!0}];else{const e=b(l,"GB");if(100*parseFloat(e.down)==0||100*parseFloat(e.down)==0)y.value=[{label:"KB/s",value:"KB",disable:!1},{label:"MB/s",value:"MB",disable:!1},{label:"GB/s",value:"GB",disable:!0},{label:"TB/s",value:"TB",disable:!0}];else{const e=b(l,"TB");100*parseFloat(e.down)!=0&&100*parseFloat(e.down)!=0||(y.value=[{label:"KB/s",value:"KB",disable:!1},{label:"MB/s",value:"MB",disable:!1},{label:"GB/s",value:"GB",disable:!1},{label:"TB/s",value:"TB",disable:!0}])}}T("net",[{key:"timeList"},{key:"upList",value:r.up},{key:"downList",value:r.down}])},k=e=>({dataZoom:[],tData:e.timeList,list:[{name:"上行",data:e.upList,circle:"circle",itemStyle:{color:"#f7b851"},lineStyle:{width:1,color:"#f7b851"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,global:!1,colorStops:[{offset:0,color:"rgba(255, 140, 0, 1)"},{offset:.8,color:"rgba(255, 140, 0, .4)"}]}}},{name:"下行",data:e.downList,circle:"circle",itemStyle:{color:"#52a9ff"},lineStyle:{width:1,color:"#52a9ff"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,global:!1,colorStops:[{offset:0,color:"rgba(30, 144, 255, 1)"},{offset:.8,color:"rgba(30, 144, 255, .4)"}]}}}],formatter(e){let t="";for(let a=0;a<e.length;a++){const l=e[a];if(Oe(l.data))return!1;t+='<span class="inline-block w-[1rem] h-[1rem] mr-[1rem]" style="border-radius: 50%; background: '.concat(l.color,';"></span>').concat(l.seriesName,"：").concat(parseFloat(l.data).toFixed(2)," ").concat(r.value,"/s ").concat(e.length-1!==a?"<br />":"")}return"时间：".concat(e[0].axisValue,"<br />").concat(t)}}),S=e=>{const t=1048576,{info:a}=L("iostat"),l=e[f.iostat.selectVal||"ALL"],{read:s,write:o,second:n,io:i}=a;if(!l)return;const{read_bytes:r,write_bytes:c}=l,{read_count:d,write_count:u}=l,{read_time:m,write_time:p}=l;s.value=De(r),o.value=De(c),n.value="".concat(d+u," 次"),i.value="".concat(p>m?p:m," ms");const v=parseInt(i.value);i.color=v>=1e3?"#ff0000":v>100&&v<1e3?"#ff9900":"#20a53a",T("iostat",[{key:"timeList"},{key:"readList",value:(r/t).toFixed(2)},{key:"writeList",value:(c/t).toFixed(2)},{key:"tipsList",value:l}])},I=e=>({dataZoom:[],unit:"单位：MB/s",tData:e.timeList,list:[{name:"读取字节数",data:e.readList,circle:"circle",itemStyle:{color:"#FF4683"},lineStyle:{width:1,color:"#FF4683"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,global:!1,colorStops:[{offset:0,color:"rgba(255, 70, 131, 1)"},{offset:.8,color:"rgba(255, 70, 131, .4)"}]}}},{name:"写入字节数",data:e.writeList,circle:"circle",itemStyle:{color:"#6CC0CF"},lineStyle:{width:1,color:"#6CC0CF"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,global:!1,colorStops:[{offset:0,color:"rgba(108, 192, 207, 1)"},{offset:.8,color:"rgba(108, 192, 207, .4)"}]}}}],formatter(t){let a="时间：".concat(t[0].axisValue,"<br />");const l={read_bytes:"读取字节数",read_count:"读取字节数",read_merged_count:"合并读取次数",read_time:"读取延迟",write_bytes:"写入字节数",write_count:"写入次数",write_merged_count:"合并写入次数",write_time:"写入延迟"},s=e.tipsList[t[0].dataIndex];for(let e=0;e<t.length;e++){const l=t[e];if(Oe(l.data))return!1;a+='<span class="inline-block w-[1rem] h-[1rem] mr-[.1rem]" style="border-radius: 50%; background: '.concat(l.color,';"></span>&nbsp;&nbsp;<span>').concat(l.seriesName,"：").concat(parseFloat(l.data).toFixed(2)," MB/s</span><br />")}return["read_count","write_count","read_merged_count","write_merged_count","read_time","write_time"].forEach((e=>{const t=s[e],o=t>100&&t<1e3?"#ff9900":t>=1e3?"red":"#20a53a",n=e.indexOf("time")>-1?"color: ".concat(o):"",i=e.indexOf("time")>-1?" ms":" 次/秒";a+='<span class="inline-block w-[1rem] h-[1rem]"></span>&nbsp;&nbsp;<span style="'.concat(n,'">').concat(l[e],"：").concat(t+i,"</span><br />")})),a}}),T=(e,t,a=8)=>{const l=L(e,"data");t.forEach((e=>{const{key:t,value:s}=e,o=l[t];o.length>=a&&o.splice(0,1),"timeList"==t?o.push(Qe((new Date).getTime(),"hh:mm:ss",!0)):o.push(s)}))},P=e=>"net"==e?o.value:"iostat"==e?n.value:void 0,L=(e="net",t="")=>t?f[e][t]:f[e],D=(e="net")=>"net"==e?p.value:"iostat"==e?v.value:{};return{netRefs:o,iostatRefs:n,loading:s,iostatConfig:m,resource:f,unitList:y,activeName:i,netConfig:c,netUnit:r,initChart:()=>{s.value=!0;const e=localStorage.getItem("home-model-active"),t=localStorage.getItem("home-".concat(e,"-active"));e&&(i.value=e,f[e].selectVal=t||"ALL"),C((()=>{a.value=!0}));const l=L("net","data");c.value=k(l);const o=L("iostat","data");m.value=I(o)},onSelectChange:()=>{localStorage.setItem("home-model-active",i.value),localStorage.setItem("home-".concat(i.value,"-active"),x.value),"net"===i.value?_(p.value,r.value):S(v.value)},onNetUnitChange:()=>{f.net.data.timeList=[],f.net.data.upList=[],f.net.data.downList=[],localStorage.setItem("netUnit",r.value),_(p.value,r.value)},onTabsChange:()=>{C((()=>{const e=i.value,t=P(e);if(f[e].selectVal="ALL",localStorage.setItem("home-model-active",e),t&&l.value&&t.echartRef.resize(),l.value&&(s.value=!0),l.value&&"iostat"===e){l.value=!1;const e=L("iostat","data");null==t||t.setConfig(I(e))}C((()=>{t&&t.echartRef.resize()}))}))}}})),Jl={class:"flex items-center h-[5.3rem] absolute right-[1.6rem] z-100 whitespace-nowrap"},Ql={class:"mr-4 text-[#999]"},Zl={class:"mr-5 unit-select flex"},Xl=we(e({__name:"index",setup(e){const t=Wl(),{loading:a,iostatConfig:c,resource:u,unitList:f,activeName:y,netConfig:g,netUnit:h,netRefs:x,iostatRefs:w}=d(t);return l((()=>{t.initChart()})),(e,l)=>{const d=pe,_=de,k=ue,S=me,C=b,P=R("bt-loading");return o(),m(C,{class:"relative module-box !mb-[0px]",shadow:"always","body-style":{padding:0,display:"flex"}},{default:p((()=>[i("div",Jl,[i("span",Ql,r("net"===s(y)?"网卡":"磁盘"),1),(o(!0),n(I,null,T(s(u),((e,a)=>O((o(),m(_,{key:a,modelValue:e.selectVal,"onUpdate:modelValue":t=>e.selectVal=t,placeholder:"请选择","fit-input-width":!0,onChange:s(t).onSelectChange,size:"small",class:"!min-w-[150px]"},{default:p((()=>[(o(!0),n(I,null,T(e.selectList,(e=>(o(),m(d,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])),[[G,"".concat(a)==s(y)]]))),128))]),v(S,{class:"relative home-reset-tab w-full",modelValue:s(y),"onUpdate:modelValue":l[2]||(l[2]=e=>D(y)?y.value=e:null),onTabClick:s(t).onTabsChange},{default:p((()=>[v(k,{label:"流量",name:"net",class:"h-[414px]"},{default:p((()=>[O((o(),n("div",null,[v(Kl,{"model-value":s(g),info:s(u).net.info,ref_key:"netRefs",ref:x},{default:p((()=>[i("div",Zl,[l[3]||(l[3]=i("span",{class:"mr-[4px] text-[#999]"}," 单位 ",-1)),v(_,{modelValue:s(h),"onUpdate:modelValue":l[0]||(l[0]=e=>D(h)?h.value=e:null),size:"small",class:"w-[8rem]",onChange:l[1]||(l[1]=e=>s(t).onNetUnitChange()),placeholder:"请选择"},{default:p((()=>[(o(!0),n(I,null,T(s(f),(e=>(o(),m(d,{key:e.value,label:e.label,value:e.value,disabled:e.disable},null,8,["label","value","disabled"])))),128))])),_:1},8,["modelValue"])])])),_:1},8,["model-value","info"])])),[[P,s(a)],[P,"正在获取流量信息，请稍候...","title"]])])),_:1}),v(k,{label:"磁盘IO",name:"iostat",lazy:!0},{default:p((()=>[O((o(),n("div",null,[v(Kl,{ref_key:"iostatRefs",ref:w,"model-value":s(c),info:s(u).iostat.info},null,8,["model-value","info"])])),[[P,s(a)],[P,"正在获取磁盘IO信息，请稍候...","title"]])])),_:1})])),_:1},8,["modelValue","onTabClick"])])),_:1})}}}),[["__scopeId","data-v-9ed3a3ad"]]),Yl=k("RECOMMEND-STORE",(()=>{const{payment:e}=ve(),{authType:l,authExpirationTime:s}=a(e.value),o=t(!1),n=t([["time","5分钟极速响应"],["refund","15天无理由退款"],["plunge","30+款付费插件"],["function","20+企业版专享功能"],["certificate","2张SSL商用证书（年付）"],["message","1000条免费短信（年付）"]]),i=t(["多对一技术支持","全年5次安全排查","5分钟极速响应","30+款付费插件","20+企业版专享功能","1000条免费短信（年付）","2张SSL商用证书（年付）","专享企业服务群（年付）","WAF防火墙","更换授权IP","客服优先响应","15+款付费插件","15天无理由退款"]),r=t([0,0,0,0,0,0,0,0,1,1,1,1,1]),c=t([0,0,1,1,1,1,1,1,1,1,1,1,1]),d=t([1,1,1,1,1,1,1,1,1,1,1,1,1]),u=t(!1),m=t(!0);return{plusPrivilegeList:d,ltdPrivilegeList:c,proPrivilegeList:r,privilegeList:i,limitTimeShow:u,advantageList:n,recommendShow:m,showPrivilege:o,authType:l,authExpirationTime:s,setRecommendHide:e=>{const t=((new Date).getTime()+864e5*e).toString();localStorage.setItem("HOME-RECOMMEND-HIDE-TIME",t),m.value=!1},checkRecommendHide:()=>{const e=parseInt(localStorage.getItem("HOME-RECOMMEND-HIDE-TIME")||"0");e&&(m.value=e<(new Date).getTime())},openProduct:e=>lt({sourceId:e})}})),es={key:0,class:"h-auto"},ts={class:"absolute left-0 right-0 flex items-center px-[16px]"},as={class:"text-[#FC6D26]"},ls={class:"advantage-list"},ss={class:"text-[#888] text-[1.3rem]"},os={class:"absolute left-0 right-0 flex items-center px-[16px]"},ns={class:"flex items-center"},is={class:"relative"},rs={class:"advantage-list"},cs={class:"text-[#888] text-[1.3rem]"},ds={class:"p-[24px] flex justify-center flex-col items-center"},us={class:"flex items-center mt-[20px]"},ms={class:"flex-col items-center border border-[rgb(221,221,221)] justify-center w-[22rem]"},ps={class:"flex flex-col text-[1.4rem] text-[#666] function-text"},vs={class:"flex-col border border-[#FFEFD0] items-center bg-[#fff8eb] justify-center w-[22rem]"},fs={class:"text-[2rem] text-[#333] font-medium h-[9.4rem] leading-[9.4rem] text-center"},ys={class:"flex flex-col text-[1.4rem] text-[#666] pro-text"},gs={key:0,class:"svgtofont-el-close text-[red] text-[3px]l font-bold"},hs={key:1,class:"svgtofont-el-check text-[#feaa04] text-[18px] font-bold"},xs={key:0,class:"recommend-left"},ws={class:"text-[#E5A734] flex justify-center font-bold"},bs={class:"flex flex-col text-[1.4rem] text-[#666] ltd-text"},_s={key:0,class:"svgtofont-el-close text-[red] text-[18px] font-bold"},ks={key:1,class:"svgtofont-el-check text-[#feaa04] text-[18px] font-bold"},Ss={key:0,class:"svgtofont-el-close text-[red] text-[18px] font-bold"},Cs={key:1,class:"svgtofont-el-check text-[#feaa04] text-[18px] font-bold"},Is=we(e({__name:"index",setup(e){const t=Yl(),{plusPrivilegeList:a,ltdPrivilegeList:u,proPrivilegeList:m,privilegeList:f,limitTimeShow:h,advantageList:x,recommendShow:w,showPrivilege:b,authType:_,authExpirationTime:k}=d(t);return l((()=>{t.checkRecommendHide()})),(e,l)=>{const d=Ze,S=be,C=Xe;return s(w)?(o(),n("div",es,["ltd"===s(_)?(o(),n("div",{key:0,class:"advantage-view relative flex items-center",onMouseover:l[2]||(l[2]=e=>h.value=!0),onMouseleave:l[3]||(l[3]=e=>h.value=!1)},[i("div",ts,[i("div",{class:"flex items-center text-[1.3rem] mr-[4rem] w-[26.6rem] flex-shrink-0 cursor-pointer",onClick:l[0]||(l[0]=e=>s(t).openProduct(28))},[v(d,{src:"/vip/vip-ltd-new.svg",class:"mt-[4px] w-[7.0rem] h-2rem"}),l[11]||(l[11]=i("span",{class:"ml-[8px]"},"到期时间：",-1)),i("span",as,r(s(Qe)(s(k),"yyyy-MM-dd")),1),v(S,{class:"ml-[8px]",size:"12px"},{default:p((()=>l[10]||(l[10]=[g("续费")]))),_:1})]),i("div",ls,[(o(!0),n(I,null,T(s(x),((e,t)=>(o(),n("div",{class:"advantage-item",key:t},[i("i",{class:y("svgtofont-free-".concat(e[0],"-icon text-[1.8rem]  mr-[4px] text-[#9e6700]"))},null,2),i("span",ss,r(e[1]),1)])))),128))])]),O(i("div",{class:"day-not-display",onClick:l[1]||(l[1]=e=>s(t).setRecommendHide(3))},l[12]||(l[12]=[i("i",{class:"svgtofont-el-close"},null,-1),i("span",null,"近3天不再显示",-1)]),512),[[G,s(h)]])],32)):"free"===s(_)?(o(),n("div",{key:1,class:"advantage-view re-ad-bg relative flex items-center",onMouseover:l[6]||(l[6]=e=>h.value=!0),onMouseleave:l[7]||(l[7]=e=>h.value=!1)},[i("div",os,[i("div",ns,[i("div",is,[l[14]||(l[14]=i("i",{class:"svgtofont-free-recommend absolute !text-[3.2rem] text-[#ed0000] -top-[10px] -left-[3px]"},null,-1)),i("button",{class:"product-payment-btn",onClick:l[4]||(l[4]=e=>s(t).openProduct(27))},l[13]||(l[13]=[i("span",{class:"ml-[1.2rem text-[1.4rem] cursor-pointer"}," 立即升级 ",-1)]))]),v(d,{src:"/advantage/ltd-privilege.svg",class:"flex flex-shrink-0 w-[10rem] mx-[16px]"})]),i("div",rs,[(o(!0),n(I,null,T(s(x),((e,t)=>(o(),n("div",{class:"advantage-item",key:t},[i("i",{class:y("svgtofont-free-".concat(e[0],"-icon text-[1.8rem] mr-[4px] text-[#9e6700]"))},null,2),i("span",cs,r(e[1]),1)])))),128))])]),O(i("div",{class:"day-not-display",onClick:l[5]||(l[5]=e=>s(t).setRecommendHide(1))},l[15]||(l[15]=[i("i",{class:"svgtofont-el-close"},null,-1),g("近24小时不再显示")]),512),[[G,s(h)]])],32)):c("",!0),v(C,{modelValue:s(b),"onUpdate:modelValue":l[9]||(l[9]=e=>D(b)?b.value=e:null),area:96},{default:p((()=>[i("div",ds,[v(d,{src:"/advantage/privilege-contrast.png"}),i("div",us,[i("div",ms,[l[16]||(l[16]=i("p",{class:"text-[2rem] text-[#333] font-bold h-[9.4rem] leading-[9.4rem] text-center"},"功能特权",-1)),i("ul",ps,[(o(!0),n(I,null,T(s(f),((e,t)=>(o(),n("li",{class:"px-[24px] h-[4rem] leading-[4rem]",key:t},r(e),1)))),128))])]),i("div",vs,[i("div",fs,[i("p",null,[v(d,{src:"/advantage/privilege-pro.svg",class:"mr-[8px]"}),l[17]||(l[17]=g("专业版"))])]),i("ul",ys,[(o(!0),n(I,null,T(s(m),((e,t)=>(o(),n("li",{class:"px-[24px] h-[4rem] leading-[4rem] text-center",key:t},[e?(o(),n("i",hs)):(o(),n("i",gs))])))),128))])]),(o(),n(I,null,T(2,((e,m)=>i("div",{class:y(["w-[22rem] bg-[#272a2c] flex-col relative",m?"":"border-2 border-[#787878] h-[64.6rem] shadow"]),key:m},[0===m?(o(),n("span",xs)):c("",!0),i("div",{class:y(["text-[2rem] flex flex-col justify-center items-center",m?" h-[9.4rem]":" h-[11rem]"])},[i("div",ws,[v(d,{class:"mr-[8px]",src:"/advantage/privilege-diamond.svg"}),i("span",{class:y(m?"":"linear")},r(m?"企业运维托管":"企业版"),3)]),i("button",{class:y(["px-[20px] py-[4px]",m?"linear text-border privilege-button font-bold":"button-linear privilege-button"]),onClick:l[8]||(l[8]=e=>s(t).openProduct(45))},"立即购买",2)],2),i("ul",bs,[0===m?(o(!0),n(I,{key:0},T(s(u),((e,t)=>(o(),n("li",{key:t},[e?(o(),n("i",ks)):(o(),n("i",_s))])))),128)):c("",!0),0!=m?(o(!0),n(I,{key:1},T(s(a),((e,t)=>(o(),n("li",{key:t},[e?c("",!0):(o(),n("i",Ss)),e?(o(),n("i",Cs)):c("",!0)])))),128)):c("",!0)])],2))),64))])])])),_:1},8,["modelValue"])])):c("",!0)}}}),[["__scopeId","data-v-6eee3609"]]),Ts=e({__name:"index",setup(e){const{getAlarmData:t}=ve(),s=ct(),{panelInfo:i}=d(s),{isSetup:r,isRestart:c}=a(i.value);let u=null;return _((()=>r.value),(e=>{e||s.recommendInstallDialog()}),{immediate:!0,deep:!0}),l((async()=>{s.monitorLoginInfo(),u=Ye({idle:36e5,request:async()=>(await s.getSystemInfo(),c.value),timeout:3e3,retries:3}),s.getHomeConfig(),et({promises:[t,s.getUpdateInfo],delay:1e3})})),N((()=>{null==u||u.stop()})),(e,t)=>{const a=W,l=J;return o(),n("section",null,[v(l,{span:24},{default:p((()=>[v(a,{span:24},{default:p((()=>[v(St),v(zt),v(rl),v(kl)])),_:1})])),_:1}),v(l,{gutter:15,span:24},{default:p((()=>[v(a,{md:12,sm:24,span:12,xs:24},{default:p((()=>[v(Nl,{class:"h-[48rem] mb-0"})])),_:1}),v(a,{md:12,sm:24,span:12,xs:24},{default:p((()=>[v(Xl,{class:"h-[48rem] mb-0"})])),_:1})])),_:1}),v(Is,{class:"mt-[1.6rem]"})])}}}),Ps=Object.freeze(Object.defineProperty({__proto__:null,default:Ts},Symbol.toStringTag,{value:"Module"}));export{dl as H,Dt as a,Et as b,Lt as c,Ft as d,Nt as e,qt as f,At as g,Ps as i,Mt as k};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
