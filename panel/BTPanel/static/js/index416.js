import{ah as t,b as e,X as a,H as s,e as r}from"./utils-lib.js?v=1734676359";import{r as o,j as l,c as n,h as c,W as u,k as i,l as m,e as _,p}from"./base-lib.js?v=1734676359";import{getProxyConfigFile as v,saveProxyConfigFile as d}from"./site.js?v=1734676359";import{u as b}from"./useStore7.js?v=1734676359";const g=e(),{siteInfo:f}=b(),h=o("master"),y=o("server_block"),x=[{label:"server块",value:"server_block"},{label:"HTTP块",value:"http_block"}],j=[{content:"主配置文件不允许修改，如需自定义配置请到上方自定义配置文件中操作"}],k=[{content:"保存前请检查输入的配置文件是否正确，错误的配置可能会导致网站访问异常"},{content:"如果您对此配置不熟悉，请勿添加自定义配置"},{isHtml:!0,content:'server块的nginx官方配置文档：<a class="text-primary cursor-pointer" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#server" target="_blank" >点击跳转</a>'}],T=[{content:"保存前请检查输入的配置文件是否正确，错误的配置可能会导致网站访问异常"},{content:"如果您对此配置不熟悉，请勿添加自定义配置"},{isHtml:!0,content:'http块的nginx官方配置文档：<a class="text-primary cursor-pointer" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#http" target="_blank" >点击跳转</a>'}],H=o(k),E=o(""),I=o(!1),L=async()=>{try{I.value=!0;const{data:t}=await v({site_name:f.value.name});return t.status?"master"===h.value?E.value=t.data.site_conf:(E.value=t.data[y.value],H.value="server_block"===y.value?k:T):g.error(t.msg),{data:E.value}}catch(t){return{data:""}}finally{I.value=!1}};l((()=>{g.error("主配置文件不允许修改，如需自定义配置请到上方自定义配置文件中操作")}),3e3);const O=async()=>{if("master"===h.value)return{status:!1,msg:"主配置文件不允许修改，如需自定义配置请到上方自定义配置文件中操作"};let e=g.load("正在保存内容，请稍候...");try{const t=await d({site_name:f.value.name,conf_type:y.value,body:E.value});g.msg({dangerouslyUseHTMLString:!0,message:t.msg,type:t.status?"success":"error",duration:t.status?2e3:0,showClose:!t.status})}catch(a){return t(a),{status:!1,msg:"保存文件失败"}}finally{e.close()}},P=r(n({__name:"index",props:{compData:{default:()=>({})}},setup(t){const e=c({site_conf:"",http_block:"",server_block:""});u("configList",e),u("tabActive",h);const{BtTabs:r}=a({type:"card",value:h,options:[{label:"主配置文件",name:"master",lazy:!0,render:()=>s((()=>import("./files.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)},{label:"自定义配置文件",name:"custom",lazy:!0,render:()=>s((()=>import("./files.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)}]}),o=t=>{h.value=t};return(t,e)=>(i(),m("div",null,[_(p(r),{onChange:o})]))}}),[["__scopeId","data-v-ac419aa5"]]),S=Object.freeze(Object.defineProperty({__proto__:null,default:P},Symbol.toStringTag,{value:"Module"}));export{x as a,I as b,O as c,H as d,y as f,L as g,j as h,S as i,E as s,h as t};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
