import{a6 as e,G as a,ah as l,aa as s,O as t,e as o}from"./utils-lib.js?v=1734676359";import{c as n,r as i,h as r,e as c,o as m,B as d,C as u,p,k as v,l as f,J as _,z as g,M as h,q as y,y as V,v as j,F as x,I as w,aX as k,aj as U,aY as b}from"./base-lib.js?v=1734676359";import{modifyPathConfig as C,modifyPathConfigBatch as D,getTamperRuleByPath as R}from"./site.js?v=1734676359";import{u as I}from"./useStore7.js?v=1734676359";import{t as L}from"./useController3.js?v=1734676359";import{_ as q}from"./masker.vue_vue_type_script_setup_true_lang.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./column.js?v=1734676359";import"./index91.js?v=1734676359";import"./validator.js?v=1734676359";import"./index116.js?v=1734676359";import"./index.vue_vue_type_style_index_0_scoped_03ce946a_lang.js?v=1734676359";const z=""+new URL("../icons/icon-site-create.svg",import.meta.url).href,O=""+new URL("../icons/icon-site-edit.svg",import.meta.url).href,B=""+new URL("../icons/icon-site-delete.svg",import.meta.url).href,F={class:"overall-config overall-config-top"},G={class:"overall-config-item"},H={class:"overall-config-item"},J={class:"overall-config-item"},M={class:"mt-2rem"},S={class:"flex items-center"},X={class:"ml-[1rem] text-[#20a53a] mr-[.4rem] select-none"},Y={key:0,class:"overall-config-content"},A={class:"overall-config-content-left"},E={class:"overall-config-content-right"},K={class:"mr-1rem"},N=o(n({__name:"advanced",props:{compData:{default:{}}},setup(o){const{siteInfo:n}=I(),N=i("forbid"),P=i(!1),Q=i(!1),T=r({create:["create","mkdir","link"],edit:["rename","chown","chmod","modify"],delete:["unlink","rmdir"]}),W=i({}),Z=i({create:!1,edit:!1,delete:!1}),$=r({create:"创建",edit:"编辑",delete:"删除"}),ee=i([{label:"禁止功能",name:"forbid",lazy:!0,render:()=>c("span",null,null)}]),ae=async(l,s)=>{const t={value:l?1:0,path_id:W.value.pid,[e(s)?"key":"batch"]:s},o=e(s)?C:D;(await a({loading:"正在修改配置，请稍后...",request:o(t),message:!0})).status&&le()},le=async()=>{try{P.value=!0;const{data:e}=await R({path:n.value.path});let a=[];if(e){for(const l in e)-1!==l.indexOf("is_")?a[l]=!!e[l]:a[l]=e[l];W.value=a;for(const a in T)Z.value[a]=T[a].some((a=>e["is_".concat(a)]))}}catch(e){l(e)}finally{P.value=!1}};return m((()=>{le()})),(e,a)=>{var l;const o=s,n=U,i=b,r=t,m=d("bt-loading");return u((v(),f("div",null,[(null==(l=p(W))?void 0:l.path)?g("",!0):(v(),_(q,{key:0,compData:{...e.compData,init:le}},null,8,["compData"])),c(o,{ref:"tamperRef",type:"",modelValue:p(N),"onUpdate:modelValue":a[0]||(a[0]=e=>h(N)?N.value=e:null),options:p(ee)},null,8,["modelValue","options"]),y("div",F,[y("div",G,[a[8]||(a[8]=y("img",{class:"mr-[.6rem]",width:"16",src:z,alt:""},null,-1)),a[9]||(a[9]=y("span",{class:"mr-1rem"},"拦截创建",-1)),c(n,{modelValue:p(Z).create,"onUpdate:modelValue":a[1]||(a[1]=e=>p(Z).create=e),onChange:a[2]||(a[2]=e=>ae(p(Z).create,1))},null,8,["modelValue"])]),c(i,{direction:"vertical",class:"!h-2rem !mx-1.6rem"}),y("div",H,[a[10]||(a[10]=y("img",{class:"mr-[.6rem]",width:"16",src:O,alt:""},null,-1)),a[11]||(a[11]=y("span",{class:"mr-1rem"},"拦截编辑",-1)),c(n,{modelValue:p(Z).edit,"onUpdate:modelValue":a[3]||(a[3]=e=>p(Z).edit=e),onChange:a[4]||(a[4]=e=>ae(p(Z).edit,2))},null,8,["modelValue"])]),c(i,{direction:"vertical",class:"!h-2rem !mx-1.6rem"}),y("div",J,[a[12]||(a[12]=y("img",{class:"mr-[.6rem]",width:"16",src:B,alt:""},null,-1)),a[13]||(a[13]=y("span",{class:"mr-1rem"},"拦截删除",-1)),c(n,{modelValue:p(Z).delete,"onUpdate:modelValue":a[5]||(a[5]=e=>p(Z).delete=e),onChange:a[6]||(a[6]=e=>ae(p(Z).delete,3))},null,8,["modelValue"])])]),y("div",M,[y("div",S,[a[14]||(a[14]=V(" 开启高级设置 ")),y("div",{class:"more flex items-center cursor-pointer pl-[1rem]",onClick:a[7]||(a[7]=e=>Q.value=!p(Q))},[y("div",X,j("".concat(p(Q)?"折叠":"详情")),1),y("i",{class:x(["text-[16px]",p(Q)?"svgtofont-el-arrow-up":"svgtofont-el-arrow-down"])},null,2)])]),p(Q)?(v(),f("div",Y,[(v(!0),f(w,null,k(p(T),((e,a)=>(v(),f("div",{class:"overall-config-content-item",key:a},[y("div",A,"拦截"+j(p($)[a]),1),y("div",E,[(v(!0),f(w,null,k(e,((e,a)=>(v(),f("div",{class:"overall-config-item",key:a},[y("span",K,"拦截"+j(p(L)[e]),1),c(n,{modelValue:p(W)["is_".concat(e)],"onUpdate:modelValue":a=>p(W)["is_".concat(e)]=a,onChange:a=>ae(p(W)["is_".concat(e)],"is_".concat(e))},null,8,["modelValue","onUpdate:modelValue","onChange"])])))),128))])])))),128))])):g("",!0)]),c(r,{class:"mt-2rem",options:[{content:"提示：当前配置默认拦截以上规则，请根据当前项目需求设置和配置规则"}]})])),[[m,p(P)],[m,"正在获取站点防篡改信息，请稍侯","title"]])}}}),[["__scopeId","data-v-02d24c42"]]);export{N as default};
