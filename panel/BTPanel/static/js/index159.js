import{G as e,b3 as a,M as l,o as s,ah as t,u as n,k as i,aa as o,j as r,h as u,e as d}from"./utils-lib.js?v=1734676359";import{_ as m}from"./index101.js?v=1734676359";import{r as p,h as c,e as v,y as f,c as _,o as h,B as b,k as x,J as y,x as g,p as w,M as k,C as V,q as C,l as q,I as P,aX as U,v as L,z as B,F as j,G,ay as H,ag as M,ah as S,a7 as I,A as O,a4 as T,bL as z,bM as F,aY as A}from"./base-lib.js?v=1734676359";import{_ as E}from"./index90.js?v=1734676359";import{B as N}from"./index185.js?v=1734676359";import{S as D,_ as R}from"./index.vue_vue_type_script_setup_true_lang7.js?v=1734676359";import{$,a0 as J,m as Q,a1 as X,a2 as Y,a3 as K,a4 as W,a5 as Z,a6 as ee,a7 as ae,a8 as le,a9 as se,aa as te,ab as ne,ac as ie,ad as oe,ae as re,af as ue,Q as de,ag as me,ah as pe,ai as ce,aj as ve}from"./validator.js?v=1734676359";import{u as fe}from"./column.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./ace.js?v=1734676359";import"./index91.js?v=1734676359";const _e=D(),he=p({}),be=p("service"),xe=p(!1),ye=p(!1),ge=p(""),we=p(""),ke=p(""),Ve={pool:"应用池(pool)",process_manager:"进程管理方式(process manager)",dynamic:"动态",static:"静态",start_time:"启动日期(start time)",accepted_conn:"请求数(accepted conn)",listen_queue:"请求队列(listen queue)",max_listen_queue:"最大等待队列(max listen queue)",len_queue:"socket队列长度(listen queue len)",idle_processes:"空闲进程数量(idle processes)",active_processes:"活跃进程数量(active processes)",total_processes:"总进程数量(total processes)",max_active_processes:"最大活跃进程数量(max active processes)",max_children_reached:"到达进程上限次数(max children reached)",slow_requests:"慢请求数量(slow requests)"},Ce=p([]),qe=p(!1),Pe=c({slowLogs:"",logs:""}),Ue=p(""),Le=c({uploadLimit:"",timeLimit:""}),Be=async()=>{await e({loading:qe,request:$({version:we.value}),success:e=>{Pe.slowLogs=e.data.msg||"当前暂无数据"}})},je=async()=>{await e({loading:qe,request:J({version:we.value}),success:e=>{Pe.logs=e.msg?e.msg:"当前暂无数据"}})},Ge=async()=>{if(!(e=>{if("timeout"===e){if(!/^[1-9]\d*$/.test(Le.timeLimit))return l.error("请输入正整数"),!1;if(Number(Le.timeLimit)<30||Number(Le.timeLimit)>86400)return l.error("超时限制范围为30-86400"),!1}else{if(!/^[1-9]\d*$/.test(Le.uploadLimit))return l.error("请输入正整数"),!1;if(Number(Le.uploadLimit)<2)return l.error("上传大小限制不可小于2M"),!1}return!0})(be.value))return;const a="timeout"===be.value,s=a?oe:re,t={version:we.value,[a?"time":"max"]:a?Le.timeLimit:Le.uploadLimit};await e({loading:"正在保存中，请稍后...",request:s(t),message:!0})},He=async a=>{await e({loading:qe,request:de({path:a}),data:{data:[String,Ue]}})},Me=async l=>{await e({loading:"正在保存配置，请稍后...",request:a({path:"/www/server/php/"+we.value+"/etc/"+l,data:Ue.value,encoding:"utf-8"}),message:!0})},Se=p([{label:"名称",prop:"name"},{label:"类型",prop:"type"},{label:"说明",prop:"msg",width:320},{label:"状态",prop:"status",width:60,render:e=>e.status?v("i",{class:"svgtofont-el-check font-bold "},null):v("i",{class:"svgtofont-el-close font-bold "},null)},{label:"操作",align:"right",render:a=>"-1"===a.task&&"-1"!=a.phpversions.indexOf(ke.value)?v("span",{class:"bt-link",onClick:Q},[f("正在安装")]):"0"===a.task&&"-1"!=a.phpversions.indexOf(ke.value)?v("span",{class:"!text-medium bt-link",onClick:Q},[f("等待安装..")]):a.status?v("span",{class:"!text-danger bt-link",onClick:()=>{e({loading:"正在卸载中，请稍后...",request:X({name:a.name,version:ke.value}),message:!0})}},[f("卸载")]):v("span",{class:"bt-link",onClick:()=>{e({loading:"正在安装中，请稍后...",request:Y({name:a.name.toLowerCase(),version:ke.value,type:1}),message:!0,success:()=>{Q(),Te()}})}},[f("安装")])}]),Ie=p([]),Oe=c({list:[],functionInput:""}),Te=async()=>{await e({loading:qe,request:K({version:we.value}),data:{libs:[Array,Ie],disable_functions:String},success:e=>{const a=e.libs.filter((e=>e.versions.includes(we.value)));Ie.value=a,Oe.list=e.disable_functions?e.disable_functions.split(",").map((e=>({name:e}))):[]}})},ze=p([]),Fe=async()=>{let a={version:we.value};ze.value.forEach((e=>{a[e.name]=e.value})),await e({loading:"正在保存中，请稍后...",request:W(a),message:!0})},Ae=async(a=!1)=>{await e({loading:xe,request:Z({version:we.value}),data:[Array,ze],success:e=>{a&&l.success("刷新成功")}})},Ee=async a=>{const l=(()=>{const e=Oe.list.map((e=>e.name)).join(",");return{version:we.value,disable_functions:e}})();await e({loading:"正在保存中，请稍后...",request:me(l),message:!0,success:e=>{e.status&&(Oe.functionInput="",Te())}})},Ne=async()=>{Oe.list.push({name:Oe.functionInput}),await Ee()},De=p([{label:"名称",prop:"name"},fe([{title:"删除",onClick:async e=>{Oe.list.splice(Oe.list.indexOf(e),1),await Ee()}}])]),Re={"1GB内存":{max_children:30,start_servers:5,min_spare_servers:5,max_spare_servers:20},"2GB内存":{max_children:50,start_servers:5,min_spare_servers:5,max_spare_servers:30},"4GB内存":{max_children:80,start_servers:10,min_spare_servers:10,max_spare_servers:30},"8GB内存":{max_children:120,start_servers:10,min_spare_servers:10,max_spare_servers:30},"16GB内存":{max_children:200,start_servers:15,min_spare_servers:15,max_spare_servers:50},"32GB内存":{max_children:300,start_servers:20,min_spare_servers:20,max_spare_servers:50}},$e=c({limit:"",listen:"",bind_port:"",allowed:"",pm:"",max_children:"",start_servers:"",min_spare_servers:"",max_spare_servers:""}),Je=p([]),Qe={max_children:"允许创建的最大子进程数",start_servers:"起始进程数（服务启动后初始进程数量）",min_spare_servers:"最小空闲进程数（清理空闲进程后的保留数量）",max_spare_servers:"最大空闲进程数（当空闲进程达到此值时清理）"},Xe=e=>{Je.value=Object.entries(Re[e]).map((e=>({name:e[0],value:e[1],tips:Qe[e[0]]})))},Ye=async()=>{Je.value.forEach(((e,a)=>{a<4&&($e[e.name]=e.value)})),await e({loading:"正在保存中，请稍后...",request:ee({version:we.value,...$e,btn_children_submit:""}),message:!0})},Ke=c({save_handler:"",save_path:"",port:"",passwd:""}),We=c({total:0,oldfile:0}),Ze=async()=>{await e({loading:"正在保存中，请稍后...",request:ae({version:we.value,save_handler:Ke.save_handler,ip:Ke.save_path,port:Ke.port,passwd:Ke.passwd}),message:!0})},ea=async()=>{await s({title:"清理php_session文件",icon:"warning-filled",content:"是否清理php_session文件？"}),e({loading:"正在清理，请稍后...",request:le(),message:!0,success:aa})},aa=async()=>{await e({loading:qe,request:se({version:we.value}),success:e=>{We.total=e.data.total,We.oldfile=e.data.oldfile}})},la=async()=>{switch(Ke.save_handler){case"redis":Ke.save_path="127.0.0.1",Ke.port="6379";break;case"memcache":case"memcached":Ke.save_path="127.0.0.1",Ke.port="11211";break;case"files":Ke.save_path="",Ke.port="",Ke.passwd=""}},sa=p([]),ta=p(!1),na=p(""),ia=c({data:{},key:[]}),oa=async()=>{await e({loading:xe,request:ve({php_version:we.value}),success:e=>{ia.data=e.data,ia.key=Object.keys(ia.data.phpinfo.keys);const a=e.data.phpinfo.modules.split(" ")||[];sa.value=a.map((e=>({name:e})))}})},ra=async()=>{await e({request:te({version:we.value}),success:e=>{na.value=e.data.replace("a:link {color: #009; text-decoration: none; background-color: #fff;}","").replace("a:link {color: #000099; text-decoration: none; background-color: #ffffff;}",""),ta.value=!0}})},ua=async({props:{name:a}})=>{switch(a){case"development":case"function":Te();break;case"performance":(async()=>{xe.value=!0;try{const{data:e}=await pe({version:we.value});Je.value=[],Object.keys(e).forEach((a=>{Je.value.push({name:a,value:e[a],tips:Qe[a]})})),$e.listen=e.unix,$e.allowed=e.allowed,$e.bind_port=e.bind+(e.port?":"+e.port:""),$e.pm=e.pm,Object.keys(Re).forEach((a=>{Re[a].max_children===Number(e.max_children)&&($e.limit=a)}))}catch(e){t(e)}finally{xe.value=!1}})();break;case"session":(async()=>{await e({loading:xe,request:ce({version:we.value}),success:e=>{Ke.save_handler=e.data.save_handler,Ke.save_path=e.data.save_path,Ke.port=e.data.port,Ke.passwd=e.data.passwd}})})(),aa();break;case"phpinfo":oa();break;case"settings":Ae();break;case"config":He("/www/server/php/"+we.value+"/etc/php.ini");break;case"fpm":He("/www/server/php/"+we.value+"/etc/php-fpm.conf");break;case"state":(async()=>{xe.value=!0;try{const e=await ue({version:we.value});Ce.value=[],Object.keys(e.data).forEach((a=>{Ve[a.replaceAll(" ","_")]&&Ce.value.push({name:Ve[a.replaceAll(" ","_")],value:e.data[a]})})),0===Ce.value.length&&(Ce.value=[{name:"当前暂无数据",value:"null"}])}catch(e){t(e)}finally{xe.value=!1}})();break;case"logs":je();break;case"slowLogs":Be();break;case"timeout":case"upload":(async()=>{await e({loading:xe,request:ie({version:we.value}),success:e=>{Le.uploadLimit=e.data.max,Le.timeLimit=e.data.maxTime}})})()}},da=async()=>{try{e({loading:"正在获取中，请稍后...",request:ne(),message:!0})}catch(a){}},ma=p("list"),pa=async({props:{name:e}})=>{ma.value=e,"list"===e?Te():"installed"===e&&oa()},ca={class:"mt-[8px] leading-8 text-[1.2rem] list-disc ml-[20px]"},va={key:0,class:"flex items-center"},fa={key:1,class:"flex items-center"},_a={class:"flex text-[#666] items-center"},ha={class:"flex text-[#666] items-center"},ba={class:"my-[12px]"},xa={class:"leading-8 mt-20px text-[1.2rem] list-disc ml-[20px]"},ya={class:"my-[12px]"},ga={class:"flex items-center"},wa={class:"flex flex-col text-[#666] performance"},ka={class:"flex items-center"},Va={class:"flex items-center"},Ca={class:"flex items-center"},qa={class:"flex items-center"},Pa={class:"flex items-center"},Ua={class:"ml-[12px] text-[#999]"},La={class:"flex items-center"},Ba={class:"phpinfo pb-[20px]"},ja={class:"inline-block max-w-[50rem]"},Ga=["innerHTML"],Ha=d(_({__name:"index",props:{compData:{default:{}}},setup(e){const a=e,{mainHeight:l}=n();return h((()=>{var e;e=a.compData,be.value="service",e&&(he.value=e),_e.init(he.value),ye.value=he.value.status,ge.value=he.value.s_version+"-"+he.value.name.replace("php-","").replace(".",""),we.value=he.value.name.replace("php-","").replace(".",""),ke.value=he.value.version.split(".")[0]+he.value.version.split(".")[1]})),(e,a)=>{const s=H,t=i,n=o,d=r,p=M,c=S,_=I,h=O,D=T,$=N,J=E,Q=z,X=F,Y=A,K=m,W=u,Z=b("bt-loading");return x(),y(n,{modelValue:w(be),"onUpdate:modelValue":a[22]||(a[22]=e=>k(be)?be.value=e:null),type:"left-bg-card",onTabClick:w(ua)},{default:g((()=>[v(s,{label:"服务",name:"service"},{default:g((()=>[v(R)])),_:1}),v(s,{label:"安装扩展",name:"development",lazy:""},{default:g((()=>[v(n,{type:"card",onTabClick:w(pa),modelValue:w(ma),"onUpdate:modelValue":a[1]||(a[1]=e=>k(ma)?ma.value=e:null)},{default:g((()=>[v(s,{label:"安装列表",name:"list"},{default:g((()=>[V(v(t,{column:w(Se),data:w(Ie),"max-height":"450"},null,8,["column","data"]),[[Z,w(qe)]]),C("ul",ca,[C("li",null,[C("span",{class:"bt-link",onClick:a[0]||(a[0]=(...e)=>w(da)&&w(da)(...e))},"点击获取最新扩展列表")]),a[23]||(a[23]=C("li",null,"Redis扩展仅支持一个PHP版本安装使用，若在其它PHP版本已安装redis扩展，请勿再装",-1)),a[24]||(a[24]=C("li",null,"请按实际需求安装扩展,不要安装不必要的PHP扩展,这会影响PHP执行效率,甚至出现异常",-1)),a[25]||(a[25]=C("li",null,"opcache/xcache/apc等脚本缓存扩展,请只安装其中1个,否则可能导致您的站点程序异常",-1))])])),_:1}),v(s,{label:"已安装拓展",name:"installed"},{default:g((()=>[V(v(t,{column:[{label:"扩展名称",prop:"name"}],data:w(sa),"max-height":"520"},null,8,["data"]),[[Z,w(qe)]])])),_:1})])),_:1},8,["onTabClick","modelValue"])])),_:1}),v(s,{label:"配置修改",name:"settings",lazy:""},{default:g((()=>[V((x(),q("div",null,[v(D,{"label-position":"right","label-width":"200px",class:"settings"},{default:g((()=>[(x(!0),q(P,null,U(w(ze),((e,a)=>(x(),y(_,{label:e.name,key:a},{default:g((()=>[2==e.type||3===e.type||"cgi.fix_pathinfo"===e.name?(x(),q("div",va,[v(d,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,width:"12rem",class:"mr-[12px]"},null,8,["modelValue","onUpdate:modelValue"]),C("span",null,L(e.ps),1)])):(x(),q("div",fa,[v(c,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,class:"!w-[12rem] mr-[12px]"},{default:g((()=>[v(p,{label:"开启",value:"On"}),v(p,{label:"关闭",value:"Off"})])),_:2},1032,["modelValue","onUpdate:modelValue"]),C("span",null,L(e.ps),1)]))])),_:2},1032,["label"])))),128)),v(_,{label:" ",class:"mt-[20px]"},{default:g((()=>[v(h,{type:"primary",onClick:w(Fe)},{default:g((()=>a[26]||(a[26]=[f("保存")]))),_:1},8,["onClick"]),v(h,{type:"default",onClick:a[2]||(a[2]=e=>w(Ae)(!0))},{default:g((()=>a[27]||(a[27]=[f("刷新")]))),_:1})])),_:1})])),_:1})])),[[Z,w(xe)]])])),_:1}),V((x(),y(s,{label:"上传限制",name:"upload"},{default:g((()=>[C("div",_a,[v(d,{modelValue:w(Le).uploadLimit,"onUpdate:modelValue":a[3]||(a[3]=e=>w(Le).uploadLimit=e),type:"number","text-type":"MB",width:"14rem"},{append:g((()=>a[28]||(a[28]=[f("MB")]))),_:1},8,["modelValue"]),v(h,{type:"primary",class:"ml-[12px]",onClick:w(Ge)},{default:g((()=>a[29]||(a[29]=[f("保存")]))),_:1},8,["onClick"])])])),_:1})),[[Z,w(xe)]]),V((x(),y(s,{label:"超时限制",name:"timeout"},{default:g((()=>[C("div",ha,[v(d,{modelValue:w(Le).timeLimit,"onUpdate:modelValue":a[4]||(a[4]=e=>w(Le).timeLimit=e),type:"number","text-type":"秒",width:"14rem"},{append:g((()=>a[30]||(a[30]=[f("秒")]))),_:1},8,["modelValue"]),v(h,{type:"primary",class:"ml-[12px]",onClick:w(Ge)},{default:g((()=>a[31]||(a[31]=[f("保存")]))),_:1},8,["onClick"])])])),_:1})),[[Z,w(xe)]]),v(s,{label:"配置文件",name:"config",lazy:""},{default:g((()=>[a[34]||(a[34]=C("span",{class:"my-[4px] text-[#666]"},"提示：Ctrl+F 搜索关键字，Ctrl+S 保存，Ctrl+H 查找替换",-1)),C("div",ba,[V(v($,{class:"!h-[46rem] !w-[64rem]",modelValue:w(Ue),"onUpdate:modelValue":a[5]||(a[5]=e=>k(Ue)?Ue.value=e:null),id:"configContent",onSave:a[6]||(a[6]=e=>w(Me)("php.ini"))},null,8,["modelValue"]),[[Z,w(qe)]])]),v(h,{type:"primary",onClick:a[7]||(a[7]=e=>w(Me)("php.ini"))},{default:g((()=>a[32]||(a[32]=[f("保存")]))),_:1}),C("ul",xa,[C("li",null,"此处为"+L(e.compData.name)+"主配置文件,若您不了解配置规则,请勿随意修改",1),a[33]||(a[33]=C("li",null,"默认已开启Openssl/Curl/Mysql等扩展，详情可点击phpinfo查看",-1))])])),_:1}),v(s,{label:"FPM配置文件",name:"fpm"},{default:g((()=>[a[36]||(a[36]=C("span",{class:"my-[4px] text-[#666]"},"提示：Ctrl+F 搜索关键字，Ctrl+S 保存，Ctrl+H 查找替换",-1)),C("div",ya,[V(v($,{class:"!h-[48rem] !w-[64rem]",modelValue:w(Ue),"onUpdate:modelValue":a[8]||(a[8]=e=>k(Ue)?Ue.value=e:null),id:"fpmContent",onSave:a[9]||(a[9]=e=>w(Me)("php-fpm.conf"))},null,8,["modelValue"]),[[Z,w(qe)]])]),v(h,{type:"primary",onClick:a[10]||(a[10]=e=>w(Me)("php-fpm.conf"))},{default:g((()=>a[35]||(a[35]=[f("保存")]))),_:1}),a[37]||(a[37]=C("ul",{class:"mt-[8px] leading-8 text-[1.2rem] list-disc ml-[20px]"},[C("li",null,"此处为PHP-FPM配置文件,若您不了解配置规则，请勿修改!")],-1))])),_:1}),v(s,{label:"禁用函数",name:"function",lazy:""},{default:g((()=>[v(J,null,{"header-left":g((()=>[C("div",ga,[v(d,{placeholder:"添加要被禁止的函数名,如: exec",width:"32rem",modelValue:w(Oe).functionInput,"onUpdate:modelValue":a[11]||(a[11]=e=>w(Oe).functionInput=e)},null,8,["modelValue"]),v(h,{type:"primary",class:"ml-[8px]",onClick:w(Ne)},{default:g((()=>a[38]||(a[38]=[f("保存")]))),_:1},8,["onClick"])])])),content:g((()=>[V(v(t,{column:w(De),data:w(Oe).list,"max-height":"500"},null,8,["column","data"]),[[Z,w(qe)]])])),"footer-left":g((()=>a[39]||(a[39]=[C("ul",{class:"mt-[8px] leading-8 text-[1.2rem] list-disc ml-[20px]"},[C("li",null,"在此处可以禁用指定函数的调用,以增强环境安全性!"),C("li",null,"强烈建议禁用如exec,system等危险函数!")],-1)]))),_:1})])),_:1}),v(s,{label:"性能调整",name:"performance",lazy:""},{default:g((()=>[V((x(),q("div",wa,[v(D,{"label-position":"right","label-width":"140px",class:"mb-[20px] performance-form",model:w($e)},{default:g((()=>[v(_,{label:"并发方案"},{default:g((()=>[v(c,{class:"!w-[16rem] mr-[4px]",modelValue:w($e).limit,"onUpdate:modelValue":a[12]||(a[12]=e=>w($e).limit=e),onChange:w(Xe)},{default:g((()=>[v(p,{label:"1GB内存",value:"1GB内存"}),v(p,{label:"2GB内存",value:"2GB内存"}),v(p,{label:"4GB内存",value:"4GB内存"}),v(p,{label:"8GB内存",value:"8GB内存"}),v(p,{label:"16GB内存",value:"16GB内存"}),v(p,{label:"32GB内存",value:"32GB内存"})])),_:1},8,["modelValue","onChange"])])),_:1}),v(_,{label:"连接方式"},{default:g((()=>[C("div",ka,[v(c,{class:"!w-[16rem] mr-[12px]",modelValue:w($e).listen,"onUpdate:modelValue":a[13]||(a[13]=e=>w($e).listen=e)},{default:g((()=>[v(p,{label:"Unix套接字",value:"unix"}),v(p,{label:"Tcp套接字",value:"tcp"})])),_:1},8,["modelValue"]),a[40]||(a[40]=C("span",{class:"text-[#999]"},"推荐Unix套接字",-1))])])),_:1}),v(_,{label:"连接信息"},{default:g((()=>[C("div",Va,[v(d,{width:"16rem",modelValue:w($e).bind_port,"onUpdate:modelValue":a[14]||(a[14]=e=>w($e).bind_port=e)},null,8,["modelValue"]),a[41]||(a[41]=C("span",{class:"ml-12px text-[#999]"},"绑定IP:监听端口或Uinx套接字地址",-1))])])),_:1}),v(_,{label:"IP白名单"},{default:g((()=>[C("div",Ca,[v(d,{width:"16rem",modelValue:w($e).allowed,"onUpdate:modelValue":a[15]||(a[15]=e=>w($e).allowed=e)},null,8,["modelValue"]),a[42]||(a[42]=C("span",{class:"ml-12px text-[#999]"},"允许访问PHP的IP，多个请用逗号隔开",-1))])])),_:1}),v(_,{label:"运行模式"},{default:g((()=>[C("div",qa,[v(c,{class:"!w-[16rem] mr-[12px]",modelValue:w($e).pm,"onUpdate:modelValue":a[16]||(a[16]=e=>w($e).pm=e)},{default:g((()=>[v(p,{label:"静态模式",value:"static"}),v(p,{label:"动态模式",value:"dynamic"}),v(p,{label:"按需模式",value:"ondemand"})])),_:1},8,["modelValue"]),a[43]||(a[43]=C("span",{class:"text-[#999]"},"PHP-FPM运行模式",-1))])])),_:1}),(x(!0),q(P,null,U(w(Je),((e,a)=>(x(),q(P,{key:a},[a<4?(x(),y(_,{key:0,label:e.name},{default:g((()=>[C("div",Pa,[v(d,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,width:"16rem",type:"number"},null,8,["modelValue","onUpdate:modelValue"]),C("span",Ua,L(e.tips),1)])])),_:2},1032,["label"])):B("",!0)],64)))),128)),v(_,{label:" "},{default:g((()=>[v(h,{type:"primary",onClick:w(Ye)},{default:g((()=>a[44]||(a[44]=[f("保存")]))),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"]),a[45]||(a[45]=C("ul",{class:"mt-[8px] leading-8 text-[1.2rem] list-disc ml-[20px]"},[C("li",null,"【最大子进程数量】越大，并发能力越强，但max_children最大不要超过5000"),C("li",null,"【内存】每个PHP子进程需要20MB左右内存，过大的max_children会导致服务器不稳定"),C("li",null,"【静态模式】始终维持设置的子进程数量，对内存开销较大，但并发能力较好"),C("li",null,"【动态模式】按设置最大空闲进程数来收回进程，内存开销小，建议小内存机器使用"),C("li",null,"【按需模式】根据访问需求自动创建进程，内存开销极小，但并发能力略差"),C("li",null,"【外网访问】若需外网访问，连接方式为TCP套接字，并将[连接信息-绑定IP]改为0.0.0.0"),C("li",null,"【外网访问】配置正确的IP白名单，在防火墙/安全组放行监听端口，有安全风险，需谨慎")],-1))])),[[Z,w(xe)]])])),_:1}),V((x(),y(s,{label:"负载状态",name:"state"},{default:g((()=>[v(X,{class:"margin-top",column:2,border:""},{default:g((()=>[(x(!0),q(P,null,U(w(Ce),((e,a)=>(x(),y(Q,{key:a,span:2},{label:g((()=>[f(L(e.name),1)])),default:g((()=>[f(" "+L(e.value),1)])),_:2},1024)))),128))])),_:1})])),_:1})),[[Z,w(xe)]]),v(s,{label:"Session配置",name:"session",lazy:""},{default:g((()=>[C("div",null,[V((x(),y(D,{form:w(Ke),class:"session"},{default:g((()=>[v(_,{label:"存储模式"},{default:g((()=>[v(c,{modelValue:w(Ke).save_handler,"onUpdate:modelValue":a[17]||(a[17]=e=>w(Ke).save_handler=e),onChange:w(la),class:"!w-[24rem]"},{default:g((()=>[v(p,{label:"files",value:"files"}),v(p,{label:"Redis",value:"redis"}),v(p,{label:"Memcache",value:"memcache"}),v(p,{label:"Memcached",value:"memcached"})])),_:1},8,["modelValue","onChange"])])),_:1}),v(_,{label:"链接地址"},{default:g((()=>[C("div",La,[v(d,{modelValue:w(Ke).save_path,"onUpdate:modelValue":a[18]||(a[18]=e=>w(Ke).save_path=e),disabled:"files"===w(Ke).save_handler,width:"24rem"},null,8,["modelValue","disabled"]),a[46]||(a[46]=C("span",{class:"ml-[8px]"},"支持域名和IP地址",-1))])])),_:1}),v(_,{label:"端口"},{default:g((()=>[v(d,{modelValue:w(Ke).port,"onUpdate:modelValue":a[19]||(a[19]=e=>w(Ke).port=e),disabled:"files"===w(Ke).save_handler,width:"24rem"},null,8,["modelValue","disabled"])])),_:1}),v(_,{label:"密码"},{default:g((()=>[v(d,{placeholder:"无密码时留空",modelValue:w(Ke).passwd,"onUpdate:modelValue":a[20]||(a[20]=e=>w(Ke).passwd=e),disabled:"files"===w(Ke).save_handler,width:"24rem"},null,8,["modelValue","disabled"])])),_:1}),v(_,{label:" "},{default:g((()=>[v(h,{type:"primary",onClick:w(Ze)},{default:g((()=>a[47]||(a[47]=[f("保存")]))),_:1},8,["onClick"])])),_:1})])),_:1},8,["form"])),[[Z,w(xe)]]),a[52]||(a[52]=C("ul",{class:"mt-[8px] leading-12 text-[1.2rem] list-disc ml-[20px]"},[C("li",null,"若你的站点并发比较高，使用Redis，Memcache能有效提升PHP并发能力"),C("li",null,"若调整Session模式后，网站访问异常，请切换回原来的模式"),C("li",null,"切换Session模式会使在线的用户会话丢失，请在流量小的时候切换")],-1)),v(Y),V((x(),q("div",null,[a[51]||(a[51]=C("div",null,"清理Session文件",-1)),v(X,{class:"my-[20px] w-[50%] session",column:1,border:""},{default:g((()=>[v(Q,null,{label:g((()=>a[48]||(a[48]=[f(" 总Session文件数量 ")]))),default:g((()=>[f(" "+L(w(We).total),1)])),_:1}),v(Q,null,{label:g((()=>a[49]||(a[49]=[f(" 可清理的Session文件数量 ")]))),default:g((()=>[f(" "+L(w(We).oldfile),1)])),_:1})])),_:1}),v(h,{type:"primary",onClick:w(ea)},{default:g((()=>a[50]||(a[50]=[f("清理session文件")]))),_:1},8,["onClick"])])),[[Z,w(qe)]])])])),_:1}),v(s,{label:"日志",name:"logs"},{default:g((()=>[v(K,{title:"全屏查看日志",content:w(Pe).logs,autoScroll:!0,isHtml:!0,style:"height:600px",refresh:w(je)},null,8,["content","refresh"])])),_:1}),v(s,{label:"慢日志",name:"slowLogs"},{default:g((()=>[v(K,{title:"全屏查看日志",content:w(Pe).slowLogs,autoScroll:!0,isHtml:!0,style:"height:600px",refresh:w(Be)},null,8,["content","refresh"])])),_:1}),v(s,{label:"phpinfo",name:"phpinfo",lazy:"",class:"overflow-auto h-full"},{default:g((()=>[V((x(),q("div",null,[C("div",Ba,[v(h,{type:"default",onClick:w(ra)},{default:g((()=>a[53]||(a[53]=[f("查看phpinfo")]))),_:1},8,["onClick"]),v(X,{class:"margin-top",column:2,border:"",title:"基本信息"},{default:g((()=>[v(Q,null,{label:g((()=>a[54]||(a[54]=[f(" PHP版本 ")]))),default:g((()=>{var e;return[f(" "+L((null==(e=w(ia).data.phpinfo)?void 0:e.php_version)||""),1)]})),_:1}),v(Q,null,{label:g((()=>a[55]||(a[55]=[f(" 安装位置 ")]))),default:g((()=>{var e;return[f(" "+L((null==(e=w(ia).data.phpinfo)?void 0:e.php_path)||""),1)]})),_:1}),v(Q,{span:2},{label:g((()=>a[56]||(a[56]=[f(" php.ini ")]))),default:g((()=>{var e;return[f(" "+L((null==(e=w(ia).data.phpinfo)?void 0:e.php_ini)||""),1)]})),_:1}),v(Q,{span:2},{label:g((()=>a[57]||(a[57]=[f(" 已加载 ")]))),default:g((()=>{var e;return[C("span",ja,L((null==(e=w(ia).data.phpinfo)?void 0:e.modules)||""),1)]})),_:1})])),_:1}),(x(!0),q(P,null,U(w(ia).key,((e,a)=>(x(),y(X,{column:3,border:"",title:w(ia).data.phpinfo.keys[e],key:a},{default:g((()=>[(x(!0),q(P,null,U(Object.keys(w(ia).data[e]),((a,l)=>(x(),y(Q,{key:l},{label:g((()=>[f(L(a),1)])),default:g((()=>[C("span",{class:j(w(ia).data[e][a]?"text-primary":"text-danger")},L(w(ia).data[e][a]?"yes":"no"),3)])),_:2},1024)))),128))])),_:2},1032,["title"])))),128))]),v(W,{title:"phpInfo",modelValue:w(ta),"onUpdate:modelValue":a[21]||(a[21]=e=>k(ta)?ta.value=e:null),area:["90%"]},{default:g((()=>[C("div",{innerHTML:w(na),class:"overflow-auto",style:G("height:".concat(w(l)-100,"px"))},null,12,Ga)])),_:1},8,["modelValue"])])),[[Z,w(xe)]])])),_:1})])),_:1},8,["modelValue","onTabClick"])}}}),[["__scopeId","data-v-28f19de9"]]);export{Ha as default};
