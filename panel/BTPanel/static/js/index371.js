import{G as a,k as e}from"./utils-lib.js?v=1734676359";import{c as t,r as s,az as l,o as n,B as r,k as i,l as m,q as o,e as u,p as c,M as d,z as p,I as f,aX as b,C as v,aj as y,v as _}from"./base-lib.js?v=1734676359";import{aE as g,aF as x,aG as j,aH as q}from"./firewall.js?v=1734676359";import{u as h}from"./column.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./index91.js?v=1734676359";const k={class:"p-[2rem]"},w={key:0,class:"flex items-center mb-[2rem]"},D={class:"flex items-center justify-center mb-[1.2rem] bg-[#fafafa] border-1 border-[#ddd] py-[1.2rem]"},I={class:"text-[1.2rem]"},S={class:"font-bold text-[1.8rem] mt-[.8rem]"},z=t({__name:"index",props:{compData:{default:()=>({})}},setup(t){const z=t,A=s(!1),C=s(),P=s(!1),V=s([{title:"封锁的IP总数",value:"total_banned",num:0},{title:"连接失败总数",value:"total_failed",num:0},{title:"当前封锁IP数",value:"currently_banned",num:0},{title:"当前连接失败次数",value:"currently_failed",num:0}]),B=async e=>{A.value=!e,await a({loading:"正在设置防扫描开关，请稍候...",request:g({status:e?1:0}),message:!0}),A.value=e},E=async()=>{"AntiScan"==z.compData.type&&(async()=>{try{const{data:e}=await a({loading:"正在获取防扫描开关状态，请稍候...",request:q()});A.value=Boolean(e.status)}catch(e){}})(),(async()=>{const e=await a({loading:P,request:z.compData.requestFn()});V.value.forEach((a=>{a.num=Number(e.data[a.value])||0})),C.value=e.data.banned_ip_list})()},F=[{label:"IP",prop:"ip",render:a=>l("span",a)},h([{onClick:e=>(async e=>{const t="AntiScan"===z.compData.type;await a({loading:"正在解封,请稍后...",request:t?x({data:JSON.stringify({ip:e})}):j({ip:e}),message:!0}),E()})(e),title:"删除"}])];return n(E),(a,t)=>{const s=y,l=e,n=r("bt-loading");return i(),m("div",k,["AntiScan"==a.compData.type?(i(),m("div",w,[t[1]||(t[1]=o("span",{class:"mr-[.8rem]"},"防扫描开关",-1)),u(s,{modelValue:c(A),"onUpdate:modelValue":t[0]||(t[0]=a=>d(A)?A.value=a:null),size:"small",onChange:B},null,8,["modelValue"])])):p("",!0),o("div",D,[(i(!0),m(f,null,b(c(V),((a,e)=>(i(),m("div",{key:e,class:"flex flex-col items-center mx-[.4rem] p-[.8rem]"},[o("span",I,_(a.title),1),o("span",S,_(a.num||0),1)])))),128))]),v(u(l,{ref:"antiTable",column:F,data:c(C),"max-height":220},null,8,["data"]),[[n,c(P)],[n,"正在加载中，请稍后...","title"]])])}}});export{z as default};
