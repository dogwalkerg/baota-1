import{D as e,aU as a,aO as t,a4 as l,bR as r,j as o,O as i}from"./utils-lib.js?v=1734676359";import{c as s,i as d,e as m,o as n,k as u,J as p,x as c,p as h,q as v,y as f,l as y,I as b,aX as g,A as j,ag as V,ah as _,a7 as x}from"./base-lib.js?v=1734676359";import{H as U,I as w,J as A,K as k,L as z}from"./index129.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./useController.js?v=1734676359";import"./useStore3.js?v=1734676359";import"./validator.js?v=1734676359";import"./index91.js?v=1734676359";import"./column.js?v=1734676359";import"./index90.js?v=1734676359";import"./index353.js?v=1734676359";import"./form-item.js?v=1734676359";import"./index185.js?v=1734676359";import"./ace.js?v=1734676359";import"./useStore7.js?v=1734676359";import"./site.js?v=1734676359";import"./index101.js?v=1734676359";const Z={class:"flex items-center"},R={class:"flex items-center justify-center checked-button"},C=s({__name:"add-redirect",setup(s,{expose:C}){const L=e=>{q.value.redirectdomain=k.value.map((e=>e.name))},E=e=>{q.value.redirectdomain=[]},{BtForm:$,param:q,submit:O,clearValidate:H}=e({data:()=>{let e={type:!0,holdpath:!0,domainorpath:"domain",redirecttype:"301",redirectpath:"",tourl:"http://",redirectdomain:[],redirectname:""};if(U.value){const{type:a,holdpath:t,...l}=U.value;Object.assign(e,{type:1===a,holdpath:1===t,...l})}return e},options:e=>d((()=>[{type:"custom",render:()=>m(t,{label:"开启重定向"},{default:()=>[m("div",{class:"flex items-center"},[m(a,{modelValue:e.value.type,"onUpdate:modelValue":a=>e.value.type=a},null),m(t,{label:"保留URL参数",style:"margin-left: 4rem;"},{default:()=>[m(a,{modelValue:e.value.holdpath,"onUpdate:modelValue":a=>e.value.holdpath=a},null)]})])]})},{type:"custom",render:()=>m(t,{label:"重定向类型"},{default:()=>[m("div",{class:"flex items-center"},[m(l,{modelValue:e.value.domainorpath,"onUpdate:modelValue":a=>e.value.domainorpath=a,options:[{label:"域名",value:"domain"},{label:"路径",value:"path"}],onChange:e=>{H()},style:"width: 15rem;"},null),m(t,{label:"重定向方式"},{default:()=>[m(l,{modelValue:e.value.redirecttype,"onUpdate:modelValue":a=>e.value.redirecttype=a,options:[{label:"301（永久重定向）",value:"301"},{label:"302（临时重定向）",value:"302"}],style:"width: 15rem;"},null)]})])]})},{type:"slots",key:"domain",rules:{tourl:[r({message:"请输入目标URL",trigger:"blur"}),{validator:(e,a,t)=>{if("http://"===a||"https://"===a)t(new Error("请输入目标URL"));else{new RegExp("^((https|http|ftp|rtsp|mms)?://)?(([0-9a-zA-Z_!~*'().&=+$%-]+: )?[0-9a-zA-Z_!~*'().&=+$%-]+@)?(([0-9]{1,3}\\.){3}[0-9]{1,3}|([0-9a-zA-Z_!~*'()-]+\\.)*([0-9a-zA-Z][0-9a-zA-Z-]{0,61})?[0-9a-zA-Z]\\.[a-zA-Z]{2,6})(:[0-9]{1,4})?((/?)|(/[0-9a-zA-Z_!~*'().;?:@&=+$,%#-]+)+/?)$").test(a)?t():t(new Error("请输入正确的URL"))}},trigger:["change","input"]}],redirectdomain:[{required:!0,message:"请选择重定向域名",trigger:"change"},{validator:(a,t,l)=>{0===t.length&&"domain"===e.value.domainorpath?l(new Error("请选择重定向域名")):l()},trigger:["change"]}],redirectpath:[{required:!0,message:"请输入重定向路径",trigger:"blur"}]}}])),submit:async(e,a)=>(await a(),await w(e.value))});return n(A),C({onConfirm:O}),(e,a)=>{const t=j,l=V,r=_,s=o,d=x,n=i;return u(),p(h($),{class:"p-[2rem]"},{domain:c((()=>[m(d,{prop:"domain"===h(q).domainorpath?"redirectdomain":"redirectpath",label:"重定向".concat("domain"===h(q).domainorpath?"域名":"路径")},{default:c((()=>[v("div",Z,["domain"===h(q).domainorpath?(u(),p(r,{key:0,"collapse-tags":"",multiple:"",style:{width:"15rem"},modelValue:h(q).redirectdomain,"onUpdate:modelValue":a[0]||(a[0]=e=>h(q).redirectdomain=e)},{header:c((()=>[v("div",R,[m(t,{onClick:L,type:"default"},{default:c((()=>a[3]||(a[3]=[f("全选")]))),_:1}),m(t,{onClick:E,type:"default"},{default:c((()=>a[4]||(a[4]=[f("取消全选")]))),_:1})])])),default:c((()=>[(u(!0),y(b,null,g(h(k),((e,a)=>(u(),p(l,{key:a,value:e.name,label:e.name},null,8,["value","label"])))),128))])),_:1},8,["modelValue"])):(u(),p(s,{key:1,width:"15rem",modelValue:h(q).redirectpath,"onUpdate:modelValue":a[1]||(a[1]=e=>h(q).redirectpath=e),placeholder:"如：/b.com"},null,8,["modelValue"])),m(d,{label:"目标url",prop:"tourl"},{default:c((()=>[m(s,{modelValue:h(q).tourl,"onUpdate:modelValue":a[2]||(a[2]=e=>h(q).tourl=e),width:"24rem"},null,8,["modelValue"])])),_:1})])])),_:1},8,["prop","label"]),m(d,null,{default:c((()=>[m(n,{options:h(z),"list-style":"disc"},null,8,["options"])])),_:1})])),_:1})}}});export{C as default};
