!function(){function e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,u,o=[],s=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(o.push(r.value),o.length!==t);s=!0);}catch(e){l=!0,a=e}finally{try{if(!s&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw a}}return o}}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?t(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function r(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return i(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function u(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */u=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function f(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,n){return e[t]=n}}function p(e,t,n,r){var i=t&&t.prototype instanceof w?t:w,u=Object.create(i.prototype),o=new I(r||[]);return a(u,"_invoke",{value:C(e,n,o)}),u}function v(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=p;var h="suspendedStart",d="suspendedYield",m="executing",g="completed",b={};function w(){}function y(){}function x(){}var k={};f(k,o,(function(){return this}));var S=Object.getPrototypeOf,_=S&&S(S(R([])));_&&_!==n&&r.call(_,o)&&(k=_);var L=x.prototype=w.prototype=Object.create(k);function E(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(a,i,u,o){var s=v(e[a],e,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==c(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,u,o)}),(function(e){n("throw",e,u,o)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return n("throw",e,u,o)}))}o(s.arg)}var i;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return i=i?i.then(a,a):a()}})}function C(t,n,r){var a=h;return function(i,u){if(a===m)throw Error("Generator is already running");if(a===g){if("throw"===i)throw u;return{value:e,done:!0}}for(r.method=i,r.arg=u;;){var o=r.delegate;if(o){var s=D(o,r);if(s){if(s===b)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===h)throw a=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=m;var l=v(t,n,r);if("normal"===l.type){if(a=r.done?g:d,l.arg===b)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(a=g,r.method="throw",r.arg=l.arg)}}}function D(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,D(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var i=v(a,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,b;var u=i.arg;return u?u.done?(n[t.resultName]=u.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):u:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function F(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function R(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(c(t)+" is not iterable")}return y.prototype=x,a(L,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:y,configurable:!0}),y.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},E(T.prototype),f(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,a,i){void 0===i&&(i=Promise);var u=new T(p(e,n,r,a),i);return t.isGeneratorFunction(n)?u:u.next().then((function(e){return e.done?e.value:u.next()}))},E(L),f(L,l,"Generator"),f(L,o,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(F),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return o.type="throw",o.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var u=this.tryEntries[i],o=u.completion;if("root"===u.tryLoc)return a("end");if(u.tryLoc<=this.prev){var s=r.call(u,"catchLoc"),l=r.call(u,"finallyLoc");if(s&&l){if(this.prev<u.catchLoc)return a(u.catchLoc,!0);if(this.prev<u.finallyLoc)return a(u.finallyLoc)}else if(s){if(this.prev<u.catchLoc)return a(u.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return a(u.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var u=i?i.completion:{};return u.type=e,u.arg=t,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(u)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),F(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;F(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:R(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),b}},t}function o(e,t,n,r,a,i,u){try{var o=e[i](u),s=o.value}catch(e){return void n(e)}o.done?t(s):Promise.resolve(s).then(r,a)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function u(e){o(i,r,a,u,s,"next",e)}function s(e){o(i,r,a,u,s,"throw",e)}u(void 0)}))}}function l(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}System.register(["./utils-lib-legacy.js?v=1734676359","./base-lib-legacy.js?v=1734676359","./store-legacy2.js?v=1734676359","./validator-legacy.js?v=1734676359","./__commonjsHelpers__-legacy.js?v=1734676359","./column-legacy.js?v=1734676359"],(function(t,a){"use strict";var i,o,f,p,v,h,d,m,g,b,w,y,x,k,S,_,L,E,T,C,D,N,F,I,R,O,A,j,P,M,z,q,H,B,V,G,U,W,J,$,K,Y,X,Q,Z,ee,te,ne,re,ae,ie,ue,oe,se,le,ce,fe,pe,ve,he,de,me,ge,be,we,ye,xe,ke,Se,_e,Le,Ee,Te,Ce,De,Ne,Fe,Ie,Re,Oe,Ae,je,Pe,Me,ze,qe,He,Be,Ve,Ge,Ue,We,Je,$e,Ke,Ye,Xe,Qe,Ze,et,tt,nt,rt,at,it,ut,ot,st,lt,ct,ft,pt,vt,ht,dt,mt,gt,bt,wt,yt,xt,kt,St,_t,Lt,Et,Tt,Ct,Dt,Nt,Ft,It,Rt,Ot,At,jt,Pt,Mt,zt,qt,Ht,Bt;return{setters:[function(e){i=e.ah,o=e.b,f=e.G,p=e.j,v=e.u,h=e.H,d=e.M,m=e.l,g=e.b6,b=e.o,w=e.R,y=e.b7,x=e.b8,k=e.b3,S=e.t,_=e.J,L=e.b9,E=e.ba,T=e.bb,C=e.S,D=e.x,N=e.bc,F=e.v,I=e.af,R=e.p,O=e.b5,A=e.bd,j=e.q,P=e.ai,M=e.a7,z=e.be},function(e){q=e.r,H=e.n,B=e.c,V=e.w,G=e.aD,U=e.B,W=e.C,J=e.D,$=e.k,K=e.l,Y=e.e,X=e.L,Q=e.N,Z=e.q,ee=e.g,te=e.d,ne=e.t,re=e.h,ae=e.R,ie=e.a_,ue=e.b1,oe=e.s,se=e.az,le=e.y,ce=e.ah,fe=e.ag,pe=e.a5,ve=e.i,he=e.j,de=e.p},function(e){me=e.e,ge=e.f,be=e.s,we=e.h,ye=e.a,xe=e.i,ke=e.j,Se=e.k,_e=e.l,Le=e.m,Ee=e.n,Te=e.o,Ce=e.p,De=e.q,Ne=e.r,Fe=e.z,Ie=e.t,Re=e.u,Oe=e.v,Ae=e.w,je=e.x,Pe=e.y,Me=e.C,ze=e.A,qe=e.B,He=e.D,Be=e.E,Ve=e.F,Ge=e.G,Ue=e.H,We=e.I,Je=e.J,$e=e.K,Ke=e.L,Ye=e.M,Xe=e.N,Qe=e.O,Ze=e.P,et=e.Q,tt=e.R,nt=e.S,rt=e.T,at=e.U,it=e.V,ut=e.W,ot=e.X,st=e.Y,lt=e.Z,ct=e.b,ft=e._,pt=e.$,vt=e.a0,ht=e.a1,dt=e.a2,mt=e.a3,gt=e.a4,bt=e.a5,wt=e.a6,yt=e.a7,xt=e.d,kt=e.a8,St=e.a9,_t=e.aa,Lt=e.ab,Et=e.ac,Tt=e.ad,Ct=e.ae,Dt=e.af,Nt=e.ag,Ft=e.ah,It=e.ai,Rt=e.aj},function(e){Ot=e.i,At=e.f,jt=e.j,Pt=e.h,Mt=e.p},function(e){zt=e.g},function(e){qt=e.a,Ht=e.u,Bt=e.c}],execute:function(){var Vt={exports:{}};function Gt(e){return e&&"object"===c(e)&&!Array.isArray(e)&&null!==e}!function(e){var t=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},n=-1;t.Diff=function(e,t){return[e,t]},t.prototype.diff_main=function(e,n,r,a){void 0===a&&(a=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var i=a;if(null==e||null==n)throw new Error("Null input. (diff_main)");if(e==n)return e?[new t.Diff(0,e)]:[];void 0===r&&(r=!0);var u=r,o=this.diff_commonPrefix(e,n),s=e.substring(0,o);e=e.substring(o),n=n.substring(o),o=this.diff_commonSuffix(e,n);var l=e.substring(e.length-o);e=e.substring(0,e.length-o),n=n.substring(0,n.length-o);var c=this.diff_compute_(e,n,u,i);return s&&c.unshift(new t.Diff(0,s)),l&&c.push(new t.Diff(0,l)),this.diff_cleanupMerge(c),c},t.prototype.diff_compute_=function(e,r,a,i){var u;if(!e)return[new t.Diff(1,r)];if(!r)return[new t.Diff(n,e)];var o=e.length>r.length?e:r,s=e.length>r.length?r:e,l=o.indexOf(s);if(-1!=l)return u=[new t.Diff(1,o.substring(0,l)),new t.Diff(0,s),new t.Diff(1,o.substring(l+s.length))],e.length>r.length&&(u[0][0]=u[2][0]=n),u;if(1==s.length)return[new t.Diff(n,e),new t.Diff(1,r)];var c=this.diff_halfMatch_(e,r);if(c){var f=c[0],p=c[1],v=c[2],h=c[3],d=c[4],m=this.diff_main(f,v,a,i),g=this.diff_main(p,h,a,i);return m.concat([new t.Diff(0,d)],g)}return a&&e.length>100&&r.length>100?this.diff_lineMode_(e,r,i):this.diff_bisect_(e,r,i)},t.prototype.diff_lineMode_=function(e,r,a){var i=this.diff_linesToChars_(e,r);e=i.chars1,r=i.chars2;var u=i.lineArray,o=this.diff_main(e,r,!1,a);this.diff_charsToLines_(o,u),this.diff_cleanupSemantic(o),o.push(new t.Diff(0,""));for(var s=0,l=0,c=0,f="",p="";s<o.length;){switch(o[s][0]){case 1:c++,p+=o[s][1];break;case n:l++,f+=o[s][1];break;case 0:if(l>=1&&c>=1){o.splice(s-l-c,l+c),s=s-l-c;for(var v=this.diff_main(f,p,!1,a),h=v.length-1;h>=0;h--)o.splice(s,0,v[h]);s+=v.length}c=0,l=0,f="",p=""}s++}return o.pop(),o},t.prototype.diff_bisect_=function(e,r,a){for(var i=e.length,u=r.length,o=Math.ceil((i+u)/2),s=o,l=2*o,c=new Array(l),f=new Array(l),p=0;p<l;p++)c[p]=-1,f[p]=-1;c[s+1]=0,f[s+1]=0;for(var v=i-u,h=v%2!=0,d=0,m=0,g=0,b=0,w=0;w<o&&!((new Date).getTime()>a);w++){for(var y=-w+d;y<=w-m;y+=2){for(var x=s+y,k=(T=y==-w||y!=w&&c[x-1]<c[x+1]?c[x+1]:c[x-1]+1)-y;T<i&&k<u&&e.charAt(T)==r.charAt(k);)T++,k++;if(c[x]=T,T>i)m+=2;else if(k>u)d+=2;else if(h){if((L=s+v-y)>=0&&L<l&&-1!=f[L])if(T>=(_=i-f[L]))return this.diff_bisectSplit_(e,r,T,k,a)}}for(var S=-w+g;S<=w-b;S+=2){for(var _,L=s+S,E=(_=S==-w||S!=w&&f[L-1]<f[L+1]?f[L+1]:f[L-1]+1)-S;_<i&&E<u&&e.charAt(i-_-1)==r.charAt(u-E-1);)_++,E++;if(f[L]=_,_>i)b+=2;else if(E>u)g+=2;else if(!h){if((x=s+v-S)>=0&&x<l&&-1!=c[x]){var T;k=s+(T=c[x])-x;if(T>=(_=i-_))return this.diff_bisectSplit_(e,r,T,k,a)}}}}return[new t.Diff(n,e),new t.Diff(1,r)]},t.prototype.diff_bisectSplit_=function(e,t,n,r,a){var i=e.substring(0,n),u=t.substring(0,r),o=e.substring(n),s=t.substring(r),l=this.diff_main(i,u,!1,a),c=this.diff_main(o,s,!1,a);return l.concat(c)},t.prototype.diff_linesToChars_=function(e,t){var n=[],r={};function a(e){for(var t="",a=0,u=-1,o=n.length;u<e.length-1;){-1==(u=e.indexOf("\n",a))&&(u=e.length-1);var s=e.substring(a,u+1);(r.hasOwnProperty?r.hasOwnProperty(s):void 0!==r[s])?t+=String.fromCharCode(r[s]):(o==i&&(s=e.substring(a),u=e.length),t+=String.fromCharCode(o),r[s]=o,n[o++]=s),a=u+1}return t}n[0]="";var i=4e4,u=a(e);return i=65535,{chars1:u,chars2:a(t),lineArray:n}},t.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){for(var r=e[n][1],a=[],i=0;i<r.length;i++)a[i]=t[r.charCodeAt(i)];e[n][1]=a.join("")}},t.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,r=Math.min(e.length,t.length),a=r,i=0;n<a;)e.substring(i,a)==t.substring(i,a)?i=n=a:r=a,a=Math.floor((r-n)/2+n);return a},t.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,r=Math.min(e.length,t.length),a=r,i=0;n<a;)e.substring(e.length-a,e.length-i)==t.substring(t.length-a,t.length-i)?i=n=a:r=a,a=Math.floor((r-n)/2+n);return a},t.prototype.diff_commonOverlap_=function(e,t){var n=e.length,r=t.length;if(0==n||0==r)return 0;n>r?e=e.substring(n-r):n<r&&(t=t.substring(0,n));var a=Math.min(n,r);if(e==t)return a;for(var i=0,u=1;;){var o=e.substring(a-u),s=t.indexOf(o);if(-1==s)return i;u+=s,0!=s&&e.substring(a-u)!=t.substring(0,u)||(i=u,u++)}},t.prototype.diff_halfMatch_=function(e,t){if(this.Diff_Timeout<=0)return null;var n=e.length>t.length?e:t,r=e.length>t.length?t:e;if(n.length<4||2*r.length<n.length)return null;var a=this;function i(e,t,n){for(var r,i,u,o,s=e.substring(n,n+Math.floor(e.length/4)),l=-1,c="";-1!=(l=t.indexOf(s,l+1));){var f=a.diff_commonPrefix(e.substring(n),t.substring(l)),p=a.diff_commonSuffix(e.substring(0,n),t.substring(0,l));c.length<p+f&&(c=t.substring(l-p,l)+t.substring(l,l+f),r=e.substring(0,n-p),i=e.substring(n+f),u=t.substring(0,l-p),o=t.substring(l+f))}return 2*c.length>=e.length?[r,i,u,o,c]:null}var u,o,s,l,c,f=i(n,r,Math.ceil(n.length/4)),p=i(n,r,Math.ceil(n.length/2));return f||p?(u=p?f&&f[4].length>p[4].length?f:p:f,e.length>t.length?(o=u[0],s=u[1],l=u[2],c=u[3]):(l=u[0],c=u[1],o=u[2],s=u[3]),[o,s,l,c,u[4]]):null},t.prototype.diff_cleanupSemantic=function(e){for(var r=!1,a=[],i=0,u=null,o=0,s=0,l=0,c=0,f=0;o<e.length;)0==e[o][0]?(a[i++]=o,s=c,l=f,c=0,f=0,u=e[o][1]):(1==e[o][0]?c+=e[o][1].length:f+=e[o][1].length,u&&u.length<=Math.max(s,l)&&u.length<=Math.max(c,f)&&(e.splice(a[i-1],0,new t.Diff(n,u)),e[a[i-1]+1][0]=1,i--,o=--i>0?a[i-1]:-1,s=0,l=0,c=0,f=0,u=null,r=!0)),o++;for(r&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),o=1;o<e.length;){if(e[o-1][0]==n&&1==e[o][0]){var p=e[o-1][1],v=e[o][1],h=this.diff_commonOverlap_(p,v),d=this.diff_commonOverlap_(v,p);h>=d?(h>=p.length/2||h>=v.length/2)&&(e.splice(o,0,new t.Diff(0,v.substring(0,h))),e[o-1][1]=p.substring(0,p.length-h),e[o+1][1]=v.substring(h),o++):(d>=p.length/2||d>=v.length/2)&&(e.splice(o,0,new t.Diff(0,p.substring(0,d))),e[o-1][0]=1,e[o-1][1]=v.substring(0,v.length-d),e[o+1][0]=n,e[o+1][1]=p.substring(d),o++),o++}o++}},t.prototype.diff_cleanupSemanticLossless=function(e){function n(e,n){if(!e||!n)return 6;var r=e.charAt(e.length-1),a=n.charAt(0),i=r.match(t.nonAlphaNumericRegex_),u=a.match(t.nonAlphaNumericRegex_),o=i&&r.match(t.whitespaceRegex_),s=u&&a.match(t.whitespaceRegex_),l=o&&r.match(t.linebreakRegex_),c=s&&a.match(t.linebreakRegex_),f=l&&e.match(t.blanklineEndRegex_),p=c&&n.match(t.blanklineStartRegex_);return f||p?5:l||c?4:i&&!o&&s?3:o||s?2:i||u?1:0}for(var r=1;r<e.length-1;){if(0==e[r-1][0]&&0==e[r+1][0]){var a=e[r-1][1],i=e[r][1],u=e[r+1][1],o=this.diff_commonSuffix(a,i);if(o){var s=i.substring(i.length-o);a=a.substring(0,a.length-o),i=s+i.substring(0,i.length-o),u=s+u}for(var l=a,c=i,f=u,p=n(a,i)+n(i,u);i.charAt(0)===u.charAt(0);){a+=i.charAt(0),i=i.substring(1)+u.charAt(0),u=u.substring(1);var v=n(a,i)+n(i,u);v>=p&&(p=v,l=a,c=i,f=u)}e[r-1][1]!=l&&(l?e[r-1][1]=l:(e.splice(r-1,1),r--),e[r][1]=c,f?e[r+1][1]=f:(e.splice(r+1,1),r--))}r++}},t.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,t.whitespaceRegex_=/\s/,t.linebreakRegex_=/[\r\n]/,t.blanklineEndRegex_=/\n\r?\n$/,t.blanklineStartRegex_=/^\r?\n\r?\n/,t.prototype.diff_cleanupEfficiency=function(e){for(var r=!1,a=[],i=0,u=null,o=0,s=!1,l=!1,c=!1,f=!1;o<e.length;)0==e[o][0]?(e[o][1].length<this.Diff_EditCost&&(c||f)?(a[i++]=o,s=c,l=f,u=e[o][1]):(i=0,u=null),c=f=!1):(e[o][0]==n?f=!0:c=!0,u&&(s&&l&&c&&f||u.length<this.Diff_EditCost/2&&s+l+c+f==3)&&(e.splice(a[i-1],0,new t.Diff(n,u)),e[a[i-1]+1][0]=1,i--,u=null,s&&l?(c=f=!0,i=0):(o=--i>0?a[i-1]:-1,c=f=!1),r=!0)),o++;r&&this.diff_cleanupMerge(e)},t.prototype.diff_cleanupMerge=function(e){e.push(new t.Diff(0,""));for(var r,a=0,i=0,u=0,o="",s="";a<e.length;)switch(e[a][0]){case 1:u++,s+=e[a][1],a++;break;case n:i++,o+=e[a][1],a++;break;case 0:i+u>1?(0!==i&&0!==u&&(0!==(r=this.diff_commonPrefix(s,o))&&(a-i-u>0&&0==e[a-i-u-1][0]?e[a-i-u-1][1]+=s.substring(0,r):(e.splice(0,0,new t.Diff(0,s.substring(0,r))),a++),s=s.substring(r),o=o.substring(r)),0!==(r=this.diff_commonSuffix(s,o))&&(e[a][1]=s.substring(s.length-r)+e[a][1],s=s.substring(0,s.length-r),o=o.substring(0,o.length-r))),a-=i+u,e.splice(a,i+u),o.length&&(e.splice(a,0,new t.Diff(n,o)),a++),s.length&&(e.splice(a,0,new t.Diff(1,s)),a++),a++):0!==a&&0==e[a-1][0]?(e[a-1][1]+=e[a][1],e.splice(a,1)):a++,u=0,i=0,o="",s=""}""===e[e.length-1][1]&&e.pop();var l=!1;for(a=1;a<e.length-1;)0==e[a-1][0]&&0==e[a+1][0]&&(e[a][1].substring(e[a][1].length-e[a-1][1].length)==e[a-1][1]?(e[a][1]=e[a-1][1]+e[a][1].substring(0,e[a][1].length-e[a-1][1].length),e[a+1][1]=e[a-1][1]+e[a+1][1],e.splice(a-1,1),l=!0):e[a][1].substring(0,e[a+1][1].length)==e[a+1][1]&&(e[a-1][1]+=e[a+1][1],e[a][1]=e[a][1].substring(e[a+1][1].length)+e[a+1][1],e.splice(a+1,1),l=!0)),a++;l&&this.diff_cleanupMerge(e)},t.prototype.diff_xIndex=function(e,t){var r,a=0,i=0,u=0,o=0;for(r=0;r<e.length&&(1!==e[r][0]&&(a+=e[r][1].length),e[r][0]!==n&&(i+=e[r][1].length),!(a>t));r++)u=a,o=i;return e.length!=r&&e[r][0]===n?o:o+(t-u)},t.prototype.diff_prettyHtml=function(e){for(var t=[],r=/&/g,a=/</g,i=/>/g,u=/\n/g,o=0;o<e.length;o++){var s=e[o][0],l=e[o][1].replace(r,"&amp;").replace(a,"&lt;").replace(i,"&gt;").replace(u,"&para;<br>");switch(s){case 1:t[o]='<ins style="background:#e6ffe6;">'+l+"</ins>";break;case n:t[o]='<del style="background:#ffe6e6;">'+l+"</del>";break;case 0:t[o]="<span>"+l+"</span>"}}return t.join("")},t.prototype.diff_text1=function(e){for(var t=[],n=0;n<e.length;n++)1!==e[n][0]&&(t[n]=e[n][1]);return t.join("")},t.prototype.diff_text2=function(e){for(var t=[],r=0;r<e.length;r++)e[r][0]!==n&&(t[r]=e[r][1]);return t.join("")},t.prototype.diff_levenshtein=function(e){for(var t=0,r=0,a=0,i=0;i<e.length;i++){var u=e[i][0],o=e[i][1];switch(u){case 1:r+=o.length;break;case n:a+=o.length;break;case 0:t+=Math.max(r,a),r=0,a=0}}return t+=Math.max(r,a)},t.prototype.diff_toDelta=function(e){for(var t=[],r=0;r<e.length;r++)switch(e[r][0]){case 1:t[r]="+"+encodeURI(e[r][1]);break;case n:t[r]="-"+e[r][1].length;break;case 0:t[r]="="+e[r][1].length}return t.join("\t").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(e,r){for(var a=[],i=0,u=0,o=r.split(/\t/g),s=0;s<o.length;s++){var l=o[s].substring(1);switch(o[s].charAt(0)){case"+":try{a[i++]=new t.Diff(1,decodeURI(l))}catch(p){throw new Error("Illegal escape in diff_fromDelta: "+l)}break;case"-":case"=":var c=parseInt(l,10);if(isNaN(c)||c<0)throw new Error("Invalid number in diff_fromDelta: "+l);var f=e.substring(u,u+=c);"="==o[s].charAt(0)?a[i++]=new t.Diff(0,f):a[i++]=new t.Diff(n,f);break;default:if(o[s])throw new Error("Invalid diff operation in diff_fromDelta: "+o[s])}}if(u!=e.length)throw new Error("Delta length ("+u+") does not equal source text length ("+e.length+").");return a},t.prototype.match_main=function(e,t,n){if(null==e||null==t||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,e.length)),e==t?0:e.length?e.substring(n,n+t.length)==t?n:this.match_bitap_(e,t,n):-1},t.prototype.match_bitap_=function(e,t,n){if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var r=this.match_alphabet_(t),a=this;function i(e,r){var i=e/t.length,u=Math.abs(n-r);return a.Match_Distance?i+u/a.Match_Distance:u?1:i}var u=this.Match_Threshold,o=e.indexOf(t,n);-1!=o&&(u=Math.min(i(0,o),u),-1!=(o=e.lastIndexOf(t,n+t.length))&&(u=Math.min(i(0,o),u)));var s,l,c=1<<t.length-1;o=-1;for(var f,p=t.length+e.length,v=0;v<t.length;v++){for(s=0,l=p;s<l;)i(v,n+l)<=u?s=l:p=l,l=Math.floor((p-s)/2+s);p=l;var h=Math.max(1,n-l+1),d=Math.min(n+l,e.length)+t.length,m=Array(d+2);m[d+1]=(1<<v)-1;for(var g=d;g>=h;g--){var b=r[e.charAt(g-1)];if(m[g]=0===v?(m[g+1]<<1|1)&b:(m[g+1]<<1|1)&b|(f[g+1]|f[g])<<1|1|f[g+1],m[g]&c){var w=i(v,g-1);if(w<=u){if(u=w,!((o=g-1)>n))break;h=Math.max(1,2*n-o)}}}if(i(v+1,n)>u)break;f=m}return o},t.prototype.match_alphabet_=function(e){for(var t={},n=0;n<e.length;n++)t[e.charAt(n)]=0;for(n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t},t.prototype.patch_addContext_=function(e,n){if(0!=n.length){if(null===e.start2)throw Error("patch not initialized");for(var r=n.substring(e.start2,e.start2+e.length1),a=0;n.indexOf(r)!=n.lastIndexOf(r)&&r.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)a+=this.Patch_Margin,r=n.substring(e.start2-a,e.start2+e.length1+a);a+=this.Patch_Margin;var i=n.substring(e.start2-a,e.start2);i&&e.diffs.unshift(new t.Diff(0,i));var u=n.substring(e.start2+e.length1,e.start2+e.length1+a);u&&e.diffs.push(new t.Diff(0,u)),e.start1-=i.length,e.start2-=i.length,e.length1+=i.length+u.length,e.length2+=i.length+u.length}},t.prototype.patch_make=function(e,r,a){var i,u;if("string"==typeof e&&"string"==typeof r&&void 0===a)i=e,(u=this.diff_main(i,r,!0)).length>2&&(this.diff_cleanupSemantic(u),this.diff_cleanupEfficiency(u));else if(e&&"object"==c(e)&&void 0===r&&void 0===a)u=e,i=this.diff_text1(u);else if("string"==typeof e&&r&&"object"==c(r)&&void 0===a)i=e,u=r;else{if("string"!=typeof e||"string"!=typeof r||!a||"object"!=c(a))throw new Error("Unknown call format to patch_make.");i=e,u=a}if(0===u.length)return[];for(var o=[],s=new t.patch_obj,l=0,f=0,p=0,v=i,h=i,d=0;d<u.length;d++){var m=u[d][0],g=u[d][1];switch(l||0===m||(s.start1=f,s.start2=p),m){case 1:s.diffs[l++]=u[d],s.length2+=g.length,h=h.substring(0,p)+g+h.substring(p);break;case n:s.length1+=g.length,s.diffs[l++]=u[d],h=h.substring(0,p)+h.substring(p+g.length);break;case 0:g.length<=2*this.Patch_Margin&&l&&u.length!=d+1?(s.diffs[l++]=u[d],s.length1+=g.length,s.length2+=g.length):g.length>=2*this.Patch_Margin&&l&&(this.patch_addContext_(s,v),o.push(s),s=new t.patch_obj,l=0,v=h,f=p)}1!==m&&(f+=g.length),m!==n&&(p+=g.length)}return l&&(this.patch_addContext_(s,v),o.push(s)),o},t.prototype.patch_deepCopy=function(e){for(var n=[],r=0;r<e.length;r++){var a=e[r],i=new t.patch_obj;i.diffs=[];for(var u=0;u<a.diffs.length;u++)i.diffs[u]=new t.Diff(a.diffs[u][0],a.diffs[u][1]);i.start1=a.start1,i.start2=a.start2,i.length1=a.length1,i.length2=a.length2,n[r]=i}return n},t.prototype.patch_apply=function(e,t){if(0==e.length)return[t,[]];e=this.patch_deepCopy(e);var r=this.patch_addPadding(e);t=r+t+r,this.patch_splitMax(e);for(var a=0,i=[],u=0;u<e.length;u++){var o,s,l=e[u].start2+a,c=this.diff_text1(e[u].diffs),f=-1;if(c.length>this.Match_MaxBits?-1!=(o=this.match_main(t,c.substring(0,this.Match_MaxBits),l))&&(-1==(f=this.match_main(t,c.substring(c.length-this.Match_MaxBits),l+c.length-this.Match_MaxBits))||o>=f)&&(o=-1):o=this.match_main(t,c,l),-1==o)i[u]=!1,a-=e[u].length2-e[u].length1;else if(i[u]=!0,a=o-l,c==(s=-1==f?t.substring(o,o+c.length):t.substring(o,f+this.Match_MaxBits)))t=t.substring(0,o)+this.diff_text2(e[u].diffs)+t.substring(o+c.length);else{var p=this.diff_main(c,s,!1);if(c.length>this.Match_MaxBits&&this.diff_levenshtein(p)/c.length>this.Patch_DeleteThreshold)i[u]=!1;else{this.diff_cleanupSemanticLossless(p);for(var v,h=0,d=0;d<e[u].diffs.length;d++){var m=e[u].diffs[d];0!==m[0]&&(v=this.diff_xIndex(p,h)),1===m[0]?t=t.substring(0,o+v)+m[1]+t.substring(o+v):m[0]===n&&(t=t.substring(0,o+v)+t.substring(o+this.diff_xIndex(p,h+m[1].length))),m[0]!==n&&(h+=m[1].length)}}}}return[t=t.substring(r.length,t.length-r.length),i]},t.prototype.patch_addPadding=function(e){for(var n=this.Patch_Margin,r="",a=1;a<=n;a++)r+=String.fromCharCode(a);for(a=0;a<e.length;a++)e[a].start1+=n,e[a].start2+=n;var i=e[0],u=i.diffs;if(0==u.length||0!=u[0][0])u.unshift(new t.Diff(0,r)),i.start1-=n,i.start2-=n,i.length1+=n,i.length2+=n;else if(n>u[0][1].length){var o=n-u[0][1].length;u[0][1]=r.substring(u[0][1].length)+u[0][1],i.start1-=o,i.start2-=o,i.length1+=o,i.length2+=o}if(0==(u=(i=e[e.length-1]).diffs).length||0!=u[u.length-1][0])u.push(new t.Diff(0,r)),i.length1+=n,i.length2+=n;else if(n>u[u.length-1][1].length){o=n-u[u.length-1][1].length;u[u.length-1][1]+=r.substring(0,o),i.length1+=o,i.length2+=o}return r},t.prototype.patch_splitMax=function(e){for(var r=this.Match_MaxBits,a=0;a<e.length;a++)if(!(e[a].length1<=r)){var i=e[a];e.splice(a--,1);for(var u=i.start1,o=i.start2,s="";0!==i.diffs.length;){var l=new t.patch_obj,c=!0;for(l.start1=u-s.length,l.start2=o-s.length,""!==s&&(l.length1=l.length2=s.length,l.diffs.push(new t.Diff(0,s)));0!==i.diffs.length&&l.length1<r-this.Patch_Margin;){var f=i.diffs[0][0],p=i.diffs[0][1];1===f?(l.length2+=p.length,o+=p.length,l.diffs.push(i.diffs.shift()),c=!1):f===n&&1==l.diffs.length&&0==l.diffs[0][0]&&p.length>2*r?(l.length1+=p.length,u+=p.length,c=!1,l.diffs.push(new t.Diff(f,p)),i.diffs.shift()):(p=p.substring(0,r-l.length1-this.Patch_Margin),l.length1+=p.length,u+=p.length,0===f?(l.length2+=p.length,o+=p.length):c=!1,l.diffs.push(new t.Diff(f,p)),p==i.diffs[0][1]?i.diffs.shift():i.diffs[0][1]=i.diffs[0][1].substring(p.length))}s=(s=this.diff_text2(l.diffs)).substring(s.length-this.Patch_Margin);var v=this.diff_text1(i.diffs).substring(0,this.Patch_Margin);""!==v&&(l.length1+=v.length,l.length2+=v.length,0!==l.diffs.length&&0===l.diffs[l.diffs.length-1][0]?l.diffs[l.diffs.length-1][1]+=v:l.diffs.push(new t.Diff(0,v))),c||e.splice(++a,0,l)}}},t.prototype.patch_toText=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t.join("")},t.prototype.patch_fromText=function(e){var r=[];if(!e)return r;for(var a=e.split("\n"),i=0,u=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;i<a.length;){var o=a[i].match(u);if(!o)throw new Error("Invalid patch string: "+a[i]);var s=new t.patch_obj;for(r.push(s),s.start1=parseInt(o[1],10),""===o[2]?(s.start1--,s.length1=1):"0"==o[2]?s.length1=0:(s.start1--,s.length1=parseInt(o[2],10)),s.start2=parseInt(o[3],10),""===o[4]?(s.start2--,s.length2=1):"0"==o[4]?s.length2=0:(s.start2--,s.length2=parseInt(o[4],10)),i++;i<a.length;){var l=a[i].charAt(0);try{var c=decodeURI(a[i].substring(1))}catch(f){throw new Error("Illegal escape in patch_fromText: "+c)}if("-"==l)s.diffs.push(new t.Diff(n,c));else if("+"==l)s.diffs.push(new t.Diff(1,c));else if(" "==l)s.diffs.push(new t.Diff(0,c));else{if("@"==l)break;if(""!==l)throw new Error('Invalid patch mode "'+l+'" in: '+c)}i++}}return r},(t.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0}).prototype.toString=function(){for(var e,t=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],r=0;r<this.diffs.length;r++){switch(this.diffs[r][0]){case 1:e="+";break;case n:e="-";break;case 0:e=" "}t[r+1]=e+encodeURI(this.diffs[r][1])+"\n"}return t.join("").replace(/%20/g," ")},e.exports=t,e.exports.diff_match_patch=t,e.exports.DIFF_DELETE=n,e.exports.DIFF_INSERT=1,e.exports.DIFF_EQUAL=0}(Vt);var Ut={DIFF_EQUAL:0,DIFF_DELETE:-1,DIFF_INSERT:1,EDITOR_RIGHT:"right",EDITOR_LEFT:"left",RTL:"rtl",LTR:"ltr",SVG_NS:"http://www.w3.org/2000/svg",DIFF_GRANULARITY_SPECIFIC:"specific",DIFF_GRANULARITY_BROAD:"broad"},Wt=Ut,Jt=Ut;var $t,Kt=Vt.exports,Yt=function e(t,n){return Gt(t)&&Gt(n)&&Object.keys(n).forEach((function(r){Gt(n[r])?(t[r]&&Gt(t[r])||(t[r]=n[r]),e(t[r],n[r])):Object.assign(t,l({},r,n[r]))})),t},Xt=function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=null,i=!0;return function(){for(var u=arguments.length,o=new Array(u),s=0;s<u;s++)o[s]=arguments[s];var l=function(){e.apply(n,o),a=null};r&&i&&(i=!1,l()),a||(a=setTimeout(l,t))}},Qt=function(e,t){var n,r=this;return function(){for(var a=arguments.length,i=new Array(a),u=0;u<a;u++)i[u]=arguments[u];var o=r;clearTimeout(n),n=setTimeout((function(){return e.apply(o,i)}),t)}},Zt=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/\r\n/g,"\n")},en=function(e,t,n,r){var a=e+(n-e)/2;return"M ".concat(e," ").concat(t," C ").concat(a,",").concat(t," ").concat(a,",").concat(r," ").concat(n,",").concat(r)},tn=function(e,t){var n=e.options.mode;return t===Wt.EDITOR_LEFT&&null!==e.options.left.mode&&(n=e.options.left.mode),t===Wt.EDITOR_RIGHT&&null!==e.options.right.mode&&(n=e.options.right.mode),n},nn=function(e,t){var n=e.options.theme;return t===Jt.EDITOR_LEFT&&null!==e.options.left.theme&&(n=e.options.left.theme),t===Jt.EDITOR_RIGHT&&null!==e.options.right.theme&&(n=e.options.right.theme),n},rn=function(e,t){return e.ace.getSession().doc.getLine(t)},an=function(e){return document.getElementById(e.options.left.id).offsetHeight},un=function(e){var t=document.createElement("div"),n={class:e.className,style:"top:".concat(e.topOffset,"px"),title:e.tooltip,"data-diff-index":e.diffIndex};for(var r in n)t.setAttribute(r,n[r]);return t.innerHTML=e.arrowContent,t},on=function(e,t){var n=Math.random().toString(36).substr(2,5),r="js-".concat(t,"-").concat(n),a=e.querySelector(".".concat(t));if(a)return a.id=a.id||r,a.id;var i=document.createElement("div");return e.appendChild(i),i.className=t,i.id=r,i.id},sn={on:function(e,t,n,r){var a="document"===e?document:document.querySelector(e);a.addEventListener(t,(function(e){for(var t=a.querySelectorAll(n),i=e.target,u=0,o=t.length;u<o;u+=1)for(var s=i,l=t[u];s&&s!==a;)s===l&&r.call(l,e),s=s.parentNode}))}},ln=Ut;function cn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(this instanceof cn))return new cn(e);var t=this;t.options=Yt({ace:window?window.ace:void 0,mode:null,theme:null,element:null,diffGranularity:ln.DIFF_GRANULARITY_BROAD,lockScrolling:!1,showDiffs:!0,showConnectors:!0,maxDiffs:5e3,left:{id:null,content:null,mode:null,theme:null,editable:!0,copyLinkEnabled:!0},right:{id:null,content:null,mode:null,theme:null,editable:!0,copyLinkEnabled:!0},classes:{gutterID:"acediff__gutter",diff:"acediff__diffLine",connector:"acediff__connector",newCodeConnectorLink:"acediff__newCodeConnector",newCodeConnectorLinkContent:"&#8594;",deletedCodeConnectorLink:"acediff__deletedCodeConnector",deletedCodeConnectorLinkContent:"&#8592;",copyRightContainer:"acediff__copy--right",copyLeftContainer:"acediff__copy--left"},connectorYOffset:0},e);var n=t.options.ace;if(!n){return new Error("No ace editor found nor supplied - `options.ace` or `window.ace` is missing")}if($t=function(e){if(e.Range)return e.Range;var t=e.acequire||e.require;return!!t&&t("ace/range")}(n),!$t){return new Error("Could not require Range module for Ace. Depends on your bundling strategy, but it usually comes with Ace itself. See https://ace.c9.io/api/range.html, open an issue on GitHub ace-diff/ace-diff")}if(null===t.options.element){return new Error("You need to specify an element for Ace-diff - `options.element` is missing")}if(t.options.element instanceof HTMLElement?t.el=t.options.element:t.el=document.body.querySelector(t.options.element),!t.el){var r="Can't find the specified element ".concat(t.options.element);return new Error(r)}t.options.left.id=on(t.el,"acediff__left"),t.options.classes.gutterID=on(t.el,"acediff__gutter"),t.options.right.id=on(t.el,"acediff__right"),t.el.innerHTML='<div class="acediff__wrap">'.concat(t.el.innerHTML,"</div>"),t.editors={left:{ace:n.edit(t.options.left.id),markers:[],lineLengths:[]},right:{ace:n.edit(t.options.right.id),markers:[],lineLengths:[]},editorHeight:null},t.editors.left.ace.getSession().setMode(tn(t,ln.EDITOR_LEFT)),t.editors.right.ace.getSession().setMode(tn(t,ln.EDITOR_RIGHT)),t.editors.left.ace.setReadOnly(!t.options.left.editable),t.editors.right.ace.setReadOnly(!t.options.right.editable),t.editors.left.ace.setTheme(nn(t,ln.EDITOR_LEFT)),t.editors.right.ace.setTheme(nn(t,ln.EDITOR_RIGHT)),t.editors.left.ace.setValue(Zt(t.options.left.content),-1),t.editors.right.ace.setValue(Zt(t.options.right.content),-1),t.editors.editorHeight=an(t),setTimeout((function(){t.lineHeight=t.editors.left.ace.renderer.lineHeight,function(e){e.editors.left.ace.getSession().on("changeScrollTop",Xt((function(){dn(e)}),16)),e.editors.right.ace.getSession().on("changeScrollTop",Xt((function(){dn(e)}),16));var t=e.diff.bind(e);e.editors.left.ace.on("change",t),e.editors.right.ace.on("change",t),e.options.left.copyLinkEnabled&&sn.on("#".concat(e.options.classes.gutterID),"click",".".concat(e.options.classes.newCodeConnectorLink),(function(t){pn(e,t,ln.LTR)}));e.options.right.copyLinkEnabled&&sn.on("#".concat(e.options.classes.gutterID),"click",".".concat(e.options.classes.deletedCodeConnectorLink),(function(t){pn(e,t,ln.RTL)}));var n=Qt((function(){e.editors.availableHeight=document.getElementById(e.options.left.id).offsetHeight,e.diff()}),250);window.addEventListener("resize",n),fn=function(){window.removeEventListener("resize",n)}}(t),function(e){e.copyRightContainer=document.createElement("div"),e.copyRightContainer.setAttribute("class",e.options.classes.copyRightContainer),e.copyLeftContainer=document.createElement("div"),e.copyLeftContainer.setAttribute("class",e.options.classes.copyLeftContainer),document.getElementById(e.options.classes.gutterID).appendChild(e.copyRightContainer),document.getElementById(e.options.classes.gutterID).appendChild(e.copyLeftContainer)}(t),kn(t),t.diff()}),1)}cn.prototype={setOptions:function(e){Yt(this.options,e),this.diff()},getNumDiffs:function(){return this.diffs.length},getEditors:function(){return{left:this.editors.left.ace,right:this.editors.right.ace}},diff:function(){var e=this,t=new Kt,n=this.editors.left.ace.getSession().getValue(),r=this.editors.right.ace.getSession().getValue(),a=t.diff_main(r,n);t.diff_cleanupSemantic(a),this.editors.left.lineLengths=vn(this.editors.left),this.editors.right.lineLengths=vn(this.editors.right);var i=[],u={left:0,right:0};a.forEach((function(t,n,r){var o=t[0],s=t[1];r[n+1]&&s.endsWith("\n")&&r[n+1][1].startsWith("\n")&&(s+="\n",a[n][1]=s,a[n+1][1]=a[n+1][1].replace(/^\n/,"")),0!==s.length&&(o===ln.DIFF_EQUAL?(u.left+=s.length,u.right+=s.length):o===ln.DIFF_DELETE?(i.push(gn(e,ln.DIFF_DELETE,u.left,u.right,s)),u.right+=s.length):o===ln.DIFF_INSERT&&(i.push(gn(e,ln.DIFF_INSERT,u.left,u.right,s)),u.left+=s.length))}),this),this.diffs=function(e,t){var n=[];function r(t){return e.options.diffGranularity===ln.DIFF_GRANULARITY_SPECIFIC?t<1:t<=1}t.forEach((function(e,t){if(0!==t){for(var a=!1,i=0;i<n.length;i+=1)if(r(Math.abs(e.leftStartLine-n[i].leftEndLine))&&r(Math.abs(e.rightStartLine-n[i].rightEndLine))){n[i].leftStartLine=Math.min(e.leftStartLine,n[i].leftStartLine),n[i].rightStartLine=Math.min(e.rightStartLine,n[i].rightStartLine),n[i].leftEndLine=Math.max(e.leftEndLine,n[i].leftEndLine),n[i].rightEndLine=Math.max(e.rightEndLine,n[i].rightEndLine),a=!0;break}a||n.push(e)}else n.push(e)}));var a=[];return n.forEach((function(e){e.leftStartLine===e.leftEndLine&&e.rightStartLine===e.rightEndLine||a.push(e)})),a}(this,i),this.diffs.length>this.options.maxDiffs||(mn(this),_n(this))},destroy:function(){var e=this.editors.left.ace.getValue();this.editors.left.ace.destroy();var t=this.editors.left.ace.container,n=t.cloneNode(!1);n.textContent=e,t.parentNode.replaceChild(n,t);var r=this.editors.right.ace.getValue();this.editors.right.ace.destroy(),(n=(t=this.editors.right.ace.container).cloneNode(!1)).textContent=r,t.parentNode.replaceChild(n,t),document.getElementById(this.options.classes.gutterID).innerHTML="",fn()}};var fn=function(){};function pn(e,t,n){var r,a,i,u,o,s,l=parseInt(t.target.getAttribute("data-diff-index"),10),c=e.diffs[l];n===ln.LTR?(r=e.editors.left,a=e.editors.right,i=c.leftStartLine,u=c.leftEndLine,o=c.rightStartLine,s=c.rightEndLine):(r=e.editors.right,a=e.editors.left,i=c.rightStartLine,u=c.rightEndLine,o=c.leftStartLine,s=c.leftEndLine);for(var f="",p=i;p<u;p+=1)f+="".concat(rn(r,p),"\n");var v=a.ace.getSession().getScrollTop();a.ace.getSession().replace(new $t(o,0,s,0),f),a.ace.getSession().setScrollTop(parseInt(v,10)),e.diff()}function vn(e){var t=e.ace.getSession().doc.getAllLines(),n=[];return t.forEach((function(e){n.push(e.length+1)})),n}function hn(e,t,n,r,a){var i=e.editors[t];r<n&&(r=n);var u="".concat(a," ").concat(r>n?"lines":"targetOnly");i.markers.push(i.ace.session.addMarker(new $t(n,0,r-1,1),u,"fullLine"))}function dn(e){mn(e),_n(e),function(e){var t=e.editors.left.ace.getSession().getScrollTop(),n=e.editors.right.ace.getSession().getScrollTop();e.copyRightContainer.style.cssText="top: ".concat(-t,"px"),e.copyLeftContainer.style.cssText="top: ".concat(-n,"px")}(e)}function mn(e){e.editors.left.markers.forEach((function(t){e.editors.left.ace.getSession().removeMarker(t)}),e),e.editors.right.markers.forEach((function(t){e.editors.right.ace.getSession().removeMarker(t)}),e)}function gn(e,t,n,r,a){var i={},u=/^\n/.test(a);if(t===ln.DIFF_INSERT){var o=bn(e.editors.left,n,a),s=yn(e.editors.right,r),l=wn(e.editors.right,s),c=wn(e.editors.left,o.startLine),f=s;0===wn(e.editors.left,o.startLine)&&u&&(u=!1),0===o.startChar&&xn(e.editors.right,r,u)&&(f=s+1);var p=o.startLine===o.endLine,v=0;(o.startChar>0||p&&a.length<c)&&l>0&&o.startChar<c&&v++,i={leftStartLine:o.startLine,leftEndLine:o.endLine+1,rightStartLine:f,rightEndLine:f+v}}else{o=bn(e.editors.right,r,a),s=yn(e.editors.left,n),l=wn(e.editors.left,s);var h=wn(e.editors.right,o.startLine),d=s;0===wn(e.editors.right,o.startLine)&&u&&(u=!1),0===o.startChar&&xn(e.editors.left,n,u)&&(d=s+1);p=o.startLine===o.endLine,v=0;(o.startChar>0||p&&a.length<h)&&l>0&&o.startChar<h&&v++,i={leftStartLine:d,leftEndLine:d+v,rightStartLine:o.startLine,rightEndLine:o.endLine+1}}return i}function bn(e,t,n){var r={startLine:0,startChar:0,endLine:0,endChar:0},a=t+n.length,i=0,u=!1,o=!1;e.lineLengths.forEach((function(e,n){i+=e,!u&&t<i&&(r.startLine=n,r.startChar=t-i+e,u=!0),!o&&a<=i&&(r.endLine=n,r.endChar=a-i+e,o=!0)})),r.startChar>0&&wn(e,r.startLine)===r.startChar&&(r.startLine++,r.startChar=0),0===r.endChar&&r.endLine--;var s=/\n$/.test(n);return r.startChar>0&&s&&r.endLine++,r}function wn(e,t){return rn(e,t).length}function yn(e,t){for(var n=e.ace.getSession().doc.getAllLines(),r=0,a=0,i=0;i<n.length;i+=1)if(t<=(a+=n[i].length+1)){r=i;break}return r}function xn(e,t,n){for(var r=e.ace.getSession().doc.getAllLines(),a=0,i=0;i<r.length;i+=1){var u=a+=r[i].length+1;if(n&&(u-=1),t===u)break}return xn}function kn(e){e.gutterHeight=document.getElementById(e.options.classes.gutterID).clientHeight,e.gutterWidth=document.getElementById(e.options.classes.gutterID).clientWidth;var t=Sn(e,ln.EDITOR_LEFT),n=Sn(e,ln.EDITOR_RIGHT),r=Math.max(t,n,e.gutterHeight);e.gutterSVG=document.createElementNS(ln.SVG_NS,"svg"),e.gutterSVG.setAttribute("width",e.gutterWidth),e.gutterSVG.setAttribute("height",r),document.getElementById(e.options.classes.gutterID).appendChild(e.gutterSVG)}function Sn(e,t){return(t===ln.EDITOR_LEFT?e.editors.left:e.editors.right).ace.getSession().getLength()*e.lineHeight}function _n(e){!function(e){document.getElementById(e.options.classes.gutterID).removeChild(e.gutterSVG),kn(e)}(e),function(e){e.copyLeftContainer.innerHTML="",e.copyRightContainer.innerHTML=""}(e),e.diffs.forEach((function(t,n){e.options.showDiffs&&(hn(e,ln.EDITOR_LEFT,t.leftStartLine,t.leftEndLine,e.options.classes.diff),hn(e,ln.EDITOR_RIGHT,t.rightStartLine,t.rightEndLine,e.options.classes.diff),e.options.showConnectors&&function(e,t,n,r,a){var i=e.editors.left.ace.getSession().getScrollTop(),u=e.editors.right.ace.getSession().getScrollTop();e.connectorYOffset=1;var o=t*e.lineHeight-i+.5,s=e.gutterWidth+1,l=r*e.lineHeight-u+.5,c=n*e.lineHeight-i+e.connectorYOffset+.5,f=e.gutterWidth+1,p=a*e.lineHeight-u+e.connectorYOffset+.5,v=en(-1,o,s,l),h=en(f,p,-1,c),d="L".concat(s,",").concat(l," ").concat(f,",").concat(p),m="L".concat(-1,",").concat(c," ").concat(-1,",").concat(o),g="".concat(v," ").concat(d," ").concat(h," ").concat(m),b=document.createElementNS(ln.SVG_NS,"path");b.setAttribute("d",g),b.setAttribute("class",e.options.classes.connector),e.gutterSVG.appendChild(b)}(e,t.leftStartLine,t.leftEndLine,t.rightStartLine,t.rightEndLine),function(e,t,n){if(t.leftEndLine>t.leftStartLine&&e.options.left.copyLinkEnabled){var r=un({className:e.options.classes.newCodeConnectorLink,topOffset:t.leftStartLine*e.lineHeight,tooltip:"Copy to right",diffIndex:n,arrowContent:e.options.classes.newCodeConnectorLinkContent});e.copyRightContainer.appendChild(r)}if(t.rightEndLine>t.rightStartLine&&e.options.right.copyLinkEnabled){var a=un({className:e.options.classes.deletedCodeConnectorLink,topOffset:t.rightStartLine*e.lineHeight,tooltip:"Copy to left",diffIndex:n,arrowContent:e.options.classes.deletedCodeConnectorLinkContent});e.copyLeftContainer.appendChild(a)}}(e,t,n))}),e)}var Ln=zt(cn),En=o(),Tn=t("al",q("")),Cn=t("ad",q([])),Dn=q(null),Nn=t("ap",q(null)),Fn=t("af",q([])),In=t("am",q(!1)),Rn=t("ag",q(!0)),On=t("ac",q(null)),An=t("ah",q(null)),jn=q(null),Pn=function(){Dn.value=null,Nn.value=null,In.value=!1},Mn=t("ar",function(){var e=s(u().mark((function e(t,n,r){var a,i,o,s,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={p:1,showRow:500,sort:"name",reverse:"False",path:t,search:n||""},r&&(a.all=r),e.prev=2,e.next=5,me(a);case 5:return i=e.sent,o=i.data,s=[],l=[],o.dir.forEach((function(e){s.push(nu("dir",e,void 0,o.path))})),o.files.forEach((function(e){l.push(nu("file",e,void 0,o.path))})),e.abrupt("return",[].concat(s,l));case 14:return e.prev=14,e.t0=e.catch(2),e.abrupt("return",[]);case 18:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t,n,r){return e.apply(this,arguments)}}()),zn=function(){var e=s(u().mark((function e(t,n,r){var a,i,o,s,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.data.isNew){e.next=2;break}return e.abrupt("return",n([]));case 2:if(a=Dr(tr.id||""),Fn.value=Fn.value.filter((function(e){return".Recycle_bin"!==e})),".Recycle_bin"!==t.data.fileName){e.next=8;break}return En.error("此为回收站目录，请在右上角按【回收站】按钮打开"),n([]),e.abrupt("return");case 8:if(0!==t.level){e.next=17;break}return i=(null==a?void 0:a.path)||r.path,(o=i.split("/")).pop(),e.next=14,Mn(o.join("/")||"/www");case 14:return s=e.sent,Cn.value=s,e.abrupt("return",n(s));case 17:if(!(t.level>0)){e.next=22;break}return e.next=20,Mn(t.data.path);case 20:return l=e.sent,e.abrupt("return",n(l));case 22:if(!t.upper){e.next=24;break}return e.abrupt("return",n(t.upper));case 24:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),qn=(t("ai",s(u().mark((function e(){var t,n,r,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Fn.value.length=0,"/"!==(t=Tn.value)){e.next=5;break}return En.error("已经是根目录了"),e.abrupt("return");case 5:return(n=t.split("/")).pop(),(r=n.join("/"))||(r="/"),Tn.value=r,e.next=12,Mn(r);case 12:a=e.sent,Cn.value=a,Pn();case 15:case"end":return e.stop()}}),e)})))),t("ae",function(){var e=s(u().mark((function e(t,n,r){var a,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Nn.value||(Dn.value=n),t.isFile){e.next=3;break}return e.abrupt("return");case 3:if(null==t||null===(a=t.path)||void 0===a||!a.includes("/dev/pts")){e.next=6;break}return En.error("系统目录文件不支持编辑"),e.abrupt("return");case 6:if("text"===Di(null===(i=t.fileName)||void 0===i?void 0:i.split(".").pop())){e.next=9;break}return En.error("暂不支持该类型文件编辑"),e.abrupt("return");case 9:Ri(t);case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),function(e,t,n){e.preventDefault(),e.stopPropagation(),Nn.value=t||null,n.value.show(e),In.value=!1}),Hn=t("as",function(){var e=s(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mn(Tn.value,null!=t?t:"");case 2:n=e.sent,Cn.value=n,Pn();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Bn=t("ao",(function(e,t,n){var r=n.value.getNode(t);if(r)if(r.childNodes&&r.childNodes.length>0){var a=r.childNodes[0];n.value.insertBefore(e,a.data)}else n.value.append(e,r.data);else n.value.data.unshift(e),n.value.updateKeyChildren(null,n.value.data);H((function(){setTimeout((function(){var e,t,n;null===(e=jn.value)||void 0===e||null===(e=e.$el)||void 0===e||e.focus(),t=jn,n=An,H((function(){var e,r=null===(e=t.value)||void 0===e?void 0:e.$el,a=n.value;if(r&&a){var i=r.getBoundingClientRect(),u=a.getBoundingClientRect();(i.top<u.top||i.bottom>u.bottom)&&(a.scrollTop+=i.top-u.top-(a.clientHeight/2-i.height/2))}}))}),100)})),Pn()})),Vn=(t("aj",s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Fn.value.length=0,Pn(),e.next=5,Hn();case 5:En.success("刷新成功"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),i(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))),function(e){var t=e.data,n=t.path;return t.isFile?n.replace(/\/[^\/]*$/,""):n}),Gn=t("an",(function(e){var t=Dn.value,n=Nn.value?Nn.value.path:t?Vn(t):Tn.value,r=t?function(e){return e.data.isFile?Vn(e):e.data.path}(t):null,a={icon:"icon-".concat(e),ext:"",fileName:"",time:"",ps:"",size:0,type:e,user:"root",rootLevel:"0",isLink:"",isShare:!1,isTop:!1,isFav:!1,isOsPs:!1,isSearch:!1,isReName:!0,isNew:!0,isSync:"",isLock:!1,path:"".concat(n,"/"),tamperProofId:0,isFile:"dir"!==e};return In.value=!0,{newFile:a,dataPathFileName:r}})),Un=function(){Fn.value.length=0},Wn=B({__name:"index",props:{rowData:{type:Object,default:function(){return{}}},refreshData:{type:Function,default:function(){}},value:{type:Object,default:function(){return{}}}},emits:["update:value"],setup:function(e,t){var n=t.expose,r=t.emit,a=o(),i=e,l=r,c=q(i.rowData),v="",h=function(e,t){var n=e.match(/^(.*\/)/),r=n?n[1]:"";return"".concat(r).concat(t)},d=function(e){e.stopPropagation(),e.preventDefault(),c.value.fileName=e.target.value,b({row:c.value})},m=function(){b({row:c.value})},g=function(){if(c.value.isReName=!1,c.value.isNew){var e,t=On.value.getNode(null===(e=c.value)||void 0===e?void 0:e.path);On.value.remove(t.data)}In.value=!1},b=function(){var e=s(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==(n=t.row).fileName){e.next=4;break}return a.error("文件名不能为空"),e.abrupt("return");case 4:if(!fi(n.fileName)){e.next=7;break}return a.error('文件名不能包含以下字符：\\ / : * ? " < > |'),e.abrupt("return");case 7:if(!n.isNew){e.next=13;break}return r="".concat(n.path,"/").concat(n.fileName),e.next=11,f({loading:"正在新建文件，请稍候...",request:ge({path:r.replace(/\/\//g,"/"),type:n.type}),message:!0,success:function(e){e.status&&(n.isReName=!1,In.value=!1,i.refreshData())}});case 11:e.next=18;break;case 13:if(n.fileName!==v){e.next=16;break}return a.error("文件名没有变化"),e.abrupt("return");case 16:return e.next=18,f({loading:"正在重命名，请稍候...",request:be({sfile:h(n.path,v),dfile:h(n.path,n.fileName),rename:!0}),message:!0,success:function(e){e.status&&(n.isReName=!1,In.value=!1,i.refreshData())}});case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return V((function(){return i.rowData}),(function(){i.rowData&&(c.value=i.rowData,l("update:value",c.value))}),{immediate:!0}),G((function(){c.value.isReName&&H((function(){v=c.value.fileName})),In.value=c.value.isReName})),n({reNameInputRef:jn}),function(e,t){var n=p,r=U("focus");return W(($(),K("div",{class:"flex items-center !w-[100%] pr-[.5rem]",onClick:t[2]||(t[2]=Q((function(){}),["stop"]))},[W(Y(n,{ref_key:"reNameInputRef",ref:jn,class:"rename-input h-[20px] ml-2px",width:"auto",modelValue:c.value.fileName,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.value.fileName=e}),onKeydown:t[1]||(t[1]=X(Q((function(){}),["stop"]),["native"])),onKeyup:X(d,["enter","native"])},null,8,["modelValue"]),[[r]]),Z("span",{class:"svgtofont-el-select ml-[.5rem] !text-[2rem] font-800",style:{color:"#20a53a"},onClick:Q(m,["stop"])}),Z("span",{class:"svgtofont-el-close-bold ml-[.5rem] !text-[2rem] font-800",style:{color:"#f34a4a"},onClick:Q(g,["stop"])})],512)),[[J,c.value.isReName]])}}}),Jn=t("ak",ee("FILES-ACE-STORE",(function(){var e,t=v(),n=t.routerActive,i=t.mainHeight,o=lu().bindKeydown,l=q(),c=q(),p=q(!0),g=q(!0),b=function(){var e=s(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Un(),hr(),e.next=4,c.value;case 4:null==(t=e.sent)||t.unmount();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qr();case 2:return e.sent?si(b):(localStorage.removeItem("aceEditor"),Ur(),b()),e.abrupt("return",!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=q([{title:"保存",icon:"svgtofont-el-select",click:function(){x()&&$r(tr)}},{title:"全部保存",icon:"svgtofont-icon-minmax-black",click:function(){x()&&Xr()}},{title:"刷新",icon:"svgtofont-el-refresh-right",click:(e=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x()&&zr(tr,!0);case 1:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})},{title:"搜索",icon:"svgtofont-el-search",click:function(){x()&&Zn.value.execCommand("find")}},{title:"替换",icon:"svgtofont-icon-log",click:function(){x()&&Zn.value.execCommand("replace")}},{title:"跳转行",icon:"svgtofont-icon-login-address",click:function(){x()&&U("jump")}},{title:"字体大小",icon:"svgtofont-left-xterm",click:function(){x()&&U("font")}},{title:"主题",icon:"svgtofont-icon-drag",click:function(){x()&&U("theme")}},{title:"设置",icon:"svgtofont-left-config",click:function(){x()&&U("set")}},{title:"文件足迹",icon:"svgtofont-left-crontab",click:function(){Qa()}},{title:"快捷键",icon:"svgtofont-el-question-filled",click:function(){var e=ar.value.find((function(e){return"快捷键"===e.title}));if(e)return Br(e.id),void U("shortcutKey");Mr({type:"custom",title:"快捷键",component:te((function(){return h((function(){return a.import("./index-legacy189.js?v=1734676359")}),void 0,a.meta.url)}))})}}]),x=function(){return!(!Fr()||"custom"===tr.type)||(d.error("当前页面不支持该操作"),!1)},k=q(0),S=q(!1),_=q(null),L=q(""),E=function(){var e=s(u().mark((function e(){var t,n,a,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,S.value=!1,Tn.value===L.value){e.next=12;break}return L.value=Tn.value,e.next=6,f({request:me({p:1,showRow:500,sort:"name",reverse:"False",path:Tn.value})});case 6:t=e.sent,n=t.data,a=n.dir.map((function(e){return nu("dir",e,void 0,n.path)})),i=n.files.map((function(e){return nu("file",e,void 0,n.path)})),Cn.value=[].concat(r(a),r(i)),Tn.value=n.path;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),T=q("btn"),C=q(!1),D=q(""),N=q([]),F=q(""),I=function(){var e=s(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mn(Tn.value,D.value,C.value?"True":void 0);case 2:if(t=e.sent,Rn.value=!1,t){e.next=6;break}return e.abrupt("return");case 6:Cn.value=t,Pn();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=q(null),O=q(null),A=q(),j=function(){var e=s(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:zn(t,n,l.value);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P=function(e){var t=On.value.getNode(e);t&&e.isNew&&On.value.remove(t),t&&e.isReName&&(e.isReName=!1),In.value=!1},M=function(e,t){P(A.value),qn(e,t,O)},z=function(e){return ar.value.some((function(t){return t.path===e.path}))?"text-[#cca700]":""},B=q(),V=q(),G=q(!1),U=function(e){nr.value=e,G.value=""!==e,e&&window.addEventListener("click",W)},W=function(){nr.value="",window.removeEventListener("click",W)},J=function(){var e=s(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mr();case 2:return e.next=4,wr(t);case 4:Zn.value=e.sent,de(Xn.aceEditor);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=s(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:yr(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(B.value);case 2:if(!l.value){e.next=5;break}return e.next=5,Mr({title:l.value.fileName,type:l.value.type||"editor",path:l.value.path,size:l.value.size});case 5:return $(V.value),e.next=8,we({name:l.value.fileName,path:l.value.path});case 8:return e.next=10,vr();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=q(null),Q=q(null),Z=q({}),ee=function(e,t){if(Br(e),t){var n=t.currentTarget||t.currentTarget,r=X.value,a=r.offsetWidth,i=n.offsetLeft-a/2+n.offsetWidth/2;r.scroll({left:i,behavior:"smooth"})}},ae=function(){var e=s(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:qr(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(e){e.preventDefault();var t=e.deltaY;X.value.scrollLeft+=t},ue=ne(Xn.aceEditor),oe=ue.fontSize,se=ue.tabSize,le=ue.editorTheme,ce=ue.useSoftTabs,fe=q(tr.encoding),pe=q(0),ve=function(){var e=s(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return tr.state=1,tr.encoding=t,e.next=4,gr();case 4:return e.next=6,$r(tr);case 6:fe.value=t;case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),he=re({line:123,column:321,historys:[],tabsData:{type:"nbsp",number:4},encoding:"utf-8",only_read:!1,mode:"text"}),de=function(e){e&&(he.tabsData.number=e.tabSize,he.tabsData.type=e.useSoftTabs?"tab":"nbsp")},ge=function(){var e=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cr(or.value);case 2:return e.next=4,zr(or.value,!0);case 4:or.value={};case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(){var e=s(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xr();case 2:localStorage.removeItem("aceEditor"),Ur(),t&&t();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ye=q(),xe=function(e){ar.value=ar.value.filter((function(t){return t.id===e})),Qn.value=Qn.value.filter((function(t){return t.id===e})),Pr(e);var t=Lr(e);Zn.value.setSession(t),Ar(Zn.value),Rr(ye.value.item.isReadOnly),Or()},ke=function(){ar.value.forEach((function(e){var t=Lr(e.id);t&&t.destroy()})),ar.value=[],Qn.value=[],Zn.value.setSession(null)},Se=function(){var e=s(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.t0=ye.value.type,e.next="close"===e.t0?4:"other"===e.t0?8:"all"===e.t0?15:19;break;case 4:return e.next=6,$r(ye.value.item);case 6:return qr(ye.value.item),e.abrupt("break",19);case 8:if(t=ye.value.item.id,!((n=ar.value.filter((function(e){return e.id!==t&&1===e.state}))).length>0)){e.next=13;break}return e.next=13,Promise.all(n.map((function(e){return $r(e)})));case 13:return xe(t),e.abrupt("break",19);case 15:return e.next=17,Xr();case 17:return ke(),e.abrupt("break",19);case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(0);case 24:return e.abrupt("return",!0);case 25:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(){return e.apply(this,arguments)}}();return{instance:c,fileItem:l,routerActive:n,btnShow:p,catalogueShow:g,onLeave:function(){p.value=!1,setTimeout((function(){p.value=!0}),500)},close:b,onCancel:w,column:y,openPopup:function(e){Fr?e.click():d.error("当前页面不支持该操作")},mainHeight:i,operSize:k,changeOpertion:function(e){k.value="search"===e?76:0},isShow:S,inputRef:_,inputFocus:function(){S.value=!0,H((function(){var e;null===(e=_.value)||void 0===e||e.focus()}))},originalPath:L,changeCurrentPath:E,type:T,isCheck:C,searchValue:D,changeValue:function(e){Fn.value.length=0,D.value="","search"===e?(N.value=Cn.value,F.value=Tn.value,Cn.value=[],Rn.value=!0):(Cn.value=N.value,""===Tn.value&&(L.value=F.value),Tn.value=F.value)},searchFile:I,handleCommand:function(e){var t,n,r=Gn(e),a=r.newFile,i=r.dataPathFileName||(null!==(t=Nn.value)&&void 0!==t&&t.isFile||null===(n=Nn.value)||void 0===n?void 0:n.path);if(i){var u=On.value.getNode(i);u&&(u.expanded=!0)}Bn(a,i,On)},closeSearch:function(){T.value="btn",Pn()},contextRef:O,treeProps:{label:"fileName",key:"path",isLeaf:"isFile"},initSidebarList:function(){H((function(){var e=(l.value.path||"/www").split("/");e.pop(),""===Tn.value&&(L.value=e.join("/")),Tn.value=e.join("/")}))},loadNode:j,renderTree:function(e,t){t.node;var n=t.data,r=(t.store,Cr(n.fileName).mode);return Y("span",{class:"flex flex-1 items-center w-full ".concat(n.isReName?"newFiles":"defaultFiles"),onContextmenu:function(e){e.preventDefault(),M(e,n)}},[Y("span",{class:"icon-editor-left ".concat(n.isFile?"ace-".concat(r,"-icon ace-text-icon"):"ace-folder-icon")},null),n.isReName?Y(Wn,{class:"el-tree-node__label",title:n.fileName,rowData:n,refreshData:Hn,modelValue:A,"onUpdate:modelValue":function(e){return A=e},ref:R},null):Y("span",{class:"el-tree-node__label ".concat(z(n)),title:n.fileName},[n.fileName])])},handleExpandChange:function(e){null!=e&&e.path&&!Fn.value.includes(e.path)&&Fn.value.push(e.path)},handleCollapseChange:function(e){var t=Fn.value.indexOf(null==e?void 0:e.path);-1!==t&&Fn.value.splice(t,1),P(A.value)},editorRef:B,editorDiffRef:V,showToolbar:G,watchEditorCustomToolbar:U,closeToolbar:W,initContent:K,resizeEditor:function(){Zn.value&&H((function(){Zn.value.resize()}))},tabsElement:X,contextmenu:Q,headerRightRow:Z,changeTab:ee,getDataChangeTab:function(){H((function(){var e=ar.value[ar.value.length-1],t=X.value.children[ar.value.length-1];ee(e.id,{currentTarget:t})}))},closeTab:ae,openContextMenu:function(e){Q.value.show(e),Z.value=tr},initContentHeader:function(){H((function(){X.value.addEventListener("wheel",ie)}))},$resetContentHeader:function(){X.value&&X.value.removeEventListener("wheel",ie)},fontSize:oe,tabSize:se,editorTheme:le,useSoftTabs:ce,encodingData:fe,line:pe,tool:[{title:"跳转到指定行",type:"jump"},{title:"设置编辑器字体大小",type:"font"},{title:"设置编辑器主题",type:"theme"},{title:"编辑器设置",type:"set"},{title:"设置文件保存编码格式",type:"encode"},{title:"设置文件保存空格设置",type:"encode"}],set:[{title:"自动换行",type:"wrap"},{title:"代码自动完成",type:"enableLiveAutocompletion"},{title:"启用代码段",type:"enableSnippets"},{title:"显示隐藏字符",type:"showInvisibles"},{title:"显示行号",type:"showLineNumbers"}],tabData:[{title:"使用空格缩进",type:"nbsp"},{title:"使用制表符缩进",type:"tab"}],unTitleArr:["shortcutKey","","tab"],saveFont:function(){Xn.aceEditor.fontSize>45||Xn.aceEditor.fontSize<12?d.error("字体设置范围超过12-45"):(Zn.value.setFontSize(Xn.aceEditor.fontSize),gr())},jumpLine:function(){pe.value%1==0?Zn.value.gotoLine(pe.value):d.error("请输入整数")},setCode:ve,setTabType:function(e){"string"==typeof e?(ce.value="tab"===e,Xn.aceEditor.useSoftTabs="tab"===e):(se.value=e,Xn.aceEditor.tabSize=e),gr()},setTheme:function(e){le.value=e,Zn.value.setTheme("ace/theme/"+e),Xn.aceEditor.editorTheme=e,gr()},seting:function(e){Xn.aceEditor[e]=!Xn.aceEditor[e],Zn.value.setOption(e,Xn.aceEditor[e]),gr(),de(Xn.aceEditor)},fileInfo:he,openHistory:function(){m({title:"文件历史版本",area:55,component:function(){return h((function(){return a.import("./index-legacy190.js?v=1734676359")}),void 0,a.meta.url)},compData:{editorTabsActive:tr,callback:function(){zr(tr,!0)}}})},watchAceEditor:de,diffReHistory:ge,onConfirmCheckFile:be,onCancelCheckFile:function(e){localStorage.removeItem("aceEditor"),Ur(),e&&e.onUnmount&&e.onUnmount()},compDataClose:ye,onConfirmClose:Se,onCancelClose:function(e){switch(ye.value.type){case"close":ye.value.item.state=0,qr(ye.value.item);break;case"other":xe(ye.value.item.id);break;case"all":ke()}e&&e.onUnmount&&e.onUnmount()},init:function(){window.addEventListener("keydown",lr)},$reset:function(){window.removeEventListener("keydown",lr),o()}}}))),$n=t("a9",ee("FILES-ACE-MOBILE-STORE",(function(){var e,t,n=v().mainHeight,r=q(),a=q(),i=q(null),o=function(e,t){if(Br(e),t){var n=t.currentTarget||t.currentTarget,r=i.value,a=r.offsetWidth,u=n.offsetLeft-a/2+n.offsetWidth/2;r.scroll({left:u,behavior:"smooth"})}},l=function(){var e=s(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:qr(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(e){e.preventDefault();var t=e.deltaY;i.value.scrollLeft+=t},f=q(),p=function(){var e=s(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mr();case 2:return e.next=4,wr(t);case 4:Zn.value=e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(f.value);case 2:if(!r){e.next=5;break}return e.next=5,Mr({title:r.value.fileName,type:"editor",path:r.value.path,size:r.value.size});case 5:return e.next=7,we({name:r.value.fileName,path:r.value.path});case 7:return e.next=9,vr();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=q(!1),g=q(null),b=q(!1),w=q(null),y=q([{title:"保存",icon:"svgtofont-el-select",click:function(){S()&&$r(tr)}},{title:"全部保存",icon:"svgtofont-icon-minmax-black",click:function(){S()&&Xr()}},{title:"刷新",icon:"svgtofont-el-refresh-right",click:(t=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S()&&zr(tr,!0);case 1:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{title:"搜索",icon:"svgtofont-el-search",click:function(){S()&&Zn.value.execCommand("find")}},{title:"替换",icon:"svgtofont-icon-log",click:function(){S()&&Zn.value.execCommand("replace")}},{title:"文件足迹",icon:"svgtofont-left-crontab",click:function(){Qa()}},{title:"退出",icon:"svgtofont-el-close",click:function(){k()}}]),x=function(){var e=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Un(),hr(),P();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qr();case 2:return e.sent?si(x):(localStorage.removeItem("aceEditor"),Ur(),x()),e.abrupt("return",!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){return!(!Fr()||"custom"===tr.type)||(d.error("当前页面不支持该操作"),!1)},_=q(null),L=q({}),E=function(){var e=s(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:zn(t,n,r.value);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T=function(e){var t=On.value.getNode(e);t&&e.isNew&&On.value.remove(t),t&&e.isReName&&(e.isReName=!1),In.value=!1},C=function(e,t){T(L.value),qn(e,t,_)},D=function(e){return ar.value.some((function(t){return t.path===e.path}))?"text-[#cca700]":""},N=function(){var e=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:H((function(){var e=(r.value.path||"/www").split("/");e.pop(),Tn.value=e.join("/")}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=q("btn"),I=q(!1),R=q(""),O=q([]),A=q(""),j=function(){var e=s(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mn(Tn.value,R.value,I.value?"True":void 0);case 2:if(t=e.sent,Rn.value=!1,t){e.next=6;break}return e.abrupt("return");case 6:Cn.value=t,Pn();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=s(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.value;case 2:null==(t=e.sent)||t.unmount();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{fileItem:r,instance:a,tabsElement:i,changeTab:o,getDataChangeTab:function(){H((function(){var e=ar.value[ar.value.length-1],t=i.value.children[ar.value.length-1];o(e.id,{currentTarget:t})}))},closeTab:l,initHeader:function(){H((function(){i.value.addEventListener("wheel",c)}))},$resetHeader:function(){i.value&&i.value.removeEventListener("wheel",c)},editorRef:f,mainHeight:n,createEditorView:p,initContent:h,isShow:m,dropdownMenu:g,handleClickOutside:function(e){g.value&&!g.value.contains(e.target)&&(m.value=!1)},isShowTool:b,dropdownMenuRef:w,column:y,checkOperationAvailable:S,handleClickOutsideEvent:function(e){w.value&&!w.value.contains(e.target)&&(b.value=!1)},openPopup:function(e){Fr?(b.value=!1,e.click()):d.error("当前页面不支持该操作")},treeProps:{label:"fileName",key:"path",isLeaf:"isFile"},loadNode:E,renderTree:function(e,t){t.node;var n=t.data,r=(t.store,Cr(n.fileName).mode),a=[e("span",{class:(n.isFile?"ace-".concat(r,"-icon ace-text-icon"):"ace-folder-icon")+" icon-editor-left",style:{"font-size":"4rem"}}),n.isReName?e():e("span",{class:"el-tree-node__label "+D(n),attrs:{title:n.fileName}},n.fileName)];return e("span",{class:"flex items-center ".concat(n.isReName?"newFiles":"defaultFiles"),on:{contextmenu:function(e){e.preventDefault(),C(e,n)}}},a)},handleExpandChange:function(e){null!=e&&e.path&&!Fn.value.includes(e.path)&&Fn.value.push(e.path)},handleCollapseChange:function(e){var t=Fn.value.indexOf(null==e?void 0:e.path);-1!==t&&Fn.value.splice(t,1),T(L.value)},initList:N,type:F,isCheck:I,searchValue:R,changeValue:function(e){Fn.value.length=0,R.value="","search"===e?(O.value=Cn.value,A.value=Tn.value,Cn.value=[],Rn.value=!0):(Cn.value=O.value,Tn.value=A.value)},searchFile:j,closeSearch:function(){F.value="btn",Pn()},close:P,init:function(){H((function(){e=setInterval((function(){var e=document.querySelector(".el-overlay-dialog"),t=null==e?void 0:e.querySelector(".el-dialog__body");t&&(e&&(e.style.alignItems="flex-start",e.style.paddingTop="1vh",e.style.paddingBottom="1vh"),t.style.maxHeight="90vh",t.style.height="auto",t.style.overflowY="auto",t.style.WebkitOverflowScrolling="touch")}),1e3)}))},$reset:function(){clearInterval(e)}}}))),Kn=o(),Yn="/www/server/panel/BTPanel/static/editor/ace.editor.config.json",Xn=t("ay",re({supportedModes:{},nameOverrides:{},encodingList:[],themeList:[],aceEditor:{fontFamily:"Monaco, Menlo, 'Courier New', monospace",editorTheme:"monokai",fontSize:14,softLabel:!0,useSoftTabs:!0,tabSize:4,wrap:!0,enableSnippets:!0,enableLiveAutocompletion:!0,highlightActiveLine:!0,highlightSelectedWord:!0,animatedScroll:!0,showInvisibles:!1,showFoldWidgets:!0,showLineNumbers:!0,showGutter:!0,displayIndentGuides:!0}})),Qn=ae([]),Zn=ae(null),er=ae(null),tr=t("aa",ie({id:"",type:"editor",title:"",path:"",mode:"",modeText:"",isReadOnly:!1,stTime:0,state:0,encoding:"UTF-8",historys:[]})),nr=t("aw",ae("")),rr=t("ax",ie({row:1,column:0,count:1})),ar=t("ab",q([])),ir=function(){return window.ace},ur=function(){return Ln},or=t("az",q()),sr=q(null),lr=function(e){if("F5"===e.key||"r"===e.key&&(e.metaKey||e.ctrlKey))return e.preventDefault(),void Kn.msg({customClass:"no-icon",message:"编辑器模式下无法刷新网页，请关闭后重试",type:"info",duration:3e3})},cr=function(){var e=s(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b({title:"恢复历史文件",width:"35rem",content:"是否恢复历史文件 ".concat(w(Number(t.st_mtime)),"?恢复历史文件后，当前文件内容将会被替换！")});case 3:return e.next=5,y({filename:t.path,history:t.st_mtime});case 5:(n=e.sent).status?(Kn.success("恢复成功"),r=Nr(tr.id),ar.value.splice(r,1),zr(t)):Kn.request(n),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),fr=function(){var e=s(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!document.querySelector("#dialogMinimize")){e.next=4;break}return null===(n=document.querySelector("#dialogMinimize .svgtofont-el-fullscreen-expand"))||void 0===n||n.click(),t&&Mr(t),e.abrupt("return");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pr=function(){var e=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kn.load("正在获取文件内容，请稍候...");case 2:sr.value=e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),vr=function(){var e=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:sr.value&&sr.value.close();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),hr=t("aK",(function(){ar.value.some((function(e){return 1===e.state}))||(window.onbeforeunload=null)})),dr=function(){var e=s(u().mark((function e(t,n){var r,a,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Kn.load("正在加载，请稍候..."),e.prev=1,e.next=4,Wr(t,"reverse",n);case 4:return a=e.sent,i=a.data,e.abrupt("return",i);case 9:e.prev=9,e.t0=e.catch(1);case 12:return e.prev=12,r&&r.close(),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})));return function(t,n){return e.apply(this,arguments)}}(),mr=function(){var e=s(u().mark((function e(){var t,n,r,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=sessionStorage.getItem("aceConfig"),n={},t&&(n=JSON.parse(t)),e.next=5,Wr(Yn);case 5:r=e.sent,(a=r.data).data&&(n=JSON.parse(a.data),sessionStorage.setItem("aceConfig",JSON.stringify(n))),Xn.supportedModes=n.supportedModes,Xn.nameOverrides=n.nameOverrides,Xn.encodingList=n.encodingList,Xn.themeList=n.themeList,Xn.aceEditor=n.aceEditor,Xn.aceEditor.fontFamily="12px/normal 'Consolas', 'Menlo', 'Monaco', 'Ubuntu Mono', 'source-code-pro', 'Courier New', monospace";case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),gr=function(){var e=s(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.stringify(Xn),e.next=3,Jr({data:t,path:Yn,force:1});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),br=function(){return Xn.aceEditor},wr=function(){var e=s(u().mark((function e(t){var n,r,a,i,o,s,l,c,f,p,v,h,d;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ir(),r=br(),a=r.editorTheme,i=r.fontSize,o=r.fontFamily,s=r.showInvisibles,l=r.useSoftTabs,c=r.tabSize,f=r.keyboardHandler,p=r.enableLiveAutocompletion,v=r.enableSnippets,h=r.enableBasicAutocompletion,n.config.set("basePath","/static/editor"),n.require("/ace/ext/language_tools"),d=n.edit(t,{theme:"ace/theme/".concat(a),fontSize:i,fontFamily:o,showInvisibles:s,useSoftTabs:l,tabSize:c,showPrintMargin:!1,keyboardHandler:f,enableLiveAutocompletion:p,enableSnippets:v,enableBasicAutocompletion:h}),x()&&d.setOptions({fontSize:30,wrap:!0,enableLiveAutocompletion:!1,enableBasicAutocompletion:!1,enableSnippets:!1}),Gr(d),e.abrupt("return",d);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),yr=function(e){er.value=e},xr=t("aO",function(){var e=s(u().mark((function e(t){var r,a,i,o,s,l,c,f,p,v,h;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=br(),a=r.editorTheme,i=t.theme,o=void 0===i?"ace/theme/".concat(a):i,s=t.mode,l=void 0===s?"":s,c=t.left,f=void 0===c?{}:c,p=t.right,v=void 0===p?{}:p,h={element:er.value,theme:o,mode:l,left:n({content:"",editable:!1,copyLinkEnabled:!1},f),right:n({content:"",editable:!1,copyLinkEnabled:!1},v)},kr(h),e.abrupt("return",h);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),kr=function(e){return new(ur())(e)},Sr=function(e,t){var n=ir(),r=br().wrap,a=n.createEditSession(t,"ace/mode/".concat(e));return a.setOptions({wrap:r,readOnly:!1}),Vr(a),a},_r=function(e){Zn.value.setSession(e)},Lr=t("aN",(function(e){var t;return e?null===(t=Qn.value.find((function(t){return t.id===e})))||void 0===t?void 0:t.session:Zn.value.getSession()})),Er=function(e){return e?Qn.value.find((function(t){return t.id===e})):Zn.value.getSession()},Tr=function(e){return e?Qn.value.findIndex((function(t){return t.id===e})):-1},Cr=function(e){var t=e.match(/\.([0-9A-z]*)$/);for(var n in t=Array.isArray(t)?t[1]:"text",Xn.supportedModes)for(var r=Xn.supportedModes[n][0].split("|"),a=n.toLowerCase(),i=0;i<r.length;i++)if(t.toLowerCase()==r[i].toLowerCase())return{name:n,mode:a};return{name:"Text",mode:"text"}},Dr=function(e){return ar.value.find((function(t){return t.id===e}))},Nr=function(e){return ar.value.findIndex((function(t){return t.id===e}))},Fr=t("aA",(function(){return ar.value.length>0})),Ir=function(e,t){var r=(x()?$n():Jn()).getDataChangeTab;delete e.session;var a=n(n({},{id:"",type:"editor",title:"",path:"",mode:"",modeText:"",isReadOnly:!1,stTime:0,state:0}),e);return ar.value.push(a),r(),"editor"===e.type&&t&&Qn.value.push({id:a.id,session:t}),a},Rr=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Zn.value.setReadOnly(e)},Or=function(){Zn.value.focus()},Ar=function(e){rr.count=e.session.getLength()},jr=function(e){return ar.value.filter((function(t){return t.path===e}))},Pr=function(){var e=s(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=Dr(t))&&(tr.id=t,tr.type=n.type,tr.title=n.title,"editor"===n.type?(tr.path=n.path,tr.mode=n.mode,tr.modeText=n.modeText,tr.isReadOnly=n.isReadOnly,tr.stTime=n.stTime,tr.state=n.state,tr.encoding=n.encoding,tr.historys=n.historys,tr.next=n.next,tr.pagination=n.pagination):tr.component=n.component);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Mr=t("aB",function(){var e=s(u().mark((function e(t){var r,a,i,o,s,l,c,f,p,v,h,d,m,b;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r={},"editor"!==t.type){e.next=15;break}if(!(a=jr(t.path)).length){e.next=7;break}return e.abrupt("return",Br(a[0].id));case 7:return e.next=9,Wr(t.path);case 9:i=e.sent,o=i.data,s=i.status,l=i.msg,c=o,s?(l&&"success"!==l&&Kn.warn(l),t.size>3145728&&Kn.warn("抱歉！文件大小超过3M，暂不支持在线编辑！"),p=t.filename||(null===(f=t.path)||void 0===f?void 0:f.split("/").pop()),v="",h=Cr(p),d=h.mode,m=h.name,v=d,t.mode&&(v=t.mode),b=Sr(v,c.data),r=Ir({id:g(10),path:t.path,type:"editor",title:p,mode:v,modeText:m,state:0,encoding:c.encoding,stTime:Number(c.st_mtime),isReadOnly:c.only_read,historys:c.historys||[],next:(null==c?void 0:c.next)||!1,pagination:1},b),_r(b),Rr(c.only_read)):Kn.error(l),e.next=16;break;case 15:r=Ir(n(n({},t),{},{id:g(10),state:0}));case 16:Pr(r.id),e.next=21;break;case 19:e.prev=19,e.t0=e.catch(0);case 21:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t){return e.apply(this,arguments)}}()),zr=function(){var e=s(u().mark((function e(t){var n,r,a,i,o,s=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.length>1&&void 0!==s[1]&&s[1],"editor"===t.type){e.next=3;break}return e.abrupt("return");case 3:return r=Kn.load("获取文件内容中，请稍候..."),e.prev=4,a=Dr(t.id||""),e.next=8,Wr(t.path);case 8:i=e.sent,o=i.data,n&&Zn.value.session.setValue(o.data),a.stTime=Number(o.st_mtime),a.encoding=o.encoding,a.state=0,tr.state=0,a.isReadOnly=o.only_read,a.historys=o.historys||[],Kn.msg({message:"文件内容已更新！",type:"success"}),Pr(a.id),e.next=23;break;case 21:e.prev=21,e.t0=e.catch(4);case 23:return e.prev=23,r&&r.close(),e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[4,21,23,26]])})));return function(t){return e.apply(this,arguments)}}(),qr=t("at",(function(e){var t=e.id,n=Nr(t),r=ar.value[n]||null,a=Lr(t),i=Tr(t);if(e.state)return Hr(e);if(r&&"editor"===r.type&&(null==a||a.destroy()),ar.value.length>1){var u=ar.value[n+1]?n+1:n-1,o=ar.value[u].id;Br(o,!0)}ar.value.splice(n,1),"editor"===r.type&&a&&Qn.value.splice(i,1)})),Hr=function(){var e=s(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{li("close",t)}catch(n){}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Br=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Nr(tr.id||""),r=Nr(e),a=ar.value[r],i=Er(e);if("editor"===a.type){var u;if(tr.id===e&&t)null!==(u=Qn.value[n])&&void 0!==u&&u.session&&(Qn.value[n].session=Lr());i&&(_r(i.session),Ar(i)),Rr(a.isReadOnly),Or()}Pr(e)},Vr=function(e){rr.count=e.getLength(),e.on("change",(function(){var e=Dr(tr.id||"");0===e.state&&(e.state=1,tr.state=1,window.onbeforeunload=function(){return"您有未保存的更改，确定要离开吗？"})})),e.selection.on("changeCursor",(function(){var t=Zn.value.getCursorPosition();rr.count=e.getLength(),rr.row=t.row+1,rr.column=t.column})),e.on("changeScrollTop",ue(function(){var t=s(u().mark((function t(n){var r,a,i,o,s,l,c,f;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.selection.session,a=r.getScrollTop(),i=r.getScreenLength()*Zn.value.renderer.lineHeight,o=Zn.value.renderer.$size.scrollerHeight,!(a+o>=i-100)){t.next=12;break}if(!(s=Dr(tr.id)).next){t.next=12;break}return t.next=9,dr(s.path,s.pagination);case 9:l=t.sent,s.next=l.next,null!=l&&l.next&&(s.pagination&&s.pagination++,f=null===(c=Lr(s.id))||void 0===c?void 0:c.getValue(),Zn.value.session.setValue(f+l.data));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),500)},Gr=function(e){var t=Jn().watchEditorCustomToolbar;e.commands.addCommand({name:"saveFile",bindKey:{win:"Ctrl-S",mac:"Command-S"},exec:function(){var e=Dr(tr.id||"");$r(e)}}),e.commands.addCommand({name:"saveAllFile",bindKey:{win:"Ctrl-Shift-S",mac:"Command-Shift-S"},exec:function(){Xr()}}),e.commands.addCommand({name:"closeFile",bindKey:{win:"Ctrl-W",mac:"Command-W"},exec:function(){qr(tr.id)}}),e.commands.addCommand({name:"closeAllFile",bindKey:{win:"Ctrl-Shift-W",mac:"Command-Shift-W"},exec:function(){ar.value.forEach((function(e){qr(e.id)}))}}),e.commands.addCommand({name:"goToLine",bindKey:{win:"Ctrl-I",mac:"Command-I"},exec:function(){Fr()&&"custom"!==tr.type?t("jump"):Kn.error("当前页面不支持该操作")},readonly:!1}),e.commands.addCommand({name:"undo",bindKey:{win:"Ctrl-Z",mac:"Command-Z"},exec:function(){e.undo()}})},Ur=function(){Zn.value=null,tr.id="",tr.title="",tr.path="",tr.mode="",tr.modeText="",tr.isReadOnly=!1,tr.stTime=0,tr.state=0,tr.encoding="UTF-8",tr.historys=[],ar.value=[],Qn.value=[]},Wr=t("aP",function(){var e=s(u().mark((function e(t,n,r){var a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={path:t,mode:n,p:r},n||delete a.mode,r||delete a.p,e.next=5,ye(a);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),Jr=function(){var e=s(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={path:t.path,data:t.data,encoding:t.encoding||"UTF-8",st_mtime:t.st_mtime,force:t.force||0,skip_conf_check:t.skip_conf_check||!1},t.skip_conf_check||delete n.skip_conf_check,e.next=4,k(n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$r=function(){var e=s(u().mark((function e(t){var n,r,a,i,o,s,l,c,f,p,v=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=v.length>1&&void 0!==v[1]?v[1]:0,r=v.length>2&&void 0!==v[2]&&v[2],0!==t.state){e.next=4;break}return e.abrupt("return",Kn.msg({customClass:"no-icon",message:"文件未修改,无需保存！",type:"info"}));case 4:return a=Kn.load("保存中，请稍候..."),e.prev=5,i=Lr(t.id),o=i.getValue(),s=t.path,l=t.encoding,c=t.stTime,f={path:s,data:o,st_mtime:c,encoding:l,force:n},r&&(f.skip_conf_check=!0),t.state=3,e.next=14,Jr(f);case 14:if((p=e.sent).status){e.next=23;break}if(null==p||!p.conf_check){e.next=20;break}return e.abrupt("return",Yr(t,p.msg));case 20:return e.abrupt("return",Kr(t,p.msg));case 21:e.next=24;break;case 23:Kn.request(p);case 24:return hr(),e.next=27,zr(t,!1);case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(5);case 32:return e.prev=32,a&&a.close(),e.finish(32);case 35:case"end":return e.stop()}}),e,null,[[5,29,32,35]])})));return function(t){return e.apply(this,arguments)}}(),Kr=function(){var e=s(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.substr(0,n.length-1)+"，或选择强制保存。",t.state=1,e.next=4,b({title:"提示",width:"35rem",icon:"warning",content:r});case 4:return e.next=6,b({title:"是否强制保存",width:"35rem",icon:"warning",isHtml:!0,content:'<span style="color:#333">检测到文件已被修改，强制保存将会<span style="color:red">覆盖文件内容</span>，请谨慎操作!</span>'});case 6:return e.next=8,$r(t,1);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Yr=function(){var e=s(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.substr(0,n.length-1)+"，或选择强制保存。",t.state=1,e.next=4,b({title:"提示",width:60,isHtml:!0,content:'<div class="custom-message-error-html">\n\t\t\t\t\t'.concat(r,'\n\t\t\t\t\t<div class="leading-[1.6rem] mt-1rem">请确认您要保存的配置文件内容无误与提示信息无关，注本次保存不会重载nginx/apache配置</div>\n\t\t\t\t</div>'),confirmText:"继续保存"});case 4:return e.next=6,$r(t,0,!0);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Xr=function(){var e=s(u().mark((function e(){var t,n,r,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=Kn.load("保存中，请稍候..."),e.prev=1,n=[],r=0;r<ar.value.length;r++)1===(a=ar.value[r]).state&&n.push($r(a,0));return e.next=6,Promise.all(n);case 6:hr(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1);case 12:return e.prev=12,t&&t.close(),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})));return function(){return e.apply(this,arguments)}}(),Qr=function(){var e=s(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,ar.value.length>0&&(t=ar.value.some((function(e){return 1===e.state}))),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Zr=t("au",function(){var e=s(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.id,ar.value.filter((function(e){return e.id!==n&&1===e.state})).length>0?li("other",t):(ar.value=ar.value.filter((function(e){return e.id===n})),Qn.value=Qn.value.filter((function(e){return e.id===n})),Pr(n),r=Lr(n),Zn.value.setSession(r),Ar(Zn.value),Rr(t.isReadOnly),Or());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ea=t("av",s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qr();case 2:if(e.sent)try{li("all")}catch(t){}else ar.value.forEach((function(e){var t=Lr(e.id);t&&t.destroy()})),ar.value=[],Qn.value=[],Zn.value.setSession(null);case 4:case"end":return e.stop()}}),e)})))),ta=Object.freeze(Object.defineProperty({__proto__:null,editorCustomToolbar:nr,editorDiffExample:er,editorExample:Zn,editorOption:Xn,editorRowColumnCount:rr,editorSeesion:Qn,editorTabs:ar,editorTabsActive:tr,enableRefresh:hr,handleKeyDown:lr,handleScroll:dr,minimizeEvent:fr,reHistoryRow:or,recoverEvent:cr,useAce:ir,useCheckFileChange:Qr,useCheckFileCompatibility:function(e){var t=Cr(e).mode;return Xn.supportedModes[t]},useCheckTabsEmpty:Fr,useCloseAllTabs:ea,useCloseOtherTabs:Zr,useCreateAceEditorExample:wr,useCreateAceEditorSession:Sr,useCreateDiffEditorExample:yr,useCreateDiffEditorView:kr,useCreateEditorTabs:Mr,useCreateTabsItem:Ir,useCutEditorTabs:Br,useDestroyEditorData:Ur,useDiffAce:ur,useEditorLoading:pr,useEditorPathFilter:jr,useEditorUnLoading:vr,useEventMount:Gr,useFindIndexTabs:Nr,useFindTabsData:Dr,useGetAceEditorSession:Lr,useGetAceEditorSessionData:Er,useGetAceEditorSessionIndex:Tr,useGetAceOptions:br,useGetEditorOptions:mr,useGetEditorTabsLineCount:Ar,useGetFileBody:Wr,useGetFileMode:Cr,useInsertAceEditorSession:_r,useMonitorMount:Vr,useRandomId:function(){return g(10)},useRefreshFileContent:zr,useRemoveEditorCheckTabs:Hr,useRemoveEditorTabs:qr,useSaveAllFiles:Xr,useSaveEditorOptions:gr,useSaveFileBody:Jr,useSaveFiles:$r,useSetDiffEditorOptions:xr,useSetEditorTabsActive:Pr,useSetEditorTabsFocus:Or,useSetEditorTabsReadOnly:Rr,useforcedSaveConfig:Yr},Symbol.toStringTag,{value:"Module"}));t("aR",ta);var na=t("aJ",ee("FILES-BATCH-SET-AUTH-STORE",(function(){var e=lu(),t=oe(e).fileTabActiveData,n=e.refreshFilesList,r=q([]),a=re({owner:[],group:[],public:[],auth:0,user:"root",isDir:!0,checkNumber:""}),i=function(){var e=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f({request:xe({filename:"".concat(t.value.param.path)}),success:function(e){if(e.status){var t=e.data;a.auth=t.chmod,a.user=t.chown,o(Number(t.chmod))}else d.error(e.msg)}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(e){256&(e=parseInt(e.toString(),8))?a.owner.push("r"):a.owner=a.owner.filter((function(e){return"r"!==e})),128&e?a.owner.push("w"):a.owner=a.owner.filter((function(e){return"w"!==e})),64&e?a.owner.push("x"):a.owner=a.owner.filter((function(e){return"x"!==e})),32&e?a.group.push("r"):a.group=a.group.filter((function(e){return"r"!==e})),16&e?a.group.push("w"):a.group=a.group.filter((function(e){return"w"!==e})),8&e?a.group.push("x"):a.group=a.group.filter((function(e){return"x"!==e})),4&e?a.public.push("r"):a.public=a.public.filter((function(e){return"r"!==e})),2&e?a.public.push("w"):a.public=a.public.filter((function(e){return"w"!==e})),1&e?a.public.push("x"):a.public=a.public.filter((function(e){return"x"!==e})),a.owner=Array.from(new Set(a.owner)),a.group=Array.from(new Set(a.group)),a.public=Array.from(new Set(a.public))},l=function(){var e=s(u().mark((function e(i){var o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((o=a.auth.toString()).length>3)){e.next=4;break}return d.error("请输入正确权限"),e.abrupt("return");case 4:if(!a.checkNumber.match(/\D/g)){e.next=7;break}return d.error("请输入正确权限"),e.abrupt("return");case 7:if(!o.match(/\D/g)){e.next=10;break}return d.error("请输入正确权限"),e.abrupt("return");case 10:for(;o.length<3;)o="0"+o;return e.next=13,f({loading:"正在设置文件权限，请稍后...",request:ke({user:a.user,access:o,all:a.isDir?"True":"False",type:"3",path:t.value.param.path,data:JSON.stringify(r.value)}),message:!0,success:function(e){e.status&&(n(),i&&i())}});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{checkList:a,fileList:r,ownerOptions:[{label:"root",value:"root"},{label:"www",value:"www"},{label:"mysql",value:"mysql"}],reversePermission:function(){var e=0,t=function(t,n,r,a){t.includes("r")&&(e|=n),t.includes("w")&&(e|=r),t.includes("x")&&(e|=a)};for(t(a.owner,256,128,64),t(a.group,32,16,8),t(a.public,4,2,1),a.auth=e.toString(8);a.auth.length<3;)a.auth="0"+a.auth},checkNumber:function(e){a.checkNumber=e;var t=String(e).replace(/[^\d]/g,"").slice(0,3);a.auth=t,o(Number(a.auth))},changeUser:function(e){a.user=e},setFileAuths:l,getFileAuths:i,$reset:function(){Object.assign(a,{owner:[],group:[],public:[],auth:0,user:"root",isDir:!0,checkNumber:""}),r.value=[]}}}))),ra=t("aI",ee("FILES-CLOUD-STORAGE-STORE",(function(){var e=lu(),t=oe(e).fileTabActiveData,n=e.refreshFilesList,r=e.getRealTask,a=q(),i=q(),o=q(),l=q(!1),c=q([]),p=q(!0),v=q(""),h=q([]),m=q(""),g=q([]),b=q([]),y=q([qt(),{label:"文件名",prop:"name",width:"300",render:function(e){return Y("span",{class:[null===e.type?"bt-open-dir folder-open-icon":"bt-open-dir file-text-icon"]},[Y("i",{class:"icon"},null),Y("span",{onClick:function(t){null===e.type&&x((""===m.value?"":m.value+"/")+e.name)}},[e.name])])}},{label:"大小",prop:"size",render:function(e){var t=null!==e.size?S(e.size):"-";return null===e.type&&(t="-"),se("span",t)}},{label:"更新时间",prop:"time",render:function(e){return""===e.type?"<span>"+w(e.time)+"</span>":"-"}}]),x=function(e){m.value!==e&&(m.value=e,k())},k=function(){var e=s(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l.value=!0,e.next=4,Se({path:m.value,pname:a.value.pname});case 4:if(n=e.sent,l.value=!1,n.status){e.next=11;break}return T(),d.msg({message:"请先配置云存储",type:"warning"}),Ot({name:a.value.pname}),e.abrupt("return");case 11:c.value=(null===(t=n.data)||void 0===t||null===(t=t.list)||void 0===t?void 0:t.sort((function(e,t){return null===e.type?-1:null===t.type?1:0})))||[],E(c.value),n.data.hasOwnProperty("path")&&_(n.data.path),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),_=function(e){var t="";m.value=e,g.value=[{title:"根目录",path:"",type:"dir"}],""!==e?(e&&"/"===e[e.length-1]&&(e=e.slice(0,-1)),e.split("/").forEach((function(e,n){t+="".concat(1===n?"":"/").concat(e),g.value.push({title:""===e&&0==n?"根目录":e,path:t,type:"dir"})})),h.value=g.value):h.value=g.value};q(!1);var L=function(){var e=s(u().mark((function e(){var i,o,s,l,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=a.value,o=i.pname,s=i.type,l={},"down"!=s){e.next=9;break}if(0!==b.value.length){e.next=6;break}return d.error("请选择勾选需要下载的文件"),e.abrupt("return");case 6:l={name:o,url:b.value[0].download,path:t.value.param.path,filename:b.value[0].name},e.next=10;break;case 9:l={name:o,filename:a.value.rowData.path,object_name:m.value};case 10:return e.next=12,f({loading:"正在执行中，请稍后...",request:_e(l,s),message:!0,success:function(e){e.status&&(r(),n())}});case 12:return c=e.sent,e.abrupt("return",c.status);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(e){H((function(){var t=document.querySelectorAll(".oss-table .el-table__body-wrapper .el-checkbox");"down"===a.value.type?t.forEach((function(t,n){null===e[n].type?t.style.display="none":t.style.display="block"})):t.forEach((function(e,t){e.style.display="none"}))}))},T=function(){var e=s(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.value;case 2:null==(t=e.sent)||t.unmount();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{compData:a,instance:i,ossTable:o,isTagMode:p,temporaryPath:v,showPathList:h,tableColumns:y,tableData:c,loading:l,handleSelectionChange:function(e){e.length>1?(o.value.getTable().clearSelection(),o.value.getTable().toggleRowSelection(e.pop())):b.value=e},temporaryBlur:function(){p.value=!0,v.value=""},temporaryFocus:function(){p.value=!1,v.value=m.value},temporaryEnter:function(e){var t,n=null===(t=e.target)||void 0===t?void 0:t.value;"/"!==(n=n.replace(/\/+/g,"/"))&&(n=n.replace(/\/+$/g,"")),n!==v.value&&(m.value=n,k()),e.target.blur()},goBack:function(){var e;1!==g.value.length&&(m.value=(null===(e=g.value[g.value.length-2])||void 0===e?void 0:e.path)||"/",k())},watchTableData:E,getDirList:k,filePathJump:x,onConfirm:L,$reset:function(){p.value=!0,v.value="",m.value="",c.value=[],h.value=[],g.value=[],b.value=[]}}}))),aa=t("a7",ee("FILES-COMPRESS-PREVIEW-STORE",(function(){var t,n,a,i=lu(),o=oe(i).fileTabActiveData,l=i.refreshFilesList,p=q(""),v=q(),h=q(),m=re({file:{data:{},path:"当前压缩包"},isDblclick:!1,addList:[]}),g=q(!1),w=q(!0),y=re({visible:!1,form:{filename:"",path:"/"}}),x=q(!1),k=q(!1),_=q(!1),L=re({tableBatchData:[{label:"批量解压",value:"decompress",isRefBatch:!0,event:function(){}},{label:"批量删除",value:"delete",isRefBatch:!0,event:function(){}}],batchConfig:{isRecurrence:!1,describe:{title:"",th:"",message:"",propsValue:"name"},tableDisplayConfig:{label:"状态",prop:"status",render:function(e){return se("span",{})}}},decompressTableColumn:[{label:"文件名",prop:"filename"},{label:"大小",prop:"file_size",width:70,render:function(e){return se("span",{},e.file_size?S(e.file_size):"--")}}],selectList:[]}),E=q(),T=function(){var e=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:At({type:"file",path:y.form.path,change:function(){var e=s(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=m.file.path.split("/").slice(1).join("/").replace("当前压缩包",""),g.value=!0,m.addList=[t],r="zip"===v.value.ext?Le:Ee,e.next=6,f({loading:"正在添加文件，请稍后...",request:r({data:JSON.stringify({sfile:v.value.path,r_path:n?"/".concat(n):"",f_list:m.addList})}),message:!0,success:M});case 6:g.value=!1;case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(e){m.isDblclick=!0,e.date_time||(m.file.path="".concat(m.file.path,"/").concat(e.filename),setTimeout((function(){m.isDblclick=!1}),200))},D=function(){var e=s(u().mark((function e(t,n,r){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.stopPropagation(),r.preventDefault(),Object.assign(y,{visible:!0,form:{filename:t.filename,path:"/"}});case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),N=function(e){return e.shift(),e.join("/")},F=function(e){if(0===L.selectList.length){var t=e.findIndex((function(e){return e.filename===y.form.filename}));return[e[t].uploadName]}return L.selectList.map((function(e){return e.uploadName}))},I=function(){var e=s(u().mark((function e(n,r){var a,i,o,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x.value=!0,a=JSON.parse(JSON.stringify(r)),i={data:JSON.stringify({zip_path:N(a),sfile:v.value.path,extract_path:y.form.path+"/",filenames:F(n)})},o="zip"===v.value.ext?Te:Ce,e.next=6,f({loading:"正在解压文件，请稍后...",request:o(i)});case 6:if(!(s=e.sent).status){e.next=16;break}if(!s.type){e.next=12;break}return ii(s.data,i,"zip"===v.value.ext?Te:Ce),y.visible=!1,e.abrupt("return");case 12:d.success("解压成功"),l(),e.next=17;break;case 16:d.request(s);case 17:t&&t(),y.visible=!1;case 19:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),R=function(){var e=s(u().mark((function e(t,n,r){var a,i,o,s,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.stopPropagation(),r.preventDefault(),"text"===Di(null===(a=t.fileName)||void 0===a?void 0:a.split(".").pop())){e.next=5;break}return d.error("暂不支持该类型文件编辑"),e.abrupt("return");case 5:return i=m.file.path.split("/").filter((function(e){return""!==e})),o={data:JSON.stringify({sfile:v.value.path,filename:(i.length>1?i.join("/").replace("当前压缩包/","")+"/":"")+t.filename})},s="zip"===v.value.ext?De:Ne,e.next=10,f({loading:"正在获取文件，请稍后...",request:s(o)});case 10:(l=e.sent).status?ti(l.data,v.value,t.filename,i.length>1?i.join("/").replace("当前压缩包",""):""):d.request(l);case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),O=function(t){var n=[];return Object.entries(t).forEach((function(t){var r=e(t,2),a=(r[0],r[1]);if("object"===c(a))if(a.is_dir)n.push("".concat(a.filename,"/"));else if(a.hasOwnProperty("fullpath"))n.push("".concat(a.fullpath));else{var i=O(a);n=n.concat(i)}})),n},A=function(e){var t=[];return L.selectList.forEach((function(e){if(e.uploadName.includes("/dddir")){var n=O(e);t=t.concat(n)}else e.is_dir?t.push("".concat(e.filename,"/")):t.push("".concat(e.fullpath))})),t},j=function(){var e=s(u().mark((function e(n,a){var i,o,s,l,c,p,h;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=m.file.path.split("/").filter((function(e){return""!==e}))).join("/").replace("当前压缩包/","").replace("当前压缩包",""),o=i.length>1?i.join("/").replace("当前压缩包/","")+"/":"",e.t0=0===L.selectList.length,!e.t0){e.next=7;break}return e.next=7,b({title:"删除文件【".concat(n.filename,"】"),content:"您真的要删除文件【".concat(n.filename,"】吗？")});case 7:return s=[],l=[],0!==n.is_dir&&0===L.selectList.length&&(s=O(n)),l=L.selectList.length>0?A():[].concat(r(s),["".concat(o).concat(n.filename).concat(0!==n.is_dir?"/":"")]),c={data:JSON.stringify({sfile:v.value.path,filenames:l})},p="zip"===v.value.ext?Fe:Ie,k.value=!0,e.next=15,f({loading:"正在删除文件，请稍后...",request:p(c),message:!0,success:function(e){L.selectList=[],e.status&&(M(),_.value=!1)}});case 15:return h=e.sent,t&&t(),k.value=!1,e.abrupt("return",h.status);case 19:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P=q([qt(),{label:"名称",prop:"filename",render:function(e){return Y("div",{class:"flex items-center cursor-pointer",onClick:function(t){e.date_time||(t.stopPropagation(),C(e))}},[Y("img",{class:"mr-[.5rem] w-[2.5rem] h-[2.5rem]",src:"/static/images/file_icon/".concat(e.date_time?"file":"folder_win10",".png")},null),Y("span",{class:"hover:text-[#20a53a]"},[e.filename])])}},{label:"大小",prop:"file_size",width:100,render:function(e){return se("span",{class:"cursor-pointer"},e.file_size?S(e.file_size):"--")}},{label:"修改时间",prop:"date_time",width:270,render:function(e){return se("span",{class:"cursor-pointer"},e.date_time?e.date_time:"--")}},Ht([{onClick:R,isHide:function(e){var t=e.filename.split(".").pop()||"file";return"text"!==Di(t)||0!==e.is_dir},title:"编辑"},{onClick:D,title:"解压"},{onClick:j,title:"删除"}])]),M=function(){var e=s(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="zip"===v.value.ext?Re:Oe,e.next=3,f({loading:g,request:t({data:JSON.stringify({sfile:v.value.path})}),success:function(){var e=s(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.status){e.next=6;break}return d.request(t),e.next=4,h.value;case 4:null==(n=e.sent)||n.unmount();case 6:m.file.data=t.data,w.value&&(H((function(){E.value.getTable().toggleAllSelection()})),w.value=!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=[{label:"解压",value:"decompress",event:(a=s(u().mark((function e(n,r,a,i,o){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:L.selectList=a.value,Object.assign(y,{visible:!0,form:{filename:"",path:"/"}}),t=o;case 3:case"end":return e.stop()}}),e)}))),function(e,t,n,r,i){return a.apply(this,arguments)})},{label:"删除",value:"delete",event:(n=s(u().mark((function e(n,r,a,i,o){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:L.selectList=a.value,_.value=!0,t=o;case 3:case"end":return e.stop()}}),e)}))),function(e,t,r,a,i){return n.apply(this,arguments)})}];return{instance:h,compressData:m,deCompressPopupData:y,fileItem:v,tableColumn:P,loading:g,fileTableRef:E,batch:L,batchOptions:z,deCompressPopupDisable:x,batchDeletePopup:_,delEvent:j,confirmDeCompress:I,openPathDialog:function(){At({type:"dir",path:y.form.path,change:function(e){y.form.path=e}})},cellDblclick:C,goPath:function(e){for(var t=m.file.path.split("/").filter((function(e){return""!==e})),n="",r=0;r<=e;r++)n+="/".concat(t[r]);m.file.path=n,"/当前压缩包"===n&&E.value.getTable().toggleAllSelection()},addFile:T,init:function(){p.value=v.value.path||"",M(),y.form.path=o.value.param.path||"/"},$reset:function(){w.value=!0,x.value=!1,k.value=!1,_.value=!1,Object.assign(m,{file:{data:{},path:"当前压缩包"},isDblclick:!1,addList:[]})}}}))),ia=t("X",ee("FILES-CREATE-SYMBOLIC-LINK-STORE",(function(){var e=lu().refreshFilesList,t=re({path:"",filename:"",disable:!1}),n=q(),r=re({path:[{validator:function(e,t,n){""===t?n(new Error("请选择正确的文件地址!")):n()},trigger:["blur","change"]}],filename:[{validator:function(e,t,n){""===t?n(new Error("请输入新文件名!")):fi(t)?n(new Error('文件名不能包含 /\\:*?"<>|符号!')):n()},trigger:["blur"]}]}),a=function(){var r=s(u().mark((function r(a){var i;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,i={sfile:t.path,dfile:pi(t.filename)},r.next=4,n.value.validate();case 4:return t.disable=!0,r.next=7,f({loading:"正在创建软链接...",request:Ae(i),message:!0,success:function(t){t.status&&(e(),a())}});case 7:r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0);case 12:return r.prev=12,t.disable=!1,r.finish(12);case 15:case"end":return r.stop()}}),r,null,[[0,9,12,15]])})));return function(e){return r.apply(this,arguments)}}();return{quickFormRef:n,quickForm:t,quickRules:r,openFile:function(){At({type:"all",change:function(e){t.path=e}})},onConfirm:a,$reset:function(){Object.assign(t,{path:"",filename:"",disable:!1})}}}))),ua=t("Y",ee("FILES-FAVORITES-MANAGE-STORE",(function(){var e=lu(),t=oe(e).favoriteList,r=e.refreshFilesList,a=q(),i=q(t.value),o=function(){var e=s(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b({title:"删除收藏",content:"即将删除收藏路径【".concat(t.name,"】")});case 2:f({loading:"正在删除收藏路径，请稍后...",request:je({path:t.path}),message:!0,success:function(e){e.status&&Qi()}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=re({loading:!1,data:[]}),c=function(){var e=s(u().mark((function e(t){var r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"dir"===t.type?hi(t.path):(r=n(n({},t),{},{fileName:t.name,ext:t.ext||t.name.split(".").pop()}),ji(r)),e.next=3,a.value;case 3:null==(i=e.sent)||i.unmount();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=q([{label:"路径",prop:"path"},Ht([{onClick:c,title:"打开"},{onClick:o,title:"删除"}])]);return{instance:a,tableColumn:p,favoriteList:t,favTableData:l,onCancel:function(){i.value.length!==t.value.length&&r()},$reset:function(){Object.assign(l,{loading:!1,data:[]})}}})));function oa(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!pe(e)}var sa=t("a6",ee("FILES-FORMAT-CONVERSION-STORE",(function(){var e=lu(),t=oe(e).fileTabActiveData,r=e.refreshFilesList,a=q(),i=q(),o=q("conver"),l=q("执行转换"),c=q(!1),p=re({fileList:[],selectList:[],path:"",del:!1,allKey:""}),v=q(!1),h=re({all:[],audio:[],image:[],video:[]}),m=q([qt(),{label:"文件名",prop:"fileName"},{label:"格式类型",prop:"ext",width:80},{label:"转换为",prop:"status",width:190,renderHeader:function(){var e,t;return Y("div",{class:"items-center inline-flex !w-[190px]"},[Y("span",null,[le("转换为")]),Y(ce,{class:"!w-[8rem] ml-4px",modelValue:p.allKey||(null===(e=h.all[0])||void 0===e?void 0:e.value),onChange:function(e){p.allKey=e,p.fileList=p.fileList.map((function(t){return n(n({},t),{},{format:e})}))}},oa(t=h.all.map((function(e){return Y(fe,{key:e.value,label:e.label,value:e.value},null)})))?t:{default:function(){return[t]}})])},render:function(e,t){var n=null;return["audio","image","video"].forEach((function(t){var r,a,i;h[t].map((function(e){return e.value})).includes(e.ext)&&(e.format=e.format||(null===(r=h[t].at(0))||void 0===r?void 0:r.value),n=Y("div",null,[Y(ce,{class:"!w-[12rem]",style:{display:e.isCustom?"none":"block"},modelValue:e.format||(null===(a=h[t].at(0))||void 0===a?void 0:a.value),onChange:function(t){e.format=t}},oa(i=h[t].map((function(e){return Y(fe,{key:e.value,label:e.label,value:e.value},null)})))?i:{default:function(){return[i]}})]))})),n||(n=se("span",{class:"text-[red]"},"不支持转换")),n}},{label:"执行状态",prop:"status",width:90,render:function(e,t){var n=null;return h.all.map((function(e){return e.value})).includes(e.ext)&&(n=se("span",{},["待转换","转换中","转换成功","转换失败"][e.status])),n||(n=se("span",{class:"text-[red]"},"无法转换")),n}},Ht([{onClick:function(e){p.fileList=p.fileList.filter((function(t){return t.path!==e.path}))},title:"取消"}])]),g=function(){var e=s(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],p.selectList.forEach((function(e){if(0===e.status){var n=e.name.split(".");n.pop(),t.push({input_file:e.path,output_file:"".concat(p.path,"/").concat(n,".").concat(e.format)})}})),t.length){e.next=4;break}return e.abrupt("return",d.error("没有需要转换的文件"));case 4:return l.value="转换中",c.value=!0,e.next=8,f({loading:"正在转换中，请稍后...",request:Me({is_save:p.del?1:0,pdata:JSON.stringify(t)}),success:function(e){_(e.data)?(e.data.forEach((function(e){e.msg=e.msg||(e.status?"转换成功":"转换失败")})),r(),S(),iu({title:"转换结果",resultData:e.data})):(l.value="执行转换",c.value=!1,d.error(e.msg))}});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f({loading:v,request:qe(),data:{all:[Array,function(e){return e.map((function(e){return{key:e,label:e}}))}],audio:[Array,function(e){return e.map((function(e){return{key:e,label:e}}))}],image:[Array,function(e){return e.map((function(e){return{key:e,label:e}}))}],video:[Array,function(e){return e.map((function(e){return{key:e,label:e}}))}]},success:function(e){Object.keys(e).forEach((function(t){e[t]=e[t].map((function(e){return{value:e.key,label:e.label}}))})),h.all=e.all,h.audio=e.audio,h.image=e.image,h.video=e.video}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=re({fileList:[],p:1,limit:10}),x=q([{label:"操作时间",prop:"time",width:160,render:function(e){return se("span",{},w(e.time))}},{label:"操作类型",prop:"type",width:80},{label:"操作日志",prop:"operation"},{label:"操作结果",prop:"status",width:160}]),k=function(){var e=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f({request:ze({p:y.p,limit:y.limit}),success:function(e){e.status?"string"==typeof e.msg?y.fileList=[]:y.fileList=e.data:d.error(e.msg)}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=s(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.value;case 2:null==(t=e.sent)||t.unmount();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{instance:i,fileItem:a,activeName:o,tableColumn:m,loading:v,formatData:p,subLoad:c,btnText:l,addFile:function(){var e;At({type:"file",change:(e=s(u().mark((function e(t){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe({filename:t});case 2:(r=e.sent).status?p.fileList.push(n(n({status:0,ext:r.data.st_type},r.data),{},{path:t,fileName:r.data.name})):d.error(r.msg);case 4:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})})},openFile:function(e){At({type:"dir",change:function(e){p.path=e}})},goConversion:g,handleSelectionChange:function(e){p.selectList=e},logTableColumn:x,tableData:y,getData:k,handleTabEvent:function(e){"conver"===e?b():k()},init:function(){var e,r;b(),p.fileList=Array.isArray(a.value)?null===(e=a.value)||void 0===e?void 0:e.map((function(e){return n(n({status:0},e),{},{name:e.fileName})})):[n(n({status:0},a.value),{},{name:null===(r=a.value)||void 0===r?void 0:r.fileName})],p.path=t.value.param.path},$reset:function(){c.value=!1,v.value=!1,Object.assign(p,{fileList:[],selectList:[],path:"",del:!1,allKey:""}),Object.assign(y,{fileList:[],p:1,limit:10}),Object.assign(h,{all:[],audio:[],image:[],video:[]})}}}))),la=t("aL",ee("FILES-OVERLAY-TIPS-STORE",(function(){var e=v().getGlobalInfo,t=lu(),n=oe(t),r=n.fileTabActiveData,a=n.copyFilesData,i=t.refreshFilesList,o=t.getRealTask,l=q(),c=q(""),p=q(),h=q([{type:"selection",width:40},{prop:"filename",label:"文件名"},{prop:"size",label:"大小",render:function(e){return Y("span",null,[S(e.size)])}},{prop:"mtime",width:136,label:"最后修改时间",render:function(e){return w(Number(e.mtime))}}]),m=re({addend1:0,addend2:0,sum:0}),g=q(!1),y=q(),x=q([]),k=q([]),_=function(e){if(e.endsWith(".tar.gz")){var t=e.substring(0,e.length-7);return"".concat(t,"-副本.tar.gz")}var n=e.lastIndexOf(".");if(-1===n)return"".concat(e,"-副本");var r=e.substring(0,n),a=e.substring(n);return"".concat(r,"-副本").concat(a)},L=re({type:"",size:0,filename:"",mtime:0}),E=re({name:[{validator:function(e,t,n){"rename"===L.type&&t===l.value.fileData[0].filename&&n(new Error("名称重复，请输入新文件名!")),""===t?n(new Error("请输入新文件名!")):n()},trigger:["blur"]}]}),T=function(){var e=s(u().mark((function e(t){var n,s,c,p,v;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("single"!==l.value.type){e.next=15;break}return n={path:r.value.param.path,name:L.filename},e.next=4,He(n);case 4:if(s=e.sent,!(s.data.length>0)){e.next=9;break}return e.next=9,b({title:"覆盖文件",content:"检测到同名文件，您确定要覆盖当前【".concat(L.filename,"】文件？")});case 9:return c={sfile:a.value.files[0].path,dfile:r.value.param.path+"/"+L.filename},"rename"===L.type&&(c.rename=!0),p="copy"===a.value.type?Be:Ve,e.next=14,f({loading:"正在处理文件，请稍后...",request:p(c),success:function(e){e.status&&(e.msg="文件覆盖成功!",i(),Li()),d.request(e),o(),t()}});case 14:return e.abrupt("return");case 15:if(m.sum!==m.addend1+m.addend2){e.next=21;break}return v=[x.value.map((function(e){return e.filename}))],e.next=19,f({loading:"正在处理文件，请稍后...",request:Ge({type:"copy"===a.value.type?1:2,path:r.value.param.path,skip:v}),message:!0,success:function(e){e.status&&(i(),Li()),o(),t()}});case 19:e.next=23;break;case 21:return d.error("请输入正确的计算结果"),e.abrupt("return");case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var t=s(u().mark((function t(){var n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:n=t.sent,c.value=(null==n?void 0:n.sites_path)||"";case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),D=function(){var e=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k.value="batch"==l.value.type?l.value.fileData:[],e.next=3,C();case 3:m.sum=void 0,m.addend1=Math.round(9*Math.random()+1),m.addend2=Math.round(9*Math.random()+1),"batch"==l.value.type?(k.value=l.value.fileData,p.value.getTable().toggleAllSelection()):(L.type="rename",L.size=l.value.fileData[0].size,L.filename=_(l.value.fileData[0].filename),L.mtime=l.value.fileData[0].mtime);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{compData:l,fileTabActiveData:r,sitesPath:c,overlayFormRef:y,overlayForm:L,tableLoading:g,quickRules:E,calcData:m,tableColumns:h,tableData:k,handleSelectionChange:function(e){x.value=e},watchType:function(e){"single"===l.value.type&&(L.filename="over"===e?l.value.fileData[0].filename:_(l.value.fileData[0].filename))},fileFormat:_,onConfirm:T,init:D,$reset:function(){k.value=[],x.value=[]}}}))),ca=t("aF",ee("FILES-TAMPER-STORE",(function(){var e=lu().refreshFilesList,t=q(),n=q("关闭"),r=q("文件"),a=q(""),i=re({fileName:!0,ext:!1}),o=function(){var n=s(u().mark((function n(r){var a,o,s,l,c;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=t.value.data.path,o=[],t.value.data.isFile&&(-1!==(s=a.lastIndexOf("/"))&&(a=a.substring(0,s)),i.fileName&&(l=t.value.data.path.split("/"),c=l.length>=2?l[l.length-2]:"",o.push("".concat(c,"/").concat(t.value.data.fileName))),i.ext&&o.push("."+t.value.data.fileName.split(".").pop())),n.next=5,f({loading:"正在创建目录保护，请稍后...",request:We({path:a,exts:JSON.stringify(o)}),message:!0,success:function(t){t.status&&(e(),r&&r())}});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),l=function(){var n=s(u().mark((function n(){var r,s,l,c,p,v;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i.ext||i.fileName){n.next=3;break}return d.error("请至少选择一项"),n.abrupt("return");case 3:if(r={pid:t.value.data.tamperProofId,settings:[]},s=t.value.data.path,"create"!==a.value||0!=t.value.data.tamperProofId){n.next=8;break}return o(close),n.abrupt("return");case 8:return t.value.data.isFile?null!==(l=t.value.data)&&void 0!==l&&l.isLock?(i.fileName&&(r.settings.push({key:"remove_bf",values:[s]}),r.settings.push({key:"add_wf",values:[s]})),i.ext&&r.settings.push({key:"remove_bf",values:["."+t.value.data.fileName.split(".").pop()]})):(i.fileName&&(r.settings.push({key:"add_bf",values:[s]}),r.settings.push({key:"remove_wf",values:[s]})),i.ext&&r.settings.push({key:"add_bf",values:["."+t.value.data.fileName.split(".").pop()]})):null!==(c=t.value.data)&&void 0!==c&&c.isLock?(p=a.value,-1!=t.value.data.path.indexOf("/www/server/panel/class")&&(p="add_wd"),r.settings.push({key:p,values:[t.value.data.path]})):r.settings.push({key:a.value,values:[s]}),r.settings=JSON.stringify(r.settings),n.next=12,f({loading:"正在执行中，请稍后...",request:Ue(r),message:!0,success:function(t){t.status&&e()}});case 12:return v=n.sent,n.abrupt("return",v.status);case 14:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),c=function(){var e=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f({request:Je({path:t.value.data.path}),success:function(e){a.value=e.data.data.action[0]}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{isStart:n,isFile:r,compData:t,checkList:i,onConfirm:l,init:function(){var e;n.value=null!==(e=t.value.data)&&void 0!==e&&e.isLock?"关闭":"开启",r.value="file"===t.value.data.type?"文件":"目录",c()},$reset:function(){a.value="",Object.assign(i,{fileName:!0,ext:!1})}}}))),fa=t("V",ee("FILES-TASK-STORE",(function(){var e=lu().refreshFilesList,t=q(),n=null,r=q([]),a=function(){var t=s(u().mark((function t(){var o;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L({status:-3});case 3:if(0!==(o=t.sent).data.length){t.next=9;break}return clearInterval(n),e(),l(),t.abrupt("return");case 9:r.value=o.data,n=setTimeout(a,2e3),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),i(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),o=function(){var e=s(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b({title:"删除任务",content:"您真的要删除当前任务【".concat(t.name,":").concat(t.shell,"】吗？")});case 2:f({loading:"正在删除，请稍后...",request:E({id:t.id}),message:!0,success:a});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=s(u().mark((function e(){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.value;case 2:null==(n=e.sent)||n.unmount();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{instance:t,taskData:r,getLog:a,cancel:o,$reset:function(){r.value=[],clearInterval(n)}}}))),pa=t("aD",ee("FILES-IMAGE-PREVIEW-STORE",(function(){var e=oe(lu()),t=e.fileTabActiveData,n=e.imageList,r=q(),a=window.location.protocol+"//"+window.location.host+"/download?filename=",i=q(""),o=q([]),l=function(){var e=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.value=n.value.map((function(e){return"".concat(a).concat(t.value.param.path,"/").concat(e[0])}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{fileItem:r,image:i,imagesArr:o,init:function(){i.value="".concat(a).concat(r.value.path),l()},$reset:function(){o.value=[]}}}))),va=t("aC",ee("FILES-IMPORT-DATABASE-STORE",(function(){var e=q(),t=re({name:""}),n=q(!1),r=q(),a=re({name:[{validator:function(e,t,n){""===t?n(new Error("请选择压缩路径")):n()},trigger:["blur"]}]}),i=q([]),o=function(){var e=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f({request:T({table:"databases"}),success:function(e){e.status&&(i.value=e.data.data.map((function(e){return{label:e.name,value:e.id}})),i.value.length>0&&(t.name=i.value[0].value))}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var n=s(u().mark((function n(){var a,o;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,b({title:"导入数据库",content:"是否将【".concat(e.value.fileName,"】文件，导入【").concat(i.value.find((function(e){return e.value==t.name})).label,"】数据库中，是否继续？")});case 2:return a={name:i.value.find((function(e){return e.value==t.name})).label,file:e.value.path},n.next=5,r.value.validate();case 5:return n.next=7,f({loading:"正在导入数据库，请稍后...",request:$e(a),message:!0});case 7:return o=n.sent,n.abrupt("return",o.status);case 9:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return{fileItem:e,quickFormRef:r,quickForm:t,quickRules:a,disable:n,databaseOptions:i,onConfirm:l,toggleName:function(e){t.name=e},getOptions:o,$reset:function(){Object.assign(t,{name:""}),n.value=!1,i.value=[]}}}))),ha=t("aG",ee("FILES-VIDEO-STORE",(function(){var e=oe(lu()).fileTabActiveData,t=q(""),n=q([]),r=e.value.param.path,a=function(){var e=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f({request:Ke({path:r}),data:[Array,n]});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{currentPath:r,videoList:n,videoUrl:t,playVideo:function(e){t.value=r+"/"+e},getList:a,$reset:function(){t.value="",n.value=[]}}}))),da=t("_",ee("FILES-SHARE-LIST-STORE",(function(){var e=q({}),t=lu().refreshFilesList,n=q(!1),r=q([]),a=re({total:0,p:1,limit:12,file_name:""}),i=function(){var e=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f({loading:n,request:Ye({p:a.p,filename:a.file_name||""}),data:{data:[Array,r],page:C(a)}});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=s(u().mark((function e(n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b({title:"取消分享",content:"是否取消分享该文件【".concat(n.ps,"】，是否继续？")});case 2:f({loading:"正在取消文件分享，请稍后...",request:Xe({id:n.id}),message:!0,success:function(e){e.status&&(i(),t())}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=q([{label:"分享名称",prop:"ps"},{label:"文件地址",prop:"filename"},{label:"过期时间",prop:"expire"},Ht([{onClick:function(e){qa(e,!0)},title:"详情"},{onClick:o,title:"关闭"}])]);return{compData:e,isLoading:n,tableData:r,shareTableData:a,tableColumn:l,getShareData:i,searchSubmit:function(e){a.file_name=e,i()},$reset:function(){n.value=!1,r.value=[],Object.assign(a,{total:0,p:1,limit:12,file_name:""})}}}))),ma=t("$",ee("FILES-SHARE-STORE",(function(){var e=lu().refreshFilesList,t=q(),n=re({ps:"",expire:24,password:""}),r=q(!1),a=q(),i=re({ps:[{validator:function(e,t,n){""===t?n(new Error("请输入分享名称")):n()},trigger:["blur"]}]}),o=function(){var i=s(u().mark((function i(o){var s;return u().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return s={filename:pi(t.value.fileName),ps:n.ps,password:n.password,expire:n.expire},i.next=3,a.value.validate();case 3:return i.next=5,f({loading:r,request:Qe(s),success:function(t){return t.status?(d.success("分享成功"),o.unmount()):d.error(t.message),e(),qa(t.data)}});case 5:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}(),l=q(),c=re({name:"",link:"",code:"",time:""}),p=q({}),v=q(!1),h=q(!1),m=q(),g=re({}),w=function(){var e=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l.value.isShareList){e.next=8;break}return p.value=l.value,c.name=l.value.ps,c.link=location.origin+"/down/"+l.value.token,c.code=l.value.password||"",c.time=l.value.expire,c.qrcode=location.origin+"/down/"+l.value.token+"?fname="+l.value.ps+"&down=true",e.abrupt("return");case 8:return e.next=10,f({loading:"正在获取分享详情，请稍后...",request:Ze({id:Number(l.value.isShare|l.value.id)}),success:function(e){p.value=e.data,c.name=e.data.ps,c.link=location.origin+"/down/"+e.data.token,c.code=e.data.password||"",c.time=e.data.expire,c.qrcode=location.origin+"/down/"+e.data.token+"?fname="+e.data.ps+"&down=true"}});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var t=s(u().mark((function t(){var n,r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.value.validate();case 3:return t.next=5,b({title:"取消分享【".concat(p.value.ps,"】"),content:"您真的要取消分享【".concat(p.value.ps,"】吗？")});case 5:return n={id:p.value.id},t.next=8,f({loading:"正在取消文件分享，请稍后...",request:Xe(n),message:!0,success:function(t){t.status&&((0,da().getShareData)(),e())}});case 8:return r=t.sent,t.abrupt("return",r.status);case 12:t.prev=12,t.t0=t.catch(0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}();return{fileItem:t,quickFormRef:a,quickForm:n,quickRules:i,disable:r,help:[{isHtml:!0,content:'<span class="text-[#ef0808]">注意：生成的外链分享链接具有一定的风险，请仅与可信任的人分享链接，避免敏感信息泄露</span>'}],compData:l,detail:p,detailFormRef:m,detailForm:c,detailRules:g,isDisabled:h,helpList:[{content:'<span class="text-[#ef0808]">注意：生成的外链分享链接具有一定的风险，请仅与可信任的人分享链接，避免敏感信息泄露</span>',isHtml:!0}],showQrcode:v,copyAll:function(e){D({value:"链接：".concat(c.link," 提取码：").concat(c.code)})},copyLink:function(e){D({value:c.link})},onConfirm:o,onConfirmDetail:y,initDetail:function(){v.value=!1,Object.assign(c,{name:"",link:location.origin+"/down/"+l.value.token,code:"",time:l.value.expire}),w()},init:function(){r.value=!1,Object.assign(n,{ps:t.value.fileName,expire:24,password:""})}}}))),ga=t("a5",ee("FILES-SEND-EMAIL-STORE",(function(){var e=q(),t=re({email:"",msg:""}),r=q(!1),i=q(),o=re({email:[{validator:function(e,t,n){if(""===t)n(new Error("请输入接受者邮箱"));else{var r=t.trim().split(",").filter((function(e){return""!==e})),a=!1;r.forEach((function(e){N(e)||(a=!0)})),a?n(new Error("请输入正确的邮箱")):n()}},trigger:["blur"]}],fileName:[{validator:function(t,n,r){e.value.size>52428800?r(new Error("请选择小于50M的附件")):r()}}]}),l=function(){var e=s(u().mark((function e(){var t,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,et();case 2:t=e.sent,r=t.data,c(r)&&jt(n(n({},{title:"发送者配置",type:"mail"}),{},{callback:function(){}}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(e){return 0===Object.keys(e).length},p=function(){var n=s(u().mark((function n(){var o,s;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o={to_email:t.email,msg:t.msg,flist:[pi(e.value.fileName)]},n.next=3,i.value.validate();case 3:return n.next=5,f({loading:r,request:tt({data:JSON.stringify(o)}),success:function(e){var t=e.data;if(t.msg&&""!=t.msg)return d.error(t.msg),null;var n=[];Object.keys(t.list).forEach((function(e){var r=c(t.list[e].error),a=[];r||Object.keys(t.list[e].error).forEach((function(n){a.push(n+"："+t.list[e].error[n])})),n.push({name:e,msg:r?"发送成功":a.join("<br>"),status:!!r})})),m({title:"发送至邮箱-结果",area:50,component:function(){return h((function(){return a.import("./index-legacy102.js?v=1734676359")}),void 0,a.meta.url)},compData:{resultData:n,resultTitle:"发送至邮箱",resultColumn:[{label:"邮箱",prop:"name"},{label:"结果",width:80,render:function(e){return se("span",{class:e.status?"text-primary":"text-danger"},e.status?"操作成功":"操作失败")}},{label:"信息",render:function(e){return se("span",{class:e.status?"":"text-danger"},e.msg)}}]}})}});case 5:return s=n.sent,n.abrupt("return",s.data.status);case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return{fileItem:e,quickFormRef:i,quickForm:t,quickRules:o,disable:r,getDetail:l,onConfirm:p,$reset:function(){r.value=!1,Object.assign(t,{email:"",msg:""})}}}))),ba=t("a3",ee("FILES-SPLIT-STORE",(function(){var e,t=lu(),n=oe(t).fileTabActiveData,r=t.refreshFilesList,a=q(),i=re({type:"size",size:1024,num:5,path:(null===(e=n.value)||void 0===e?void 0:e.param.path)||""}),o=q(!1),l=q(),c=re({size:[{validator:function(e,t,n){"size"===i.type?""===t?n(new Error("请输入拆分大小")):1024*Number(t)*1024>=a.value.size/2?n(new Error("拆分大小不能大于文件大小一半")):n():n()},trigger:["blur"]}],num:[{validator:function(e,t,n){"num"===i.type&&(""===t||Number(t)<2)?n(new Error("拆分数量不能小于2个")):n()},trigger:["blur"]}],path:[{validator:function(e,t,n){""===t?n(new Error("请选择存放目录")):n()},trigger:["blur"]}]}),p=function(){var e=s(u().mark((function e(t){var n,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={file_path:pi(a.value.fileName),save_path:i.path},"size"===i.type?n.split_size=Number(i.size):n.split_num=Number(i.num),e.next=4,l.value.validate();case 4:return e.next=6,f({loading:"正在拆分文件，请稍后...",request:nt(n),message:!0,success:function(e){d.request({status:e.status,msg:e.status?"拆分成功":"拆分失败"}),r()}});case 6:return o=e.sent,e.abrupt("return",o.status);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{fileItem:a,quickFormRef:l,quickForm:i,quickRules:c,disable:o,help:[{content:"拆分后会在存放目录(默认当前目录)下创建一个xxx_split文件夹,存放配置文件以及拆分文件"}],openFile:function(){At({type:"dir",change:function(e){i.path=e}})},onConfirm:p,init:function(){var e;o.value=!1,Object.assign(i,{type:"size",size:1024,num:5,path:(null===(e=n.value)||void 0===e?void 0:e.param.path)||""})}}}))),wa=t("aH",ee("FILES-TERMINAL-STORE",(function(){var e=oe(lu()).fileTabActiveData,t=q(),n=q(),r=function(){return n.value},a=function(){var e=s(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r(),n=null==t?void 0:t.socketInfo(),e.prev=2,e.next=5,b({title:"确定要关闭SSH会话吗？",content:"关闭SSH会话后，当前命令行会话正在执行的命令可能被中止，确定关闭吗？"});case 5:i(),n.close(),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=s(u().mark((function e(){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.value;case 2:null==(n=e.sent)||n.unmount();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{instance:t,filesTerminalRef:n,init:function(){H((function(){var t=r(),n=null==t?void 0:t.socketInfo(),a=null==t?void 0:t.terminal;n.send("\r\nclear\r"),n.send("cd ".concat(e.value.param.path,"\r")),null==a||a.focus()}))},onCancel:function(){return a(),!1}}}))),ya=t("a4",ee("FILES-MERGE-STORE",(function(){var e,t=lu(),n=oe(t).fileTabActiveData,r=t.refreshFilesList,a=q(),i=re({path:(null===(e=n.value)||void 0===e?void 0:e.param.path)||"",disable:!1,file:{}}),o=q(!1),l=q(),c=re({path:[{validator:function(e,t,n){""===t?n(new Error("请选择存放目录")):n()},trigger:["blur"]}]}),p=function(){var e=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f({loading:o,request:rt({file_path:a.value.path}),success:function(e){var t;Object.assign(i,{path:(null===(t=n.value)||void 0===t?void 0:t.param.path)||"",disable:!1,file:e.data})}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=s(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={file_path:pi(a.value.fileName),save_path:i.path},e.next=3,l.value.validate();case 3:return e.next=5,f({loading:o,request:at(n),message:!0,success:function(e){r(),e.status&&t&&t()}});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{fileItem:a,loading:o,quickFormRef:l,quickForm:i,quickRules:c,openFile:function(){At({type:"dir",change:function(e){i.path=e}})},getFile:p,onConfirm:v}}))),xa=t("aE",ee("FILES-EDIT-STORE",(function(){var e=q(),t=q(!1),n=re({data:""}),r=function(){var t=s(u().mark((function t(r){var a,i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={sfile:e.value.fileItem.path,filename:(""!=e.value.path?e.value.path+"/":"")+e.value.name,data:n.data},i="zip"===e.value.fileItem.ext?it:ut,t.next=4,f({loading:"正在保存，请稍后...",request:i({data:JSON.stringify(a)}),message:!0,success:function(e){e.status&&r&&r()}});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{compData:e,config:{mode:"ace/mode/nginx"},load:t,cmdForm:n,onConfirm:r,init:function(){n.data=e.value.data.data}}}))),ka=t("a2",ee("FILES-DECOMPRESSION-STORE",(function(){var e=lu(),t=oe(e).fileTabActiveData,n=e.refreshFilesList,r=e.getRealTask,a=aa(),i=oe(a).instance,o=q(),l=re({fileName:"",path:t.value.param.path||"",coding:"UTF-8",password:"",auth:"755"}),c=q(!1),p=q(),v=re({path:[{validator:function(e,t,n){""===t?n(new Error("请选择解压路径")):n()},trigger:["blur"]}],auth:[{validator:function(e,t,n){""===t||isNaN(Number(t))||t.length>3?n(new Error("请输入正确的权限")):n()},trigger:["blur"]}]}),h=function(){var e=s(u().mark((function e(){var t,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={sfile:o.value.path,dfile:l.path,type:"tar.gz"===o.value.ext?"tar":"zip",coding:l.coding,password:l.password,power:l.auth},e.next=3,p.value.validate();case 3:return c.value=!0,e.next=6,f({loading:"正在解压文件，请稍后...",request:ot(t),message:!0,success:function(){var e=s(u().mark((function e(t){var a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(),r(),e.next=4,i.value;case 4:null==(a=e.sent)||a.unmount();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});case 6:return a=e.sent,c.value=!1,e.abrupt("return",a.status);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{fileItem:o,quickFormRef:p,quickForm:l,quickRules:v,codeOptions:[{label:"UTF-8",value:"UTF-8"},{label:"GBK",value:"GBK"}],disable:c,openFile:function(){At({type:"dir",change:function(e){l.path=e}})},toggleCode:function(e){l.coding=e},init:function(){Object.assign(l,{fileName:o.value.fileName,path:t.value.param.path||"",coding:"UTF-8",password:"",auth:"755"})},onConfirm:h}}))),Sa=t("a1",ee("FILES-COMPRESS-STORE",(function(){var e=lu(),t=oe(e).fileTabActiveData,r=e.refreshFilesList,a=e.getRealTask,o=q(),l=re({type:"tar.gz",path:"",download:!1}),c=q(!1),p=q(),v=re({path:[{validator:function(e,t,n){""===t?n(new Error("请选择压缩路径")):n()},trigger:["blur"]}]}),h=function(){var e=s(u().mark((function e(){var n,i,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Array.isArray(o.value),i={sfile:n?o.value.map((function(e){return e.fileName})):o.value.fileName,dfile:l.path,z_type:l.type,path:t.value.param.path+"/"},e.next=4,p.value.validate();case 4:return s=l.download?st:lt,e.next=7,f({loading:"正在压缩文件，请稍后...",request:s(i),success:function(e){e.status?(l.download?window.open(e.data.msg):d.success("压缩成功"),a(),setTimeout((function(){r()}),1e3)):d.error(e.msg)}});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=q(),g=q(),b=q([]),w=q(null),y=function(){var e=s(u().mark((function e(t){var a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=g.value.params,e.next=4,ot(n(n({},a),t));case 4:e.sent.status&&w.value.tableSelectList.forEach((function(e){b.value.forEach((function(t,r){if(e.zip_file_path===t.zip_file_path){var a=n(n({},t),{},{status:"执行成功"});b.value.splice(r,1,a)}}))})),b.value.find((function(e){return void 0===e.status}))||(_(),d.success("解压成功"),r()),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=s(u().mark((function e(t){var a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=g.value.params,e.next=4,g.value.callback(n(n({},a),t));case 4:e.sent.status&&w.value.tableSelectList.forEach((function(e){b.value.forEach((function(t,r){if(e.zip_file_path===t.zip_file_path){var a=n(n({},t),{},{status:"执行成功"});b.value.splice(r,1,a)}}))})),b.value.find((function(e){return void 0===e.status}))||(_(),d.success("解压成功"),r()),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),i(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),k=ae([qt(),{label:"文件名",prop:"name",minWidth:150},{label:"大小",prop:"size",width:150,render:function(e){return e.file_size===e.zip_file_size?Y("span",{class:"text-primary"},[le("无变化")]):Y("div",null,[Y("div",{class:"text-blue-500"},[le("解压文件： "),Y("span",{class:"text-danger"},[S(e.zip_file_size)])]),Y("div",{class:"text-blue-500"},[le("目标文件： "),Y("span",{class:"text-danger"},[S(e.file_size)])])])}},{label:"修改时间",prop:"time",width:200,render:function(e){return e.file_mtime===e.zip_file_mtime?Y("span",{class:"text-primary"},[le("无变化")]):Y("div",null,[Y("div",{class:"text-blue-500"},[le("解压文件： "),Y("span",{class:"text-danger"},[e.zip_file_mtime])]),Y("div",{class:"text-blue-500"},[le("目标文件： "),Y("span",{class:"text-danger"},[e.file_mtime])])])}},{label:"执行结果",prop:"action",fixed:"right",render:function(e){return e.status?Y("span",{class:"text-primary"},[e.status]):Y("span",{class:"text-blue-500"},[le("-")])}}]),_=function(){var e=s(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.value;case 2:null==(t=e.sent)||t.unmount();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{fileItem:o,quickFormRef:p,quickForm:l,quickRules:v,disable:c,compressOptions:[{label:"tar.gz (推荐)",value:"tar.gz"},{label:"zip (通用格式)",value:"zip"},{label:"rar (WinRAR对中文兼容较好)",value:"rar"},{label:"7z (压缩率极高的压缩格式)",value:"7z"}],openFile:function(){At({type:"dir",change:function(e){l.path=e+"/"+o.value.fileName+"_"+F(5)+"."+l.type}})},toggleType:function(e){l.type=e,l.path=t.value.param.path+"/"+(Array.isArray(o.value)?t.value.label:o.value.fileName)+"_"+F(5)+"."+l.type},onConfirm:h,init:function(){Object.assign(l,{type:"tar.gz",path:("/"==t.value.param.path?"":t.value.param.path)+"/"+(Array.isArray(o.value)?t.value.label:o.value.fileName)+"_"+F(5)+".tar.gz"||"",download:!1})},instance:m,compData:g,tableColumn:k,tableList:b,jump:function(){if(0!==w.value.tableSelectList.length){var e=w.value.tableSelectList.map((function(e){return{zip_file_path:e.zip_file_path,file_path:e.file_path}}));if(g.value.callback){var t=g.value.params,r=JSON.parse(t.data).extract_path.split("/");return r.pop(),void x({data:JSON.stringify(n(n({},JSON.parse(t.data)),{},{extract_path:r.join("/"),filenames:e,type:0}))})}y({filenames:JSON.stringify(e),type1:0})}else d.error("请选择文件")},cover:function(){if(0!==w.value.tableSelectList.length){var e=w.value.tableSelectList.map((function(e){return{zip_file_path:e.zip_file_path,file_path:e.file_path}}));if(g.value.callback){var t=g.value.params,r=JSON.parse(t.data).extract_path.split("/");return r.pop(),void x({data:JSON.stringify(n(n({},JSON.parse(t.data)),{},{extract_path:r.join("/"),filenames:e,type:1}))})}y({filenames:JSON.stringify(e),type1:1})}else d.error("请选择文件")},rename:function(){if(0!==w.value.tableSelectList.length){var e=w.value.tableSelectList.map((function(e){return{zip_file_path:e.zip_file_path,file_path:e.file_path}}));if(g.value.callback){var t=g.value.params,r=JSON.parse(t.data).extract_path.split("/");return r.pop(),void x({data:JSON.stringify(n(n({},JSON.parse(t.data)),{},{extract_path:r.join("/"),filenames:e,type:2}))})}y({filenames:JSON.stringify(e),type1:2})}else d.error("请选择文件")},initCover:function(){b.value=g.value.data},$reset:function(){b.value=[]}}}))),_a=t("a0",ee("FILES-DETAIL-STORE",(function(){var e=lu(),t=oe(e).fileTabActiveData,r=e.refreshFilesList,a=q(),i=q("routine"),o=q(!1),l=function(){var e=s(u().mark((function e(){var r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.value=!0,e.next=3,Pe({filename:a.value.path});case 3:return(r=e.sent).status?(a.value=n(n({},a.value),r.data),o.value=!1):d.error(r.msg),e.next=7,ct({path:t.value.param.path+"/"+a.value.fileName});case 7:i=e.sent,a.value.st_size=i.data,p();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=q([]),p=function(){c.value=[{title:"文件名",value:a.value.name},{title:"类型",value:a.value.st_type||"未知文件"},{title:"文件路径",value:"".concat(a.value.path,"/").concat(a.value.name)},{title:"文件大小",value:"".concat(a.value.st_size)},{title:"访问时间",value:w(a.value.st_atime)},{title:"修改时间",value:w(a.value.st_mtime)},{title:"元数据修改时间",value:w(a.value.st_ctime)},{title:"文件MD5",value:a.value.md5},{title:"文件sha1",value:a.value.sha1},{title:"所属用户",value:a.value.user},{title:"所属组",value:a.value.group},{title:"文件权限",value:a.value.mode},{title:"特殊权限",value:a.value.lsattr||"无"},{title:"用户id",value:a.value.st_uid},{title:"用户组id",value:a.value.st_gid},{title:"inode的链接数",value:a.value.st_nlink},{title:"inode的节点号",value:a.value.st_ino},{title:"inode保护模式",value:a.value.st_mode},{title:"inode驻留设备",value:a.value.st_dev}]},v=function(){var e=s(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b({title:"恢复历史文件",content:"是否恢复历史文件 ".concat(w(a.value.st_mtime),"?恢复历史文件后，当前文件内容将会被替换！")});case 2:f({loading:"正在恢复历史文件，请稍后...",request:ft({filename:"".concat(a.value.path,"/").concat(a.value.name),history:t.st_mtime}),success:function(e){e.data.status?(d.success("恢复成功"),r()):d.error("恢复失败")}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=re({owner:[],group:[],public:[],auth:0,user:"root",isDir:!0,checkNumber:""}),m=function(){var e=s(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe({filename:"".concat(a.value.path)});case 2:(t=e.sent).status?(n=t.data,h.auth=n.chmod,h.user=n.chown,g(Number(n.chmod))):d.error(t.msg);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(e){256&(e=parseInt(e.toString(),8))?h.owner.push("r"):h.owner=h.owner.filter((function(e){return"r"!==e})),128&e?h.owner.push("w"):h.owner=h.owner.filter((function(e){return"w"!==e})),64&e?h.owner.push("x"):h.owner=h.owner.filter((function(e){return"x"!==e})),32&e?h.group.push("r"):h.group=h.group.filter((function(e){return"r"!==e})),16&e?h.group.push("w"):h.group=h.group.filter((function(e){return"w"!==e})),8&e?h.group.push("x"):h.group=h.group.filter((function(e){return"x"!==e})),4&e?h.public.push("r"):h.public=h.public.filter((function(e){return"r"!==e})),2&e?h.public.push("w"):h.public=h.public.filter((function(e){return"w"!==e})),1&e?h.public.push("x"):h.public=h.public.filter((function(e){return"x"!==e})),h.owner=Array.from(new Set(h.owner)),h.group=Array.from(new Set(h.group)),h.public=Array.from(new Set(h.public))},y=function(){var e=s(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=h.auth.toString()).length>3)){e.next=4;break}return d.error("请输入正确权限"),e.abrupt("return");case 4:if(!h.checkNumber.match(/\D/g)){e.next=7;break}return d.error("请输入正确权限"),e.abrupt("return");case 7:if(!t.match(/\D/g)){e.next=10;break}return d.error("请输入正确权限"),e.abrupt("return");case 10:for(;t.length<3;)t="0"+t;return e.next=13,f({loading:"正在设置文件权限，请稍后...",request:pt({filename:"".concat(a.value.path,"/").concat(a.value.name),user:h.user,access:t,all:h.isDir?"True":"False"}),message:!0,success:r});case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{activeName:i,fileItem:a,load:o,getFileItem:l,$reset:function(){c.value=[],Object.assign(h,{owner:[],group:[],public:[],auth:0,user:"root",isDir:!0,checkNumber:""})},attrList:c,watchFileItem:p,showHistory:function(e){},recoverHistory:v,checkList:h,ownerOptions:[{label:"root",value:"root"},{label:"www",value:"www"},{label:"mysql",value:"mysql"}],checkNumber:function(e){h.checkNumber=e;var t=String(e).replace(/[^\d]/g,"").slice(0,3);h.auth=t,g(Number(h.auth))},changeUser:function(e){h.user=e},setFileAuths:y,reversePermission:function(){var e=0,t=function(t,n,r,a){t.includes("r")&&(e|=n),t.includes("w")&&(e|=r),t.includes("x")&&(e|=a)};for(t(h.owner,256,128,64),t(h.group,32,16,8),t(h.public,4,2,1),h.auth=e.toString(8);h.auth.length<3;)h.auth="0"+h.auth},getFileAuths:m}}))),La=t("aM",ee("FILES-RECYCLE-BIN-STORE",(function(){var e,t,r=lu(),i=oe(r).recyclingBinStatus,o=r.getRealTask,l=q("all"),c=q(!1),p=q(null),v=q(null),g=re({data:{},status:!1,statusDB:!1,type:"all",p:1,limit:10,search:"",time:[]}),y=q(),x=function(){var e=s(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.value=t,E.value=[],C.value="",g.type=l.value,g.time=[],g.search="","db"!==t){e.next=12;break}return $.value="all",e.next=10,z({type:"db"});case 10:e.next=15;break;case 12:return $.value=t,e.next=15,z({type:t});case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e,t,n,r,a,i="db"===l.value;y.value={list:(null===(e=g.data)||void 0===e?void 0:e.list)||[],type:i||"db"!==g.type?g.type||"db":$.value,num:void 0===(null===(t=g.data)||void 0===t?void 0:t.search_num)?null===(n=g.data)||void 0===n?void 0:n[i?l.value:$.value]:null===(r=g.data)||void 0===r?void 0:r.search_num,size:(null===(a=g.data)||void 0===a?void 0:a.all_size)||0},L.value=i?g.statusDB:g.status,"db"!==y.value.type&&"all"!==y.value.type&&(P.p=1)},_=function(){var e=s(u().mark((function e(t){var r,a,o,s=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!(s.length>1&&void 0!==s[1])||s[1],t&&t.time_search&&(g.time=t.time_search),t&&t.search?g.search=t.search:t&&""===t.search&&(g.search=""),t&&t.type&&(g.type=t.type),a=n({type:g.type,p:g.p,limit:g.limit,search:g.search,time_search:g.time},t),r&&(c.value=!0),e.next=8,bt(a);case 8:o=e.sent,c.value=!1,g.data=o.data,g.status=o.data.status,i.value=o.data.status,g.statusDB=o.data.status_db,k();case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=q(!1),E=q([]),T=q(""),C=q(""),D=q(!1),N=re({resultData:[],resultColumn:[{label:"数据库",prop:"file"}],resultTitle:""}),F=q(),I=re({disabledDate:function(e){var t=new Date;t.setHours(23,59,59,999);var n=t.getTime();return e.getTime()>n}}),R=function(){var e=s(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},t&&(n.db=1),e.next=4,vt(n);case 4:r=e.sent,d.request(r.data),_();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=s(u().mark((function e(){var t,n,r,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.prev=1,e.next=4,b({title:"清空回收站",type:"input",input:{content:"清空回收站"},isHtml:!0,content:'<span class="text-[red]">清空回收站后，回收站'.concat("db"===l.value?"【所有数据库】":"【所有暂存文件】","将彻底消失，无法恢复，是否继续操作？</span>")});case 4:return t=d.load("正在清空回收站，请稍候..."),e.next=7,ht({type:"db"===l.value?"db":"files"});case 7:n=e.sent,(r=n.fail_list)&&(null==r?void 0:r.length)>0&&"db"===l.value?(a=r.map((function(e){return{file:e}})),N.resultData=a,N.resultTitle=n.msg,D.value=!0):d.request(n),o(),z(),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(1);case 16:return e.prev=16,t&&t.close(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,14,16,19]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=s(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ht({type:"db",force:1});case 2:t=e.sent,d.request(t),o(),_(),D.value=!1;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=q(),P=re({loading:!1,p:1,limit:10}),M=function(){var e=s(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="db"===y.value.type?"数据库":"文件",e.next=3,b({title:"删除".concat(r),type:"input",input:{content:"删除".concat(r)},isHtml:!0,content:"风险操作，删除后，".concat(r,"将彻底消失，无法恢复，是否继续操作？")});case 3:return e.next=5,f({loading:"正在批量删除，请稍后...",request:wt({path_list:t.map((function(e){return e.rname}))}),success:function(e){var t=[];e.success.forEach((function(e){t.push({name:e,msg:"删除成功",status:!0})})),Object.keys(e.error).forEach((function(n){t.push({name:n,msg:e.error[n],status:!1})})),iu({resultData:t,resultTitle:"删除"}),n(),z()}});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),z=function(){var e=s(u().mark((function e(t){var r,a,i=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!(i.length>1&&void 0!==i[1])||i[1],a="","db"===l.value?($.value="all",a="db"):a=$.value,e.next=5,_(n({p:P.p,limit:P.limit,type:a},t),r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=s(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("db"!==y.value.type){e.next=7;break}return e.next=3,b({title:"恢复数据库".concat(t.name),content:"您确定要恢复数据库【".concat(t.name,"】，是否继续？")});case 3:return e.next=5,f({loading:"正在恢复数据库，请稍后...",request:dt({path:t.rname}),message:!0,success:function(e){e.status&&z()}});case 5:e.next=9;break;case 7:K.value=t,m({title:"恢复文件".concat(t.name),area:41,btn:"确定",component:function(){return h((function(){return a.import("./index-legacy191.js?v=1734676359")}),void 0,a.meta.url)},onConfirm:te});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=s(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="db"===y.value.type?"数据库":"文件",e.next=3,b({title:"删除".concat(n).concat(t.name),type:"input",input:{content:"删除".concat(n)},content:"风险操作，删除后，".concat(n,"将彻底消失，无法恢复，是否继续操作？")});case 3:return e.next=5,f({loading:"正在删除，请稍后...",request:mt({path:t.rname}),success:function(e){1===e.tag?(N.resultData=[{file:t.rname}],N.resultTitle=e.msg,D.value=!0):(d.request(e),z())}});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=s(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mt({path:N.resultData[0].file,force:1});case 2:t=e.sent,d.request(t),D.value=!1,z();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=s(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gt({name:t.name,rname:t.rname});case 2:n=e.sent,(r=n.data).status?window.open("/download?filename=".concat(r.msg.path)):d.error(r.msg);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=s(u().mark((function e(t){var n,r,a,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gt({name:t.name,rname:t.rname});case 2:if(n=e.sent,"string"!=typeof(r=n.data).msg||!r.msg.includes("找不到文件")){e.next=7;break}return d.error("当前文件不可预览"),e.abrupt("return");case 7:a=r.msg.file.nm.split(".").pop(),"images"===Di(a)?(i={path:r.msg.path},ei(i)):Ai(r.msg);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=q([qt(),{label:"文件名",prop:"fileName",minWidth:150,render:function(e){return Y("span",{class:"flex items-center"},[Y("span",{class:["icon-bg",e.is_dir?"folder-icon":Object.keys(Ia).includes(Ci(e.name,"file"))?Ia[Ci(e.name,"file")]+"-icon":"file-icon"]},null),Y("span",{class:"truncate w-[26rem]"},[e.name])])}},{label:"原位置",prop:"dname",showOverflowTooltip:!0,render:function(e){return Y("span",{class:"truncate"},[e.dname])}},{label:"大小",width:90,render:function(e){return S(e.size)}},{label:"删除时间",width:145,render:function(e){return w(e.time)}},Ht([{title:"下载",isHide:function(e){return e.is_dir},onClick:G},{title:"查看",isHide:function(e){return e.is_dir},onClick:U},{title:"恢复",onClick:H},{title:"删除",onClick:B}])]),J=[{label:"恢复",value:"recover",event:(t=s(u().mark((function e(t,n,r,a,i){var o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(){var e=s(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dt({path:t.rname});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=3,t({title:"批量恢复",content:"批量恢复选中后，被删除将会恢复，是否继续操作？",column:[{prop:"rname",label:"名称"},Bt()],onConfirm:function(){var e=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(o);case 2:return z(),e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});case 3:case"end":return e.stop()}}),e)}))),function(e,n,r,a,i){return t.apply(this,arguments)})},{label:"删除",value:"delete",event:(e=s(u().mark((function e(t,n,r,a,i){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M(r.value,i);case 1:case"end":return e.stop()}}),e)}))),function(t,n,r,a,i){return e.apply(this,arguments)})}],$=q("all"),K=q(),X=re({type:"before",path:""}),Q=q(!1),Z=q(),ee=re({path:[{validator:function(e,t,n){""===t&&"path"===X.type?n(new Error("请选择恢复目录")):n()},trigger:["blur"]}]}),te=function(){var e=s(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.value.validate();case 2:return e.next=4,f({loading:Q,request:dt({path:K.value.rname,rpath:"path"===X.type?"".concat(X.path,"/").concat(K.value.name):K.value.dname}),message:!0,success:function(e){e.status&&z()}});case 4:return t=e.sent,e.abrupt("return",t.status);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{activeName:l,loading:c,binData:g,compData:y,watchBinData:k,handleTabChange:x,statusSwitch:L,time:E,popupData:N,showPopup:D,searchName:C,pickerOptions:I,formatDate:T,onCancel:function(){D.value=!1},showPlayer:function(){F.value.focus()},cleanBin:O,clearTime:function(){E.value=[]},setStatus:R,goSearch:function(){_({search:C.value})},changeClearCheck:A,watchTime:function(){var e,t={time_search:[]};2===(null===(e=E.value)||void 0===e?void 0:e.length)?(E.value[0]=new Date(E.value[0]).setHours(0,0,0,0),E.value[1]=new Date(E.value[1]).setHours(23,59,59,0),t.time_search=JSON.stringify([E.value[0]/1e3,E.value[1]/1e3])):(T.value="",t.time_search=JSON.stringify([])),_(t,!1)},dbTableRef:p,tableRef:j,fileTableRef:v,tableData:P,tableColumn:W,tableBatchOptions:J,deleteClearCheck:V,refresh:z,tabActive:$,config:[{type:"all",label:"全部",icon:"svgtofont-left-soft"},{type:"dir",label:"文件夹",icon:"svgtofont-left-files"},{type:"file",label:"文件",icon:"svgtofont-file-text"},{type:"image",label:"图片",icon:"svgtofont-icon-term"},{type:"ont_text",label:"文档",icon:"svgtofont-el-document"}],toggleType:function(e){$.value=e,z({type:e},!1)},rowData:K,isCmdLoading:Q,cmdForm:X,cmdFormRef:Z,cmdRules:ee,openFile:function(){At({type:"dir",change:function(e){X.path=e}})},clearSpace:function(e){X.path=X.path.replace(/\s+/g,"")},init:function(){g.type=l.value,x(l.value)},$reset:function(){l.value="all",c.value=!1,Object.assign(g,{data:{},status:!1,statusDB:!1,type:"all",p:1,limit:10,search:"",time:[]}),L.value=!1,E.value=[],T.value="",C.value="",D.value=!1,Object.assign(N,{resultData:[],resultColumn:[{label:"数据库",prop:"file"}],resultTitle:""}),Object.assign(P,{loading:!1,p:1,limit:10}),$.value="all"},$resetCmdForm:function(){Q.value=!1,Object.assign(X,{type:"before",path:""})}}}))),Ea=t("i",ee("FILES-LIST-VIEW-STORE",(function(){var e=lu(),t=oe(e),n=t.mainHeight,a=t.authType,i=t.fileTabActiveData,o=t.navBtnHeight,l=t.imageList,c=t.imgPathItem,f=t.isNoCreteItem,p=t.createListType,v=t.globalTamperStatus,h=t.dataList,m=t.fileBatchNum,g=t.diskAnalysis,w=e.refreshFilesList,y=e.watchCreateListType,k=e.watchDeleteFileData,S=window.location.protocol+"//"+window.location.host+"/download?filename=",_=q([{label:"文件名称",id:"fileName",width:"42",sort:"",sortable:!0,class:"cursor-pointer"},{label:"企业级防篡改",width:"12"},{label:"权限/所有者",width:"10"},{label:"大小",width:"10",id:"size",sort:"",sortable:!0,class:"cursor-pointer"},{width:"16",label:"修改时间",id:"time",sort:"",sortable:!0,class:"cursor-pointer"},{label:"备注",width:"20"},{label:"操作",type:"operation",style:"justify-content:flex-end;padding-right: 2.8rem;flex:1;display:flex;"}]),L=q(null),E=q(!1),T=q(null);ae([]);var C=q([]),D=q(!1),N=q([]),F=q(0),O=q(!0),A=q(null),j=q(0),P=q(0),M=function(){var e=s(u().mark((function e(t){var n,r,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!fi(t.fileName)){e.next=5;break}return d.error('文件名不能包含以下字符：\\ / : * ? " < > |'),t.isReName=!0,f.value=!0,e.abrupt("return");case 5:if(f.value=!1,!t.isNew){e.next=24;break}if(p.value="",y(""),""!==t.fileName){e.next=12;break}return k(t),e.abrupt("return");case 12:return e.next=14,ge({path:pi(t.fileName),type:t.type});case 14:if(!(n=e.sent).status){e.next=20;break}return e.next=18,w();case 18:t.isReName=!1,"file"===t.type&&setTimeout((function(){var e=h.value.find((function(e){return e.fileName===t.fileName}));e&&ji(e)}),100);case 20:k(t),d.request(n),e.next=34;break;case 24:if(t.fileName!==t.oldName){e.next=27;break}return t.isReName=!1,e.abrupt("return");case 27:return r=d.load("正在重命名，请稍候..."),e.next=30,be({sfile:pi(t.oldName),dfile:pi(t.fileName),rename:!0});case 30:a=e.sent,r.close(),a.status?(t.isReName=!1,d.success(a.msg)):d.error(a.msg),w();case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(e){M(e)},B=function(){var e=s(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isOsPs){e.next=2;break}return e.abrupt("return");case 2:t.target.children[1].contains(document.activeElement)||(n.isPsEdit=!1);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),V=function(){var e=s(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ps===t.oldPs){e.next=9;break}return n=d.load("正在设置备注，请稍候..."),e.next=4,yt({filename:t.path,ps_type:0,ps_body:t.ps});case 4:(r=e.sent).status?(t.isPsEdit=!1,d.success(r.msg)):d.error(r.msg),n.close(),e.next=10;break;case 9:t.isPsEdit=!1;case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=null,U=function(e){var t=Array.from(e.target.classList);return!(t.includes("checkbox--icon")||t.includes("size-link")||t.includes("svgtofont-el-loading")||t.includes("el-input__inner"))},W=function(){var e=s(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={top:"置顶",favorite:"收藏",share:"分享"},e.prev=1,e.t0="share"!=n,!e.t0){e.next=6;break}return e.next=6,b({title:"提示",isHtml:!0,content:"取消【".concat(t.fileName,"】的").concat(r[n],"，是否继续？")});case 6:e.t1=n,e.next="top"===e.t1?9:"favorite"===e.t1?11:"share"===e.t1?13:15;break;case 9:return Si(t,t.isTop?"unset":"set"),e.abrupt("break",15);case 11:return ki(t,(function(){return t.isFav=!1})),e.abrupt("break",15);case 13:return qa(t),e.abrupt("break",15);case 15:e.next=19;break;case 17:e.prev=17,e.t2=e.catch(1);case 19:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t,n){return e.apply(this,arguments)}}(),J=function(){var e=s(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("ltd"!==a.value){e.next=17;break}if(!v.value.status){e.next=5;break}ni(t),e.next=15;break;case 5:return e.next=7,I({sName:"tamper_core"});case 7:if(n=e.sent,(r=n.data).setup){e.next=14;break}return e.next=12,Pt({name:r.name,type:"i",pluginInfo:r});case 12:e.next=15;break;case 14:R(v.value.tip)?d.error("企业级防篡改未安装或版本较低，请检查插件状态。"):d.error("“".concat(v.value.tip,"”请前往【企业级防篡改】启动服务。"));case 15:e.next=18;break;case 17:Mt({sourceId:71});case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=null,K={top:0,left:0},Y={top:0,left:0},X=0,Q=function(e){if(2!==e.button&&!e.target.closest(".el-input__inner")){var t=document.getElementById("drugBox");if(t&&t.remove(),$){var n=$.getBoundingClientRect().top,r=$.getBoundingClientRect().left;K={top:e.clientY-n,left:e.clientX-r}}document.addEventListener("mousemove",Z),document.addEventListener("mouseup",ee)}},Z=function(e){var t=document.getElementById("drugBox");if(t&&t.remove(),$){var n,a=$.getBoundingClientRect().top,i=$.getBoundingClientRect().left;Y={top:e.clientY-a>0&&e.clientY-a<$.offsetHeight?e.clientY-a:e.clientY-(a+$.offsetHeight)>1?$.offsetHeight:0,left:e.clientX-i>0&&e.clientX-i<$.offsetWidth?e.clientX-i:e.clientX-(i+$.offsetWidth)>1?$.offsetWidth:0};var u=(null===(n=$)||void 0===n?void 0:n.scrollTop)||0,o={top:Y.top>K.top?K.top+u:Y.top+u,left:Y.left>K.left?K.left:Y.left},s=Math.min(Math.abs(Y.left-K.left),i+$.offsetWidth-o.left),l=Math.min(Math.abs(Y.top-K.top),a+$.offsetHeight-o.top+u);if(e.clientY-a<0){var c=Math.abs(e.clientY-a);$.scrollTop-=c,0!=$.scrollTop&&(X+=c),l+=X}if(e.clientY-(a+$.offsetHeight)>1){var f=e.clientY-(a+$.offsetHeight);$.scrollTop+=f,$.scrollHeight-$.scrollTop!=$.clientHeight&&(X+=f),l+=X,o.top-=X}if(K.top==Y.top||K.left==Y.left)return!0;var p=document.createElement("div");p.classList.add("absolute","border","top-0","border-[#072246]","bg-[#cce8ff]","opacity-[0.15]","overflow-hidden"),p.id="drugBox",$.appendChild(p),p.style.left=o.left+"px",p.style.top=o.top+"px",p.style.width=s+"px",p.style.height=l+"px";var v=document.getElementById("drugBox");if($&&v){var d=v.offsetTop,m=v.offsetTop+v.offsetHeight,g=[];ne.value.forEach((function(e,t){var n=e.offsetTop,r=e.offsetTop+e.offsetHeight,a=h.value[t];r>=d&&n<=m&&g.push(a.path)}));var b=new Set(g),w=new Set(C.value);b.size===w.size&&r(b).every((function(e){return w.has(e)}))||(C.value=r(b),ve()),C.value.length>0&&C.value.length===h.value.length?ue.value=!0:ue.value=!1}}},ee=function(e){e.preventDefault(),e.stopPropagation(),document.removeEventListener("mousemove",Z),document.removeEventListener("mouseup",ee);var t=document.getElementById("drugBox");t&&t.remove()},te=function(e){C.value=e.map((function(e){return e.path})),ve()},ne=q([]),re=function(){ne.value=[];for(var e=0;e<h.value.length;e++)ne.value.push({offsetTop:36*e,offsetHeight:36});ne.value.length&&(P.value=ne.value[ne.value.length-1].offsetTop,P.value<=n.value-(o.value||64)-266?O.value=!1:O.value=!0)},ie=function(){H((function(){for(var e=function(){var e=l.value[t];h.value.forEach((function(t){t.fileName===e[0]&&e[1]&&(t.isSmallImage=e[1])}))},t=0;t<l.value.length;t++)e();N.value=h.value.filter((function(e){return void 0!==e.isSmallImage})).map((function(e){return"".concat(S).concat(e.path)}))}))},ue=q(!1),se=function(e){var t;(2===e.button&&"INPUT"===e.target.tagName&&e.preventDefault(),e.target.closest(".scrollTable")||e.target.closest(".v-contextmenu"))||(null===(t=L.value)||void 0===t||t.hide())},le=q(0),ce=q(null),fe=q(null),pe=function(){var e=s(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I({sName:"disk_analysis"});case 3:((t=e.sent).data.status||"ltd"===a.value)&&Pt({name:t.data.name,type:"i",pluginInfo:t.data,softData:t.data}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),ve=function(){var e=h.value.filter((function(e){return C.value.includes(e.path)}));m.value=e},he=function(){H((function(){var e;null===(e=$=document.querySelector(".scrollTable"))||void 0===e||e.addEventListener("mousedown",Q)}))};return{mainHeight:n,authType:a,diskAnalysis:g,headData:_,dataList:h,selectList:C,fileBatchNum:m,checkedAll:ue,imgPathItem:c,imgIndex:F,showViewer:D,imgList:N,scrollHeight:j,scrollHeightBottom:P,isShowShadow:O,context:L,contextRow:T,isBatch:E,scrollRef:A,imageList:l,navBtnHeight:o,fileTabActiveData:i,bindMouseDown:he,buyPlugin:function(){g.value.isBuy||"ltd"===a.value?pe():Mt({sourceId:140,disablePro:!0})},clickName:function(e){if("dir"===e.type)hi(e.path);else{var t={"查看图片":["jpg","png","gif","jpeg"],"播放视频":["mp4","avi","mov","rmvb","rm","flv","3gp","wmv","mkv","mpeg","mpg","ts","webm","vob","swf"],"解压文件":["zip","rar","gz","war","tgz","7z","tar.gz","tar"],"播放音频":["mp3","wav","wma","ogg","ape","flac","aac","m4a"]},n=e.ext,r="查看文档";for(var a in t)if(t[a].includes(n)){r=a;break}G&&G.close(),G=d.msg({customClass:"no-icon !z-10",message:"双击".concat(r),type:"info"})}},handleBlurCheck:function(){var e=h.value.find((function(e){return e.isReName}));z(e)},handleEvent:function(e,t){if(!(x()&&e instanceof MouseEvent)){var n,r,a=(new Date).getTime(),i=a-le.value;i<300&&i>0&&fe.value===t?(null!==ce.value&&clearTimeout(ce.value),n=e,r=t,G&&G.close(),U(n)&&(r.isPs||r.isReName||ji(r))):(fe.value=t,ce.value=window.setTimeout((function(){!function(e,t){var n=Array.from(e.target.classList);U(e)&&(n.includes("fileName")||(C.value=[t.path],ve()))}(e,t)}),300)),le.value=a}},handleRightClick:function(e,t){var n;e.preventDefault(),e.stopPropagation();var r,a=t?t.path:null;if((t&&(r=a,!C.value.find((function(e){return e===r})))||0===e.button)&&(C.value=[],C.value.push(a),ve()),C.value.length>1&&t&&2===e.button){var i;E.value=!0;var u=[];return h.value.forEach((function(e){C.value.includes(e.path)&&u.push(e)})),T.value=u,void(null===(i=L.value)||void 0===i||i.show(e))}E.value=!1,T.value=t||null,t||(C.value=[],ve()),null===(n=L.value)||void 0===n||n.show(e)},handleCheckFile:function(e){new Set(C.value).has(e.path)?C.value=C.value.filter((function(t){return t!==e.path})):C.value.push(e.path),ue.value=C.value.length===h.value.length,ve()},handleCheckAll:function(e){te(e?h.value:[]),ue.value=e},handleFileLock:J,handleEnPsView:function(e){e.isOsPs||(e.oldPs=e.ps,e.isPsEdit=!0)},handleLvPsView:B,handleSetPs:V,handleReName:function(e){e.oldName=e.fileName,e.isReName=!0},openImgView:function(e){F.value=N.value.findIndex((function(t){return t==="".concat(S).concat(e.path)})),D.value=!0},opearationIconClick:W,onReNameKeyup:z,sortTable:function(e){e.sortable&&(_.value.forEach((function(t){t.id!==e.id&&(t.sort="")})),"asc"===e.sort?e.sort="desc":"desc"===e.sort?e.sort="":e.sort="asc",i.value.param.sort=""!=e.sort?e.id:"",i.value.param.reverse="asc"==e.sort?"False":"True",w())},calcFileListHeightFn:re,setSmallImage:ie,closeImgPreView:function(){D.value=!1},findCurrentImgIndex:function(e){F.value=N.value.findIndex((function(t){return t===e})),D.value=!0},watchDataList:function(e){C.value=[],ue.value=!1,e.length&&(re(),ie()),ve(),H((function(){var e;null===(e=A.value)||void 0===e||e.scrollToPosition(0)}))},init:function(){var e;re(),he(),A.value.$el.addEventListener("scroll",(function(){j.value=A.value.$el.scrollTop+(n.value-(o.value||64)-266),0===A.value.$el.scrollTop&&(j.value=0)})),(e=_.value.find((function(e){return e.id===i.value.param.sort})))&&(e.sort="False"==i.value.param.reverse?"asc":"desc"),document.addEventListener("mousedown",se)},$reset:function(){var e;null===(e=$)||void 0===e||e.removeEventListener("mousemove",Z),document.removeEventListener("mousedown",se)}}}))),Ta=o(),Ca=t("u",new Map([["/etc","PS: 系统主要配置文件目录"],["/home","PS: 用户主目录"],["/tmp","PS: 公共的临时文件存储点"],["/root","PS: 系统管理员的主目录"],["/home","PS: 用户主目录"],["/usr","PS: 系统应用程序目录"],["/boot","PS: 系统启动核心目录"],["/lib","PS: 系统资源文件类库目录"],["/mnt","PS: 存放临时的映射文件系统"],["/www","PS: 宝塔面板程序目录"],["/bin","PS: 存放二进制可执行文件目录"],["/dev","PS: 存放设备文件目录"],["/www/wwwlogs","PS: 默认网站日志目录"],["/www/server","PS: 宝塔软件安装目录"],["/www/wwwlogs","PS: 网站日志目录"],["/www/Recycle_bin","PS: 回收站目录,勿动"],["/www/server/panel","PS: 宝塔主程序目录，勿动"],["/www/server/panel/plugin","PS: 宝塔插件安装目录"],["/www/server/panel/BTPanel","PS: 宝塔面板前端文件"],["/www/server/panel/BTPanel/static","PS: 宝塔面板前端静态文件"],["/www/server/panel/BTPanel/templates","PS: 宝塔面板前端模板文件"],[O("backup_path"),"PS: 默认备份目录"],[O("sites_path"),"PS: 默认建站目录"]])),Da=t("R",q([{name:"收藏夹",ename:"favorite",callback:function(){return Na("favorite")}},{name:"文件分享",ename:"fileShare",callback:function(){return Na("fileShare")}},{name:"文件同步",ename:"fileSync",callback:function(){return Na("fileSync")}},{name:"企业级防篡改",ename:"tamperProof",callback:function(){return Na("tamperProof")}},{name:"文件内容搜索",ename:"fileSearch",callback:function(){return Na("fileSearch")}}])),Na=function(e){var t=lu().openPlugin;switch(e){case"favorite":Pa();break;case"fileShare":Ma();break;case"fileSync":t("rsync",70);break;case"tamperProof":t("tamper_core",75);break;case"fileSearch":Aa()}},Fa=["folder","folder-unempty","sql","c","cpp","cs","flv","css","js","htm","html","java","log","mht","php","url","xml","ai","bmp","cdr","gif","ico","jpeg","jpg","JPG","png","psd","webp","ape","avi","mkv","mov","mp3","mp4","mpeg","mpg","rm","rmvb","swf","wav","webm","wma","wmv","rtf","docx","fdf","potm","pptx","txt","xlsb","xlsx","7z","cab","iso","rar","zip","gz","war","bt","tgz","file","apk","bookfolder","folder-empty","fromchromefolder","documentfolder","fromphonefolder","mix","musicfolder","picturefolder","videofolder","sefolder","access","mdb","accdb","fla","doc","docm","dotx","dotm","dot","pdf","ppt","pptm","pot","xls","csv","xlsm","py","sh","json","lua","bt_split","bt_split_json"],Ia={sql:"sql",css:"css",js:"js",html:"html",java:"java",php:"php",xml:"xml",bmp:"bmp",cdr:"cdr",gif:"gif",ico:"ico",jpeg:"jpeg",jpg:"jpg",JPG:"jpg",png:"png",webp:"webp",avi:"avi",mkv:"mkv",mov:"mov",mp3:"mp4",mp4:"mp4",mpeg:"mpeg",mpg:"mpg",rm:"rm",rmvb:"rmvb",swf:"swf",webm:"webm",wma:"wma",wmv:"wmv","7z":"compress",rar:"compress",zip:"compress",gz:"compress",war:"compress",tgz:"compress","tar.gz":"compress",iso:"iso",apk:"apk",access:"access",doc:"doc",pdf:"pdf",ppt:"ppt",xls:"xls",bt_split:"split",bt_split_json:"join",javascript:"js",json:"json",log:"log",lua:"lua",py:"py",python:"py",recycle:"recycle",flac:"flac",sh:"sh"},Ra={images:["jpg","jpeg","png","bmp","gif","tiff","ico","JPG","webp"],compress:["zip","rar","gz","war","tgz","7z","tar.gz","tar"],video:["mp4","mp3","mpeg","mpg","mov","avi","webm","mkv","mkv","mp3","rmvb","wma","wmv","flac","mov"],ont_text:["iso","xlsx","xls","doc","docx","tiff","exe","so","bz","dmg","apk","pptx","ppt","xlsb","pdf"]},Oa=function(){var e=oe(fa()).instance;return e.value=m({title:"实时任务队列",area:51,component:function(){return h((function(){return a.import("./index-legacy192.js?v=1734676359")}),void 0,a.meta.url)},modal:!1}),e.value},Aa=t("b",(function(){return m({title:"文件内容搜索",area:105,component:function(){return h((function(){return a.import("./index-legacy193.js?v=1734676359")}),void 0,a.meta.url)}})})),ja=t("P",(function(){var e=ia().onConfirm;return m({title:"创建软链接",area:50,btn:["确认","关闭"],component:function(){return h((function(){return a.import("./index-legacy194.js?v=1734676359")}),void 0,a.meta.url)},onConfirm:e})})),Pa=t("M",(function(){var e=ua(),t=oe(e).instance;return t.value=m({title:"管理收藏夹",area:85,component:function(){return h((function(){return a.import("./index-legacy195.js?v=1734676359")}),void 0,a.meta.url)}}),t.value})),Ma=t("S",(function(){return m({title:"分享列表",area:85,component:function(){return h((function(){return a.import("./index-legacy196.js?v=1734676359")}),void 0,a.meta.url)}})})),za=function(e){var t=ma(),n=oe(t).fileItem,r=t.onConfirm;return n.value=e,m({title:"设置分享文件[ ".concat(e.fileName," ]"),area:45,btn:"生成外链",component:function(){return h((function(){return a.import("./index-legacy197.js?v=1734676359")}),void 0,a.meta.url)},onConfirm:r})},qa=function(e,t){var r=ma(),i=oe(r).compData,u=r.onConfirmDetail;return i.value=n(n({},e),{},{isShareList:t}),m({title:"外链分享-[".concat(e.path?e.path:e.filename,"]"),btn:"关闭分享外链",confirmBtnType:"danger",area:55,component:function(){return h((function(){return a.import("./detail-legacy.js?v=1734676359")}),void 0,a.meta.url)},onConfirm:u})},Ha=function(e){var t=Lt();return oe(t).compData.value={row:e},m({title:"【".concat(e.path,"】设置数据同步"),area:56,component:function(){return h((function(){return a.import("./index-legacy198.js?v=1734676359")}),void 0,a.meta.url)},compData:{row:e}})},Ba=t("d",(function(){return m({title:"文件操作记录",area:80,component:function(){return h((function(){return a.import("./index-legacy199.js?v=1734676359")}),void 0,a.meta.url)},compData:{}})})),Va=function(e,t){var n=oe(_a()),r=n.activeName,i=n.fileItem;return r.value=t,i.value=e,m({title:"[ ".concat(e.fileName," ] - 文件属性"),area:58,component:function(){return h((function(){return a.import("./index-legacy200.js?v=1734676359")}),void 0,a.meta.url)}})},Ga=function(e){var t=Sa(),n=oe(t).fileItem,r=t.onConfirm;return n.value=e,m({title:"压缩文件",area:48,btn:"压缩",component:function(){return h((function(){return a.import("./index-legacy201.js?v=1734676359")}),void 0,a.meta.url)},onConfirm:r})},Ua=t("a8",(function(e){var t=ka(),n=oe(t).fileItem,r=t.onConfirm;return n.value=e,m({title:"解压文件[ ".concat(e.fileName," ]"),area:48,btn:"解压",component:function(){return h((function(){return a.import("./index-legacy202.js?v=1734676359")}),void 0,a.meta.url)},onConfirm:r})})),Wa=function(e){var t=ba(),n=oe(t).fileItem,r=t.onConfirm;return n.value=e,m({title:"【".concat(e.fileName,"】文件拆分"),area:55,btn:"确定",component:function(){return h((function(){return a.import("./index-legacy203.js?v=1734676359")}),void 0,a.meta.url)},onConfirm:r})},Ja=function(e){var t=ya(),n=oe(t).fileItem,r=t.onConfirm;return n.value=e,m({title:"合并【".concat(e.fileName,"】文件"),area:44,btn:"确定",component:function(){return h((function(){return a.import("./index-legacy204.js?v=1734676359")}),void 0,a.meta.url)},onConfirm:r})},$a=function(e){var t=ga(),n=oe(t).fileItem,r=t.onConfirm;return n.value=e,m({title:"发送至邮箱",area:50,btn:"发送",component:function(){return h((function(){return a.import("./index-legacy205.js?v=1734676359")}),void 0,a.meta.url)},onConfirm:r})},Ka=function(e){var t=sa(),n=oe(t).instance;return n.value=m({title:"文件格式转换",area:78,component:function(){return h((function(){return a.import("./index-legacy206.js?v=1734676359")}),void 0,a.meta.url)}}),n.value},Ya=t("n",(function(e){var t=aa(),n=oe(t),r=n.fileItem,i=n.instance;r.value=e,i.value=m({title:"压缩预览 --【".concat(e.fileName,"】"),area:74,component:function(){return h((function(){return a.import("./index-legacy207.js?v=1734676359")}),void 0,a.meta.url)}})})),Xa=function(){var e=s(u().mark((function e(t,n){var r,i,o,s,l,c,f,p,v;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=oe(lu()),i=r.mainWidth,o=oe(Jn()),s=o.fileItem,l=o.instance,c=oe($n()),f=c.fileItem,p=c.instance,s.value=t,f.value=t,v=m({title:"在线文本编辑器",area:x()||i.value<1280?["100vw"]:143,component:function(){return x()?h((function(){return a.import("./index-legacy208.js?v=1734676359")}),void 0,a.meta.url):h((function(){return a.import("./index-legacy209.js?v=1734676359")}),void 0,a.meta.url)},isFullScreen:!0,closeBtn:2,modal:!1,autoClose:!1,compData:{data:t,callback:n}}),l.value=v,p.value=v;case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Qa=function(){return m({title:"文件历史版本",area:75,component:function(){return h((function(){return a.import("./index-legacy210.js?v=1734676359")}),void 0,a.meta.url)}})},Za=t("v",(function(e){var t=va(),n=oe(t).fileItem,r=t.onConfirm;return n.value=e,m({title:"导入数据库",area:40,btn:"确定",component:function(){return h((function(){return a.import("./index-legacy211.js?v=1734676359")}),void 0,a.meta.url)},onConfirm:r})})),ei=function(e){return oe(pa()).fileItem.value=e,m({area:75,component:function(){return h((function(){return a.import("./index-legacy212.js?v=1734676359")}),void 0,a.meta.url)}})},ti=function(e,t,n,r){var i=xa(),u=oe(i).compData,o=i.onConfirm;return u.value={data:e,fileItem:t,name:n,path:r},m({title:"在线编辑",area:65,btn:"保存",component:function(){return h((function(){return a.import("./index-legacy213.js?v=1734676359")}),void 0,a.meta.url)},onConfirm:o})},ni=function(e,t){var n=ca(),r=oe(n).compData,i=n.onConfirm;return r.value={data:e,temp_data:t},m({title:"【".concat(e.path,"】配置"),area:40,btn:!0,component:function(){return h((function(){return a.import("./index-legacy214.js?v=1734676359")}),void 0,a.meta.url)},onConfirm:i})},ri=t("Q",(function(e){return oe(ha()).videoUrl.value=e.path,m({title:"视频播放",area:89,component:function(){return h((function(){return a.import("./index-legacy215.js?v=1734676359")}),void 0,a.meta.url)}})})),ai=t("C",(function(){var e=oe(wa()).instance;return e.value=m({title:"宝塔终端",area:[80,50],component:function(){return h((function(){return a.import("./index-legacy216.js?v=1734676359")}),void 0,a.meta.url)}}),e.value})),ii=function(e,t,n){var r=Sa(),i=oe(r),u=i.compData,o=i.instance;return u.value={data:e,params:t,callback:n},o.value=m({area:70,component:function(){return h((function(){return a.import("./index-legacy217.js?v=1734676359")}),void 0,a.meta.url)}}),o.value},ui=t("r",(function(e){var t=ra(),n=oe(t),r=n.compData,i=n.instance,u=t.onConfirm;return r.value=e,i.value=m({title:"".concat("upload"===e.type?"上传到"+e.zName:"从"+e.zName+"下载【勾选需要下载的文件】"),area:70,btn:["upload"===e.type?"上传":"下载","取消"],component:function(){return h((function(){return a.import("./index-legacy218.js?v=1734676359")}),void 0,a.meta.url)},onConfirm:u}),i.value})),oi=t("L",(function(e){var t=na(),n=oe(t).fileList,r=t.setFileAuths;return n.value=e.map((function(e){return e.fileName})),m({title:"设置权限【批量】",area:45,component:function(){return h((function(){return a.import("./index-legacy219.js?v=1734676359")}),void 0,a.meta.url)},btn:!0,onConfirm:r})})),si=function(e){var t=Jn(),n=t.onConfirmCheckFile,r=t.onCancelCheckFile;return m({title:"温馨提示",area:[35,9],btn:["保存","不保存"],component:function(){return h((function(){return a.import("./index-legacy220.js?v=1734676359")}),void 0,a.meta.url)},separationCancelClose:!0,onConfirm:function(t){n(),e()},onCancel:function(t){r(t),e()}})},li=function(e,t){var n=Jn(),r=oe(n).compDataClose,i=n.onConfirmClose,u=n.onCancelClose;return r.value={type:e,item:t},m({title:"温馨提示",area:[35,9],btn:["保存","不保存"],component:function(){return h((function(){return a.import("./index-legacy221.js?v=1734676359")}),void 0,a.meta.url)},separationCancelClose:!0,onConfirm:i,onCancel:u})},ci=t("a",(function(e,t){var n=e.path,r=e.name,a=lu(),i=oe(a),u=i.fileTabList,o=i.fileTabActive,s=i.disabledCutTab;i.fileTabActiveData;if(n&&!s.value){var l=n,c=n;"/"===l?l="根目录":("/"===c[c.length-1]&&(c=c.slice(0,c.length-1)),l=n.split("/").pop()),r&&(l=r);var f={id:F(),label:l,type:"list",loading:!1,total:0,list:[],param:{p:1,showRow:500,path:c}};s.value=!0,u.value.push(f),o.value=u.value.length-1,H((function(){a.updateTabActiveData(),a.refreshFilesList(),t&&t(f)}))}})),fi=function(e){return RegExp(/[\*\|\:\\\"\/\<\>\?]+/).test(e)},pi=t("h",(function(e){var t=oe(lu()).fileTabActiveData;return vi(t.value.param.path+"/"+e)})),vi=function(e){return e.replace("//","/")},hi=t("p",function(){var e=s(u().mark((function e(t){var n,r,a,i,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.replace(/\/+$/,"")||"/",r=di(n),"/.Recycle_bin"!==t&&"/www/.Recycle_bin"!==t){e.next=5;break}return Ta.error("此为回收站目录，请在右上角按【回收站】按钮打开"),e.abrupt("return",!1);case 5:return a=lu(),i=oe(a),o=i.fileTabActiveData,i.searchVal,o.value.param.p=1,a.updateTabActiveData({param:{path:r,search:""}}),a.refreshFilesList(),e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),di=function(e){return"/"===(e=(e=e.replace(/\\/g,"/")).replace("//","/"))?e:e=e.replace(/\/+$/g,"")},mi=t("aq",(function(e){return"dir"===e?"文件夹":"文件"})),gi=function(e,t){e.isReName=!0,t&&t(e)},bi=t("D",function(){var e=s(u().mark((function e(t,n){var r,a,i,o,s,l,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=lu(),a=oe(r),i=a.recyclingBinStatus,o=r.watchDeleteFileData,null!==i.value){e.next=9;break}return e.next=6,bt({type:"all",search:"",time_search:JSON.stringify([])});case 6:s=e.sent,l=s.data,i.value=l.status;case 9:return c=i.value?"删除【".concat(t.fileName,"】").concat("file"===t.type?"文件":"文件夹","后，该文件将迁移至文件回收站，如需彻底删除请前往文件回收站，是否继续操作？"):"风险操作，当前未开启文件回收站，删除的【".concat(t.fileName,"】").concat("file"===t.type?"文件":"文件夹","将彻底删除，无法恢复，是否继续操作？"),e.next=12,b({title:"删除".concat(mi(t.type),"【").concat(t.fileName,"】"),isHtml:!0,type:i.value?"default":"calc",content:c+(t.isShare?'<br/><span class="text-danger">当前文件已开启【外链分享】，请谨慎操作！</span>':"")});case 12:return e.next=14,f({loading:"正在删除，请稍后...",request:xt({path:pi(t.fileName),type:t.type}),message:!0,success:function(e){e.status&&o(t),n&&n()}});case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),wi=t("j",function(){var e=s(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Et({path:pi(t.fileName)});case 2:(r=e.sent).status?(Ta.success(r.msg),n&&n()):Ta.error(r.msg),Qi();case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),yi=q(null),xi=t("o",(function(){var e=oe(lu()).fileTabActiveData;"/"!==e.value.param.path?yi.value=m({title:"上传文件到【".concat(e.value.param.path,"】 --支持断点续传"),area:"72",component:function(){return h((function(){return a.import("./index-legacy188.js?v=1734676359")}),void 0,a.meta.url)},compData:{path:e.value.param.path},onCancel:function(){yi.value=null}}):Ta.error("不能直接上传文件到系统根目录!")})),ki=t("k",function(){var e=s(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je({path:pi(t.fileName)});case 2:(r=e.sent).status?(Ta.success(r.msg),n&&n()):Ta.error(r.msg),Qi();case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Si=t("m",function(){var e=s(u().mark((function e(t,n){var r,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lu(),e.next=3,Tt({path:pi(t.fileName),type:n});case 3:(a=e.sent).status?Ta.success(a.msg):Ta.error(a.msg),r.refreshFilesList();case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),_i=t("I",function(){var e=s(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=lu(),e.next=3,kt({path:pi(t.fileName)});case 3:(r=e.sent).status?Ta.success(r.msg):Ta.error(r.msg),n.refreshFilesList();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Li=function(){oe(lu()).copyFilesData.value={files:[],type:""}},Ei=function(e,t){var n=la(),r=oe(n).compData,i=n.onConfirm;r.value={fileData:e,type:t},m({title:"重复文件提示",area:40,btn:["确认","取消"],component:function(){return h((function(){return a.import("./index-legacy222.js?v=1734676359")}),void 0,a.meta.url)},onConfirm:i})},Ti=t("f",(function(e){var t=oe(La()),n=t.activeName,r=t.compData;return n.value="database"===e?"db":"all",r.value={type:e},m({title:"回收站",area:110,component:function(){return h((function(){return a.import("./index-legacy223.js?v=1734676359")}),void 0,a.meta.url)}})})),Ci=function(e,t){if("dir"===t)return"folder";for(var n=e.split("."),r=n[n.length-1],a=0;a<Fa.length;a++)if(Fa[a]==r)return Fa[a];return"file"},Di=t("t",(function(t){var n="text";return t&&(t=t.toLowerCase()),Object.entries(Ra).forEach((function(r){var a=e(r,2),i=a[0];a[1].forEach((function(e){e==t&&(n=i)}))})),n})),Ni=t("e",s(u().mark((function e(){var t,n,r,a,i,o,s,l,c,f,p,v,h,d;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=lu(),n=oe(t),r=n.fileTabActiveData,a=n.copyFilesData,i=null,o=a.value.files[0],s=pi(o.fileName),!("dir"===o.type&&r.value.param.path.indexOf(s+"/")>-1)){e.next=8;break}return Ta.error("错误的复制逻辑，从".concat(s,"粘贴到").concat(r.value.param.path,"有包含关系，存在无限循环复制风险!")),e.abrupt("return",!1);case 8:return l={path:r.value.param.path},1===a.value.files.length&&(l.name=o.fileName),e.next=12,He(l);case 12:if(c=e.sent,!((f=c.data).length>0)){e.next=19;break}return Ei(f,a.value.files.length>1?"batch":"single"),e.abrupt("return",!1);case 19:if(Ii(),e.prev=20,i=Ta.load("正在粘贴，请稍候..."),!(a.value.files.length>1)){e.next=31;break}return e.next=25,Ge({type:"copy"===a.value.type?1:2,path:r.value.param.path});case 25:p=e.sent,Ta.request(p),a.value.files=[],Li(),e.next=44;break;case 31:if(v=o.path,h={sfile:v,dfile:s},"copy"!==a.value.type){e.next=39;break}return e.next=36,Be(h);case 36:e.t0=e.sent,e.next=42;break;case 39:return e.next=41,Ve(h);case 41:e.t0=e.sent;case 42:(d=e.t0).status?("copy"===a.value.type?Ta.success(d.msg):Ta.success("剪切成功"),a.value.files=[],Li()):Ta.error(d.msg);case 44:return e.prev=44,i&&i.close(),clearTimeout(Fi),t.refreshFilesList(),e.finish(44);case 49:case"end":return e.stop()}}),e,null,[[20,,44,49]])})))),Fi=null,Ii=function(){var e=lu().getRealTask;Fi=setTimeout((function(){e()}),1500)},Ri=t("aQ",function(){var e=s(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pr();case 2:return e.next=4,Mr({title:t.fileName,type:"editor",path:t.path,size:t.size});case 4:return e.next=6,we({name:t.fileName,path:t.path});case 6:return e.next=8,vr();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Oi=t("B",(function(e,t){var n=oe(lu()).copyFilesData;e.path=pi(e.fileName),n.value.files=[e],n.value.type=t,Ta.success("".concat("copy"===t?"复制":"剪切","成功，请在目标目录点击右上角【粘贴】按钮!"))})),Ai=t("W",function(){var e=s(u().mark((function e(t,n){var r,a,i,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=lu(),(0,i.unbindKeydown)(),o={path:t.path,title:t.path.split("/").pop(),size:t.size,type:"editor"},null==t||null===(r=t.path)||void 0===r||!r.includes("/dev/pts")){e.next=6;break}return Ta.error("系统目录文件不支持编辑"),e.abrupt("return");case 6:if("text"===Di(null===(a=o.fileName)||void 0===a?void 0:a.split(".").pop())){e.next=9;break}return Ta.error("暂不支持该类型文件编辑"),e.abrupt("return");case 9:if(!document.querySelector("#dialogMinimize")){e.next=12;break}return fr(o),e.abrupt("return");case 12:if(!Zn.value){e.next=15;break}return Mr(o),e.abrupt("return");case 15:return e.next=17,pr();case 17:Xa(o,n);case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ji=t("q",(function(e){var t=oe(lu()).createItem,n=Ea().findCurrentImgIndex;if(t.value=[],e.isNew||e.isReName)return!1;if("dir"===e.type)hi(e.path);else switch(Di(e.ext)){case"images":n(window.location.protocol+"//"+window.location.host+"/download?filename="+e.path);break;case"video":ri(e);break;case"compress":Gi(e);break;default:Ai(e)}})),Pi=t("w",(function(e,t){window.open("/download?filename="+encodeURIComponent(e.path),"_self"),t&&t()})),Mi=t("x",(function(e){Wa(e)})),zi=t("y",(function(e){Ja(e)})),qi=t("s",(function(e){za(e)})),Hi=t("l",(function(e){qa(e)})),Bi=t("z",function(){var e=s(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=oe(lu()),"ltd"!==n.authType.value?Mt({disablePro:!0,sourceId:70,plugin:!1}):Ha(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Vi=t("E",(function(e){Ga(e)})),Gi=t("H",(function(e){Ua(e)})),Ui=t("G",(function(e){var t=sa();oe(t).fileItem.value=e,Ka()})),Wi=t("J",(function(e){$a(e)})),Ji=t("A",(function(e,t){t||(t="routine"),Va(e,t)})),$i=t("O",(function(){xi()})),Ki=t("K",function(){var e=s(u().mark((function e(t,n){var r,a,i,o,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=oe(lu()),a=r.fileTabActiveData,i=r.copyFilesData,o={data:JSON.stringify(t.map((function(e){return e.fileName}))),type:0,path:a.value.param.path},e.t0=n,e.next="copy"===e.t0?5:"cut"===e.t0?7:9;break;case 5:return o.type=1,e.abrupt("break",9);case 7:return o.type=2,e.abrupt("break",9);case 9:return e.next=11,ke(o);case 11:(s=e.sent).status?(Ta.success("".concat("copy"===n?"复制":"剪切","成功，请在目标目录点击右上角【粘贴】按钮!")),i.value.files=t,i.value.type=n):Ta.error(s.msg);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Yi=t("N",function(){var e=s(u().mark((function e(t){var n,r,a,i,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=lu(),r=oe(lu()),a=r.fileTabActiveData,i=r.recyclingBinStatus,o=i.value?"删除后，文件将迁移至文件回收站，如需彻底删除请前往文件回收站，是否继续操作？":"风险操作，当前未开启文件回收站，删除后将彻底删除，无法恢复，是否继续操作？",e.next=5,b({title:"批量删除文件",type:i.value?"default":"calc",content:o});case 5:return e.next=7,f({loading:"正在删除，请稍后...",request:ke({data:JSON.stringify(t.map((function(e){return e.fileName}))),type:4,path:a.value.param.path}),message:!0,success:function(e){e.status&&n.refreshFilesList()}});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Xi=function(e,t){var n=e.path,r=e.name,a=lu(),i=oe(a),u=i.fileTabList,o=i.disabledCutTab,s=i.fileTabActive;if(n&&!o.value){var l=n,c=n;"/"===l?l="根目录":("/"===c[c.length-1]&&(c=c.slice(0,c.length-1)),l=n.split("/").pop()),r&&(l=r);var f={id:F(),label:l,type:"list",loading:!1,total:0,list:[],param:{p:1,showRow:500,path:c}};o.value=!0,u.value.push(f),s.value=u.value.length-1,H((function(){a.updateTabActiveData(),a.refreshFilesList(),t&&t(f)}))}},Qi=t("Z",s(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=oe(lu()),n=t.favoriteList,e.next=3,f({request:St(),data:[Array,n]});case 3:case"end":return e.stop()}}),e)})))),Zi=t("g",s(u().mark((function e(){var t,n,r,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=oe(lu()),n=t.diskList,e.next=3,_t();case 3:r=e.sent,a=r.data,n.value=a;case 6:case"end":return e.stop()}}),e)})))),eu=t("T",(function(e){var t=lu(),n=oe(t),r=n.fileTabList,a=n.fileTabActive,i=e;"/"===i[i.length-1]&&"/"!==i&&(i=i.slice(0,i.length-1));var u=r.value.findIndex((function(e){return e.param.path===i}));-1!==u?(a.value=u,t.updateTabActiveData(),t.refreshFilesList()):Xi({path:e})})),tu=function(e){return{icon:"icon-".concat(e),ext:"dir"==e?" folder":"",fileName:"新建".concat("dir"==e?"文件夹":"文本"),time:"",ps:"",size:0,type:e,user:"root",rootLevel:"0",isLink:"",isShare:!1,isTop:!1,isFav:!1,isOsPs:!1,isPsEdit:!1,isSearch:!1,isReName:!0,isNew:!0,isSync:"",isLock:!1,path:"",tamperProofId:0,isFile:"dir"!==e}},nu=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0;0",r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],i=function(e,t){var n="",r=Ca.get("".concat("/"===t?"/":"".concat(t,"/")).concat(e));switch(e){case".htaccess":n="PS: Apache用户配置文件(伪静态)";break;case"swap":n="PS: 宝塔默认设置的SWAP交换分区文件"}return e.includes(".upload.tmp")&&(n="PS: 宝塔文件上传临时文件,重新上传从断点续传,可删除"),e.includes(".user.ini")&&(n="PS: PHP用户配置文件(防跨站)!"),r&&(n=r),r||n}(t.nm,r),u="1"===n.split(";")[0],o=n.split(";")[1],s=Ci(t.nm,e),l=function(e,t){return"".concat(e,"/").concat(t).replace("//","/")}(r,t.nm);return{icon:Di(s),ext:s,fileName:t.nm,time:w(t.mt),ps:i||t.rmk||"",size:t.sz,type:e,user:t.user,rootLevel:t.acc,isLink:t.lnk,isShare:0!=Number(t.durl)?t.durl:0,isTop:!!t.top,isFav:!!Number(t.fav),isOsPs:!R(i)&&""!==i,isPsEdit:!1,isSearch:!0,isReName:!1,isNew:!1,isSync:ru(a,l),isLock:u,path:l,tamperProofId:Number(o),isFile:"dir"!==e}},ru=function(e,t){if(R(e)||0==e.length)return"";var n=e.find((function(e){return e.path===t}));return n?n.type:""},au=function(e){return e.map((function(e){return{val:e.val,label:e.val}}))},iu=function(e,t){m({title:(null==e?void 0:e.title)||"批量操作结果",area:t||42,component:function(){return h((function(){return a.import("./index-legacy102.js?v=1734676359")}),void 0,a.meta.url)},compData:e})},uu=t("c",(function(e,t){var n=window.innerWidth,r=window.innerHeight,a=t.offsetWidth,i=t.offsetHeight,u=e.clientX,o=e.clientY,s=u;u+a>n&&(s=u-a);var l=o-(r-o<i?i:0);l<0&&(l=(r-i)/2),t.style.top=l+"px",t.style.left=s+"px"})),ou=Object.freeze(Object.defineProperty({__proto__:null,BatchSetAuth:oi,CreateTerminalDialog:ai,FileCompressPreview:Ya,FileCompressView:Ga,FileDecompressionView:Ua,FileFormatConversionView:Ka,FileImageView:ei,FileInputDatabaseView:Za,FileMergeView:Ja,FileOperationRecordView:Ba,FileRecyclingBinView:Ti,FileSearchView:Aa,FileSetShareView:za,FileSplitView:Wa,FileStatusDetailView:Va,FilesAceEditor:Xa,FilesCompressCoverView:ii,FilesHistoryRecordView:Qa,ManageFavoritesView:Pa,SendEmailView:$a,ShareDetailView:qa,ShareListView:Ma,addFavorites:wi,addTab:Xi,addTabEvent:ci,batchDelFile:Yi,calculateContextMenuPosition:uu,calculatePopoverPosition:function(e,t){var n=window.innerWidth,r=window.innerHeight,a=t.offsetWidth,i=t.offsetHeight,u=e.clientX,o=e.clientY,s=u;u+a>n&&(s=u-a);var l=o;return o+i>r&&(l=o-i),l<0&&(l=0),{top:l,left:s,el:t}},cloudStorageDialog:ui,copyFiles:Oi,createCompress:Vi,createCopy:_i,createFile:tu,deCompressFile:Gi,defaultPS:Ca,delFavorites:ki,delFileEvent:bi,determineFileType:Di,downFile:Pi,editFilesDialog:ti,editorCloseDialog:li,editorLeaveDialog:si,exts:Fa,fileBatchSet:Ki,fileMainType:Ra,fileReName:gi,fileRsyncView:Ha,fileTaskDialog:Oa,fileType:Ia,fileUploadDialog:yi,formatFile:Ui,getDataType:mi,getDiskList:Zi,getExtIcon:Ci,getFavoriteList:Qi,getWholePath:pi,isSyncType:ru,matchUnqualifiedString:fi,openAceEditor:Ai,openDetail:Ji,openEditorView:Ri,openFile:ji,openFileAsync:Bi,openFileMerge:zi,openFileShare:Hi,openFileSplit:Mi,openFilesUpload:xi,openResultDialog:iu,pasteFiles:Ni,pathJumpEvent:hi,path_check:di,recomList:Da,reconstructionFile:nu,removeCopyOrCutData:Li,renderHistoryList:au,repetFileView:Ei,sendEmail:Wi,setColumn:function(e,t){},setFileListActive:eu,setFileShare:qi,setToping:Si,symbolicLinkView:ja,temperDialog:ni,toRepeatPath:vi,uploadFiles:$i,videoPlayDialog:ri},Symbol.toStringTag,{value:"Module"}));t("aS",ou);var su=t("U",ee("FILES-URL-DOWN-LOAD-STORE",(function(){var e=lu(),t=oe(e).fileTabActiveData,r=e.getRealTask,a=re({url:"",path:t.value.param.path,filename:""}),i=q(!1),o=q(),l=re({url:[{validator:function(e,t,n){""===t?n(new Error("请输入正确的URL地址!")):A(t)?n():n(new Error("请输入正确的URL地址!"))},trigger:["blur"]}],filename:[{validator:function(e,t,n){""===t?n(new Error("请输入新文件名!")):fi(t)?n(new Error('文件名不能包含 /\\:*?"<>|符号!')):n()},trigger:["blur","change"]}]});return{quickForm:a,formDisabled:i,quickFormRef:o,quickRules:l,onConfirm:function(){var e=n({},a);o.value.validate(function(){var t=s(u().mark((function t(n){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=3;break}return t.next=3,f({loading:i,request:Ct(e),message:!0,success:function(e){e.status&&r()}});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},onPathChange:function(){At({type:"dir",path:a.path,change:function(e){a.path=e}})},setName:function(e){var t=e.split("/");a.filename=t[t.length-1]},init:function(){i.value=!1,Object.assign(a,{url:"",path:t.value.param.path,filename:""})}}}))),lu=t("F",ee("FILES-STORE",(function(){var e=v(),t=e.mainHeight,o=e.mainWidth,l=e.payment,c=ne(l.value).authType,p={id:"label-1",label:"wwwroot",type:"list",loading:!1,total:0,param:{p:1,showRow:500,path:"/www/wwwroot",sort:"",reverse:"True"}},g=q(0),w=q(0),y=q(n({},p)),x=q([n({},p)]),k=q(0),_=q(!0),E=q(),T=re({index:0,id:""}),C=q(0),D=q(0),N=q(!1),F=q(!1),A=q([]),B=q(0),V=q(y.value.param.path),G=q(),U=q(!0),W=q([]),J=q(0),$=re({showMore:!1,showUl:!1,list:[]}),K=q(""),Y=q(),X=q(!1),Q=q([]),Z=q([]),ee=q({reqEnd:!1,isSetup:!1,isBuy:!1}),te=q(!1),ae=q(!1),ie=q({isLock:!0,rootLevel:!0,size:!0,time:!0,ps:!0}),ue=q(""),oe=q([]),se=q(!1),le=q([]),ce=ve((function(){return le.value.length||0})),fe=q([]),pe=ve((function(){return fe.value.length||0})),me=q([]),be=q([]),we=q([]),ye=q({status:!1,tip:""}),xe=q({}),ke=q({files:[],type:""}),Se=q({}),_e=q(""),Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=x.value[w.value];e.param&&(e.param=n(n({},t.param),e.param));var r=n(n({},t),e);x.value.splice(w.value,1,r),Object.assign(y.value,r),K.value=y.value.param.search||"",X.value="True"===y.value.param.all,Je.value=!1,V.value!==r.param.path&&(V.value=y.value.param.path,Ie(V.value))},Ee=function(){var e=o.value-36;A.value=[],B.value=0,H((function(){document.querySelectorAll(".tab-item").forEach((function(e){var t=e.getBoundingClientRect();A.value.push(t.width),B.value+=t.width}));var t=B.value-e;D.value=t>0?t:0,Te(e)}))},Te=function(e){var t=A.value.reduce((function(e,t,n){return n<=w.value?e+t:e}),0);if(t<=e)C.value=-1;else{if(w.value===x.value.length-1)return void(C.value=D.value);var n=t-e+20;F.value=!0,C.value=n}},Ce=function(){var e=s(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K.value=t,Le({param:{search:K.value,all:X.value?"True":"False"}}),e.next=4,st();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De=function(){var e=s(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L({status:-3});case 2:t=e.sent,n=document.querySelector(".realTaskDialog"),t.data.length>0&&!n&&Oa();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ne=he((function(){d.error("不能直接上传文件到系统根目录!")}),2e3),Fe=function(){var e=s(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U.value=t,!t){e.next=38;break}if(y.value.param.path!==V.value){e.next=4;break}return e.abrupt("return");case 4:if(!((n=V.value).length>0)||n.includes("/")){e.next=11;break}return d.error("路径输入不符合规则"),V.value=y.value.param.path,e.abrupt("return");case 11:if(0!==n.length){e.next=14;break}return V.value=y.value.param.path,e.abrupt("return");case 14:return e.next=16,Dt({path:V.value});case 16:if(e.sent.data.exists){e.next=32;break}return e.prev=18,e.next=21,b({width:50,title:"路径不存在",content:"【".concat(n,"】路径不存在,是否创建并跳转?")});case 21:e.next=28;break;case 23:if(e.prev=23,e.t0=e.catch(18),"cancel"!==e.t0){e.next=28;break}return V.value=y.value.param.path,e.abrupt("return");case 28:return e.next=30,f({loading:"正在新建文件，请稍后...",request:ge({path:n,type:"dir"}),message:!0,success:function(e){e.status&&hi(n)}});case 30:e.next=36;break;case 32:return e.next=34,hi(n);case 34:r=e.sent,V.value=r||n;case 36:e.next=39;break;case 38:j(G.value);case 39:case"end":return e.stop()}}),e,null,[[18,23]])})));return function(t){return e.apply(this,arguments)}}(),Ie=function(e){if(e){var t=e.split("/");if("/"===e)return W.value=[{name:"根目录",path:"/",show:!0,list:[]}];W.value=t.map((function(e,n){return{name:""===e?"根目录":e,path:""===e?"/":t.slice(0,n+1).join("/"),show:!0,showFold:!1,loading:!1,list:[]}})),Oe(),H((function(){$.list=[],$.showMore=!1;var e=document.querySelectorAll(".path-group-item"),t=document.querySelector(".path-list-group"),n=Array.from(e).reduce((function(e,t){return e+t.clientWidth+4}),0);setTimeout((function(){if(n>((null==t?void 0:t.clientWidth)||400)){for(var r=20,a=e.length-1;a>=0;a--)(r+=e[a].clientWidth)>((null==t?void 0:t.clientWidth)||0)&&(W.value[a].show=!1,$.showMore=!0,$.list=W.value.slice(a+1));$.showMore&&(W.value[0].show=!1,$.list=W.value.slice(1))}}),100)}))}},Re=function(){var e=s(u().mark((function e(t,n){var r,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Oe(),W.value[n].showFold=!0,W.value[n].loading=!0,e.next=6,Nt({path:t,p:1,showRow:2e3});case 6:r=e.sent,a=r.data.dir,W.value[n].loading=!1,W.value[n].list=a.map((function(e){return{name:e.nm,path:"".concat(t,"/").concat(e.nm).replace(/\/+/g,"/")}})),J.value=n,window.addEventListener("click",Oe),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}(),Oe=function(){$.showUl=!1,W.value[J.value]&&(W.value=W.value.map((function(e){return n(n({},e),{},{showFold:!1})}))),window.removeEventListener("click",Oe)},Ae=q([{name:"文件名",key:"name",show:!0,disable:!0},{name:"防篡改",key:"isLock",show:!0,disable:!1,icon:!0},{name:"权限",key:"rootLevel",show:!0,disable:!1},{name:"大小",key:"size",show:!0,disable:!1},{name:"修改时间",key:"time",show:!0,disable:!1},{name:"备注",key:"ps",show:!0,disable:!1},{name:"操作",key:"action",show:!0,disable:!0}]),je=[{type:"copy",icon:"copy-file-icon",label:"复制",handler:function(){return Ki(Q.value,"copy")}},{type:"cut",icon:"cut-file-icon",label:"剪切",hide:1370,handler:function(){return Ki(Q.value,"cut")}},{type:"compress",icon:"compress-file-icon",label:"压缩",hide:1446,handler:function(){return Vi(Q.value)}},{type:"auth",icon:"authority-file-icon",label:"权限",hide:1610,handler:function(){return oi(Q.value)}},{type:"delete",icon:"delete-file-icon",label:"删除",hide:1620,handler:function(){return Yi(Q.value)}}],Pe=function(){var e=s(u().mark((function e(t){var n,r,a,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="upload"===e.t0?3:"openUrlLinkDown"===e.t0?5:"bos"===e.t0||"alioss"===e.t0||"txcos"===e.t0||"obs"===e.t0?7:14;break;case 3:return xi(),e.abrupt("break",14);case 5:return Me(),e.abrupt("break",14);case 7:return e.next=9,Ft();case 9:return r=e.sent,a=r.data,(i=null==a||null===(n=a.down)||void 0===n?void 0:n.find((function(e){return e.name===t})))&&null!=i&&i.is_conf?ui({type:"down",zName:i.title,pname:t}):ze(t,73),e.abrupt("break",14);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Me=function(){var e=su().onConfirm;m({title:"URL链接下载",area:50,btn:!0,component:function(){return h((function(){return a.import("./index-legacy224.js?v=1734676359")}),void 0,a.meta.url)},onConfirm:e})},ze=function(){var e=s(u().mark((function e(t,n){var r,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("ltd"===c.value){e.next=3;break}return Mt({sourceId:n}),e.abrupt("return");case 3:return e.prev=3,e.next=6,I({sName:t});case 6:if(r=e.sent,(a=r.data).setup){e.next=11;break}return Pt({name:a.name,type:"i",pluginInfo:a}),e.abrupt("return");case 11:Ot({name:t}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3);case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t,n){return e.apply(this,arguments)}}(),qe=function(){H((function(){et(),rt()}))},He=function(){var e=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"true"===localStorage.getItem("MYSQL-RECYCLE")&&(Ti("database"),localStorage.removeItem("MYSQL-RECYCLE")),Ae.value.forEach((function(e){e.show=ie.value[e.key]})),e.next=5,Zi();case 5:Qi();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Be=q(null),Ve=q(null),Ge=q(null),Ue=q(!1),We=q(""),Je=q(!1),$e=q(!1),Ke=function(){var e=s(u().mark((function e(){var t,n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("/"!==(t=y.value.param.path)){e.next=3;break}return e.abrupt("return");case 3:if(e.prev=3,$e.value=!0,!ee.value.reqEnd||!ee.value.isSetup||"ltd"!==c.value){e.next=11;break}le.value=le.value.map((function(e){return e.isDirComputed=!0,e})),nt(),at(),e.next=18;break;case 11:return e.next=13,ct({path:t});case 13:n=e.sent,r=n.data,We.value=r,Je.value=!0,$e.value=!1;case 18:return e.prev=18,0===We.value.length&&Je.value&&($e.value=!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[3,,18,21]])})));return function(){return e.apply(this,arguments)}}(),Ye=function(){var e=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"/"===y.value.param.path?Ue.value=!0:Ue.value=!1;case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Xe=q([]),Qe=function(e){if("el-input__inner"!==e.target.className&&"TEXTAREA"!==e.target.tagName){var t="list"===y.value.type;if(!t||Ge.value){var n=document.querySelector(".el-dialog__body")||document.querySelector(".el-dialog__container");if(!n||"none"===n.style.display){var r=[];Xe.value.forEach((function(e){var t;null!==(t=Ge.value)&&void 0!==t&&t.selectList.includes(e.path)&&r.push(e)}));var a=t?r:Ve.value.selectList;if(e.ctrlKey&&65===e.keyCode&&(e.preventDefault(),Ge.value.handleCheckAll(!0)),e.ctrlKey&&88===e.keyCode)switch(a.length){case 0:return;case 1:Oi(a[0],"cut");break;default:Ki(a,"cut")}if(e.ctrlKey&&67===e.keyCode)switch(a.length){case 0:return;case 1:Oi(a[0],"copy");break;default:Ki(a,"copy")}if(e.ctrlKey&&86===e.keyCode){if(0===ke.value.files.length)return;Ni()}if(113===e.keyCode)switch(a.length){case 0:return;case 1:gi(a[0],t?Be.value.editRow:Ve.value.editFile)}if(13===e.keyCode)switch(a.length){case 0:return;case 1:if(a[0].isNew||a[0].isReName||a[0].isPs)return;ji(a[0])}if(46===e.keyCode){if(0===a.length)return;if(a[0].isNew||a[0].isReName)return;Yi(a)}}}}},Ze=function(){document.addEventListener("keydown",Qe)},et=function(){document.removeEventListener("keydown",Qe)},tt=function(e){""!==e&&1!=se.value&&(oe.value=[tu(e)],nt())},nt=function(){Xe.value=[].concat(r(oe.value),r(le.value),r(fe.value)).map((function(e,t){return e.vid=t,e})),Ea().watchDataList(Xe.value)},rt=function(){Le({param:{search:""}}),Ze(),y.value.type;var e=localStorage.getItem("copyOrCutData");e&&(ke.value=JSON.parse(e))},at=function(){var e=s(u().mark((function e(){var t,n,r,a,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=y.value.param.path,e.next=4,It(t);case 4:for(i in n=e.sent,r=n.data,R(r.msg)||-1!=r.msg.indexOf("企业版")||d.error(r.msg),a=r.list)a["".concat(t,"/").concat(i)]=a[i];We.value=S(r.total_asize),setTimeout((function(){le.value=le.value.map((function(e){return e.diskInfo=a[e.path],e.isDirComputed=!1,e})),nt()}),300);case 11:return e.prev=11,$e.value=!1,Je.value=!0,e.finish(11);case 15:case"end":return e.stop()}}),e,null,[[0,,11,15]])})));return function(){return e.apply(this,arguments)}}(),it=function(){var e=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!te.value){e.next=2;break}return e.abrupt("return");case 2:return te.value=!0,e.next=5,st();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ut=function(){st(),P("Path",y.value.param.path)},ot=function(){var e=JSON.parse(JSON.stringify(y.value.param));return"time"==e.sort&&(e.sort="mtime"),"fileName"==e.sort&&(e.sort="name"),void 0!==e.search&&""===e.search&&delete e.search,void 0!==e.all&&"True"!==e.all&&delete e.all,e},st=function(){var e=s(u().mark((function e(){var t,n,r,a,o,s,l,c,f,p,v,h,m,g,b,w,x,k,S,_,L,E,T,C,D;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return le.value=[],fe.value=[],Xe.value=[],e.prev=3,y.value.loading=!0,t=ot(),e.next=8,Nt(t);case 8:if(n=e.sent,r=n.status,a=n.msg,o=n.data,"True"==t.all&&o.is_max&&d.error("当前当前搜索结果已超出最大值3000条！"),r||void 0===a){e.next=23;break}if(d.error(a),(s=y.value.param.path.split("/")).pop(),"/"!==(l=s.join("/").replace(/\/+$/,"")||"/")){e.next=20;break}return e.abrupt("return");case 20:return Le({param:{path:l}}),st(),e.abrupt("return");case 23:if(c=o.path,f=o.dir,p=o.files,v=o.store,h=o.bt_sync,o.page,m=o.tamper_data,g=o.search_history,b=o.file_recycle,w=m.dirs,x=m.files,k=m.msg,S=m.tip,_=m.rules,L=[],E="ok"===S,ye.value.status=E,ye.value.tip=E?"":S,we.value=au(g),le.value=[],f.forEach((function(e,t){le.value.push(nu("dir",e,k?"":w[t],c,h))})),fe.value=[],p.forEach((function(e,t){var n=nu("file",e,k?"":x[t],c);0===t&&E&&(xe.value=_.length>0?_.find((function(e){return e.pid===n.tamperProofId})):void 0),"images"===n.icon&&L.push(n.fileName),fe.value.push(n)})),!(L.length>0)){e.next=43;break}return e.next=37,Rt({return_type:"base64",height:45,width:45,files:L,path:c});case 37:T=e.sent,C=T.data,me.value=Object.entries(C.data),Ea().setSmallImage(),e.next=44;break;case 43:me.value=[];case 44:be.value=v,ae.value=b,D="/"===(D=c)?"根目录":c.split("/").pop(),Le({label:D,total:M(o.page),type:"list",param:{path:o.path}}),te.value=!1,nt(),e.next=56;break;case 53:e.prev=53,e.t0=e.catch(3),i(e.t0);case 56:return e.prev=56,y.value.loading=!1,e.finish(56);case 59:case"end":return e.stop()}}),e,null,[[3,53,56,59]])})));return function(){return e.apply(this,arguments)}}();return{authType:c,mainHeight:t,mainWidth:o,fileTabActive:w,fileTabActiveData:y,fileTabList:x,isAddTabs:_,closeTabs:T,favoriteList:be,diskList:Z,dataList:Xe,deleteFileData:Se,imgPathItem:_e,recyclingBinStatus:ae,copyFilesData:ke,navBtnHeight:g,imageList:me,disabledCutTab:te,dirPath:V,pathInputRef:G,pathInputMode:U,pathListGroup:W,more:$,searchVal:K,searchRef:Y,isChildren:X,contextRef:E,scrollWidth:C,showLeftArrow:N,showRightArrow:F,searchHistory:we,updateTabActiveData:Le,getFilesList:st,triggerEvent:function(e){e?de(Y).showPopover():de(Y).hidePopover()},searchEvent:Ce,getRealTask:De,handleDragOff:function(e){var t,n;(e.preventDefault(),"/"!==y.value.param.path)?null!=e&&null!==(t=e.dataTransfer)&&void 0!==t&&t.items&&Array.from(null==e||null===(n=e.dataTransfer)||void 0===n?void 0:n.items).some((function(e){return"file"===e.kind}))&&(yi.value||xi()):Ne()},cutPathInputMode:Fe,cutDirPath:function(e,t){""===e&&(V.value="/"),G.value.blur(),oe.value=[],nt(),Le({param:{search:"",p:1,all:"False"}}),t||hi(e)},getPathListGroup:Ie,getCurrentFoldDirList:Re,goBack:function(){if(!te.value){if(te.value=!0,"/"==y.value.param.path){if(""===y.value.param.search)return te.value=!1,d.error("当前目录为根目录");Le({param:{search:"",all:"False"}}),hi("/")}var e=y.value.param.path.split("/");e.pop(),Le({param:{search:"",all:"False"}});var t=e.join("/");hi(t)}},closeOther:function(){x.value=x.value.filter((function(e,t){return t===T.index})),T.index!==w.value&&ut(),w.value=0,Le(),Ee()},closeRight:function(){x.value.splice(T.index+1);var e=x.value[T.index].param.path;w.value=T.index,y.value.param.path!==e&&(Le(),ut()),Le(),Ee()},watchTabsWidth:function(){H((function(){var e;k.value=(e=document.querySelector(".tabs"))?e.getBoundingClientRect().width:0;var t=document.querySelectorAll(".tab-item"),n=0;t.forEach((function(e){var t=e.getBoundingClientRect();n+=t.width})),_.value=k.value-n>160}))},handleRightClick:function(e,t,n){Object.assign(T,{id:t.id,index:n}),E.value.show(e)},watchWindowResize:Ee,watchScrollWidth:function(e){var t=e;N.value=0!=t&&-1!=t,-1===t&&(C.value=0,t=0),F.value=D.value>0&&t!=D.value;var n=document.querySelector(".tabs");n&&n.scrollTo({top:0,left:C.value,behavior:"smooth"})},cutTab:function(e){te.value&&w.value!==e||(w.value=e,te.value=!0,oe.value=[],Le(),ut(),Ee())},scrollLeft:function(){var e=o.value-36;C.value<=e/2?C.value=0:C.value-=e/2},scrollRight:function(){var e=o.value-36;if(D.value<=e/2)C.value=D.value;else{var t=C.value+=e/2;t>D.value&&(t=D.value),C.value=t}},closeTab:function(e,t){var n=x.value.length;if(1===n)return d.error("至少保留一个标签页");var r=x.value.findIndex((function(e){return e.id===t}));x.value.splice(r,1),w.value>r?(w.value=w.value-1,Le()):w.value===r&&(te.value=!0,w.value=n-r==1?r-1:r,Le(),ut()),Ee()},fileBatchNum:Q,createListType:ue,columnShow:ie,cloudList:[{name:"百度云存储",icon:"baidu-cloud",command:"bos"},{name:"阿里云存储",icon:"alioss-cloud",command:"alioss"},{name:"腾讯云存储",icon:"tencent-cloud",command:"txcos"},{name:"华为云存储",icon:"huawei-cloud",command:"obs"}],actionsBtn:je,fileBatchEvent:function(e){switch(e){case"copy":Ki(Q.value,"copy");break;case"cut":Ki(Q.value,"cut");break;case"compress":Vi(Q.value);break;case"auth":oi(Q.value);break;case"del":Yi(Q.value)}},handleChangeMenuIcon:function(){d.warn("功能正在开发中...")},handleChangeMenuList:function(){"list"!==y.value.type&&(Le({type:"list"}),y.value.type="list",qe())},handleCommand:Pe,openPlugin:ze,collectCommand:function(e){if("manger"!==e)if(y.value.label=e.name,"dir"===e.type)hi(e.path);else{var t=n(n({},e),{},{fileName:e.name,ext:e.ext||e.name.split(".").pop()});ji(t)}else Pa()},createCommand:function(e){var t;switch(y.value.type,null===(t=document.querySelector(".vue-recycle-scroller"))||void 0===t||t.scroll({top:0}),e){case"file":case"dir":ue.value=e,tt(e);break;case"link":ja()}},globalTamperStatus:ye,createItem:oe,fileList:fe,fileLength:pe,dirList:le,dirLength:ce,size:We,sizeShow:Je,sizeLoad:$e,table:Be,isNoCreteItem:se,iconView:Ve,listView:Ge,btnPopover:Ue,diskAnalysis:ee,watchDeleteFileData:function(e){if(0!==Object.keys(e).length){var t=e.type,n=e.path;e.isNew&&(oe.value=[]),"dir"===t?le.value=le.value.filter((function(e){return e.path!==n})):fe.value=fe.value.filter((function(e){return e.path!==n})),Se.value={},y.value.total=Xe.value.length,nt()}},watchCreateListType:tt,sizeComputed:Ke,checkRoot:Ye,initMain:rt,bindKeydown:Ze,unbindKeydown:et,initNavBtn:He,refreshList:it,refreshFilesList:ut,init:function(){e.getGlobalInfo(),De(),function(){try{H(s(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I({sName:"disk_analysis"});case 2:t=e.sent,n=t.data,Object.assign(ee.value,{reqEnd:!0,isSetup:n.status&&n.setup&&n.endtime>-1,isBuy:n.endtime>-1});case 5:case"end":return e.stop()}}),e)}))))}catch(e){}}(),O("searchFile")&&(Aa(),z("searchFile")),Ie(V.value)},$reset:function(){le.value=[],fe.value=[],me.value=[],be.value=[],we.value=[],N.value=!1,F.value=!1,y.value.param.search=""}}}),{persist:[{storage:localStorage,paths:["fileTabList"]}]})),cu=Object.freeze(Object.defineProperty({__proto__:null,default:lu},Symbol.toStringTag,{value:"Module"}));t("aT",cu)}}}))}();
