import{g as a,b as e,r as t,s,c as l,a1 as n,k as o,l as u,q as r,y as c,e as i,p,J as m,x as d,A as f}from"./base-lib.js?v=1734676359";import{B as v}from"./column.js?v=1734676359";import{o as x,G as y,b0 as _}from"./utils-lib.js?v=1734676359";import{r as b}from"./validator.js?v=1734676359";const g=a("SOFT-SERVICE-STATUS-STORE",(()=>{const a=b(),l=e(),n=t({}),o=t(!1),u={restart:"重启",stop:"停止",reload:"重载配置",start:"启动"};return{compData:n,status:o,serviceManageEvent:async e=>{await x({title:"".concat(n.value.name,"服务"),icon:"warning-filled",content:"您确定".concat(u[e]).concat(n.value.name,"服务吗?")});let t=n.value.name;-1!=n.value.name.indexOf("php-")&&(t="php-fpm-".concat(t.split("-")[1].replace(".",""))),await y({loading:"正在设置状态，请稍后...",request:_({name:t,type:e}),message:!0,success:async t=>{var u;if(o.value="stop"!==e,-1!==l.path.indexOf("/soft")){await a.getSoftListData();const{softTableList:e}=s(a);n.value.status=null==(u=e.value.find((a=>a.name===n.value.name||"pureftpd"===a.name&&"pure-ftpd"===n.value.name)))?void 0:u.status}else n.value.status="stop"!==e;n.value.refreshEvent&&n.value.refreshEvent()}})},init:a=>{a&&(n.value=a),o.value=n.value.status},$reset_compdata:()=>{n.value={}}}})),k={class:"flex flex-col text-[#666]"},E={class:"mb-[12px] flex items-center"},S={class:"flex items-center"},h=l({__name:"index",setup(a){const e=g(),{compData:t}=s(e),{serviceManageEvent:l,$reset_compdata:x}=e;return n(x),(a,e)=>{const s=v,n=f;return o(),u("div",k,[r("span",E,[e[5]||(e[5]=c(" 当前状态：")),i(s,{modelValue:p(t).status,"onUpdate:modelValue":e[0]||(e[0]=a=>p(t).status=a),data:["关闭","开启"]},null,8,["modelValue"])]),r("div",S,[p(t).status?(o(),m(n,{key:1,type:"default",onClick:e[2]||(e[2]=a=>p(l)("stop"))},{default:d((()=>e[7]||(e[7]=[c("停止")]))),_:1})):(o(),m(n,{key:0,type:"default",onClick:e[1]||(e[1]=a=>p(l)("start"))},{default:d((()=>e[6]||(e[6]=[c("启动")]))),_:1})),i(n,{type:"default",onClick:e[3]||(e[3]=a=>p(l)("restart"))},{default:d((()=>e[8]||(e[8]=[c("重启")]))),_:1}),i(n,{type:"default",onClick:e[4]||(e[4]=a=>p(l)("reload"))},{default:d((()=>e[9]||(e[9]=[c("重载配置")]))),_:1})])])}}});export{g as S,h as _};
