import{a as e}from"./statusbar2.js?v=1734676359";import{s as t,j as a,u as s}from"./api2.js?v=1734676359";import{c as r,k as l,l as o,J as c,p as d,z as i,q as m,e as p,y as n,x as u}from"./base-lib.js?v=1734676359";import"./utils-lib.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";const y={class:"tx_key_bind px-[2rem] py-[4rem]"},f={class:"tx_key_title"},I={class:"flex items-center justify-center"},b={class:"flex items-center gap-1rem"},_=r({__name:"bind-api",props:{compData:{default:()=>({})}},setup(r){const _=r,{unref:w,ref:g,reactive:h}=_.compData.dependencies.vueMethods,{BtInput:x,ElForm:K,ElFormItem:k,ElAlert:D,ElButton:v}=w(_.compData.dependencies.components),{useAxios:j,useMessage:A,useConfirm:E}=w(_.compData.dependencies.hooks),S=A(),P=g(),V=h({secretId:_.compData.secretId||"",secretKey:_.compData.secretKey||""}),q=h({secretId:[{validator:(e,t,a)=>{V.secretId?a():a(new Error("请输入SecretId"))},message:"请输入SecretId",trigger:"blur"}],secretKey:[{validator:(e,t,a)=>{V.secretKey?a():a(new Error("请输入secretKey"))},message:"请输入SecretKey",trigger:"blur"}]}),C=async()=>{await P.value.validate();try{const e=S.load("正在关联密钥，请稍后..."),t=await a({secretId:V.secretId,secretKey:V.secretKey});e.close(),S.request(t),window.location.reload()}catch(e){}};return t(j),(t,a)=>(l(),o("div",y,[t.compData.tips||t.compData.alert?(l(),c(d(D),{key:0,type:"error",description:t.compData.tips||t.compData.alert,class:"!mb-1.6rem",closable:!1},null,8,["description"])):i("",!0),m("div",f,[m("span",I,[p(e,{class:"mr-[0.5rem]"}),a[3]||(a[3]=n(" 关联阿里云API密钥 "))])]),p(d(K),{ref_key:"configFormRef",ref:P,rules:d(q),"label-position":"right","label-width":"100px","hide-required-asterisk":true,"show-message":true,model:d(V),class:"demo-form-inline mb-2rem"},{default:u((()=>[p(d(k),{label:"SecretId",prop:"secretId"},{default:u((()=>[p(d(x),{modelValue:d(V).secretId,"onUpdate:modelValue":a[0]||(a[0]=e=>d(V).secretId=e),width:"24.8rem",placeholder:"请输入SecretId"},null,8,["modelValue"])])),_:1}),p(d(k),{label:"SecretKey",prop:"secretKey"},{default:u((()=>[p(d(x),{modelValue:d(V).secretKey,"onUpdate:modelValue":a[1]||(a[1]=e=>d(V).secretKey=e),width:"24.8rem",class:"password","show-password":"",placeholder:"请输入SecretKey"},null,8,["modelValue"])])),_:1}),p(d(k),{label:" "},{default:u((()=>[m("div",b,[p(d(v),{type:"primary",onClick:C},{default:u((()=>a[4]||(a[4]=[n("关联API密钥")]))),_:1}),_.compData.isEdit||t.compData.tips?(l(),c(d(v),{key:0,type:"define",onClick:a[2]||(a[2]=e=>(async()=>{await E({title:"解绑阿里云API密钥",content:"是否取消关联阿里云API密钥,是否继续？"});const e=S.load("正在取消关联密钥，请稍后..."),t=await s();e.close(),S.request(t),window.location.reload()})())},{default:u((()=>a[5]||(a[5]=[n("取消关联密钥")]))),_:1})):i("",!0)])])),_:1})])),_:1},8,["rules","model"]),a[6]||(a[6]=m("div",{class:"leading-2rem text-[1.3rem] mb-[0.5rem] px-[2rem]",style:{color:"red"}},"温馨提示：请确保当前关联的密钥是本服务器的，如果不一致，将会导致数据获取异常和不正确，请须知",-1)),a[7]||(a[7]=m("div",{class:"leading-2rem text-[1.3rem] px-[2rem]"},[n("您正在使用宝塔面板阿里云联合定制版，请关联您的阿里云API密钥，如何获取阿里云API密钥，"),m("a",{href:"https://console.cloud.tencent.com/cam/capi",target:"_blank",class:"btlink"},"点击查看")],-1))]))}});export{_ as default};
