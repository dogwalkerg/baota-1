import{G as a,b3 as e,M as l,aa as s}from"./utils-lib.js?v=1734676359";import{r as t,c as o,o as r,B as n,k as i,J as m,x as u,e as c,q as p,C as d,p as v,M as f,y as _,l as w,I as x,aX as g,v as b,ay as y,A as h,ag as j,ah as C}from"./base-lib.js?v=1734676359";import{B as V}from"./index185.js?v=1734676359";import{S as k,_ as q}from"./index.vue_vue_type_script_setup_true_lang7.js?v=1734676359";import{P as S,m as D,Q as U,R as B}from"./validator.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./ace.js?v=1734676359";import"./column.js?v=1734676359";import"./index91.js?v=1734676359";const H=k(),M=t({}),P=t("service"),T=t(""),A=t(!1),F=t(""),G=t(""),I=t([]),J=async()=>{await a({loading:"正在保存中，请稍后...",request:e({path:"/www/server/tomcat/conf/server.xml",data:T.value,encoding:"utf-8"}),message:!0})},N=async a=>{let[e]=a.version.split(".");if(G.value!==e)try{await S({sName:"tomcat",version:G.value,min_version:""}),D()}catch(s){}else l.error("当前版本与选择版本一致")},Q=({props:{name:e}})=>{switch(e){case"config":(async()=>{await a({loading:A,request:U({path:"/www/server/tomcat/conf/server.xml"}),data:{data:[String,T]}})})();break;case"logs":(async()=>{await a({loading:A,request:B({path:"/www/wwwlogs/nginx_error.log"}),data:{msg:[String,F]}})})()}},R={class:"my-[12px]"},X={class:"flex text-[#666] items-center"},z={class:"pre-box bg-[#333] text-white h-[50rem] overflow-auto p-[12px] rounded-[4px]"},E=o({__name:"index",props:{compData:{default:{}}},setup(a){const e=a;return r((()=>{var a;a=e.compData,P.value="service",a&&(M.value=a),H.init(M.value),G.value=M.value.version[0],I.value=M.value.versions})),(a,e)=>{const l=y,t=V,o=h,r=j,k=C,S=s,D=n("bt-loading"),U=n("scroll-bottom");return i(),m(S,{modelValue:v(P),"onUpdate:modelValue":e[3]||(e[3]=a=>f(P)?P.value=a:null),type:"left-bg-card",onTabClick:v(Q)},{default:u((()=>[c(l,{label:"服务",name:"service"},{default:u((()=>[c(q)])),_:1}),c(l,{label:"配置文件",name:"config"},{default:u((()=>[e[5]||(e[5]=p("span",{class:"my-[4px] text-[#666]"},"提示：Ctrl+F 搜索关键字，Ctrl+S 保存，Ctrl+H 查找替换",-1)),p("div",R,[d(c(t,{class:"!h-[36rem] !w-[full]",modelValue:v(T),"onUpdate:modelValue":e[0]||(e[0]=a=>f(T)?T.value=a:null),id:"configContent",filePath:"/www/server/tomcat/conf/server.xml"},null,8,["modelValue"]),[[D,v(A)]])]),c(o,{onClick:v(J),type:"primary"},{default:u((()=>e[4]||(e[4]=[_("保存")]))),_:1},8,["onClick"]),e[6]||(e[6]=p("ul",{class:"leading-8 mt-20px text-[1.2rem] list-disc ml-[20px]"},[p("li",null,"此处为tomcat主配置文件,若您不了解配置规则,请勿随意修改")],-1))])),_:1}),c(l,{label:"版本切换",name:"version"},{default:u((()=>[p("div",X,[e[8]||(e[8]=p("span",null,"选择版本",-1)),c(k,{class:"mx-[12px] !w-[18rem]",modelValue:v(G),"onUpdate:modelValue":e[1]||(e[1]=a=>f(G)?G.value=a:null)},{default:u((()=>[(i(!0),w(x,null,g(v(I),((a,e)=>(i(),m(r,{key:e,label:"tomcat"+a.m_version,value:a.m_version},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),c(o,{type:"primary",onClick:e[2]||(e[2]=e=>v(N)(a.compData))},{default:u((()=>e[7]||(e[7]=[_("切换")]))),_:1})])])),_:1}),c(l,{label:"运行日志",name:"logs"},{default:u((()=>[d((i(),w("div",z,[_(b(v(F)||"暂无日志"),1)])),[[D,v(A)],[U]])])),_:1})])),_:1},8,["modelValue","onTabClick"])}}});export{E as default};
