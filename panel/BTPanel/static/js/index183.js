import{b2 as a,G as e,a8 as t,k as s,V as l,l as o,H as n,o as i}from"./utils-lib.js?v=1734676359";import{_ as r}from"./index90.js?v=1734676359";import{_ as m}from"./index97.js?v=1734676359";import{_ as c}from"./index182.js?v=1734676359";import{c as p,r as u,h as d,w as f,o as g,B as v,k as _,l as b,e as y,x as h,q as j,p as k,C as w}from"./base-lib.js?v=1734676359";import{m as x,N as T,k as E,d as C,n as D}from"./useMethods.js?v=1734676359";import{g as O,$ as S,bl as q,bm as N}from"./useStore3.js?v=1734676359";import{c as R}from"./column.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./index91.js?v=1734676359";const J={class:"relative p-2rem"},A={class:"flex items-center"},I=p({__name:"index",setup(p){const I=u(),{refs:{isRefreshTemplateList:L}}=O(),V=d({loading:!1,total:0,p:1,limit:10}),H=u([]),M=u([]),P=[{label:"删除",value:"delete",event:async(a,e,t,s)=>{const{label:l,value:o}=s,n=async(a,e)=>{const{id:t}=a;if("delete"===o)return await q({data:JSON.stringify({template_id:t})})};await a({title:"批量".concat(l,"编排模板"),content:"批量".concat(l,"已选的编排模板，是否继续操作！"),column:[{label:"模板名",prop:"name"},R()],onConfirm:async()=>(await e(n),G(),!1)})}}],U=[{active:!0,content:"添加",event:()=>{E((()=>L.value=!0))}}];f((()=>L.value),(a=>{L.value&&G()}));let B=!0;const G=async a=>{L.value=!1,!1!==a?(B&&(V.loading=!0),e({request:S(),data:Array,success:a=>{B=!1,V.total=a.length,H.value=a,M.value=C({p:V.p,limit:V.limit,list:H.value})||[],V.loading=!1}})):M.value=C({p:V.p,limit:V.limit,list:H.value})||[]},$=x({editDataEvent:a=>{D(a)},pullDataEvent:async a=>{o({component:()=>n((()=>import("./pull-mirror-select-dialog.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),compData:a,title:"拉取镜像",btn:"确定",area:60})},deleteDataEvent:async a=>{try{const t=await e({request:N({id:a.id})});if(t.status)return void o({component:()=>n((()=>import("./clear-confirm.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),title:"删除编排模板【".concat(a.name,"】"),area:55,btn:!0,compData:{confirmMsg:"检测到编排模板【".concat(a.name,"】，已应用到容器编排【").concat(t.msg,"】"),confirmCheck:"删除编排模板【".concat(a.name,"】以及已应用的容器编排和创建的容器"),confirmEvent:async(t,s)=>{e({request:q({data:JSON.stringify({template_id:a.id,status:t})}),message:!0,success:()=>{s(),G()}})}}});await i({type:"calc",title:"删除编排模板【".concat(a.name,"】"),content:"删除编排模板【".concat(a.name,"】，是否继续操作？")}),e({request:q({data:JSON.stringify({template_id:a.id})}),message:!0,success:()=>G()})}catch(t){}}});return g((async()=>{G(),$.value=a(JSON.parse(localStorage.getItem("dockerTemplateTableColumn")||"[]"),$.value)})),(a,e)=>{const o=c,n=t,i=s,p=l,u=m,d=r,f=v("bt-loading");return _(),b("div",J,[y(d,null,{"header-left":h((()=>[j("div",A,[y(o,{options:U}),j("a",{class:"ml-[1rem] bt-link",onClick:e[0]||(e[0]=a=>k(T)())},"需求反馈")])])),"header-right":h((()=>[y(n,{name:"dockerTemplateTableColumn",column:k($),tableRef:k(I)},null,8,["column","tableRef"])])),content:h((()=>[w(y(i,{ref_key:"templateTable",ref:I,key:"templateTable",column:k($),data:k(M),"max-height":410,description:"模板列表为空"},null,8,["column","data"]),[[f,k(V).loading],[f,"正在加载模板列表，请稍后...","title"]])])),"footer-left":h((()=>[y(p,{"table-ref":k(I),options:P},null,8,["table-ref"])])),"footer-right":h((()=>[y(u,{page:k(V).p,"onUpdate:page":e[1]||(e[1]=a=>k(V).p=a),row:k(V).limit,"onUpdate:row":e[2]||(e[2]=a=>k(V).limit=a),total:k(V).total,onChange:e[3]||(e[3]=a=>G(!1))},null,8,["page","row","total"])])),popup:h((()=>e[4]||(e[4]=[]))),_:1})])}}});export{I as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
