import{c as e,h as a,r as s,k as l,l as t,e as m,x as r,p as d,q as i,a7 as o,a4 as u}from"./base-lib.js?v=1734676359";import{ah as p,j as n,b as c}from"./utils-lib.js?v=1734676359";import{setFileDeny as f}from"./site.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";const b={class:"p-[20px]"},g=e({__name:"add-forbid-limit",props:{compData:{default:()=>({})}},emits:["close"],setup(e,{expose:g,emit:_}){const h=c(),x=e,w=_,y=a({suffix:x.compData.suffix||"php|jsp",deny_name:x.compData.name||"",dir:x.compData.dir||""}),D=s(!1),V=s(),j=a({dir:[{required:!0,message:"请输入需要禁止访问的目录",trigger:"blur"}],deny_name:[{required:!0,message:"请输入名称",trigger:"blur"}],suffix:[{required:!0,message:"请输入后缀",trigger:"blur"}]});return g({onConfirm:async e=>{await V.value.validate();try{D.value=!0;const e=await f({website:x.compData.website,...y,act:x.compData.name?"edit":"add"});x.compData.name&&(e.msg="修改成功"),e.status?(h.success(e.msg),x.compData.refresh(),w("close")):h.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,message:e.msg,type:"error",duration:0,showClose:!0})}catch(a){p(a)}finally{D.value=!1}}}),(e,a)=>{const s=n,p=o,c=u;return l(),t("div",b,[m(c,{ref_key:"forbidSiteForm",ref:V,rules:d(j),model:d(y),disabled:d(D)},{default:r((()=>[m(p,{label:"名称",prop:"deny_name"},{default:r((()=>[m(s,{modelValue:d(y).deny_name,"onUpdate:modelValue":a[0]||(a[0]=e=>d(y).deny_name=e),disabled:e.compData.name,width:"26rem"},null,8,["modelValue","disabled"])])),_:1}),m(p,{label:"后缀",prop:"suffix"},{default:r((()=>[m(s,{modelValue:d(y).suffix,"onUpdate:modelValue":a[1]||(a[1]=e=>d(y).suffix=e),width:"26rem"},null,8,["modelValue"])])),_:1}),m(p,{label:"访问路径",prop:"dir"},{default:r((()=>[m(s,{modelValue:d(y).dir,"onUpdate:modelValue":a[2]||(a[2]=e=>d(y).dir=e),placeholder:"URL中禁止访问的，如/api等",width:"26rem"},null,8,["modelValue"])])),_:1}),a[3]||(a[3]=i("ul",{class:"ml-6 mt-8 list-disc leading-10"},[i("li",{class:"text-medium"},"后缀：禁止访问的文件后缀"),i("li",{class:"text-medium"},"访问路径：如需要禁止https://www.bt.cn/api/，则填写/api即可")],-1))])),_:1},8,["rules","model","disabled"])])}}});export{g as default};
