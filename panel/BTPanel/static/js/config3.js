import{s as e,w as a,x as t}from"./api.js?v=1734676359";import{c as s,p as r,r as l,h as c,o,k as d,l as i,J as p,z as m,q as n,y as u,e as A,x as g}from"./base-lib.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";const I={class:"tx_key_bind px-[2rem] py-[4rem]"},y={class:"flex items-center gap-1rem"},D=s({__name:"config",props:{compData:{default:()=>({})}},setup(s){const D=s,{BtInput:f,BtInputIcon:h,ElFormItem:w,ElForm:k,ElAlert:E,ElButton:v}=r(D.compData.dependencies.components),{useAxios:P,useMessage:x,useConfirm:b}=r(D.compData.dependencies.hooks),{getRandomPwd:j}=r(D.compData.dependencies.utils),V=x(),F=l(),R=c({appid:D.compData.appId||"",secretId:D.compData.secretId||"",secretKey:D.compData.secretKey||""}),Y=c({appid:[{required:!0,message:"请输入APPID",trigger:"blur"}],secretId:[{required:!0,message:"请输入SecretId",trigger:"blur"}],secretKey:[{required:!0,message:"请输入SecretKey",trigger:"blur"}]}),Z=()=>{R.secretKey=j(10)},C=async()=>{await F.value.validate();try{const e=V.load("正在关联密钥，请稍后..."),t=await a({appid:R.appid,secretId:R.secretId,secretKey:R.secretKey});e.close(),V.request(t),t.status&&window.location.reload()}catch(e){}};return o((()=>{e(P)})),(e,a)=>(d(),i("div",I,[e.compData.tips||e.compData.alert?(d(),p(r(E),{key:0,type:"error",description:e.compData.tips||e.compData.alert,class:"!mb-1.6rem",closable:!1},null,8,["description"])):m("",!0),a[6]||(a[6]=n("div",{class:"tx_key_title"},[n("span",{class:"flex items-center justify-center"},[n("img",{class:"w-[3.5rem] h-[2.5rem] mr-4x",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAZCAYAAAC/zUevAAADk0lEQVRIS62WXWxTZRjHf88pqxIjIjXxA4k4nCLGTEagg0SF6IWYYEBCL8hgDjPR8O1HxCu3GyBe6NhClJigWPBmQYyIMXwkM4R1JUHDyJiDTpBGjVlWErMLieM85j3nrJx2bU/38d40fd//8+/vPM9znrfCWNcWnY+wBJgP1Hif3cBFIIXFflrkr7HYStni7Todm3dR3kG4s0Tcn8DnY4EpD2KzrsRiF/Bk2dDQh8XrtMjZoJhgiO36DDangRk+s6MIpxjmF/ZJgh1aic08lDeAFT7dDZR62uRYKZDSEG4JfgSijolwHGUXrdJZ1HSbrkbZD0Q8TQaLBbTItWIxpSG2aiuwxQv+HXiOVrkelF7c5v0eeMiD/5K90jBeiDTwsBOsrKZNvgkEGBFs1Z3AbuAm0I1FrFg2imdisy7H4gcPoIM2WVY2wIhwk9YQ5hqfSGZ8PbHD/o57/htkKPQAFfbX7A7HxwxhAg7rvdhUE6KXtfJ3IY/cTHRdmQYcAFkEzMoN0CNIaC/RyjOBMHF9EJuNWLwKPJ3VK2mEcwgbqJN/RvZvQyR6ZyMVXwHPlvwR1WYWVzUV1RzUJkI0ol5TFhaeYZj1NLhvjAuR7I2gU06DVOfFdACPZ7t85LAYiAGw+DAwU67gAjYvUC+DHkTqU5Q3fcEbCetRaqoGnL1EqhFxJuZ9WY1IE9E5zdnv+QBKPxYfc4tT2FyngkrgFdR5Y9wlfEadvCUkU+tRDmYPah8r/MYkf6tG7RZgqae9jNyKEX3iAvkAQjthNhET9yHyV1zVt1UvdKW+AF7z0D6gds6eounsTE9F/m0FWQf6EourOgoC1EmsZEniasa7maomG3EhkTLdutDZCFlzWVjZF1jTc1efZ9GjP40LwJgfUnPP9Di/o3QLyf4hVO9yNoqVohBVoRIEZcDv4yuJKcdVYLZLpcucFAetiQL4MyH0GIjjwMseROkZYEQTBTAecTWX2QGvJ9oNxEfAe7cfvuIpah+5VDAZkwHgQgwBbgvYNAud6RlYN89nS+KUxW5Ap55kyaw/sjATBTik07B5EcH8PZjp+X7LOlnlzoTE5ShidY1+eukGzZCJDDA4fY3vPLhvcs3uBhaM8r+DCDHJ+O6O/vcRHT0jMpH2PICgti3nvI9hVtIgvxpx7nRMXlmDytvmZXWcJh/gBDYJ6iXnAiw8ont6wqTvb2Qg4g6UyVjCz/7r22/5P8qBPGWz9M1HAAAAAElFTkSuQmCC"}),u("关联腾讯云API密钥")]),n("span")],-1)),A(r(k),{ref_key:"configFormRef",ref:F,rules:r(Y),"label-position":"right","label-width":"100px","hide-required-asterisk":true,"show-message":true,model:r(R),class:"demo-form-inline mb-2rem"},{default:g((()=>[A(r(w),{label:"APPID",prop:"appid"},{default:g((()=>[A(r(f),{modelValue:r(R).appid,"onUpdate:modelValue":a[0]||(a[0]=e=>r(R).appid=e),width:"24.8rem",placeholder:"请输入APPID"},null,8,["modelValue"])])),_:1}),A(r(w),{label:"SecretId",prop:"secretId"},{default:g((()=>[A(r(f),{modelValue:r(R).secretId,"onUpdate:modelValue":a[1]||(a[1]=e=>r(R).secretId=e),width:"24.8rem",placeholder:"请输入SecretId"},null,8,["modelValue"])])),_:1}),A(r(w),{label:"SecretKey",prop:"secretKey"},{default:g((()=>[A(r(h),{icon:"el-refresh",onIconClick:Z,modelValue:r(R).secretKey,"onUpdate:modelValue":a[2]||(a[2]=e=>r(R).secretKey=e),width:"24.8rem",class:"password",placeholder:"请输入SecretKey"},null,8,["modelValue"])])),_:1}),A(r(w),{label:" "},{default:g((()=>[n("div",y,[A(r(v),{type:"primary",onClick:C},{default:g((()=>a[4]||(a[4]=[u("关联API密钥")]))),_:1}),D.compData.isEdit||e.compData.tips?(d(),p(r(v),{key:0,type:"define",onClick:a[3]||(a[3]=e=>(async()=>{try{await b({title:"解绑腾讯云API密钥",content:"是否取消关联腾讯云API密钥,是否继续？"});const e=V.load("正在取消关联密钥，请稍后..."),a=await t();e.close(),V.request(a),a.status&&window.location.reload()}catch(e){}})())},{default:g((()=>a[5]||(a[5]=[u("取消关联密钥")]))),_:1})):m("",!0)])])),_:1})])),_:1},8,["rules","model"]),a[7]||(a[7]=n("div",{class:"leading-2rem text-[1.3rem] mb-[0.5rem] px-[2rem]",style:{color:"red"}},"温馨提示：请确保当前关联的密钥是本服务器的，如果不一致，将会导致数据获取异常和不正确，请须知",-1)),a[8]||(a[8]=n("div",{class:"leading-2rem text-[1.3rem] px-[2rem]"},[u("您正在使用宝塔面板腾讯云联合定制版，请关联您的腾讯云API密钥，如何获取腾讯云API密钥，"),n("a",{href:"https://console.cloud.tencent.com/cam/capi",target:"_blank",class:"btlink"},"点击查看")],-1))]))}});export{D as default};
