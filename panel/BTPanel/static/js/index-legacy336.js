!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function r(e){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?t(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function n(t,r,n){return(r=function(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,r||"default");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==e(r)?r:r+""}(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function a(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */a=function(){return r};var t,r={},n=Object.prototype,o=n.hasOwnProperty,u=Object.defineProperty||function(e,t,r){e[t]=r.value},l="function"==typeof Symbol?Symbol:{},i=l.iterator||"@@iterator",s=l.asyncIterator||"@@asyncIterator",c=l.toStringTag||"@@toStringTag";function p(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(t){p=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var a=t&&t.prototype instanceof b?t:b,o=Object.create(a.prototype),l=new D(n||[]);return u(o,"_invoke",{value:O(e,r,l)}),o}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}r.wrap=f;var v="suspendedStart",h="suspendedYield",m="executing",g="completed",y={};function b(){}function w(){}function _(){}var x={};p(x,i,(function(){return this}));var k=Object.getPrototypeOf,P=k&&k(k(F([])));P&&P!==n&&o.call(P,i)&&(x=P);var j=_.prototype=b.prototype=Object.create(x);function L(e){["next","throw","return"].forEach((function(t){p(e,t,(function(e){return this._invoke(t,e)}))}))}function E(t,r){function n(a,u,l,i){var s=d(t[a],t,u);if("throw"!==s.type){var c=s.arg,p=c.value;return p&&"object"==e(p)&&o.call(p,"__await")?r.resolve(p.__await).then((function(e){n("next",e,l,i)}),(function(e){n("throw",e,l,i)})):r.resolve(p).then((function(e){c.value=e,l(c)}),(function(e){return n("throw",e,l,i)}))}i(s.arg)}var a;u(this,"_invoke",{value:function(e,t){function o(){return new r((function(r,a){n(e,t,r,a)}))}return a=a?a.then(o,o):o()}})}function O(e,r,n){var a=v;return function(o,u){if(a===m)throw Error("Generator is already running");if(a===g){if("throw"===o)throw u;return{value:t,done:!0}}for(n.method=o,n.arg=u;;){var l=n.delegate;if(l){var i=S(l,n);if(i){if(i===y)continue;return i}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===v)throw a=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=m;var s=d(e,r,n);if("normal"===s.type){if(a=n.done?g:h,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a=g,n.method="throw",n.arg=s.arg)}}}function S(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var o=d(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var u=o.arg;return u?u.done?(r[e.resultName]=u.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):u:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function q(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function V(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(q,this),this.reset(!0)}function F(r){if(r||""===r){var n=r[i];if(n)return n.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var a=-1,u=function e(){for(;++a<r.length;)if(o.call(r,a))return e.value=r[a],e.done=!1,e;return e.value=t,e.done=!0,e};return u.next=u}}throw new TypeError(e(r)+" is not iterable")}return w.prototype=_,u(j,"constructor",{value:_,configurable:!0}),u(_,"constructor",{value:w,configurable:!0}),w.displayName=p(_,c,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,p(e,c,"GeneratorFunction")),e.prototype=Object.create(j),e},r.awrap=function(e){return{__await:e}},L(E.prototype),p(E.prototype,s,(function(){return this})),r.AsyncIterator=E,r.async=function(e,t,n,a,o){void 0===o&&(o=Promise);var u=new E(f(e,t,n,a),o);return r.isGeneratorFunction(t)?u:u.next().then((function(e){return e.done?e.value:u.next()}))},L(j),p(j,c,"Generator"),p(j,i,(function(){return this})),p(j,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},r.values=F,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(V),!e)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,a){return l.type="throw",l.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var u=this.tryEntries[a],l=u.completion;if("root"===u.tryLoc)return n("end");if(u.tryLoc<=this.prev){var i=o.call(u,"catchLoc"),s=o.call(u,"finallyLoc");if(i&&s){if(this.prev<u.catchLoc)return n(u.catchLoc,!0);if(this.prev<u.finallyLoc)return n(u.finallyLoc)}else if(i){if(this.prev<u.catchLoc)return n(u.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return n(u.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(u)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),V(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;V(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:F(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},r}function o(e,t,r,n,a,o,u){try{var l=e[o](u),i=l.value}catch(e){return void r(e)}l.done?t(i):Promise.resolve(i).then(n,a)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var u=e.apply(t,r);function l(e){o(u,n,a,l,i,"next",e)}function i(e){o(u,n,a,l,i,"throw",e)}l(void 0)}))}}System.register(["./utils-lib-legacy.js?v=1734676359","./index-legacy91.js?v=1734676359","./base-lib-legacy.js?v=1734676359","./index-legacy81.js?v=1734676359","./form-item-legacy.js?v=1734676359","./index-legacy88.js?v=1734676359","./validator-legacy.js?v=1734676359","./useMethod-legacy5.js?v=1734676359","./useStore-legacy9.js?v=1734676359","./__commonjsHelpers__-legacy.js?v=1734676359","./index-legacy90.js?v=1734676359","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1734676359","./index-legacy116.js?v=1734676359","./index.vue_vue_type_style_index_0_scoped_03ce946a_lang-legacy.js?v=1734676359","./useStore-legacy7.js?v=1734676359","./site-legacy.js?v=1734676359","./column-legacy.js?v=1734676359","./useController-legacy4.js?v=1734676359","./useStore-legacy8.js?v=1734676359","./useController-legacy3.js?v=1734676359","./useStore-legacy12.js?v=1734676359"],(function(e,t){"use strict";var n,o,l,i,s,c,p,f,d,v,h,m,g,y,b,w,_,x,k,P,j,L,E,O,S,q,V,D,F,W,C,U,z,H,M,I,N,G,T,A,Q,R,B,Y,Z,$,J,K,X,ee,te,re;return{setters:[function(e){n=e.D,o=e._,l=e.e,i=e.c0,s=e.ar,c=e.j,p=e.a4,f=e.aO,d=e.c,v=e.l,h=e.J,m=e.G,g=e.M,y=e.aa},function(e){b=e._},function(e){w=e.c,_=e.s,x=e.o,k=e.k,P=e.l,j=e.e,L=e.p,E=e.z,O=e.q,S=e.J,q=e.r,V=e.x,D=e.H,F=e.aZ,W=e.A,C=e.b7,U=e.h,z=e.a7,H=e.a4,M=e.i,I=e.aN,N=e.Q,G=e.y,T=e.M},function(e){A=e.u},function(e){Q=e.b,R=e.i,B=e.h,Y=e.e},function(e){Z=e._},function(e){$=e.f,J=e.h},function(e){K=e.j,X=e.k,ee=e.l,te=e.m},function(e){re=e.u},null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var t={key:0,class:"software-mask"},ne={key:1,class:"software-install"},ae={class:"software-view"},oe=w({__name:"index",setup:function(e){var r=_(A()),a=r.addWordpressFormData,u=r.mysql,l=r.php,i=r.createSiteSubmit,s=A(),c=s.getInitData,p=s.resetCreateForm,f=n({data:function(){return a.value},options:function(){return Ee()},submit:Fe}),d=f.BtForm,v=f.submit;return x((function(){c(),i.value=v,p()})),function(e,r){var n=o,a=b;return k(),P("div",null,[j(L(d)),L(l).setup&&L(u).setup?E("",!0):(k(),P("div",t)),L(l).setup&&L(u).setup?E("",!0):(k(),P("div",ne,[O("div",ae,[j(n,{icon:"el-warning",size:30,class:"mr-[8px]",color:"orange"}),r[2]||(r[2]=O("span",{class:"text-[1.4rem] font-black"},"服务器未安装，",-1)),L(l).setup?E("",!0):(k(),P("span",{key:0,class:"bt-link text-[1.3rem]",onClick:r[0]||(r[0]=function(e){return L(qe)("php-7.4")})},"安装PHP")),L(l).setup||L(u).setup?E("",!0):(k(),S(a,{key:1})),L(u).setup?E("",!0):(k(),P("span",{key:2,class:"text-[1.3rem] bt-link",onClick:r[1]||(r[1]=function(e){return L(qe)("mysql")})},"安装MySQL"))])]))])}}}),ue=l(oe,[["__scopeId","data-v-c1cb2120"]]),le=w({__name:"index",setup:function(e){var t=_(A()),r=t.addBackupFormData,a=t.createImportSubmit,o=A(),u=o.getInitData,l=o.resetImportForm,i=n({data:function(){return r.value},options:Se,submit:We}),s=i.BtForm,c=i.submit;return x((function(){u(),a.value=c,l()})),function(e,t){return k(),P("div",null,[j(L(s))])}}}),ie=w({__name:"upload",props:{path:{default:"/"}},emits:["finish"],setup:function(e,t){var r=t.emit,n=e,o=r,l=q([]);i();var c=q(0),p=function(e){return"".concat(e,"%")},f=function(){var e=u(a().mark((function e(t){var r,u,p,f,d,v,h,m,g,y;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.file,u=t.onProgress,p=t.onSuccess,f=t.onError,d=1048576,v=Math.ceil(r.size/d),h=i(),m=a().mark((function e(t){var o,l,i,p;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t*d,l=Math.min(o+d,r.size),i=r.slice(o,l),(p=new FormData).append("f_path",n.path),p.append("f_name",r.name),p.append("f_start",o.toString()),p.append("blob",i),p.append("f_size",r.size.toString()),p.append("request_time",h.request_time.toString()),p.append("request_token",h.request_token),e.prev=11,e.next=14,s.post("/files?action=upload",p,{headers:{"Content-Range":"bytes ".concat(o,"-").concat(l-1,"/").concat(r.size),"x-http-token":window.vite_public_request_token,"Content-Type":"application/x-www-form-urlencoded"},onUploadProgress:function(e){if(e.lengthComputable){Math.round(100*e.loaded/e.total);var n=Math.round(100*(t*d+e.loaded)/r.size);c.value=n,u({percent:n})}}});case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(11),f&&f(e.t0),e.abrupt("return",{v:void 0});case 20:case"end":return e.stop()}}),e,null,[[11,16]])})),y=0;case 6:if(!(y<v)){e.next=14;break}return e.delegateYield(m(y),"t0",8);case 8:if(!(g=e.t0)){e.next=11;break}return e.abrupt("return",g.v);case 11:y++,e.next=6;break;case 14:o("finish","".concat(n.path,"/").concat(r.name)),p&&p(null),l.value=[],setTimeout((function(){c.value=0}),1e3);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return function(e,t){var r=W,n=C;return k(),S(L(F),{ref:"upload",class:"custom-upload w-auto",action:"",name:"blob","file-list":L(l),"show-file-list":!1,multiple:!1,"http-request":f},{trigger:V((function(){return[j(r,{type:"primary"},{default:V((function(){return[D(e.$slots,"default",{},void 0,!0)]})),_:3})]})),default:V((function(){return[L(c)>0&&L(c)<100?(k(),S(n,{key:0,percentage:L(c),format:p},null,8,["percentage"])):E("",!0)]})),_:3},8,["file-list"])}}}),se=l(ie,[["__scopeId","data-v-2379eb80"]]),ce={class:"px-[20px] pt-[20px]"},pe={class:"flex items-center mb-[4px]"},fe=w({__name:"edit-option",props:{compData:{default:{}}},setup:function(e,t){var r=t.expose,n=_(A()).addWordpressFormData,o=e,l=U({datauser:"",datapassword:"",type:"MySQL",code:"utf8mb4",version:""}),i=U({datauser:[{trigger:["blur","change"],validator:function(e,t,r){0===t.length?r(new Error("名称不能为空！")):/^[a-zA-Z0-9_]+$/g.test(t)?t.length<=3?r(new Error("名称长度错误，不能少于3个字符！")):t.length>16?r(new Error("名称长度错误，不能大于16个字符！")):r():r(new Error("名称只能包含字母、数字和下划线！"))}}],datapassword:[{trigger:["blur","change"],validator:function(e,t,r){0===t.length?r(new Error("密码不能为空！")):r()}}]}),s=q(),p=function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.value.validate().catch((function(){return!1}));case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:n.value.datauser=l.datauser,n.value.datapassword=l.datapassword,t();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return x((function(){l.datauser=o.compData.datauser,l.datapassword=o.compData.datapassword})),r({onConfirm:p}),function(e,t){var r=c,n=z,a=H;return k(),P("div",ce,[j(a,{model:L(l),rules:L(i),ref_key:"editFormRef",ref:s},{default:V((function(){return[j(n,{label:"数据库账号"},{default:V((function(){return[O("div",pe,[j(n,{prop:"datauser",label:""},{default:V((function(){return[j(r,{placeholder:"创建数据库账号",modelValue:L(l).datauser,"onUpdate:modelValue":t[0]||(t[0]=function(e){return L(l).datauser=e}),width:"17rem"},null,8,["modelValue"])]})),_:1}),j(n,{prop:"datapassword",label:"",class:"!mt-0"},{default:V((function(){return[j(r,{class:"ml-[8px]",width:"16rem",placeholder:"数据库密码",modelValue:L(l).datapassword,"onUpdate:modelValue":t[1]||(t[1]=function(e){return L(l).datapassword=e})},null,8,["modelValue"])]})),_:1})]),t[2]||(t[2]=O("span",{class:"text-[#999] text-[1.2rem]"}," 创建站点的同时，为站点创建一个对应的数据库帐户，方便不同站点使用不同数据库。 ",-1))]})),_:1})]})),_:1},8,["model","rules"])])}}}),de=_(A()),ve=de.addSelectOption,he=de.addPHPSelectOption,me=de.addWPSelectOption,ge=de.web,ye=de.sitePath,be=de.addWordpressFormData,we=de.selectLoading,_e=de.phpLoading,xe=de.wpLoading,ke=de.addBackupFormData,Pe=A().setWpLoading,je=_(re()).isRefreshLocalList,Le=[{label:"创建站点",name:"single",render:function(){return j(ue,null,null)}},{label:"从备份创建",name:"import",lazy:!0,render:function(){return j(le,null,null)}}],Ee=function(){var e={class:"!w-[400px]",clearable:!0};return M((function(){return[Q("域名","domain",{attrs:r(r({},e),{},{placeholder:"请输入网站域名","onUpdate:modelValue":Oe}),rules:[{required:!0,message:"请输入网站域名",trigger:"blur"}]}),Q("网站标题","weblog_title",{attrs:r(r({},e),{},{placeholder:"请输入 WordPress 的网站标题"}),rules:[{required:!0,message:"请输入 WordPress 的网站标题",trigger:"blur"}]}),R("语言","language",ve.value,{attrs:{class:"!w-[230px]",loading:we.value}}),R("PHP 版本","php_version",he.value,{attrs:{class:"!w-[230px]",loading:_e.value,onChange:Ve},rules:[{required:!0,message:"请选择PHP版本",trigger:"blur"}]}),B("WP 版本",(function(){return j("div",{class:"flex items-center"},[j(p,{options:me.value,class:"!w-[230px]",loading:xe.value,modelValue:be.value.wp_version,"onUpdate:modelValue":function(e){return be.value.wp_version=e}},null),j(I,{content:"版本5.6.0+自动打开自动版本更新",placement:"top"},{default:function(){return[j("span",{class:"svgtofont-el-warning !text-[2rem] ml-[1rem]"},null)]}})])}),"wp_version",{rules:[{required:!0,message:"请选择WP版本",trigger:"blur"}]}),Q("用户名","user_name",{attrs:r(r({},e),{},{placeholder:"WordPress 后台用户"}),rules:[{required:!0,message:"WordPress 后台用户不能为空",trigger:"blur"}]}),{key:"admin_password",type:"custom",render:function(){var e=M((function(){var e={required:!0,message:"WordPress 后台密码不能为空",trigger:"blur"};return be.value.pw_weak?[e]:[e,{validator:function(e,t,r){/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/.test(t)?r():r(new Error("密码必须至少8位，包含大小写字母和数字"))},trigger:"blur"}]}));return j(f,{label:"密码",prop:"admin_password",class:"flex items-center",rules:e.value},{default:function(){return[j(c,{class:"!w-[230px]",clearable:!0,modelValue:be.value.admin_password,"onUpdate:modelValue":function(e){return be.value.admin_password=e},type:"input"},null),j(N,{class:"ml-[2rem]",modelValue:be.value.pw_weak,"onUpdate:modelValue":function(e){return be.value.pw_weak=e},label:"允许密码较弱"},null)]}})},rules:{admin_password:[{required:!0,message:"WordPress 后台密码不能为空",trigger:"blur"}]}},Q("电子邮件","admin_email",{attrs:r(r({},e),{},{placeholder:"请输入电子邮件地址"}),rules:[{required:!0,message:"电子邮件地址不能为空",trigger:"blur"},{type:"email",message:"请输入正确的电子邮件地址",trigger:"blur"},{min:3,max:50,message:"电子邮件长度在 3 到 50 个字符之间",trigger:"blur"}]}),Q("前缀","prefix",{attrs:r(r({},e),{},{placeholder:"请输入 WordPress 表名前缀"}),rules:[{required:!0,message:"WordPress 表名前缀不能为空",trigger:"blur"}]}),B("缓存",(function(){return j(N,{modelValue:be.value.enable_cache,"onUpdate:modelValue":function(e){return be.value.enable_cache=e},label:"启用缓存，目前仅支持nginx",disabled:"nginx"!==ge.value.type},null)})),{key:"mysql_setup",type:"custom",render:function(){return j(f,{label:"其他配置",prop:"mysql_setup",class:"!mb-0"},{default:function(){return[j("div",{class:"flex flex-col bg-[#f8f8f8] p-[12px] px-[16px] text-[1.2rem] w-full"},[j("div",{class:"flex items-center justify-between"},[j("span",null,[G("数据库："),"MySQL数据库"]),j("span",null,[G("账号："),be.value.datauser]),j("span",null,[G("密码："),be.value.datapassword])])]),j("span",{class:"text-[#999] flex items-center"},[G("其他配置初始状态为默认选择的配置项，如需修改请点击"),j(d,{onClick:function(){v({title:"编辑配置",area:62,component:function(){return j(fe,null,null)},compData:be.value,btn:!0})}},{default:function(){return[G("编辑配置")]}})])]}})}}]}))},Oe=function(e){var t="sql_"+e.replace(new RegExp(/([-.])/g),"_");t.length<=16&&(be.value.datauser=t)},Se=function(e){var t={class:"!w-[400px]",clearable:!0};return M((function(){return[Y("备份类型","method",[{label:"本地",value:1},{label:"Plesk或Cpanel",value:2}]),{type:"custom",label:"备份文件路径",render:function(){return j(z,{label:"备份文件路径",prop:"bak_file"},{default:function(){return[j(se,{class:"mr-[1rem]",path:"/www/server/panel/temp",onFinish:function(t){e.value.bak_file=t}},{default:function(){return[G("上传文件")]}}),j(Z,{modelValue:e.value.bak_file,"onUpdate:modelValue":function(t){return e.value.bak_file=t},icon:"el-folder-opened",width:"32rem",onIconClick:function(){$({type:"file",path:e.value.bak_file,change:function(t){e.value.bak_file=t}})}},null)]}})},key:"bak_file",rules:{bak_file:[{required:!0,message:"请填写备份文件路径",trigger:"blur"}]}},Q("域名","domain",{attrs:r(r({},t),{},{placeholder:"请输入网站域名","onUpdate:modelValue":ze}),rules:[{required:!0,message:"请输入网站域名",trigger:"blur"}]}),Q("网站路径","sub_path",{attrs:r(r({},t),{},{placeholder:"根目录留空，子目录填写目录名"}),slots:{prepend:function(){return j("span",null,[Ue(ye.value)])}}}),R("PHP 版本","php_version",he.value,{attrs:{class:"!w-[230px]",loading:_e.value},rules:[{required:!0,message:"请选择PHP版本",trigger:"blur"}]}),B("缓存",(function(){return j(N,{modelValue:e.value.enable_cache,"onUpdate:modelValue":function(t){return e.value.enable_cache=t},label:"启用缓存，目前仅支持nginx",disabled:"nginx"!==ge.value.type},null)}))]}))},qe=function(e){return J({type:"i",name:e})},Ve=function(){var e=u(a().mark((function e(t){var r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Pe(!0),e.next=4,K({php_version_short:t||be.value.php_version});case 4:r=e.sent,n=r.data.msg,h(n)&&(me.value=n.map((function(e){return{label:e.version,value:e.version}})));case 7:return e.prev=7,Pe(!1),e.finish(7);case 10:case"end":return e.stop()}}),e,null,[[0,,7,10]])})));return function(t){return e.apply(this,arguments)}}(),De=function(){var e=be.value,t=e.domain,r=e.php_version,n=t.replace(new RegExp(/([-.])/g),"_");if(null===r)throw g.error("请选择PHP版本"),new Error("请选择PHP版本");return{webname:{domain:t,domainlist:[],count:0},type:"PHP",port:80,type_id:0,ftp:!1,sql:"MySQL",codeing:"utf8",set_ssl:0,force_ssl:0,project_type:"WP",path:ye.value+"/"+t,ps:n,version:r,datauser:be.value.datauser,datapassword:be.value.datapassword,password:be.value.admin_password,pw_weak:be.value.pw_weak?"on":"off",email:be.value.admin_email,weblog_title:be.value.weblog_title,language:be.value.language,user_name:be.value.user_name,prefix:be.value.prefix,enable_cache:be.value.enable_cache?1:0,enable_whl:0,whl_page:be.value.Login_url?be.value.Login_url:null,whl_redirect_admin:be.value.redirection_url?be.value.redirection_url:null,package_version:be.value.wp_version}},Fe=function(){var e=u(a().mark((function e(t,r,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r();case 3:return e.next=5,m({loading:"正在创建站点...",request:X(De()),message:!0,success:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.status){e.next=2;break}throw new Error(t.msg);case 2:je.value=!0;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});case 5:e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r,n){return e.apply(this,arguments)}}(),We=function(){var e=u(a().mark((function e(t,r,n){var o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r();case 3:return o={bak_file:ke.value.bak_file,domain:ke.value.domain,sub_path:ke.value.sub_path,php_ver_short:ke.value.php_version||"",enable_cache:ke.value.enable_cache?1:0},e.next=6,m({loading:"正在创建站点...",request:1===ke.value.method?ee(o):te(o),message:!0,success:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.status){e.next=2;break}throw new Error(t.msg);case 2:je.value=!0;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r,n){return e.apply(this,arguments)}}(),Ce=q(""),Ue=function(e){return e.endsWith("/")?e:"".concat(e,"/")},ze=function(e){Ce.value||(Ce.value=ye.value),ye.value=e?"".concat(Ce.value,"/").concat(e,"/"):"".concat(Ce.value,"/")},He={class:"p-[1.6rem] pb-0"};e("default",w({__name:"index",setup:function(e){var t=_(A()).tabActive,r=A().getConfig;return x((function(){r()})),function(e,r){var n=y;return k(),P("div",He,[j(n,{modelValue:L(t),"onUpdate:modelValue":r[0]||(r[0]=function(e){return T(t)?t.value=e:null}),type:"bg-card",options:L(Le)},null,8,["modelValue","options"])])}}}))}}}))}();
