!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?t(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function r(t,n,r){return(n=function(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,n||"default");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function a(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */a=function(){return n};var t,n={},r=Object.prototype,u=r.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function f(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(t){f=function(e,t,n){return e[t]=n}}function p(e,t,n,r){var a=t&&t.prototype instanceof x?t:x,u=Object.create(a.prototype),i=new I(r||[]);return o(u,"_invoke",{value:L(e,n,i)}),u}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=p;var h="suspendedStart",v="suspendedYield",m="executing",y="completed",g={};function x(){}function w(){}function b(){}var _={};f(_,c,(function(){return this}));var k=Object.getPrototypeOf,V=k&&k(k(T([])));V&&V!==r&&u.call(V,c)&&(_=V);var P=b.prototype=x.prototype=Object.create(_);function j(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function C(t,n){function r(a,o,i,c){var l=d(t[a],t,o);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==e(f)&&u.call(f,"__await")?n.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):n.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,t){function u(){return new n((function(n,a){r(e,t,n,a)}))}return a=a?a.then(u,u):u()}})}function L(e,n,r){var a=h;return function(u,o){if(a===m)throw Error("Generator is already running");if(a===y){if("throw"===u)throw o;return{value:t,done:!0}}for(r.method=u,r.arg=o;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===h)throw a=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=m;var l=d(e,n,r);if("normal"===l.type){if(a=r.done?y:v,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(a=y,r.method="throw",r.arg=l.arg)}}}function O(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,O(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var u=d(a,e.iterator,n.arg);if("throw"===u.type)return n.method="throw",n.arg=u.arg,n.delegate=null,g;var o=u.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function T(n){if(n||""===n){var r=n[c];if(r)return r.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var a=-1,o=function e(){for(;++a<n.length;)if(u.call(n,a))return e.value=n[a],e.done=!1,e;return e.value=t,e.done=!0,e};return o.next=o}}throw new TypeError(e(n)+" is not iterable")}return w.prototype=b,o(P,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:w,configurable:!0}),w.displayName=f(b,s,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,f(e,s,"GeneratorFunction")),e.prototype=Object.create(P),e},n.awrap=function(e){return{__await:e}},j(C.prototype),f(C.prototype,l,(function(){return this})),n.AsyncIterator=C,n.async=function(e,t,r,a,u){void 0===u&&(u=Promise);var o=new C(p(e,t,r,a),u);return n.isGeneratorFunction(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},j(P),f(P,s,"Generator"),f(P,c,(function(){return this})),f(P,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=T,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&u.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,a){return i.type="throw",i.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=u.call(o,"catchLoc"),l=u.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;S(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:T(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},n}function u(e,t,n,r,a,u,o){try{var i=e[u](o),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){u(o,r,a,i,c,"next",e)}function c(e){u(o,r,a,i,c,"throw",e)}i(void 0)}))}}System.register(["./index-legacy185.js?v=1734676359","./utils-lib-legacy.js?v=1734676359","./base-lib-legacy.js?v=1734676359","./index-legacy88.js?v=1734676359","./validator-legacy.js?v=1734676359","./useController-legacy3.js?v=1734676359","./site-legacy.js?v=1734676359","./useStore-legacy7.js?v=1734676359","./ace-legacy.js?v=1734676359","./__commonjsHelpers__-legacy.js?v=1734676359","./index-legacy91.js?v=1734676359","./column-legacy.js?v=1734676359"],(function(e,t){"use strict";var r,u,i,c,l,s,f,p,d,h,v,m,y,g,x,w,b,_,k,V,P,j,C,L,O,E,S,I,T,F,U,q,N,G,D,A,B,H,R,z,M,Y,J,K,W,X,Q,Z,$,ee,te,ne,re,ae,ue,oe,ie,ce,le,se,fe,pe,de,he,ve,me,ye;return{setters:[function(e){r=e.B},function(e){u=e.u,i=e.M,c=e.b6,l=e.o,s=e.G,f=e.af,p=e.H,d=e.l,h=e.ah,v=e.v,m=e.c,y=e.j,g=e.h,x=e.e},function(e){w=e.r,b=e.h,_=e.s,k=e.n,V=e.e,P=e.c,j=e.o,C=e.B,L=e.C,O=e.p,E=e.k,S=e.l,I=e.q,T=e.x,F=e.y,U=e.I,q=e.aX,N=e.M,G=e.J,D=e.z,A=e.A,B=e.ah,H=e.aj,R=e.aY,z=e.a7,M=e.a4,Y=e.ag},function(e){J=e._},function(e){K=e.f,W=e.h,X=e.p,Q=e.i},function(e){Z=e.c},function(e){$=e.setHasPwd,ee=e.closeHasPwd,te=e.setPath,ne=e.setSiteRunPath,re=e.setSitesFtp,ae=e.delSiteRsync,ue=e.removeSendTask,oe=e.delGitTask,ie=e.getGitTask,ce=e.addGitTask,le=e.runSiteTask,se=e.getFileBody,fe=e.setDirUserINI,pe=e.writeAccessLog,de=e.getCatalogueKey,he=e.getDirUserINI,ve=e.getSitesFtp,me=e.getBtSyncStatus},function(e){ye=e.u},null,null,null,null],execute:function(){var ge=u().payment,xe=ye().siteInfo,we=ge.value.authType,be=w(!1),_e=w(),ke=w(),Ve=b({path:"",runPath:"",dirs:[],userini:!1,sync_git:!1,logs:!1,pass:!1}),Pe=w(!1),je=b({ftp_status:!1,ftp_name:"",ftp_pwd:""}),Ce=w(!1),Le=w(""),Oe=w([]),Ee=w(!1),Se=b({git_addr:"",branch:"",cycle:1}),Ie=w(""),Te=w(!1),Fe=w(!1),Ue={git_addr:[{required:!0,message:"请输入git地址",trigger:"blur"}]};w({mode:"ace/mode/nginx",theme:"ace/theme/monokai",wrap:!0,showInvisibles:!1,showFoldWidgets:!1,useSoftTabs:!0,tabSize:2,showPrintMargin:!1,readOnly:!0,fontSize:"12px"});var qe=b({status:!1,username:"",password:"",rePass:""}),Ne={username:[{required:!0,message:"账号不能为空",trigger:["blur"]}],password:[{required:!0,message:"密码不能为空",trigger:["blur"]}],rePass:[{required:!0,message:"重复密码不能为空",trigger:["blur"]},{validator:function(e,t,n){t!==qe.password?n(new Error("两次输入密码不一致")):n()},trigger:["blur","change"]}]},Ge=function(){var e=o(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_e.value.validate(function(){var e=o(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=15;break}return n=i.load("正在设置,请稍后..."),e.prev=2,e.next=5,$({id:xe.value.id,username:qe.username,password:qe.password});case 5:r=e.sent,i.request(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2);case 12:return e.prev=12,n.close(),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[2,9,12,15]])})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),De=function(){var e=o(a().mark((function e(t){var n,r,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=8;break}return n=i.load("正在关闭密码访问,请稍后..."),e.next=5,ee({id:xe.value.id});case 5:r=e.sent,n.close(),i.request(r);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0);case 13:return e.prev=13,null===(u=n)||void 0===u||u.close(),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,10,13,16]])})));return function(t){return e.apply(this,arguments)}}(),Ae=function(){var e=o(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,de({table:"sites",key:"path",id:xe.value.id});case 3:t=e.sent,Ve.path=t.data,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Be=function(){K({type:"dir",path:Ve.path,change:function(e){Ve.path=e}})},He=function(){var e=o(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,he({path:Ve.path,id:xe.value.id});case 3:t=e.sent,Ve.dirs=t.data.runPath.dirs,Ve.runPath=t.data.runPath.runPath,Ve.sync_git=t.data.sync_git,Ve.logs=t.data.logs,Ve.userini=t.data.userini,qe.status=t.data.pass,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),Re=function(){var e=o(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.load("正在保存中..."),e.prev=1,e.next=4,te({path:Ve.path,id:xe.value.id});case 4:n=e.sent,i.request(n),n.status&&(xe.value.path=Ve.path),He(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1);case 13:return e.prev=13,t.close(),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(){return e.apply(this,arguments)}}(),ze=function(){var e=o(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.load("正在设置,请稍后..."),e.prev=1,e.next=4,ne({runPath:Ve.runPath,id:xe.value.id});case 4:n=e.sent,i.request(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1);case 11:return e.prev=11,t.close(),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(){return e.apply(this,arguments)}}(),Me=function(){var e=o(a().mark((function e(){var t,n,r,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve({site_id:xe.value.id});case 3:n=e.sent,null!==(t=n.data.info)&&void 0!==t&&t.id?(je.ftp_status=!0,je.ftp_id=null===(r=n.data.info)||void 0===r?void 0:r.id,je.ftp_name=null===(u=n.data.info)||void 0===u?void 0:u.name,je.ftp_pwd=n.data.info.password):(je.ftp_status=!1,je.ftp_name="",je.ftp_pwd="",je.ftp_id=""),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Ye=function(){var e=o(a().mark((function e(t,r){var u,o,f,p;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=24;break}if(u=i.load("正在处理中,请稍后..."),e.prev=2,je.ftp_id){e.next=6;break}return Ye(!0,!1),e.abrupt("return");case 6:return delete(o=n(n({site_id:xe.value.id},je),{},{siteName:xe.value.name})).ftp_status,e.next=10,re(o);case 10:f=e.sent,i.request(f),Pe.value=!1,Me(),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2);case 19:return e.prev=19,u.close(),e.finish(19);case 22:e.next=34;break;case 24:return t&&(je.ftp_name=je.ftp_name||c(12),je.ftp_pwd=je.ftp_pwd||c(12)),(p=n(n({site_id:xe.value.id},je),{},{siteName:xe.value.name})).ftp_id||delete p.ftp_id,je.ftp_status=!t,e.next=30,l({title:"FTP状态",content:t?"创建FTP将会同步到FTP界面，是否继续操作？":"关闭FTP后，将会删除当前网站的FTP账号，是否继续操作？",icon:"warning-filled"});case 30:return e.next=32,s({loading:"正在处理中,请稍后...",request:re(p),message:!0});case 32:e.sent.status&&Me();case 34:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}(),Je=function(){var e=o(a().mark((function e(){var t,n,r,u,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,me({path:Ve.path});case 3:t=e.sent,Ce.value=t.data.have_sync,Ce.value&&(Oe.value=Array.isArray(null===(n=t.data)||void 0===n?void 0:n.data)?null===(r=t.data)||void 0===r?void 0:r.data:[],null!==(u=t.data)&&void 0!==u&&null!==(u=u.data)&&void 0!==u&&u.name&&(Le.value=null===(o=t.data)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.name)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),Ke=function(){var e=o(a().mark((function e(r){var u,c,h,v,m,y,g,x,w,b,P;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,Ce.value=r,!r){e.next=35;break}return e.next=5,f({sName:"rsync"});case 5:if(u=e.sent,!((c=u.data).setup&&c.endtime>=0)){e.next=25;break}if(!(parseFloat(c.version)>=parseFloat("3.9.3"))){e.next=19;break}return e.next=11,p((function(){return t.import("./store-legacy2.js?v=1734676359").then((function(e){return e.aq}))}),void 0,t.meta.url);case 11:h=e.sent,v=h.default,m=v(),y=_(m),g=y.compData,x=y.isSuccess,g.value={row:{path:xe.value.path,type:"site",refreshEvent:Je}},d({isAsync:!0,title:"【".concat(xe.value.name,"】设置数据同步"),area:56,component:function(){return p((function(){return t.import("./index-legacy198.js?v=1734676359")}),void 0,t.meta.url)},onCancel:function(){k((function(){x.value||(Ce.value=!1)}))}}),e.next=23;break;case 19:return e.next=21,l({title:"更新提示",content:"当前版本过低，无法使用此功能，是否继续更新？",icon:"warning-filled"});case 21:return e.next=23,We(c);case 23:e.next=33;break;case 25:if(!(c.endtime>=0)){e.next=31;break}return e.next=28,l({title:"安装提示",content:"检测到【".concat(c.title,"】未安装，是否立即安装开启使用？"),icon:"warning-filled"});case 28:W({name:c.name,type:"i",pluginInfo:c}),e.next=32;break;case 31:X({sourceId:120});case 32:k((function(){Ce.value=!1}));case 33:e.next=50;break;case 35:return e.next=37,l({title:"删除同步任务",content:"即将删除该同步任务，是否继续操作？",icon:"warning-filled"});case 37:if(!Oe.value.length){e.next=47;break}return w=i.load("正在删除同步任务，请稍后..."),b=Oe.value.map(function(){var e=o(a().mark((function e(t){var r,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("modules"!==t.type){e.next=7;break}return e.next=3,ae({mName:t.data.name});case 3:return r=e.sent,e.abrupt("return",n(n({},r.data),{},{title:"接收任务",name:t.data.name}));case 7:return e.next=9,ue({send_id:t.data.id});case 9:return u=e.sent,e.abrupt("return",n(n({},u.data),{},{title:"发送任务",name:t.data.name}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=42,Promise.all(b);case 42:P=e.sent,w.close(),P.length>1?Z({title:"删除同步任务",autoTitle:"删除同步任务完成",resultData:P,resultColumn:[{label:"任务名称",prop:"name"},{label:"任务类型",prop:"title"},{label:"操作结果",prop:"msg",align:"rigth",render:function(e){return V("span",{class:e.status?"text-primary":"text-danger"},[e.msg])}}]}):i.request(P[0]),e.next=49;break;case 47:return e.next=49,s({loading:"正在删除同步任务，请稍后...",request:ae({mName:Le.value}),message:!0});case 49:Je();case 50:e.next=55;break;case 52:e.prev=52,e.t0=e.catch(0),Ce.value=!r;case 55:case"end":return e.stop()}}),e,null,[[0,52]])})));return function(t){return e.apply(this,arguments)}}(),We=function(){var e=o(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Xe=function(){var e=o(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f({sName:"rsync"});case 3:return t=e.sent,n=t.data,e.next=7,Q({name:"rsync",softData:n});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),Qe=function(){var e=o(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("ltd"===we){e.next=2;break}return e.abrupt("return",X({sourceId:310,disablePro:!0}));case 2:if(t){e.next=12;break}return Ve.sync_git=!0,e.next=6,l({title:"关闭git同步",content:"关闭后将不在同步git文件到网站目录，是否继续操作？",icon:"warning-filled"});case 6:return e.next=8,s({loading:"正在关闭，请稍后...",request:oe({site_id:xe.value.id}),message:!0});case 8:(n=e.sent).status&&(Ve.sync_git=!n.status),e.next=15;break;case 12:return Ve.sync_git=!1,e.next=15,$e();case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ze=function(){var e=o(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("ltd"===we){e.next=2;break}return e.abrupt("return",X({sourceId:310,disablePro:!0}));case 2:return e.next=4,$e();case 4:Ee.value=!0;case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$e=function(){var e=o(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ie({site_id:xe.value.id});case 3:n=e.sent,null!==(t=n.data)&&void 0!==t&&t.git_addr?(Se.git_addr=n.data.git_addr,Se.branch=n.data.branch,Se.cycle=n.data.cycle):(Se.git_addr="",Se.branch="",Se.cycle=1,Ee.value=!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),et=function(){var e=o(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke.value.validate();case 2:return e.next=4,l({title:"git同步覆盖提示",content:"从git同步文件到网站目录将覆盖网站目录的文件，是否继续操作？",icon:"warning-filled"});case 4:return e.next=6,s({loading:"正在设置，请稍后...",request:ce(n({site_id:xe.value.id},Se)),message:!0});case 6:e.sent.status&&(Ee.value=!1,He());case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),tt=function(){var e=o(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("ltd"===we){e.next=2;break}return e.abrupt("return",X({sourceId:310,disablePro:!0}));case 2:s({request:le({site_id:xe.value.id}),message:!0});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),nt=function(){var e=o(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt();case 2:Fe.value=!0;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),rt=function(){var e=o(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Te.value=!0,e.prev=1,e.next=4,se({path:"/www/wwwlogs/syncsite/"+xe.value.id+".log"});case 4:t=e.sent,Ie.value=t.data.data||"暂无日志数据",e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),h(e.t0);case 11:return e.prev=11,Te.value=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(){return e.apply(this,arguments)}}(),at=function(){var e=o(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s({loading:"正在设置放跨站，请稍后...",request:fe({path:Ve.path}),message:!0});case 2:e.sent.status&&He();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ut=function(){var e=o(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s({loading:"正在设置写访问日志，请稍后...",request:pe({id:xe.value.id}),message:!0});case 2:e.sent.status&&He();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ot=function(){var e=o(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return be.value=!0,e.prev=1,e.next=4,Ae();case 4:return e.next=6,He();case 6:return e.next=8,Me();case 8:return e.next=10,Je();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1);case 15:return e.prev=15,be.value=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})));return function(){return e.apply(this,arguments)}}(),it={class:""},ct={class:"formItem"},lt={class:"formItem"},st={class:"formItem"},ft={class:"formItem"},pt={class:"formItem"},dt={class:"formItem"},ht={class:"formItem"},vt={class:"flex items-center"},mt={class:"p-[20px]"},yt={class:"p-[20px]"},gt={class:"p-[20px]"};e("default",x(P({__name:"cataluge-setting",setup:function(e,t){var n=t.expose;return j(ot),n({init:ot}),function(e,t){var n=J,a=A,u=Y,o=B,i=H,c=m,l=R,s=y,f=z,p=M,d=g,h=r,x=C("bt-loading");return L((E(),S("div",it,[I("div",ct,[t[25]||(t[25]=I("span",{class:"formLabel"},"网站目录",-1)),V(n,{class:"mr-[12px]",modelValue:O(Ve).path,"onUpdate:modelValue":t[0]||(t[0]=function(e){return O(Ve).path=e}),icon:"el-folder-opened",onIconClick:O(Be),width:"32rem"},null,8,["modelValue","onIconClick"]),V(a,{type:"primary",onClick:O(Re)},{default:T((function(){return t[24]||(t[24]=[F("保存")])})),_:1},8,["onClick"])]),t[49]||(t[49]=I("span",{class:"formTips"},"当前网站的部署目录，可以选择其他目录",-1)),I("div",lt,[t[27]||(t[27]=I("span",{class:"formLabel"},"运行目录",-1)),V(o,{class:"mr-[12px] !w-[32rem]",modelValue:O(Ve).runPath,"onUpdate:modelValue":t[1]||(t[1]=function(e){return O(Ve).runPath=e})},{default:T((function(){return[(E(!0),S(U,null,q(O(Ve).dirs,(function(e){return E(),G(u,{key:e,label:e,value:e},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"]),V(a,{type:"primary",onClick:O(ze)},{default:T((function(){return t[26]||(t[26]=[F("保存")])})),_:1},8,["onClick"])]),t[50]||(t[50]=I("span",{class:"formTips"},"部分程序需要指定二级目录作为运行目录，如ThinkPHP5,Laravel",-1)),I("div",st,[t[29]||(t[29]=I("span",{class:"formLabel"},"添加FTP",-1)),V(i,{class:"mr-[12px]",modelValue:O(je).ftp_status,"onUpdate:modelValue":t[2]||(t[2]=function(e){return O(je).ftp_status=e}),onChange:O(Ye)},null,8,["modelValue","onChange"]),t[30]||(t[30]=I("span",{class:"text-[#999]"},"为当前目录添加一个FTP账号，以支持访问",-1)),V(c,{onClick:t[3]||(t[3]=function(e){return Pe.value=!0})},{default:T((function(){return t[28]||(t[28]=[F("点击配置>>")])})),_:1})]),I("div",ft,[t[32]||(t[32]=I("span",{class:"formLabel"},"文件同步",-1)),V(i,{class:"mr-[12px]",modelValue:O(Ce),"onUpdate:modelValue":t[4]||(t[4]=function(e){return N(Ce)?Ce.value=e:null}),onChange:O(Ke)},null,8,["modelValue","onChange"]),t[33]||(t[33]=I("i",{class:"svgtofont-icon-ltd text-[2rem] text-[#9B7E48] mr-4px"},null,-1)),t[34]||(t[34]=I("span",{class:"text-[#999]"},"可以同步网站文件至其他服务节点",-1)),V(c,{onClick:O(Xe)},{default:T((function(){return t[31]||(t[31]=[F("点击配置>>")])})),_:1},8,["onClick"])]),I("div",pt,[t[38]||(t[38]=I("span",{class:"formLabel"},"git同步",-1)),V(i,{class:"mr-[12px]",modelValue:O(Ve).sync_git,"onUpdate:modelValue":t[5]||(t[5]=function(e){return O(Ve).sync_git=e}),onChange:O(Qe)},null,8,["modelValue","onChange"]),t[39]||(t[39]=I("i",{class:"svgtofont-icon-ltd text-[2rem] text-[#9B7E48] mr-4px"},null,-1)),t[40]||(t[40]=I("span",{class:"text-[#999]"},"可以从git中下载文件到网站目录中",-1)),V(c,{onClick:O(Ze)},{default:T((function(){return t[35]||(t[35]=[F("点击配置>>")])})),_:1},8,["onClick"]),V(l,{direction:"vertical"}),V(c,{onClick:O(nt)},{default:T((function(){return t[36]||(t[36]=[F("查看日志")])})),_:1},8,["onClick"]),V(l,{direction:"vertical"}),V(c,{onClick:O(tt)},{default:T((function(){return t[37]||(t[37]=[F("立即同步")])})),_:1},8,["onClick"])]),V(l),I("div",dt,[t[41]||(t[41]=I("span",{class:"formLabel"},"防跨站攻击",-1)),V(i,{class:"mr-[12px]",modelValue:O(Ve).userini,"onUpdate:modelValue":t[6]||(t[6]=function(e){return O(Ve).userini=e}),onChange:O(at)},null,8,["modelValue","onChange"]),t[42]||(t[42]=I("span",{class:"text-[#999]"},"防跨站攻击(open_basedir)，防止黑客通过其他网站目录进行入侵攻击",-1))]),I("div",ht,[t[43]||(t[43]=I("span",{class:"formLabel"},"写访问日志",-1)),V(i,{class:"mr-[12px]",modelValue:O(Ve).logs,"onUpdate:modelValue":t[7]||(t[7]=function(e){return O(Ve).logs=e}),onChange:O(ut)},null,8,["modelValue","onChange"]),t[44]||(t[44]=I("span",{class:"text-[#999]"},"允许当前日志增加访问日志",-1))]),V(l),I("div",vt,[t[45]||(t[45]=I("span",{class:"mr-[20px] w-[7rem] text-right"},"密码访问",-1)),V(i,{modelValue:O(qe).status,"onUpdate:modelValue":t[8]||(t[8]=function(e){return O(qe).status=e}),onChange:O(De)},null,8,["modelValue","onChange"])]),O(qe).status?(E(),G(p,{key:0,model:O(qe),ref_key:"passVisitFormRef",ref:_e,rules:O(Ne),class:"mt-[20px]","label-width":"70px","label-position":"right"},{default:T((function(){return[V(f,{label:"账号",prop:"username"},{default:T((function(){return[V(s,{width:"20rem",modelValue:O(qe).username,"onUpdate:modelValue":t[9]||(t[9]=function(e){return O(qe).username=e}),placeholder:"不修改请留空"},null,8,["modelValue"])]})),_:1}),V(f,{label:"访问密码",prop:"password"},{default:T((function(){return[V(s,{width:"20rem",modelValue:O(qe).password,"onUpdate:modelValue":t[10]||(t[10]=function(e){return O(qe).password=e}),type:"password",placeholder:"不修改请留空"},null,8,["modelValue"])]})),_:1}),V(f,{label:"重复密码",prop:"rePass"},{default:T((function(){return[V(s,{width:"20rem",modelValue:O(qe).rePass,"onUpdate:modelValue":t[11]||(t[11]=function(e){return O(qe).rePass=e}),type:"password",placeholder:"不修改请留空"},null,8,["modelValue"])]})),_:1}),V(f,{label:" "},{default:T((function(){return[V(a,{type:"primary",onClick:O(Ge)},{default:T((function(){return t[46]||(t[46]=[F("保存")])})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model","rules"])):D("",!0),V(d,{title:"FTP配置",modelValue:O(Pe),"onUpdate:modelValue":t[16]||(t[16]=function(e){return N(Pe)?Pe.value=e:null}),area:42,showFooter:"",onConfirm:t[17]||(t[17]=function(e){return O(Ye)(!1,!0)})},{default:T((function(){return[I("div",mt,[V(p,{"label-position":"right",model:O(je)},{default:T((function(){return[V(f,{label:"用户名"},{default:T((function(){return[V(s,{modelValue:O(je).ftp_name,"onUpdate:modelValue":t[12]||(t[12]=function(e){return O(je).ftp_name=e}),placeholder:"请输入ftp用户名",style:{width:"100%"}},null,8,["modelValue"])]})),_:1}),V(f,{label:"密码"},{default:T((function(){return[V(n,{modelValue:O(je).ftp_pwd,"onUpdate:modelValue":t[13]||(t[13]=function(e){return O(je).ftp_pwd=e}),icon:"el-refresh",onIconClick:t[14]||(t[14]=function(){return O(je).ftp_pwd=O(v)(16)}),width:"32rem"},null,8,["modelValue"])]})),_:1}),V(f,{label:"根目录"},{default:T((function(){return[V(s,{modelValue:O(Ve).path,"onUpdate:modelValue":t[15]||(t[15]=function(e){return O(Ve).path=e}),disabled:"",style:{width:"100%"}},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model"])])]})),_:1},8,["modelValue"]),V(d,{title:"配置GIT同步",modelValue:O(Ee),"onUpdate:modelValue":t[21]||(t[21]=function(e){return N(Ee)?Ee.value=e:null}),area:42,showFooter:"",onConfirm:O(et)},{default:T((function(){return[I("div",yt,[V(p,{"label-position":"right",ref_key:"gitFormRef",ref:ke,model:O(Se),rules:O(Ue)},{default:T((function(){return[V(f,{label:"git地址",prop:"git_addr"},{default:T((function(){return[V(s,{modelValue:O(Se).git_addr,"onUpdate:modelValue":t[18]||(t[18]=function(e){return O(Se).git_addr=e}),placeholder:"请输入git地址",width:"24rem"},null,8,["modelValue"])]})),_:1}),V(f,{label:"分支"},{default:T((function(){return[V(s,{modelValue:O(Se).branch,"onUpdate:modelValue":t[19]||(t[19]=function(e){return O(Se).branch=e}),placeholder:"请输入git分支,为空默认主分支",width:"24rem"},null,8,["modelValue"])]})),_:1}),V(f,{label:"同步周期"},{default:T((function(){return[V(s,{modelValue:O(Se).cycle,"onUpdate:modelValue":t[20]||(t[20]=function(e){return O(Se).cycle=e}),"text-type":"天",type:"number",min:1,width:"24rem"},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model","rules"])])]})),_:1},8,["modelValue","onConfirm"]),V(d,{title:"GIT日志",modelValue:O(Fe),"onUpdate:modelValue":t[23]||(t[23]=function(e){return N(Fe)?Fe.value=e:null}),area:70},{default:T((function(){return[I("div",gt,[V(a,{type:"primary",onClick:O(rt)},{default:T((function(){return t[47]||(t[47]=[F("刷新")])})),_:1},8,["onClick"]),L(V(h,{class:"!h-[54rem] !w-full my-[12px]",modelValue:O(Ie),"onUpdate:modelValue":t[22]||(t[22]=function(e){return N(Ie)?Ie.value=e:null}),config:e.config},null,8,["modelValue","config"]),[[x,O(Te)]]),t[48]||(t[48]=I("span",{class:"text-[#999] mt-[8px]"},"提示：支持Ctrl + F，快捷搜索日志内容",-1))])]})),_:1},8,["modelValue"])])),[[x,O(be)]])}}}),[["__scopeId","data-v-75103360"]]))}}}))}();
