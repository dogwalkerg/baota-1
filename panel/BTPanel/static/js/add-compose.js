import{c as e,h as a,r as l,R as s,o as r,k as t,l as o,e as m,x as i,q as d,p as u,N as p,a7 as c,P as n,a4 as f}from"./base-lib.js?v=1734676359";import{G as v,a4 as _,e as b}from"./utils-lib.js?v=1734676359";import{k}from"./useMethods.js?v=1734676359";import{$ as g,a0 as j,a1 as y}from"./useStore3.js?v=1734676359";const x={class:"flex flex-col lib-box"},V={class:"flex items-center mb-[1.5rem]"},h=b(e({__name:"add-compose",props:{compData:{default:()=>({})}},emits:["close"],setup(e,{expose:b,emit:h}){const w=e,q=h,S=a({template_id:"",project_name:"",remark:""}),C=l(!1),D=e=>{var a;S.template_id=e,S.remark=null==(a=N.value.find((a=>a.value===e)))?void 0:a.remark},N=s([]),U=async()=>{v({request:g(),data:Array,success:e=>{var a,l;N.value=e.map((e=>({value:e.id,label:e.name,remark:e.remark}))),S.template_id=(null==(a=N.value[0])?void 0:a.value)||"",S.remark=(null==(l=N.value[0])?void 0:l.remark)||""}})},z=l(),A={template_id:[{required:!0,message:"请选择容器编排模板",trigger:["blur"]}],project_name:[{required:!0,message:"请输入名称",trigger:["blur"]}]};r((()=>{U()}));return b({onConfirm:async()=>{try{await z.value.validate((async e=>{var a;if(e){let e={...S,project_id:null==(a=w.compData)?void 0:a.id};v({request:w.compData.isEdit?j({data:JSON.stringify(e)}):y({data:JSON.stringify(S)}),loading:"提交中...",message:!0,success:e=>{e.status&&q("close")}})}}))}catch(e){}}}),(e,a)=>{const l=_,s=c,r=n,v=f;return t(),o("div",x,[m(v,{ref_key:"cmdFormRef",ref:z,size:"small",model:u(S),rules:A,disabled:u(C),class:"relative w-full","label-width":"90px","label-position":"right",onSubmit:a[4]||(a[4]=p((()=>{}),["prevent"]))},{default:i((()=>[d("div",V,[m(s,{prop:"template_id",label:"容器编排模板"},{default:i((()=>[m(l,{modelValue:u(S).template_id,"onUpdate:modelValue":a[0]||(a[0]=e=>u(S).template_id=e),options:u(N),size:"default",class:"!w-[30rem]",onChange:D},null,8,["modelValue","options"])])),_:1}),d("div",{class:"bt-link ml-[1rem]",onClick:a[1]||(a[1]=e=>u(k)(U))},"创建")]),m(s,{prop:"project_name",class:"justify-center",label:"名称"},{default:i((()=>[m(r,{class:"!w-[30rem]",modelValue:u(S).project_name,"onUpdate:modelValue":a[2]||(a[2]=e=>u(S).project_name=e),placeholder:"请输入容器编排名称"},null,8,["modelValue"])])),_:1}),m(s,{prop:"remark",class:"justify-center",label:"备注"},{default:i((()=>[m(r,{class:"!w-[30rem]",type:"textarea",modelValue:u(S).remark,"onUpdate:modelValue":a[3]||(a[3]=e=>u(S).remark=e),placeholder:"请输入备注"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","disabled"])])}}}),[["__scopeId","data-v-123586e8"]]);export{h as A};
