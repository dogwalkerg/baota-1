!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function r(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?t(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function n(t,r,n){return(r=function(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,r||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==e(r)?r:r+""}(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function o(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */o=function(){return r};var t,r={},n=Object.prototype,u=n.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(t){f=function(e,t,r){return e[t]=r}}function p(e,t,r,n){var o=t&&t.prototype instanceof b?t:b,u=Object.create(o.prototype),a=new z(n||[]);return i(u,"_invoke",{value:S(e,r,a)}),u}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}r.wrap=p;var d="suspendedStart",m="suspendedYield",v="executing",y="completed",g={};function b(){}function w(){}function _(){}var x={};f(x,l,(function(){return this}));var j=Object.getPrototypeOf,E=j&&j(j(B([])));E&&E!==n&&u.call(E,l)&&(x=E);var O=_.prototype=b.prototype=Object.create(x);function L(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function k(t,r){function n(o,i,a,l){var c=h(t[o],t,i);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==e(f)&&u.call(f,"__await")?r.resolve(f.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):r.resolve(f).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,l)}))}l(c.arg)}var o;i(this,"_invoke",{value:function(e,t){function u(){return new r((function(r,o){n(e,t,r,o)}))}return o=o?o.then(u,u):u()}})}function S(e,r,n){var o=d;return function(u,i){if(o===v)throw Error("Generator is already running");if(o===y){if("throw"===u)throw i;return{value:t,done:!0}}for(n.method=u,n.arg=i;;){var a=n.delegate;if(a){var l=V(a,n);if(l){if(l===g)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=v;var c=h(e,r,n);if("normal"===c.type){if(o=n.done?y:m,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function V(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,V(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var u=h(o,e.iterator,r.arg);if("throw"===u.type)return r.method="throw",r.arg=u.arg,r.delegate=null,g;var i=u.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function z(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function B(r){if(r||""===r){var n=r[l];if(n)return n.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var o=-1,i=function e(){for(;++o<r.length;)if(u.call(r,o))return e.value=r[o],e.done=!1,e;return e.value=t,e.done=!0,e};return i.next=i}}throw new TypeError(e(r)+" is not iterable")}return w.prototype=_,i(O,"constructor",{value:_,configurable:!0}),i(_,"constructor",{value:w,configurable:!0}),w.displayName=f(_,s,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,f(e,s,"GeneratorFunction")),e.prototype=Object.create(O),e},r.awrap=function(e){return{__await:e}},L(k.prototype),f(k.prototype,c,(function(){return this})),r.AsyncIterator=k,r.async=function(e,t,n,o,u){void 0===u&&(u=Promise);var i=new k(p(e,t,n,o),u);return r.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},L(O),f(O,s,"Generator"),f(O,l,(function(){return this})),f(O,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},r.values=B,z.prototype={constructor:z,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&u.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var l=u.call(i,"catchLoc"),c=u.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&u.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:B(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},r}function u(e,t,r,n,o,u,i){try{var a=e[u](i),l=a.value}catch(e){return void r(e)}a.done?t(l):Promise.resolve(l).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){u(i,n,o,a,l,"next",e)}function l(e){u(i,n,o,a,l,"throw",e)}a(void 0)}))}}System.register(["./base-lib-legacy.js?v=1734676359","./utils-lib-legacy.js?v=1734676359","./useMethod-legacy2.js?v=1734676359","./__commonjsHelpers__-legacy.js?v=1734676359","./validator-legacy.js?v=1734676359","./index-legacy91.js?v=1734676359","./column-legacy.js?v=1734676359"],(function(e,t){"use strict";var n,u,a,l,c,s,f,p,h,d,m,v,y,g,b,w,_,x,j,E,O,L,k,S,V,N,P,z,B,G,C;return{setters:[function(e){n=e.r,u=e.h,a=e.c,l=e.o,c=e.k,s=e.l,f=e.q,p=e.e,h=e.x,d=e.p,m=e.y,v=e.v,y=e.J,g=e.z,b=e.I,w=e.Q,_=e.aw,x=e.aY,j=e.ae,E=e.ad,O=e.a7,L=e.A,k=e.a4},function(e){S=e.t,V=e.o,N=e.G,P=e.b,z=e.j},function(e){B=e.a3,G=e.a4,C=e.a5},null,null,null,null],execute:function(){var t=P(),I=n(),T=n({status:!1,num:180,compress:!1,log_size:10,stype:"day",hour:2,minute:0}),U=n("开启后默认每天 2 点 0 分进行切割日志文件，如需修改下面配置"),q=u({num:[{validator:function(e,t,r){var n="日志保留最新份必须大于0",o="请输入整数";""===t?r(new Error("请输入日志保留最新份")):isNaN(t)||Number(t)<1?r(new Error(n)):Number.isInteger(Number(t))?r():r(new Error(o))},trigger:"blur"}],log_size:[{required:!0,message:"请输入日志大小",trigger:"blur"},{validator:function(e,t,r){!/^\d+(\.\d+)?$/.test(t)||t<=0?r(new Error("请输入大于0的数")):r()},trigger:["blur","change"]}],hour:[{required:!0,message:"请输入小时",trigger:"blur"},{validator:function(e,t,r){t<0||t>23||!Number.isInteger(Number(t))?r(new Error("请输入0-23之间的整数")):r()},trigger:["blur","change"]}],minute:[{required:!0,message:"请输入分钟",trigger:"blur"},{validator:function(e,t,r){t<0||t>59||!Number.isInteger(Number(t))?r(new Error("请输入0-59之间的整数")):r()},trigger:["blur","change"]}]}),F=function(){var e=i(o().mark((function e(){var t,r,n,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B();case 3:t=e.sent,r=t.data.value,n=r.status,u=r.log_size,T.value=t.data.value,T.value.status=Boolean(n),T.value.log_size=u?S(u,!1,2,"MB"):"10.00",U.value="开启后".concat("size"===T.value.stype?"日志文件大小超过":"默认每天").concat("size"===T.value.stype?T.value.log_size+"MB":" ".concat(T.value.hour," 点 ").concat(T.value.minute," 分"),"进行切割日志文件，如需修改下面配置"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=i(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T.value.status=!t,e.next=3,V({title:"设置日志切割任务",content:(t?"开启后":"关闭后停止")+"对计划任务日志进行切割，是否继续操作？"});case 3:return e.next=5,N({loading:"正在设置，请稍后...",request:G(),message:!0,success:F});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e,t;U.value="开启后".concat("size"===T.value.stype?"日志文件大小超过 ":"默认每天 ").concat("size"===T.value.stype?T.value.log_size+" MB ":"".concat((null===(e=T.value.hour)||void 0===e?void 0:e.toString())||"-"," 点 ").concat((null===(t=T.value.minute)||void 0===t?void 0:t.toString())||"-"," 分"),"进行切割日志文件，如需修改下面配置")},A=function(e){return e<10?"0".concat(e):"".concat(e)},Y=function(){var e=i(o().mark((function e(){var n,u,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.value.validate();case 2:if(n=T.value,u=n.stype,i=n.log_size,!("size"===u&&i<=0)){e.next=6;break}return t.error("日志大小必须大于0"),e.abrupt("return");case 6:return(a=r({},T.value)).status=Number(T.value.status),a.compress=Number(T.value.compress),"day"===a.stype&&(a.log_size=0),e.next=12,N({loading:"正在设置，请稍后...",request:C(a),message:!0});case 12:F();case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H={class:"p-[20px]"},J={class:"mt-[16px] flex items-center"},Q={class:"ml-[8px]"},R={class:"py-[20px]"},$={class:"flex items-center"},K={class:"mt-[8px] leading-8 text-[1.2rem] list-disc ml-[20px]"},W={key:0};e("default",a({__name:"index",setup:function(e,t){return(0,t.expose)({onConfirm:Y}),l((function(){return F()})),function(e,t){var r,n=w,o=_,u=x,i=j,a=E,l=O,S=z,V=L,N=k;return c(),s("div",H,[f("div",J,[p(o,{placement:"bottom",width:"200","popper-class":"green-tips-popover",trigger:"hover"},{reference:h((function(){return[p(n,{modelValue:d(T).status,"onUpdate:modelValue":t[0]||(t[0]=function(e){return d(T).status=e}),onChange:d(M)},{default:h((function(){return t[7]||(t[7]=[m("日志切割")])})),_:1},8,["modelValue","onChange"])]})),default:h((function(){return[t[8]||(t[8]=f("span",{class:"p-[8px] inline-block"},"当日志文件过大时，读取和搜索时间会增加，同时也会占用存储空间，因此需要对日志进行切割以方便管理和维护。",-1))]})),_:1}),f("span",Q,v(d(U)),1)]),p(u),f("div",R,[p(N,{ref_key:"logSplitRef",ref:I,model:d(T),rules:d(q),class:"-ml-3rem"},{default:h((function(){return[p(l,{label:"切割方式"},{default:h((function(){return[p(a,{modelValue:d(T).stype,"onUpdate:modelValue":t[1]||(t[1]=function(e){return d(T).stype=e}),onChange:d(D)},{default:h((function(){return[p(i,{value:"size"},{default:h((function(){return t[9]||(t[9]=[m("按日志大小")])})),_:1}),p(i,{value:"day"},{default:h((function(){return t[10]||(t[10]=[m("按执行周期")])})),_:1})]})),_:1},8,["modelValue","onChange"])]})),_:1}),"day"==d(T).stype?(c(),y(l,{key:0,label:"执行时间"},{default:h((function(){return[f("div",$,[p(l,{label:"",prop:"hour"},{default:h((function(){return[p(S,{onBlur:d(D),type:"number",width:"18.6rem",modelValue:d(T).hour,"onUpdate:modelValue":t[2]||(t[2]=function(e){return d(T).hour=e}),min:"0",max:"23"},{prepend:h((function(){return t[11]||(t[11]=[m("每天")])})),append:h((function(){return t[12]||(t[12]=[m("时")])})),_:1},8,["onBlur","modelValue"])]})),_:1}),p(l,{label:"",prop:"minute",class:"!mt-0"},{default:h((function(){return[p(S,{type:"number",width:"12rem",min:"0",onBlur:d(D),max:"59",modelValue:d(T).minute,"onUpdate:modelValue":t[3]||(t[3]=function(e){return d(T).minute=e})},{append:h((function(){return t[13]||(t[13]=[m("分")])})),_:1},8,["onBlur","modelValue"])]})),_:1})])]})),_:1})):"size"==d(T).stype?(c(),y(l,{key:1,label:"日志大小",prop:"log_size"},{default:h((function(){return[p(S,{onBlur:d(D),type:"number",width:"16rem",modelValue:d(T).log_size,"onUpdate:modelValue":t[4]||(t[4]=function(e){return d(T).log_size=e})},{append:h((function(){return t[14]||(t[14]=[m("MB")])})),_:1},8,["onBlur","modelValue"])]})),_:1})):g("",!0),p(l,{label:"保留最新",prop:"num"},{default:h((function(){return[p(S,{type:"number",modelValue:d(T).num,"onUpdate:modelValue":t[5]||(t[5]=function(e){return d(T).num=e}),min:1,width:"14rem"},{append:h((function(){return t[15]||(t[15]=[m("份")])})),_:1},8,["modelValue"])]})),_:1}),p(l,{label:" "},{default:h((function(){return[p(n,{modelValue:d(T).compress,"onUpdate:modelValue":t[6]||(t[6]=function(e){return d(T).compress=e})},{default:h((function(){return t[16]||(t[16]=[m("切割后压缩日志")])})),_:1},8,["modelValue"])]})),_:1}),p(l,{label:" "},{default:h((function(){return[p(V,{type:"primary",onClick:d(Y)},{default:h((function(){return t[17]||(t[17]=[m("保存")])})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model","rules"]),f("ul",K,["day"===d(T).stype?(c(),s("li",W," 每天的 "+v(null!==(r=d(T).hour)&&void 0!==r&&r.toString()?d(A)(d(T).hour):"--")+":"+v(d(T).minute.toString()?d(A)(d(T).minute):"--")+" 执行一次， 被切割后日志将会被清空 ",1)):(c(),s(b,{key:1},[t[18]||(t[18]=f("li",null,"每5分钟执行一次， 被切割后日志将会被清空",-1)),t[19]||(t[19]=f("li",null,"【日志大小】：日志文件大小超过指定大小时进行切割日志文件",-1))],64)),t[20]||(t[20]=f("li",null,"【保留最新】：保留最新的日志文件，超过指定数量时，将自动删除旧的日志文件",-1)),t[21]||(t[21]=f("li",null,"该功能开启后会对计划任务在/www/server/cron目录下产生的日志(.log格式)进行切割",-1))])])])}}}))}}}))}();
