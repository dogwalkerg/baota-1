import{_ as a}from"./index90.js?v=1734676359";import{k as t,b as e}from"./utils-lib.js?v=1734676359";import{getJavaSpringProject as s,groupAddProjects as r}from"./site.js?v=1734676359";import{c as o,r as i,bF as n,B as l,k as c,l as m,e as p,x as u,C as d,p as f}from"./base-lib.js?v=1734676359";import{a as h}from"./column.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./index91.js?v=1734676359";const j={class:"p-[2rem]"},_=o({__name:"group-add-projects",props:{compData:{}},emits:["close"],setup(o,{expose:_,emit:g}){const v=o,b=e(),x=g,y=i([]),D=i(!1),C=i([]),k=[h(),{prop:"name",label:"项目名称"}],w=a=>{C.value=a.map((a=>a.id))};return n((async()=>{try{D.value=!0;const a=(a=>{const t=v.compData.projectList.map((a=>a.id));return a.filter((a=>!t.includes(a.id)))})((await s()).data);if(0===a.length)return b.error("暂无可用项目"),void x("close");y.value=a}catch(a){}finally{D.value=!1}})),_({onConfirm:async()=>{try{if(0===C.value.length)return void b.error("请选择项目");const a=await r({group_id:v.compData.group_id,project_ids:JSON.stringify(C.value)});b.request(a),a.status&&(x("close"),v.compData.refreshEvent())}catch(a){}}}),(e,s)=>{const r=t,o=a,i=l("bt-loading");return c(),m("div",j,[p(o,null,{"header-left":u((()=>s[0]||(s[0]=[]))),"header-right":u((()=>s[1]||(s[1]=[]))),content:u((()=>[d(p(r,{"max-height":300,column:k,data:f(y),onSelectionChange:w},null,8,["data"]),[[i,f(D)]])])),"footer-left":u((()=>s[2]||(s[2]=[]))),_:1})])}}});export{_ as default};
