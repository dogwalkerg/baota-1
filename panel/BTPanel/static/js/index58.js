import{l as e,H as t,M as a,u as s,al as o,am as r,p as n,ao as i}from"./utils-lib.js?v=1734676359";import{_ as l}from"./index90.js?v=1734676359";import{r as p,i as c,c as _,s as u,e as m,y as d,w as f,o as v,n as j,k as h,J as g,x as b,p as w,q as y}from"./base-lib.js?v=1734676359";import{a as x,h as k,g as C,u as O}from"./column.js?v=1734676359";import{u as S,g as B,b as L,o as T,i as E,s as I,j as N,d as P,f as R,m as D,k as A}from"./useController3.js?v=1734676359";import{u as V,S as H}from"./useStore7.js?v=1734676359";import{u as M}from"./index124.js?v=1734676359";import{f as q,i as G}from"./validator.js?v=1734676359";import"./index.vue_vue_type_style_index_0_scoped_03ce946a_lang.js?v=1734676359";import{getNetVersion as J,getPluginInfo as z}from"./site.js?v=1734676359";const{isRefreshList:F,siteInfo:U}=V(),{editGeneralProject:$,addGeneralProject:K,setSiteInfo:Q}=H(),W=()=>{U.value=null,e({title:"添加.Net项目",area:72,component:()=>t((()=>import("./index310.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),showFooter:!0})},X=(a,s="")=>{Q(a,s),e({title:".Net项目管理["+a.name+"] -- 添加时间["+a.addtime+"]",area:[84,72],component:()=>t((()=>import("./index311.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)})},Y=e=>{},Z=p([]),ee=c((()=>!!U.value)),te=p({project_path:"",project_name:"",port:"",project_cmd:"",run_user:"www",project_ps:"",release_firewall:!1,dotnet_version:"",is_power_on:!1,bind_extranet:!1}),ae=async(e,t,s)=>{try{await s.value.validate();const t={data:JSON.stringify({...e.value,is_power_on:e.value.is_power_on?1:0})},o=U.value?$:K,r=await o(t);return a.msg({dangerouslyUseHTMLString:!0,message:r.msg,type:r.status?"success":"error",duration:r.status?2e3:0,showClose:!r.status,customClass:"!max-w-[66rem]"}),F.value=!0,r.status}catch(o){return!1}},se=()=>{q({type:"all",path:te.value.project_path,change:e=>{te.value.project_path=e}})},oe=async(e=!1)=>{try{const t=await J();if(Z.value=t.data.map((e=>({label:e,value:e}))),e)return a.success("Net版本，刷新成功");te.value.dotnet_version=t.data[0]}catch(t){}},re=async()=>{if(await oe(),ee.value){const{project_config:e,ps:t}=U.value;Object.assign(te.value,{...e,project_ps:t,bind_extranet:1===e.bind_extranet,is_power_on:1===e.is_power_on,port:e.port})}},ne=()=>{Object.assign(te.value,{project_path:"",project_name:"",port:"",project_cmd:"",run_user:"www",project_ps:"",release_firewall:!1,dotnet_version:"",is_power_on:!1,bind_extranet:!1})},ie=async()=>{try{const{data:e}=await z({sName:"dotnet"});await G({name:"dotnet",softData:e})}catch(e){}},le=_({__name:"index",setup(e){const{mainHeight:a}=s(),{getSiteList:p,setSiteInfo:c}=H(),{activeType:_,isRefreshList:V,siteInfo:q}=u(H()),{BtOperation:G}=o({options:[{type:"button",label:"添加Net项目",active:!0,onClick:W},{type:"button",label:".Net环境管理",onClick:ie}]}),J=M({key:"type_id",name:"Net分类",options:()=>[{label:"全部分类",value:"all"}],event:E,ignore:["0"],field:"type_name"}),z=i([P(),R({classList:A}),{label:"删除项目",value:"delete",event:D}]),{BtTable:F,BtPage:U,BtRefresh:$,BtSearch:K,BtColumn:Q,BtBatch:Y,BtTableCategory:Z,refresh:ee,config:te}=r({request:e=>{const{type_id:t,...a}=e;return p({...a,type_id:n(t)||"all"===t?"":t,table:"sites"})},columns:[x(),S({onClick:e=>{X(e)}}),B({onClick:(e,t)=>{if("setting"===t)return void X(e,"state");const a=e.run?"stop":"start";I(e,"restart"===t?t:a)}}),k(),C({table:"sites",width:200}),L({onClick:e=>{X(e,"ssl")}}),O([{title:"设置",onClick:e=>{X(e)}},{title:"删除",onClick:e=>{N(e)}}])],extension:[J,z],empty:()=>m("span",null,[d("您的列表为空，您可以"),m("span",{class:"bt-link",onClick:W},[d("添加一个项目")])])});return f(V,(async e=>{var t;if(e){if(await ee(),null==(t=q.value)?void 0:t.name){const e=te.data.find((e=>e.name===q.value.name));e&&c(e)}V.value=!1}})),v((()=>{j((()=>{t((()=>import("./index310.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),t((()=>import("./index311.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)}))})),(e,t)=>{const s=l;return h(),g(s,null,{"header-left":b((()=>[m(w(G)),y("div",{class:"flex items-center ml-1rem",onClick:t[0]||(t[0]=(...e)=>w(T)&&w(T)(...e))},t[1]||(t[1]=[y("i",{class:"svgtofont-desired text-[1.6rem]"},null,-1),y("span",{class:"bt-link"},"需求反馈",-1)]))])),"header-right":b((()=>[m(w(Z),{class:"!w-[200px] mr-[10px]"}),m(w(K),{class:"mr-[10px]",placeholder:"请输入项目名称或备注"}),m(w($),{class:"mr-[10px]"}),m(w(Q))])),content:b((()=>[m(w(F),{"max-height":w(a)-220},null,8,["max-height"])])),"footer-left":b((()=>[m(w(Y))])),"footer-right":b((()=>[m(w(U))])),_:1})}}}),pe=Object.freeze(Object.defineProperty({__proto__:null,default:le},Symbol.toStringTag,{value:"Module"}));export{ne as $,ae as a,re as b,ee as c,ie as d,pe as e,oe as g,Y as i,te as n,se as o,Z as v};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
