!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||r(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,u,o,s=[],i=!0,c=!1;try{if(u=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=u.call(n)).done)&&(s.push(r.value),s.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{if(!i&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||r(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){if(e){if("string"==typeof e)return a(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(t,n,r){return(n=function(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,n||"default");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function i(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */i=function(){return n};var t,n={},r=Object.prototype,a=r.hasOwnProperty,u=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function p(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(t){p=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var a=t&&t.prototype instanceof b?t:b,o=Object.create(a.prototype),s=new V(r||[]);return u(o,"_invoke",{value:S(e,n,s)}),o}function v(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=f;var d="suspendedStart",m="suspendedYield",h="executing",g="completed",y={};function b(){}function x(){}function w(){}var _={};p(_,s,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(D([])));E&&E!==r&&a.call(E,s)&&(_=E);var j=w.prototype=b.prototype=Object.create(_);function L(e){["next","throw","return"].forEach((function(t){p(e,t,(function(e){return this._invoke(t,e)}))}))}function P(t,n){function r(u,o,s,i){var c=v(t[u],t,o);if("throw"!==c.type){var l=c.arg,p=l.value;return p&&"object"==e(p)&&a.call(p,"__await")?n.resolve(p.__await).then((function(e){r("next",e,s,i)}),(function(e){r("throw",e,s,i)})):n.resolve(p).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,i)}))}i(c.arg)}var o;u(this,"_invoke",{value:function(e,t){function a(){return new n((function(n,a){r(e,t,n,a)}))}return o=o?o.then(a,a):a()}})}function S(e,n,r){var a=d;return function(u,o){if(a===h)throw Error("Generator is already running");if(a===g){if("throw"===u)throw o;return{value:t,done:!0}}for(r.method=u,r.arg=o;;){var s=r.delegate;if(s){var i=O(s,r);if(i){if(i===y)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=h;var c=v(e,n,r);if("normal"===c.type){if(a=r.done?g:m,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(a=g,r.method="throw",r.arg=c.arg)}}}function O(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,O(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var u=v(a,e.iterator,n.arg);if("throw"===u.type)return n.method="throw",n.arg=u.arg,n.delegate=null,y;var o=u.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function V(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function D(n){if(n||""===n){var r=n[s];if(r)return r.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var u=-1,o=function e(){for(;++u<n.length;)if(a.call(n,u))return e.value=n[u],e.done=!1,e;return e.value=t,e.done=!0,e};return o.next=o}}throw new TypeError(e(n)+" is not iterable")}return x.prototype=w,u(j,"constructor",{value:w,configurable:!0}),u(w,"constructor",{value:x,configurable:!0}),x.displayName=p(w,l,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,p(e,l,"GeneratorFunction")),e.prototype=Object.create(j),e},n.awrap=function(e){return{__await:e}},L(P.prototype),p(P.prototype,c,(function(){return this})),n.AsyncIterator=P,n.async=function(e,t,r,a,u){void 0===u&&(u=Promise);var o=new P(f(e,t,r,a),u);return n.isGeneratorFunction(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},L(j),p(j,l,"Generator"),p(j,s,(function(){return this})),p(j,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=D,V.prototype={constructor:V,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var u=this.tryEntries.length-1;u>=0;--u){var o=this.tryEntries[u],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var i=a.call(o,"catchLoc"),c=a.call(o,"finallyLoc");if(i&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var u=r;break}}u&&("break"===e||"continue"===e)&&u.tryLoc<=t&&t<=u.finallyLoc&&(u=null);var o=u?u.completion:{};return o.type=e,o.arg=t,u?(this.method="next",this.next=u.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;R(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:D(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},n}function c(e,t,n,r,a,u,o){try{var s=e[u](o),i=s.value}catch(e){return void n(e)}s.done?t(i):Promise.resolve(i).then(r,a)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var u=e.apply(t,n);function o(e){c(u,r,a,o,s,"next",e)}function s(e){c(u,r,a,o,s,"throw",e)}o(void 0)}))}}System.register(["./utils-lib-legacy.js?v=1734676359","./base-lib-legacy.js?v=1734676359","./useController-legacy.js?v=1734676359","./index-legacy90.js?v=1734676359","./index-legacy353.js?v=1734676359","./form-item-legacy.js?v=1734676359","./useStore-legacy3.js?v=1734676359","./validator-legacy.js?v=1734676359","./index-legacy185.js?v=1734676359","./useStore-legacy7.js?v=1734676359","./column-legacy.js?v=1734676359","./site-legacy.js?v=1734676359","./index-legacy101.js?v=1734676359"],(function(e,r){"use strict";var a,u,s,c,p,f,v,d,m,h,g,y,b,x,w,_,k,E,j,L,P,S,O,C,R,V,D,q,T,I,z,U,F,N,A,H,B,G,M,J,K,W,X,Y,Q,Z,$,ee,te,ne,re,ae,ue,oe,se,ie,ce,le,pe,fe,ve,de,me,he,ge,ye,be,xe,we,_e,ke,Ee,je,Le,Pe,Se,Oe,Ce,Re,Ve,De,qe,Te,Ie,ze,Ue,Fe,Ne,Ae,He,Be,Ge,Me,Je,Ke,We,Xe,Ye,Qe,Ze,$e,et,tt,nt,rt,at,ut,ot,st,it,ct,lt,pt,ft,vt,dt,mt,ht,gt,yt,bt,xt,wt,_t,kt,Et,jt,Lt;return{setters:[function(e){a=e.G,u=e.M,s=e.J,c=e.bU,p=e.bV,f=e.o,v=e.bX,d=e.an,m=e.ao,h=e.D,g=e.bR,y=e.bS,b=e.l,x=e.j,w=e.ah,_=e._,k=e.e,E=e.u,j=e.O,L=e.b,P=e.x,S=e.a4,O=e.X,C=e.aj,R=e.H,V=e.bY,D=e.v,q=e.aa},function(e){T=e.s,I=e.g,z=e.r,U=e.c,F=e.e,N=e.y,A=e.az,H=e.k,B=e.l,G=e.q,M=e.x,J=e.p,K=e.M,W=e.v,X=e.C,Y=e.D,Q=e.i,Z=e.aw,$=e.A,ee=e.ah,te=e.ag,ne=e.o,re=e.a1,ae=e.a5,ue=e.aY,oe=e.aj,se=e.t,ie=e.B,ce=e.I,le=e.aX,pe=e.J,fe=e.N,ve=e.z,de=e.j,me=e.F,he=e.h,ge=e.W,ye=e.a7,be=e.Q,xe=e.a4,we=e.w},function(e){_e=e.n,ke=e.k,Ee=e.D},function(e){je=e._},function(e){Le=e.B},function(e){Pe=e.h,Se=e.F,Oe=e.i,Ce=e.j},function(e){Re=e.au,Ve=e.av,De=e.aw,qe=e.ax,Te=e.ay,Ie=e.az,ze=e.aA,Ue=e.aB,Fe=e.aC,Ne=e.aD,Ae=e.aE,He=e.aF,Be=e.aG,Ge=e.aH,Me=e.aI,Je=e.aJ,Ke=e.aK,We=e.aL,Xe=e.aM,Ye=e.aN,Qe=e.aO,Ze=e.aP,$e=e.aQ,et=e.aR,tt=e.aS,nt=e.aT,rt=e.aU,at=e.aV,ut=e.aW,ot=e.aX,st=e.aY,it=e.aZ,ct=e.a_,lt=e.a$,pt=e.b0,ft=e.b1,vt=e.b2,dt=e.b3,mt=e.b4,ht=e.b5},function(e){gt=e.f},function(e){yt=e.B},function(e){bt=e.S},function(e){xt=e.c,wt=e.a,_t=e.b,kt=e.u},function(e){Et=e.saveFileBody,jt=e.getRedirectList},function(e){Lt=e._}],execute:function(){var Pt=I("DOCKERSITE-DOMAIN-STORE",(function(){var e=z(),t=z(!1),r=function(){var e=l(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a({request:Re(t)});case 3:return n=e.sent,e.abrupt("return",{data:n.data,status:!0});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{status:!1,msg:"获取域名信息失败"});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=l(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a({loading:"正在设置HTTPS端口，请稍候...",request:Ve(t),message:!0});case 3:return n=e.sent,e.abrupt("return",o({},n));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{status:!1,msg:"设置https端口失败"});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=l(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a({loading:"正在添加域名，请稍后...",request:De(t)});case 3:return n=e.sent,e.abrupt("return",{status:n.status,msg:n.msg,data:n.data});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{status:!1,msg:"添加域名失败"});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=l(i().mark((function e(t){var n,r,a,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.load("正在删除域名，请稍后..."),e.prev=1,e.next=4,qe(t);case 4:if(a=e.sent,o=null!==(r=a.data)&&void 0!==r&&r.hasOwnProperty("status")?a.data:a,!s(o.data)){e.next=8;break}return e.abrupt("return",{status:o.status,msg:o.data[0].msg});case 8:return e.abrupt("return",{status:o.status,msg:(null==o?void 0:o.data)||(null==o?void 0:o.error_msg)||o.msg});case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",{status:!1,msg:"删除域名失败"});case 15:return e.prev=15,n.close(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,11,15,18]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=l(i().mark((function e(t){var r,a,o,s,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.load("正在删除域名，请稍后..."),e.prev=1,e.next=4,qe(t);case 4:return a=e.sent,o=a.data,s=o.success.map((function(e){return{name:e,status:!0}})),c=Object.entries(o.error).map((function(e){var t=n(e,2);return{name:t[0],msg:t[1],status:!1}})),s=s.concat(c),e.abrupt("return",{data:s,status:!0});case 12:return e.prev=12,e.t0=e.catch(1),e.abrupt("return",{status:!1,msg:"删除域名失败"});case 16:return e.prev=16,r.close(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,12,16,19]])})));return function(t){return e.apply(this,arguments)}}();return{isRefreshDomain:t,port:e,delMultDomainEvent:v,getDomainListEvent:r,addDomainEvent:p,setPortEvent:c,delDomainEvent:f}})),St=function(){return T(Pt())},Ot=_e().siteInfo,Ct=St(),Rt=Ct.port,Vt=Ct.isRefreshDomain,Dt=Pt(),qt=Dt.getDomainListEvent,Tt=Dt.setPortEvent,It=Dt.addDomainEvent,zt=Dt.delDomainEvent,Ut=Dt.delMultDomainEvent,Ft=z(!1),Nt=z(""),At=function(){var e=l(i().mark((function e(){var t,n,r,a,o,s,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=Nt.value,n=["21","25","443","888","8888","8443"],""!==t){e.next=6;break}return u.error("域名不能为空"),e.abrupt("return",!1);case 6:if(r=String(t.match(/:(\d+)/g)).replace(/:/g,""),!n.includes(r)){e.next=10;break}return u.error("端口不能为常用端口21、25、443、888、8888、8443"),e.abrupt("return",!1);case 10:return e.next=12,Bt();case 12:if(e.sent){e.next=15;break}return e.abrupt("return",!1);case 15:return i=t,l=void 0,p=void 0,l=Ot.value,p=l.name,a={id:l.id,site_name:p,domains:i},e.next=18,It(a);case 18:return(o=e.sent).status&&ke({title:"域名添加结果",resultData:(null==o||null===(s=o.data)||void 0===s?void 0:s.domains)||(null==o||null===(c=o.data)||void 0===c?void 0:c.data)||[],autoTitle:"添加域名完成"}),Vt.value=!0,Nt.value="",e.abrupt("return",o.status);case 25:e.prev=25,e.t0=e.catch(0);case 28:case"end":return e.stop()}var i,l,p}),e,null,[[0,25]])})));return function(){return e.apply(this,arguments)}}(),Ht=function(){var e=l(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=void 0,r=Ot.value,t={site_name:r.name,id:r.id},e.next=4,qt(t);case 4:return n=e.sent,Rt.value=Number(n.data.https_port)||"未开启",e.abrupt("return",{data:n.data.domain_list,total:n.data.domain_list.length,other:{port:n.data.https_port}});case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",{data:[],total:0,other:{}});case 13:case"end":return e.stop()}var r}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),Bt=function(){var e=l(i().mark((function e(){var t,n,r,a,o,s,l=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=l.length>0&&void 0!==l[0]?l[0]:Nt.value,n=t.trim().replace(" ","").split("\n"),r=n.findIndex((function(e){return e.split(":")[0].length<3})),a=0;case 4:if(!(a<n.length)){e.next=16;break}if(o=n[a],!(s=o.includes(":"))||c(o)){e.next=10;break}return u.error("第"+(a+1)+"行【"+o+"】域名格式错误"),e.abrupt("return",!1);case 10:if(s||p(o)){e.next=13;break}return u.error("第"+(a+1)+"行【"+o+"】域名格式错误"),e.abrupt("return",!1);case 13:a++,e.next=4;break;case 16:if(-1===r){e.next=19;break}return u.error("第 ".concat(r+1," 个域名长度不符合要求（必须大于3个字符）")),e.abrupt("return",!1);case 19:return e.abrupt("return",n);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Gt=function(){var e=l(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Tt({site_name:Ot.value.name,https_port:t.value.port});case 3:null!=(n=e.sent)&&n.status&&(Rt.value=Number(t.value.port)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),Mt=function(e){var t=Ot.value;return{id:t.id,site_name:t.name,domain:e.name,port:e.port}},Jt=function(){var e=l(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f({icon:"warning-filled",title:"删除【".concat(t.name,"】"),content:"删除".concat(t.name,"后，将无法使用该域名访问网站，是否继续操作？")});case 3:return n=Mt(t),e.next=6,zt(n);case 6:return r=e.sent,u.request(r),Vt.value=!0,e.abrupt("return",r);case 12:e.prev=12,e.t0=e.catch(0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),Kt=function(e){var t=Ot.value.name,n=e.map((function(e){return{id:e.id,port:e.port,domain:e.name,site_name:t}}));return{del_domain_list:JSON.stringify(n)}},Wt=function(){var e=l(i().mark((function e(t){var n,r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f({icon:"warning-filled",title:"批量删除",content:"同时删除选中的域名，是否继续？",type:"calc"});case 3:return n=[],r=Kt(t),e.next=7,Ut(r);case 7:return a=e.sent,n=a.data,e.next=11,ke({resultData:n,autoTitle:"删除域名完成"});case 11:return Vt.value=!0,e.abrupt("return",{status:!0,msg:"删除域名成功"});case 15:return e.prev=15,e.t0=e.catch(0),e.abrupt("return",{status:!1,msg:"删除域名失败"});case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),Xt=function(){var e=l(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ht();case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",{data:[],total:0,other:{}});case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),Yt={class:""},Qt={class:"flex items-end mb-[12px]"},Zt=U({__name:"index",setup:function(e){var t,n=St(),r=n.isRefreshDomain,a=n.port,u=m([{label:"删除",value:"delete",event:(t=l(i().mark((function e(t,n,r,a){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Wt(r.value);case 1:case"end":return e.stop()}}),e)}))),function(e,n,r,a){return t.apply(this,arguments)})}]),o=v({request:Xt,columns:[{type:"selection",width:40},{label:"域名",prop:"name",width:400,render:function(e){return F("div",{class:"truncate"},[F("a",{class:"bt-link",href:"http://".concat(e.name,":").concat(e.port),target:"_blank"},[e.name])])}},{label:"端口",prop:"port"},{label:"操作",align:"right",render:function(e){return 1===p.data.length?F("span",null,[N("不可操作")]):A("span",{class:"cursor-pointer bt-link",onClick:function(){Jt(e)}},"删除")}}],extension:[u,d(r)]}),s=o.BtTable,c=o.BtBatch,p=o.config,f=function(){var e=h({data:{port:a.value},options:function(e){return Q((function(){return[Pe("HTTPS端口",(function(){return F(Le,{modelValue:e.value.port,"onUpdate:modelValue":function(t){return e.value.port=t}},null)}),"port",{attrs:{min:1,max:65535},rules:[g({message:"请输入端口号",trigger:"blur"}),y()]})]}))},submit:Gt}),t=e.BtForm,n=e.submit;b({title:"更换端口",area:42,showFooter:!0,component:function(){return F(t,{class:"p-2rem"},null)},onConfirm:n})};return function(e,t){var n=x,r=Z,u=$,o=je;return H(),B("div",Yt,[G("div",Qt,[F(r,{ref:"popover",placement:"top-start",width:"41rem","popper-class":"green-tips-popover !p-0 !border-none",visible:J(Ft),"onUpdate:visible":t[2]||(t[2]=function(e){return K(Ft)?Ft.value=e:null}),"trigger-keys":[],trigger:"focus"},{default:M((function(){return t[3]||(t[3]=[G("div",{class:"!p-[12px] bg-[#20a53a] text-white"},[N(" 如需绑定外网，请换行填写，每行一个域名，默认为80端口 "),G("br"),N(" IP地址格式：192.168.1.199 "),G("br"),N(" 泛解析添加方法 *.domain.com "),G("br"),N(" 如另加端口格式为 www.domain.com:88 ")],-1)])})),reference:M((function(){return[F(n,{modelValue:J(Nt),"onUpdate:modelValue":t[0]||(t[0]=function(e){return K(Nt)?Nt.value=e:null}),type:"textarea",resize:"none",rows:4,width:"42rem",onFocus:t[1]||(t[1]=function(e){return Ft.value=!0}),placeholder:"如需绑定外网，请换行填写，每行一个域名，默认为80端口\nIP地址格式：192.168.1.199\n泛解析添加方法 *.domain.com\n如另加端口格式为 www.domain.com:88"},null,8,["modelValue"])]})),_:1},8,["visible"]),F(u,{type:"primary",class:"absolute",style:{right:"4rem",top:"5rem"},onClick:J(At)},{default:M((function(){return t[4]||(t[4]=[N("添加")])})),_:1},8,["onClick"])]),F(o,null,{"header-right":M((function(){return[G("div",null,[N(" HTTPS端口："+W(J(a))+" ",1),X(G("span",{class:"bt-link cursor-pointer",onClick:f},"更换",512),[[Y,"number"==typeof J(a)]])])]})),content:M((function(){return[F(J(s),{"max-height":440})]})),"footer-left":M((function(){return[F(J(c))]})),_:1}),t[5]||(t[5]=G("ul",{class:"mt-[.8rem] leading-8 text-[1.2rem] list-disc ml-2rem"},[G("li",null,"建议所有域名都使用默认的80端口")],-1))])}}}),$t=I("DOCKER-SITE-SITE-DIR-STORE",(function(){var e=_e().siteInfo,t=z([]),n=z({path:"",run_path:"",userini:!1}),r=function(){var t=l(i().mark((function t(){var r,u;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r={id:e.value.id},t.next=4,a({loading:"正在获取版本，请稍后...",request:Te(r)});case 4:(u=t.sent).status?n.value.path=u.data.path:w(u),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),w(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),s=function(){var r=l(i().mark((function r(){var u,o;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,u={id:e.value.id},r.next=4,a({loading:"正在获取版本，请稍后...",request:Ie(u)});case 4:(o=r.sent).status?(n.value.userini=o.data.userini,n.value.run_path=o.data.runPath.runPath,t.value=o.data.runPath.dirs.map((function(e){return{label:e,value:e}}))):w(o),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),w(r.t0);case 11:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(){return r.apply(this,arguments)}}(),c=function(){var t=l(i().mark((function t(n,r){var s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=3;break}return u.error("请选择目录"),t.abrupt("return");case 3:s=o({site_name:e.value.name,id:e.value.id},"path"===r?{path:n}:{run_path:n}),a({loading:"正在获取版本，请稍后...",message:!0,request:"path"===r?ze(s):Ue(s)});case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),p=function(){var t=l(i().mark((function t(n){var r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r={id:e.value.id,status:n?1:0},a({loading:"正在设置，请稍后...",message:!0,request:Fe(r)});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{dirOptions:t,resetData:function(){t.value=[],n.value.path="",n.value.run_path=""},getFormData:function(){return n},getDir:r,formData:n,saveDirPath:c,setDirUser:p,getUserini:s}})),en={class:"p-[2rem] overflow-auto"};var tn=U({__name:"index",setup:function(e,t){var n=t.expose,r=$t(),a=T(r),u=a.dirOptions,o=a.formData,s=r.getDir,i=r.resetData,c=r.saveDirPath,l=r.setDirUser,p=r.getUserini,f=h({data:function(){return o.value},options:function(e){return Q((function(){return[Pe("网站目录",(function(){return F("div",null,[F("div",{class:"formItem"},[F(x,{modelValue:e.value.path,"onUpdate:modelValue":function(t){return e.value.path=t},width:"32rem"},{append:function(){return F($,{onClick:function(){return function(e){gt({type:"dir",path:e.value.path||"/www/dk_project/wwwroot",change:function(t,n){e.value.path=t}})}(e)}},{default:function(){return[F(_,{icon:"icon-file_mode",class:"cursor-pointer"},null)]}})}}),F($,{type:"primary",class:"!ml-[1.2rem]",onClick:function(){return c(e.value.path,"path")}},{default:function(){return[N("保存")]}})]),F("span",{class:"formTips"},[N("当前网站的部署目录，可以选择其他目录")])])}),"path",{rules:[{required:!1,trigger:"change",message:"请选择网站目录"}]}),Pe("运行目录",(function(){var t,n;return F("div",null,[F("div",{class:"formItem"},[F(ee,{class:"!w-[32rem]",modelValue:e.value.run_path,"onUpdate:modelValue":function(t){return e.value.run_path=t}},(n=t=u.value.map((function(e){return F(te,{key:e.value,label:e.label,value:e.value},null)})),"function"==typeof n||"[object Object]"===Object.prototype.toString.call(n)&&!ae(n)?t:{default:function(){return[t]}})),F($,{type:"primary",class:"!ml-[1.2rem]",onClick:function(){return c(e.value.run_path,"run_path")}},{default:function(){return[N("保存")]}})]),F("span",{class:"formTips"},[N("部分程序需要指定二级目录作为运行目录，如ThinkPHP5,Laravel")])])}),"run_path",{rules:[{required:!1,trigger:"change",message:"请选择网站运行目录"}]}),Se((function(){return F("div",null,[F(ue,null,null),F("div",{class:"formItem"},[F("span",{class:"formLabel"},[N("防跨站攻击")]),F(oe,{class:"mr-[12px]",modelValue:e.value.userini,"onUpdate:modelValue":function(t){return e.value.userini=t},onChange:l},null),F("span",{class:"text-[#999]"},[N("防跨站攻击(open_basedir)，防止黑客通过其他网站目录进行入侵攻击")])])])}),{key:"userini",rules:[]})]}))}}),v=f.BtForm;return ne((function(){s(),p()})),re((function(){i()})),n({init:function(){s(),p()}}),function(e,t){return H(),B("div",en,[F(J(v))])}}}),nn=k(tn,[["__scopeId","data-v-ee825c1d"]]),rn=I("SITE-PSEUDO-STORE",(function(){var e=function(){var e=l(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a({loading:"正在删除伪静态规则，请稍候...",request:Ne(t),message:!0});case 3:e.sent,e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",{status:!1,msg:"删除失败"});case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),t=function(){var e=l(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a({request:Ae(t)});case 3:return n=e.sent,r=n.data,e.abrupt("return",{data:r,status:status});case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{status:!1,msg:"获取伪静态列表失败"});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),n=function(){var e=l(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a({loading:"正在设置模板，请稍候...",request:He(t),message:!0});case 3:return n=e.sent,e.abrupt("return",{status:n.status,msg:n.msg});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{status:!1,msg:"设置模板失败"});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return{delPseudoStaticEvent:e,getReWriteListEvent:t,setTemplateEvent:n}})),an=_e().siteInfo,un=bt().getFileEvent,on=E(),sn=on.plugin,cn=on.getGlobalInfo,ln=se(sn.value).webserver,pn=rn(),fn=pn.delPseudoStaticEvent,vn=pn.getReWriteListEvent,dn=pn.setTemplateEvent,mn=z(""),hn=z([]),gn=z(""),yn=z([]),bn=z(!1),xn=z(""),wn=z(!1),_n=[{content:"请选择您的应用，若设置伪静态后，网站无法正常访问，请尝试设置回default"},{content:"您可以对伪静态规则进行修改，修改完后保存即可。"}],kn=function(e){return!hn.value.includes(e)},En=function(){var e=l(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f({title:"删除伪静态模板【".concat(t.name,"】"),content:"删除后不可恢复，确定删除吗？",icon:"warning-filled"});case 2:return e.next=4,fn(t);case 4:if(!e.sent.status){e.next=10;break}return e.next=8,jn();case 8:return e.next=10,Pn();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),jn=function(){var e=l(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={siteName:an.value.name},wn.value=!0,e.next=4,vn(t);case 4:n=e.sent,Ln(n.data),wn.value=!1;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ln=function(){var e=l(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:yn.value=t.rewrite,hn.value=t.default_list,xn.value=t.sitePath+"/.htaccess",gn.value=t.rewrite[0]||"";case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Pn=function(){var e=l(i().mark((function e(){var t,n,r=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:{site_name:an.value.name},e.prev=1,wn.value=!0,!t.path){e.next=9;break}return e.next=6,un(t);case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,Be(t);case 11:e.t0=e.sent;case 12:return n=e.t0,mn.value=n.data.data,wn.value=!1,e.abrupt("return",n);case 18:return e.prev=18,e.t1=e.catch(1),wn.value=!1,e.abrupt("return",{data:"获取伪静态内容失败"});case 23:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(){return e.apply(this,arguments)}}(),Sn=function(e){var t="/www/server/panel/rewrite/".concat(ln.value,"/").concat(e,".conf");Pn({path:"0.当前"===e?"":t})},On=function(){var e=l(i().mark((function e(){var t,n,r=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{rewrite_conf:mn.value,site_name:"".concat(an.value.name)},e.next=3,Ge(t);case 3:n=e.sent,u.request(n),n.status&&jn();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Cn=function(){var e=l(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(n=o(o({},t),{},{data:mn.value})).name=n.name.trim(),!n.name.includes(" ")){e.next=5;break}return e.abrupt("return",u.error("模板名称不能包含空格"));case 5:if(""!==n.name){e.next=7;break}return e.abrupt("return",u.error("模板名称不能为空"));case 7:if(!yn.value.includes(n.name)){e.next=9;break}return e.abrupt("return",u.error("模板名称不能和已有的模板名称重复且不可为空"));case 9:return e.next=11,dn(n);case 11:if(!(r=e.sent).status){e.next=18;break}return bn.value=!1,e.next=16,jn();case 16:return e.next=18,Pn();case 18:return e.abrupt("return",r.status);case 21:return e.prev=21,e.t0=e.catch(0),e.abrupt("return",!1);case 25:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(t){return e.apply(this,arguments)}}(),Rn=function(){var e=l(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cn();case 2:return e.next=4,jn();case 4:return e.next=6,Pn();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Vn={class:"h-full"},Dn={class:"flex items-center justify-between"},qn={class:"flex items-center justify-between"},Tn=["onClick"],In={class:"my-[12px]"},zn=U({__name:"index",setup:function(e){var t=function(){var e,t=h({options:function(){return Q((function(){return[{type:"input",label:"模板名称",key:"name",attrs:{placeholder:"请输入模板名称"},rules:[{required:!0,message:"请输入模板名称",trigger:"blur"}]}]}))},submit:(e=l(i().mark((function e(t,n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:return e.next=4,Cn(t.value);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),function(t,n){return e.apply(this,arguments)})}),n=t.BtForm,r=t.submit;b({title:"另存为模板",area:42,showFooter:!0,component:function(){return F(n,{class:"p-2rem"},null)},onConfirm:r})};return ne(Rn),function(e,n){var r=te,a=ee,u=yt,o=$,s=j,i=ie("bt-loading");return H(),B("div",Vn,[X((H(),B("div",null,[G("div",Dn,[F(a,{class:"!w-[15rem]",modelValue:J(gn),"onUpdate:modelValue":n[0]||(n[0]=function(e){return K(gn)?gn.value=e:null}),onChange:J(Sn)},{default:M((function(){return[(H(!0),B(ce,null,le(J(yn),(function(e,t){return H(),pe(r,{key:t,value:e},{default:M((function(){return[G("div",qn,[G("span",null,W(e),1),J(kn)(e)?(H(),B("span",{key:0,class:"el-icon-close cursor-pointer text-[1.4rem] ml-1rem",onClick:fe((function(t){return J(En)({name:e})}),["stop"])},null,8,Tn)):ve("",!0)])]})),_:2},1032,["value"])})),128))]})),_:1},8,["modelValue","onChange"]),n[3]||(n[3]=G("span",{class:"flex items-center"},[N("规则转换工具： "),G("a",{class:"bt-link",href:"https://www.bt.cn/Tools"},[N("Apache转Nginx "),G("i",{class:"svgtofont-el-link"})])],-1))]),G("div",In,[F(u,{id:"staticContentRef",request:!1,class:"!h-[40rem] !w-full border border-[#DCDFE6] rounded-[4px]",modelValue:J(mn),"onUpdate:modelValue":n[1]||(n[1]=function(e){return K(mn)?mn.value=e:null}),onSave:J(On)},null,8,["modelValue","onSave"])]),G("div",null,[F(o,{type:"primary",onClick:n[2]||(n[2]=function(e){return J(On)()})},{default:M((function(){return n[4]||(n[4]=[N("保存")])})),_:1}),F(o,{onClick:t},{default:M((function(){return n[5]||(n[5]=[N("另存为模板")])})),_:1})]),F(s,{options:J(_n),class:"ml-[20px] mt-[20px]"},null,8,["options"])])),[[i,J(wn)],[i,"正在加载内容，请稍候...","title"]])])}}}),Un=L(),Fn=_e().siteInfo,Nn=z("master"),An=z("server_block"),Hn=[{label:"server块",value:"server_block"},{label:"HTTP块",value:"http_block"}],Bn=[{content:"主配置文件不允许修改，如需自定义配置请到上方自定义配置文件中操作"}],Gn=[{content:"保存前请检查输入的配置文件是否正确，错误的配置可能会导致网站访问异常"},{content:"如果您对此配置不熟悉，请勿添加自定义配置"},{isHtml:!0,content:'server块的nginx官方配置文档：<a class="text-primary cursor-pointer" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#server" target="_blank" >点击跳转</a>'}],Mn=[{content:"保存前请检查输入的配置文件是否正确，错误的配置可能会导致网站访问异常"},{content:"如果您对此配置不熟悉，请勿添加自定义配置"},{isHtml:!0,content:'http块的nginx官方配置文档：<a class="text-primary cursor-pointer" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#http" target="_blank" >点击跳转</a>'}],Jn=z(Gn),Kn=z(""),Wn=z(!1),Xn=function(){var e=l(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Wn.value=!0,e.next=4,Me({site_name:Fn.value.name});case 4:return t=e.sent,(n=t.data).status?"master"===Nn.value?Kn.value=n.data.site_conf:(Kn.value=n.data[An.value],Jn.value="server_block"===An.value?Gn:Mn):Un.error(n.msg),e.abrupt("return",{data:Kn.value});case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",{data:""});case 14:return e.prev=14,Wn.value=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,10,14,17]])})));return function(){return e.apply(this,arguments)}}();de((function(){Un.error("主配置文件不允许修改，如需自定义配置请到上方自定义配置文件中操作")}),3e3);var Yn,Qn=function(){var e=l(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("master"!==Nn.value){e.next=2;break}return e.abrupt("return",{status:!1,msg:"主配置文件不允许修改，如需自定义配置请到上方自定义配置文件中操作"});case 2:return t=Un.load("正在保存内容，请稍候..."),e.prev=3,e.next=6,Je({site_name:Fn.value.name,conf_type:An.value,body:Kn.value});case 6:return n=e.sent,Un.msg({dangerouslyUseHTMLString:!0,message:n.msg,type:n.status?"success":"error",duration:n.status?2e3:0,showClose:!n.status}),e.abrupt("return",n);case 11:return e.prev=11,e.t0=e.catch(3),w(e.t0),e.abrupt("return",{status:!1,msg:"保存文件失败"});case 15:return e.prev=15,t.close(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[3,11,15,18]])})));return function(){return e.apply(this,arguments)}}(),Zn={class:"h-full"},$n={key:0,class:"mb-1rem text-[#666] flex items-center"},er={class:"mt-1rem"},tr={key:0,class:"ml-[20px] mt-[2rem]"},nr=U({__name:"files",props:{type:{}},setup:function(e){var t=e;return function(e,n){var r=S,a=j,u=yt,o=$,s=ie("bt-loading");return H(),B("div",Zn,[G("div",null,["master"!==J(Nn)?(H(),B("div",$n,[n[4]||(n[4]=G("span",null,"选择配置块：",-1)),F(r,{class:"!w-[16rem]",modelValue:J(An),"onUpdate:modelValue":n[0]||(n[0]=function(e){return K(An)?An.value=e:null}),options:J(Hn),onChange:n[1]||(n[1]=function(e){return J(Xn)()})},null,8,["modelValue","options"])])):ve("",!0),X(F(a,{options:J(Bn),"list-style":"none",class:"ml-[12px] text-[1.2rem] mb-1rem"},null,8,["options"]),[[Y,"master"===J(Nn)]]),X(F(u,{class:me(["!w-[64rem] border border-[#DCDFE6] rounded-[4px]","master"===t.type?"!h-[50rem]":"!h-[34rem]"]),modelValue:J(Kn),"onUpdate:modelValue":n[2]||(n[2]=function(e){return K(Kn)?Kn.value=e:null}),id:1e3*Math.random(),editorOption:{readOnly:"master"===J(Nn),mode:"ace/mode/nginx"},request:{get:J(Xn),set:J(Qn)}},null,8,["modelValue","class","id","editorOption","request"]),[[s,J(Wn)]]),G("div",er,["master"!==J(Nn)?(H(),pe(o,{key:0,type:"primary",onClick:J(Qn)},{default:M((function(){return n[5]||(n[5]=[N("保存")])})),_:1},8,["onClick"])):ve("",!0),F(o,{type:"default",onClick:n[3]||(n[3]=function(e){return J(P)({value:J(Kn)})})},{default:M((function(){return n[6]||(n[6]=[N("复制")])})),_:1})])]),"master"!==J(Nn)?(H(),B("div",tr,[F(a,{options:J(Jn)},null,8,["options"])])):ve("",!0)])}}}),rr=k(U({__name:"index",setup:function(e,t){var n=t.expose,r=he({site_conf:"",http_block:"",server_block:""});ge("configList",r),ge("tabActive",Nn);var a=O({type:"card",value:Nn,options:[{label:"主配置文件",name:"master",render:function(){return F(nr,{type:"master"},null)}},{label:"自定义配置文件",name:"custom",lazy:!0,render:function(){return F(nr,{type:"custom"},null)}}]}).BtTabs;return n({init:Xn}),function(e,t){return H(),B("div",null,[F(J(a),{onChange:J(Xn)},null,8,["onChange"])])}}}),[["__scopeId","data-v-a15321c0"]]),ar=I("DOCKERSITE-REDIRECT-STORE",(function(){var e=z(!1),t=function(){var e=l(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a({loading:"正在修改，请稍后...",request:Ke(t),message:!0});case 3:return n=e.sent,e.abrupt("return",{status:n.status,msg:n.msg});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{status:!1,msg:"修改状态失败"});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),n=function(){var e=l(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a({loading:"正在保存内容，请稍候...",request:Et(t),data:{status:Boolean,msg:String},message:!0});case 3:return n=e.sent,e.abrupt("return",{status:n.status,msg:n.msg});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{status:!1,msg:"保存文件失败"});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),r=function(){var e=l(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a({loading:"正在删除，请稍后...",request:We(t),message:!0});case 3:return n=e.sent,e.abrupt("return",{status:n.status,msg:n.msg});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{status:!1,msg:"删除重定向失败"});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=l(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a({loading:"正在获取内容，请稍候...",request:Xe(t)});case 3:return n=e.sent,e.abrupt("return",{data:{content:n.data.data,redirect_conf_file:t.path},status:!0});case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{status:!1,msg:"获取配置文件失败"});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=l(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a({request:jt(t,"proxy"),data:Array});case 3:return n=e.sent,e.abrupt("return",{data:n,total:n.length,other:{}});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{data:[],total:0,other:{}});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=l(i().mark((function e(t,n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a({loading:"正在提交，请稍后...",request:n?Ke(t):Ye(t),message:!0});case 3:return r=e.sent,e.abrupt("return",{status:r.status,msg:r.msg});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{status:!1,msg:"添加重定向失败"});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),c=function(){var e=l(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a({request:Re(t)});case 3:return n=e.sent,e.abrupt("return",{data:n.data,status:!0});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{status:!1,msg:"获取域名信息失败"});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return{changeStatusEvent:t,delRedirectEvent:r,getRedirectFileEvent:u,getRedirectDataEvent:o,submitRedirectEvent:s,isRefreshList:e,saveFileEvent:n,getDomainListEvent:c}})),ur=function(){return T(ar())},or=_e().siteInfo,sr=ur().isRefreshList,ir=ar(),cr=ir.getDomainListEvent,lr=ir.changeStatusEvent,pr=ir.delRedirectEvent,fr=ir.getRedirectDataEvent,vr=ir.getRedirectFileEvent,dr=ir.submitRedirectEvent,mr=ir.saveFileEvent,hr=z([]),gr=z(!1),yr=z(!1),br=z(""),xr=z(""),wr=z(!1),_r=z(),kr=z(!1),Er=e("K",z()),jr=e("H",z()),Lr=[{content:"设置域名重定向后，该域名的404重定向将失效"},{content:"取消重定向时，由于浏览器会缓存重定向信息，在清除缓存前，浏览器仍会根据缓存自动重定向"}],Pr=(e("L",[{content:"重定向类型：表示访问选择的“域名”或输入的“路径”时将会重定向到指定URL"},{content:"目标URL：可以填写你需要重定向到的站点，目标URL必须为可正常访问的URL，否则将返回错误"},{content:"重定向方式：使用301表示永久重定向，使用302表示临时重定向"},{content:"保留URI参数：表示重定向后访问的URL是否带有子路径或参数如设置访问http://b.com"},{content:"重定向到http://a.com 保留URI参数： http://b.com/1.html ---\x3e http://a.com/1.html"},{content:"不保留URI参数：http://b.com/1.html ---\x3e http://a.com"}]),function(e){var t=o(o({},e),{},{type:e.type?0:1,redirectdomain:JSON.stringify(e.redirectdomain)});return delete t.redirect_conf_file,t.site_name=or.value.name,delete t.sitename,t}),Sr=function(){var e=l(i().mark((function e(t,n,r,a){var u,s,c,p;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=a.label,s=a.value,c=new Map([["start","批量启用选中的规则后，配置的重定向域名/目录将会生效"],["stop","批量停用选中的规则后，配置的重定向域名/目录将会失效"],["delete","批量删除当前选中的规则后，配置的重定向域名/目录将会彻底失效"]]),p=function(){var e=l(i().mark((function e(t){var n,r,a,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new Map([["start",Ke],["stop",Ke],["delete",We]]),r=t.redirectname,a=n.get(s),e.t0=s,e.next="start"===e.t0||"stop"===e.t0?6:"delete"===e.t0?11:15;break;case 6:if(!a){e.next=11;break}return u=Pr(o(o({},t),{},{type:"stop"===s?1:0})),e.next=10,a(u);case 10:case 14:return e.abrupt("return",e.sent);case 11:if(!a){e.next=15;break}return e.next=14,a({site_name:or.value.name,redirectname:r});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=5,t({title:"批量".concat(u),content:"".concat(c.get(s),"，是否继续操作？"),column:[{label:"规则名称",render:function(e){var t;return e.errorpage?"404错误页面":"domain"===e.domainorpath?null===(t=C(e.redirectdomain,"array",[]))||void 0===t?void 0:t.join("、"):e.redirectpath}},xt()],onConfirm:function(){var e=l(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(p);case 2:sr.value=!0;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});case 5:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),Or=function(){var e=l(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=Pr(t),e.next=4,lr(n);case 4:return(r=e.sent).status&&(sr.value=!0),e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",{status:!1,msg:"修改状态失败"});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),Cr=function(){var e=l(i().mark((function e(t){var n,r,a,u,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f({title:"删除重定向【".concat("domain"===t.domainorpath?null===(n=C(t.redirectdomain,"array",[]))||void 0===n?void 0:n.join("、"):t.redirectpath,"】"),content:"删除选中的规则后，配置的重定向域名/目录将指向源地址，是否继续操作？",icon:"warning-filled",type:"calc"});case 3:return r=or.value.name,a=t.redirectname,u={proxy:{site_name:r,redirectname:a}},e.next=8,pr(u.proxy);case 8:return(o=e.sent).status&&(sr.value=!0),e.abrupt("return",o);case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return",{status:!1,msg:"删除重定向失败"});case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),Rr=function(){var e=l(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,yr.value=!0,n={path:t.redirect_conf_file},e.next=5,vr(n);case 5:(r=e.sent).status?(gr.value=!0,br.value=r.data.content,xr.value=r.data.redirect_conf_file):(u.error(r.msg),gr.value=!1),yr.value=!1,e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),gr.value=!1;case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),Vr=function(){var e=l(i().mark((function e(){var t,n,r=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{data:br.value,encoding:"utf-8",path:xr.value},e.next=3,mr(t);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Dr=function(){var e=l(i().mark((function e(){var t,n,r,a=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]&&a[0],n={sitename:or.value.name},e.prev=2,e.next=5,fr(n);case 5:return r=e.sent,t&&u.success("刷新成功"),wr.value=!1,_r.value=null,Array.isArray(r.data)&&r.data.forEach((function(e){e.errorpage&&(wr.value=!0,_r.value=e)})),e.abrupt("return",r);case 13:return e.prev=13,e.t0=e.catch(2),e.abrupt("return",{data:[],total:0,other:{}});case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}(),qr=function(e){kr.value=!!e,jr.value=e||!1,b({title:"".concat(e?"编辑":"添加","重定向").concat(e?"【".concat(e.sitename,"】"):""),area:68,component:function(){return R((function(){return r.import("./add-redirect-legacy.js?v=1734676359")}),void 0,r.meta.url)},btn:!0})},Tr=function(){var e=l(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Dr();case 3:return t=e.sent,hr.value=Array.isArray(t.data)?t.data:[],e.abrupt("return",t);case 8:e.prev=8,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),Ir=function(e){var t=or.value.name,n=e.holdpath,r=e.type,a=e.redirectdomain;return o(o({},e),{},{site_name:t,holdpath:n?"1":"0",type:r?"1":"0",redirectdomain:JSON.stringify(a),redirectname:e.redirectname||(new Date).getTime()})},zr=(e("I",function(){var e=l(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=Ir(t),e.next=4,dr(n,kr.value);case 4:return(r=e.sent).status&&(sr.value=!0),e.abrupt("return",r.status);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),e("J",l(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={site_name:or.value.name,id:or.value.id},e.next=4,cr(t);case 4:return n=e.sent,Er.value=n.data.domain_list.filter((function(e){return!hr.value.some((function(t){return t.sitename.includes(e.name)}))})),e.abrupt("return",n);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",{status:!1,msg:"获取域名失败"});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))),{class:"h-full"}),Ur=U({__name:"index",setup:function(e){var t=L(),n=ur().isRefreshList,r=m([{label:"启用重定向规则",value:"start",event:Sr},{label:"停用重定向规则",value:"stop",event:Sr},{label:"删除重定向规则",value:"delete",event:Sr}]),a=v({request:Tr,columns:[wt(),{label:"被重定向",render:function(e){var t;return e.errorpage?"404错误页面":"domain"===e.domainorpath?null===(t=C(e.redirectdomain,"array",[]))||void 0===t?void 0:t.join("、"):e.redirectpath}},{label:"重定向类型",prop:"domainorpath",render:function(e){return e.errorpage?"错误":"domain"===e.domainorpath?"域名":"路径"}},{label:"重定向到",render:function(e){return e.topath?e.topath:e.tourl}},_t({prop:"type",event:Or,data:["已停止","运行中"]}),kt([{width:70,title:"配置文件",onClick:function(e){if(!e.type)return t.warn("请先启用重定向规则再查看配置文件");c(e)}},{title:"编辑",onClick:function(e){qr(e)}},{onClick:Cr,title:"删除"}])],extension:[V(),r,d(n)]}),u=a.BtTable,o=a.BtRefresh,s=a.BtBatch,c=function(){var e=l(i().mark((function e(n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.load("正在查询配置文件内容，请稍候..."),e.next=3,Rr(n);case 3:r.close(),b({title:"另存为模板",area:54,showFooter:!1,component:function(){return F("div",{class:"p-[20px]"},[N("提示：Ctrl+F 搜索关键字，Ctrl+S 保存，Ctrl+H 查找替换"),X(F(yt,{class:"!h-[36rem] my-[8px]",ref:"aceEditor",modelValue:br.value,"onUpdate:modelValue":function(e){return br.value=e},filePath:xr.value,onSave:function(){return Vr()}},null),[[ie("bt-loading"),yr.value]]),F($,{type:"primary",onClick:function(){return Vr()}},{default:function(){return[N("保存")]}}),F("ul",{class:"mt-[8px] leading-8 text-[1.2rem] list-disc ml-[20px]"},[F("li",null,[N("此处为该负载均衡的配置文件，若您不了解配置规则,请勿随意修改。")])])])}});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return function(e,t){var n=je,r=j;return H(),B("div",zr,[F(n,null,{"header-left":M((function(){return[F(J($),{type:"primary",onClick:t[0]||(t[0]=function(e){return J(qr)()})},{default:M((function(){return t[1]||(t[1]=[N("添加重定向")])})),_:1})]})),"header-right":M((function(){return[F(J(o))]})),content:M((function(){return[F(J(u),{"max-height":460})]})),"footer-left":M((function(){return[F(J(s))]})),_:1}),F(r,{class:"mt-2rem",options:J(Lr),"list-style":"disc"},null,8,["options"])])}}}),Fr=_e().siteInfo,Nr=z(),Ar=z(!1),Hr=z(!1),Br=he({fix:"jpg,jpeg,gif,png,js,css",domains:"",return_rule:"404",http_status:!1,status:!1}),Gr=z(null),Mr=[{content:'【URL后缀】一般填写文件后缀,每个文件后缀使用","分隔,如: png,jpg'},{content:"【许可域名】允许作为来路的域名，每行一个域名,如: www.bt.cn"},{content:"【响应资源】可设置404/403等状态码，也可以设置一个有效资源，如：/security.png"},{content:"【允许空HTTP_REFERER请求】是否允许浏览器直接访问，若您的网站访问异常，可尝试开启此功能"}],Jr=function(e){if(!Br.status)return u.error("请先启用防盗链!")},Kr=function(e){Br.status=e,e||(Br.http_status=!1)},Wr=function(){var e=l(i().mark((function e(t){var n,r,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gr.value.validate();case 2:return r=o(o({},Br),{},{domains:null===(n=Br.domains)||void 0===n?void 0:n.replace(/\n/g,",")}),Ar.value?r.site_ids=JSON.stringify(Nr.value.map((function(e){return e.id}))):(r.id=Fr.value.id,r.site_name=Fr.value.name),u=Ze,e.next=7,a({loading:"正在设置防盗链，请稍后...",request:u(r),message:!Ar.value});case 7:Xr(Nr.value);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Xr=function(){var e=l(i().mark((function e(t){var n,r,a,u,o,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Nr.value=t||[],t){e.next=18;break}return n=Fr.value,r=n.id,a=n.name,e.prev=3,Hr.value=!0,e.next=7,Qe({id:r,name:a});case 7:u=e.sent,(o=u.data)&&(Br.fix=o.fix||"jpg,jpeg,gif,png,js,css",Br.domains=(null===(s=o.domains)||void 0===s||null===(s=s.toString())||void 0===s?void 0:s.replace(/,/g,"\n"))||"",Br.return_rule=o.return_rule||"404",Br.http_status=o.http_status||!1,Br.status=o.status||!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),w(e.t0);case 15:return e.prev=15,Hr.value=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[3,12,15,18]])})));return function(t){return e.apply(this,arguments)}}(),Yr={fix:[{required:!0,message:"请输入url后缀",trigger:"blur"}],return_rule:[{required:!0,message:"请输入响应资源",trigger:"blur"}]},Qr={class:"p-[20px]"},Zr=U({__name:"index",props:{compData:{default:function(){}}},emits:["close"],setup:function(e,t){var n=t.expose,r=(t.emit,e);return ne((function(){Xr(r.compData)})),n({onConfirm:Wr}),function(e,t){var n=x,r=ye,a=be,u=$,o=xe,s=j,i=ie("bt-loading");return X((H(),B("div",Qr,[F(o,{ref_key:"hotFormRef",ref:Gr,model:J(Br),rules:J(Yr)},{default:M((function(){return[F(r,{label:"URL后缀",prop:"fix"},{default:M((function(){return[F(n,{modelValue:J(Br).fix,"onUpdate:modelValue":t[0]||(t[0]=function(e){return J(Br).fix=e}),width:"30rem"},null,8,["modelValue"])]})),_:1}),F(r,{label:"许可域名"},{default:M((function(){return[F(n,{width:"30rem",modelValue:J(Br).domains,"onUpdate:modelValue":t[1]||(t[1]=function(e){return J(Br).domains=e}),type:"textarea",resize:"none",rows:8,placeholder:"默认添加主域名，可追加其他的允许域名，一行一个，可为空"},null,8,["modelValue"])]})),_:1}),F(r,{label:"响应资源",prop:"return_rule"},{default:M((function(){return[F(n,{width:"30rem",modelValue:J(Br).return_rule,"onUpdate:modelValue":t[2]||(t[2]=function(e){return J(Br).return_rule=e})},null,8,["modelValue"])]})),_:1}),F(r,{label:" "},{default:M((function(){return[F(a,{modelValue:J(Br).status,"onUpdate:modelValue":t[3]||(t[3]=function(e){return J(Br).status=e}),onChange:J(Kr)},{default:M((function(){return t[6]||(t[6]=[N("启用防盗链")])})),_:1},8,["modelValue","onChange"]),F(a,{disabled:!J(Br).status,title:"".concat(J(Br).status?"":"需开启防盗链"),modelValue:J(Br).http_status,"onUpdate:modelValue":t[4]||(t[4]=function(e){return J(Br).http_status=e}),onChange:J(Jr)},{default:M((function(){return t[7]||(t[7]=[N(" 允许空HTTP_REFERER请求 ")])})),_:1},8,["disabled","title","modelValue","onChange"])]})),_:1}),J(Ar)?ve("",!0):(H(),pe(r,{key:0,label:" "},{default:M((function(){return[F(u,{type:"primary",onClick:t[5]||(t[5]=function(e){return J(Wr)()})},{default:M((function(){return t[8]||(t[8]=[N("保存")])})),_:1})]})),_:1}))]})),_:1},8,["model","rules"]),J(Ar)?ve("",!0):(H(),pe(s,{key:0,options:J(Mr),class:"ml-[20px] mt-[20px]"},null,8,["options"]))])),[[i,J(Hr)]])}}}),$r=I("DOCKERSITE-LOGS-STORE",(function(){var e=function(){var e=l(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$e(t);case 3:return n=e.sent,r=n.data,e.abrupt("return",{data:r,status:!0});case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{msg:"获取错误日志失败",status:!1});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),t=function(){var e=l(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$e(t);case 3:return n=e.sent,e.abrupt("return",{data:n.data,status:n.status});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{msg:"获取日志失败",status:!1});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return{getErrorLogsEvent:e,getResLogEvent:t}})),ea=L(),ta=_e().siteInfo,na=e("p",z("cache")),ra=e("h",z({site_name:"",domain_list:[],site_port:[],port_conf:"",ssl_port_conf:"",site_path:"",ssl_info:{},err_age_404:"",err_age_502:"",ip_limit:{ip_black:[],ip_white:[]},basic_auth:[],proxy_cache:{},gzip:{},sub_filter:{},websocket:{},security:{},redirect:{},proxy_log:{},http_block:"",server_block:"",remark:"",proxy_info:[],ipv6_status:!1})),aa=e("G",l(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,et({site_name:ta.value.name});case 2:if((t=e.sent).status){e.next=6;break}return ea.error(t.msg),e.abrupt("return");case 6:ra.value=t.data;case 7:case"end":return e.stop()}}),e)})))),ua=e("f",z(!1)),oa=e("e",z(!1)),sa=e("b",z()),ia=e("c",he({status:!1,time:"",unit:"m"})),ca=(e("t",[{label:"分钟",value:"m"},{label:"小时",value:"h"},{label:"天",value:"d"}]),e("g",[{content:"缓存是一种用于加速网站性能和提高用户体验的技术"},{content:"开启后资源会被缓存，如果影响网站访问请关闭"},{content:"缓存键由主机名、URI 和请求参数组成"},{content:"默认忽略的响应头有：Set-Cookie|Cache-Control|expires|X-Accel-Expires"},{content:"默认缓存的静态资源有：css|js|jpg|jpeg|gif|png|webp|woff|eot|ttf|svg|ico|css.map|js.map"}]),e("d",{time:[{required:!0,message:"请输入正确的缓存时间",trigger:"blur",validator:function(e,t,n){t?isNaN(Number(t))?n(new Error("请输入数字")):Number(t)<1?n(new Error("请输入正确数字")):n():n(new Error("目标URL不能为空"))}},{}]}),e("a",l(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f({title:"清理缓存【".concat(ta.value.name,"】"),width:"35rem",icon:"warning-filled",content:"清理后包含所有URL的及站点的缓存都会被清空,是否继续？"});case 2:return e.next=4,a({loading:"正在清理缓存，请稍后...",request:tt({site_name:ta.value.name}),message:!0});case 4:case"end":return e.stop()}}),e)})))),e("o",l(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={site_name:ta.value.name,cache_status:ia.status?1:0,expires:"".concat(ia.time).concat(ia.unit)},e.next=3,sa.value.validate();case 3:return e.next=5,a({loading:oa,request:nt(t),message:!0});case 5:case"end":return e.stop()}}),e)})))),e("k",z())),la=e("i",he({status:!1,type:"",level:1,minLength:"",unit:"m"})),pa=(e("l",[{label:"k",value:"k"},{label:"m",value:"m"}]),e("n",[{content:"用于对 HTTP 响应的内容进行压缩，以减少数据传输量，提高网站性能和加载速度"},{content:"压缩级别1-9，例如：1为压缩速度最快，但压缩率较低；9为压缩速度最慢，但压缩率最高，建议默认"},{content:"如果开启gzip后影响网站正常访问，请关闭此功能 和请求参数组成"}]),e("m",{type:[{required:!0,message:"请输入压缩类型",trigger:["blur","change"]}],minLength:[{required:!0,message:"请输入正确的压缩最小长度",trigger:"blur",validator:function(e,t,n){t?isNaN(Number(t))?n(new Error("请输入数字")):Number(t)<1?n(new Error("请输入正确数字")):n():n(new Error("压缩最小长度不能为空"))}},{}]}),e("s",(function(e){la.status=e.gzip_status,la.type=e.gzip_types,la.level=e.gzip_comp_level;var t="",n="m";e.gzip_min_length&&e.gzip_min_length.length>1&&(t=e.gzip_min_length.slice(0,-1),n=e.gzip_min_length.slice(-1)),la.minLength=t,la.unit=n})),e("j",l(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={site_name:ta.value.name,gzip_status:la.status?1:0,gzip_min_length:"".concat(la.minLength).concat(la.unit),gzip_comp_level:la.level,gzip_types:la.type},e.next=3,ca.value.validate();case 3:return e.next=5,a({loading:oa,request:rt(t),message:!0});case 5:case"end":return e.stop()}}),e)})))),e("u",he({loading:!1,type:"black",white:[],black:[]}))),fa=(e("r",(function(e){pa.type="ipBlackList"===na.value?"black":"white",va.value.address="",va.value.types=pa.type,pa.white=e.ip_white.map((function(e){return{ip:e,type:"white"}})),pa.black=e.ip_black.map((function(e){return{ip:e,type:"black"}}))})),function(){var e=l(i().mark((function e(t){var n,r,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!!Array.isArray(t),e.next=3,f({title:"".concat(n?"批量删除IP":"删除".concat("white"===t.type?"白名单":"黑名单","【").concat(t.ip,"】")),content:n?"批量删除选中的IP，是否继续操作？":"删除".concat("white"===t.type?"白名单":"黑名单","【").concat(t.ip,"】，是否继续操作？")});case 3:return r={site_name:ta.value.name},n?(r.ip_type=pa.type,r.ips=t.map((function(e){return e.ip})).join("\n")):(r.ip_type=t.type,r.ip=t.ip),u=n?vt:dt,e.next=8,a({loading:"正在删除，请稍后...",request:u(r),message:!0});case 8:e.sent.status&&aa();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),va=(e("v",z([wt(),{label:"IP",prop:"ip",minWidth:120},kt([{title:"删除",onClick:function(e){fa(e)}}])])),e("T",[{label:"删除IP",value:"delete",event:(Yn=l(i().mark((function e(t,n,r,a){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fa(r.value);case 1:case"end":return e.stop()}}),e)}))),function(e,t,n,r){return Yn.apply(this,arguments)})}]),e("q",(function(){va.value.address="",b({isAsync:!0,title:"添加IP".concat("ipBlackList"===na.value?"黑":"白","名单"),area:40,btn:"确认",component:function(){return R((function(){return r.import("./add-ip-legacy.js?v=1734676359")}),void 0,r.meta.url)},compData:{listType:pa.type,refreshEvent:function(){va.value.address="",aa()}}})})),e("N",z({types:pa.type,address:""}))),da=(e("O",[{content:"一行一条配置，多个IP请换行"}]),e("P",z()),e("Q",{address:[{validator:function(e,t,n){t.length>0?n():n(new Error("请输入IP地址"))},trigger:["blur","change"]}]}),e("M",function(){var e=l(i().mark((function e(t){var n,r,u,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=va.value,r=n.types,u=n.address,o={site_name:ta.value.name,ip_type:r,ips:u},e.next=4,a({loading:oa,request:at(o),message:!0});case 4:e.sent.status&&(va.value.address="",aa(),t());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e("y",z([]))),ma=e("w",(function(e){ga.value=e||!1,b({isAsync:!0,title:"".concat(e?"编辑":"添加","编辑http认证").concat(e?"【".concat(e.auth_name,"】"):""),area:48,btn:"确认",component:function(){return R((function(){return r.import("./http-auth-add-legacy.js?v=1734676359")}),void 0,r.meta.url)},compData:{refreshEvent:aa,proxy_info:ra.value.proxy_info,isEdit:!!e,row:e}})})),ha=function(){var e=l(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f({title:"删除http认证【".concat(t.auth_name,"】"),content:"删除http认证【".concat(t.auth_name,"】，是否继续操作？")});case 2:return e.next=4,a({loading:"正在删除http认证，请稍候...",request:lt({site_name:ta.value.name,auth_path:t.auth_path,name:t.auth_name}),message:!0});case 4:e.sent.status&&aa();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ga=(e("z",z([{label:"名称",prop:"auth_name"},{label:"路径",prop:"auth_path"},kt([{onClick:ma,title:"编辑"},{onClick:ha,title:"删除"}])])),e("x",(function(e){da.value=e||[]})),e("V",z())),ya=e("U",z({name:D(5),path:"",user:"",password:""})),ba=(e("X",[{content:"例如我设置了加密访问/test/,那我访问http://aaa.com/test/时就要输入账号密码才能访问"}]),e("Y",z())),xa=(e("Z",{name:[{required:!0,message:"请输入名称",trigger:["blur","change"]}],path:[{required:!0,message:"请输入路径",trigger:["blur","change"]}],user:[{required:!0,message:"请输入用户名",trigger:["blur","change"]}],password:[{required:!0,message:"请输入密码",trigger:["blur","change"]}]}),e("W",(function(e,t){var n=ra.value.proxy_info.map((function(e){return{value:e.proxy_path}}));t(e?n.filter((function(t){return t.value.includes(e)})):n)})),e("S",function(){var e=l(i().mark((function e(t){var n,r,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ya.value,e.next=3,ba.value.validate();case 3:return r={site_name:ta.value.name,auth_path:n.path,username:n.user,password:n.password,name:n.name},u=ga.value?ut:ot,e.next=7,a({loading:oa,request:u(r)});case 7:e.sent.status&&(aa(),t&&t());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e("R",(function(){ga.value&&(ya.value.name=ga.value.auth_name,ya.value.path=ga.value.auth_path)})),z()),wa=he({type:"default",accessLog:"",address:"",port:"514"}),_a={accessLog:[{validator:function(e,t,n){"file"!==wa.type||t?n():n(new Error("请选择日志目录"))},trigger:["blur","change"]}],address:[{validator:function(e,t,n){"rsyslog"!==wa.type||t?n():n(new Error("请输入接收地址"))},trigger:["blur","change"]}]},ka=[{content:"指定目录可选择自定义的日志存储目录，请注意此目录必须www用户可写"},{content:"发送到远程服务器设置之后本地不会保存日志内容，填写前请确保日志接收端可正常访问"}],Ea=[{label:"默认",value:"default"},{label:"不记录日志",value:"off"},{label:"指定目录",value:"file"},{label:"发送到远程服务器",value:"rsyslog"}],ja=function(e){gt({type:"dir",path:"/www/wwwlogs",change:function(e){wa.accessLog=e}})},La=function(e){e?(wa.type=e.log_type,wa.accessLog=e.log_path,wa.address=e.rsyslog_host):wa.type="default"},Pa=function(){var e=l(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xa.value.validate();case 2:return t={site_name:ta.value.name,log_type:wa.type,log_path:"file"==wa.type?wa.accessLog:wa.address},e.next=5,a({loading:"正在设置日志配置，请稍后...",request:pt(t),message:!0});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Sa=e("B",he({websocket:!1})),Oa=(e("C",function(){var e=l(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a({loading:oa,request:st({site_name:ta.value.name,websocket_status:t?1:0}),message:!0});case 2:e.sent.status||(Sa.websocket=!t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e("A",(function(e){Sa.websocket=!!e&&e.websocket_status})),e("E",(function(e){a({loading:"正在设置，请稍后...",request:it({site_name:ta.value.name,status:e?"1":"0"}),message:!0})})),e("D",function(){var e=l(i().mark((function e(t,n,r,u){var o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a({loading:t,request:ct({site_name:ta.value.name})});case 3:o=e.sent,n.value=o.data.data,r.value=o.data.encoding||"utf-8",u.value=o.data.status,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n,r,a){return e.apply(this,arguments)}}()),e("F",function(){var e=l(i().mark((function e(t,n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a({request:ft({site_name:ta.value.name,file_body:t,encoding:n}),message:!0});case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),{class:"h-full"}),Ca={class:"mb-[1.6rem]"},Ra={class:"flex"},Va=U({__name:"error-log",setup:function(e){return ne(Xa),function(e,t){var n=ie("bt-loading");return X((H(),B("div",Oa,[G("div",Ca,"日志大小："+W(J(Ma).size),1),G("div",Ra,[F(Lt,{content:J(Ma).logs,isHtml:!0,fullScreen:{title:"全屏查看[错误]日志",onRefresh:J(Xa)},style:{height:"58rem",width:"99.5%"}},null,8,["content","fullScreen"])])])),[[n,J(Ga)]])}}}),Da={class:"h-full"},qa=U({__name:"response-log",setup:function(e){return ne(Za),function(e,t){var n=ie("bt-loading");return H(),B("div",Da,[G("div",null,"日志大小："+W(J(Ya).size),1),X(F(Lt,{class:"mt-[16px]",content:J(Ya).logs,isHtml:!0,fullScreen:{title:"全屏查看[响应]日志",onRefresh:J(Qa)},style:{height:"58rem",width:"99.5%"}},null,8,["content","fullScreen"]),[[n,J(Ga)]])])}}}),Ta={class:"p-[16px]"},Ia={class:"mt-[1.6rem]"},za={class:"mt-[1.6rem]"},Ua={class:"ml-[20px]"},Fa=U({__name:"config",setup:function(e,t){var n=t.expose;return we((function(){return ra.value.proxy_log}),(function(e){La(e)})),ne((function(){La(ra.value.proxy_log)})),n({onConfirm:Pa}),function(e,t){var n=S,r=ye,a=_,u=$,o=x,s=xe,i=j,c=ie("bt-loading");return H(),B("div",Ta,[X((H(),pe(s,{ref_key:"logFormRef",ref:xa,class:"h-[48rem]",model:J(wa),"label-width":"60px",rules:J(_a),disabled:J(oa)},{default:M((function(){return[F(r,{label:"日志",prop:"type"},{default:M((function(){return[F(n,{class:"!w-[24rem]",modelValue:J(wa).type,"onUpdate:modelValue":t[0]||(t[0]=function(e){return J(wa).type=e}),options:J(Ea),placeholder:"请选择"},null,8,["modelValue","options"])]})),_:1}),X(G("div",Ia,[F(r,{label:"访问日志",prop:"accessLog"},{default:M((function(){return[F(o,{modelValue:J(wa).accessLog,"onUpdate:modelValue":t[2]||(t[2]=function(e){return J(wa).accessLog=e}),placeholder:"请选择或输入目录，例如：/www/wwwlogs",width:"35rem"},{append:M((function(){return[F(u,{onClick:t[1]||(t[1]=function(e){return J(ja)("accessLog")})},{default:M((function(){return[F(a,{icon:"el-folder-opened",class:"cursor-pointer"})]})),_:1})]})),_:1},8,["modelValue"])]})),_:1})],512),[[Y,"file"===J(wa).type]]),X(G("div",za,[F(r,{label:"接收地址",prop:"address"},{default:M((function(){return[F(o,{modelValue:J(wa).address,"onUpdate:modelValue":t[3]||(t[3]=function(e){return J(wa).address=e}),placeholder:"接收地址，如：202.96.128.86:9204",width:"24rem"},null,8,["modelValue"])]})),_:1})],512),[[Y,"rsyslog"===J(wa).type]]),F(r,{class:"mt-[1.6rem]",label:" "},{default:M((function(){return[F(u,{type:"primary",onClick:J(Pa)},{default:M((function(){return t[4]||(t[4]=[N("保存")])})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model","rules","disabled"])),[[c,J(ua)]]),G("div",Ua,[F(i,{options:J(ka)},null,8,["options"])])])}}}),Na=$r(),Aa=Na.getErrorLogsEvent,Ha=Na.getResLogEvent,Ba=_e().siteInfo,Ga=z(!1),Ma=z({logs:"",size:"0 b"}),Ja=z("response"),Ka=z([{label:"响应日志",name:"response",lazy:!0,render:function(){return F(qa,null,null)}},{label:"错误日志",name:"error",lazy:!0,render:function(){return F(Va,null,null)}},{label:"配置",name:"config",lazy:!0,render:function(){return F(Fa,null,null)}}]),Wa=function(){var e;Ja.value=(null===(e=Ba.value)||void 0===e?void 0:e.tabName)||"response"},Xa=function(){var e=l(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ba.value.name,e.prev=1,Ga.value=!0,e.next=5,Aa({site_name:t,type:"error"});case 5:return n=e.sent,Ma.value.size=n.data.size||"0 b",Ma.value.logs=n.data.msg||"暂无日志信息",e.abrupt("return",n);case 11:return e.prev=11,e.t0=e.catch(1),w(e.t0),e.abrupt("return",{msg:"获取错误日志失败",status:!1});case 15:return e.prev=15,Ga.value=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,11,15,18]])})));return function(){return e.apply(this,arguments)}}(),Ya=he({alert:!1,showIp:!1,ipData:0,logs:"",size:"0 b"}),Qa=function(){var e=l(i().mark((function e(){var t,n,r=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:Ba.value.name,e.prev=1,Ga.value=!0,e.next=5,Ha({site_name:t,type:"access"});case 5:return n=e.sent,Ya.logs=n.data.msg||"暂无日志信息",Ya.size=n.data.size||"0 b",e.abrupt("return",n);case 11:return e.prev=11,e.t0=e.catch(1),w(e.t0),e.abrupt("return",{msg:"获取日志失败",status:!1});case 15:return e.prev=15,Ga.value=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,11,15,18]])})));return function(){return e.apply(this,arguments)}}(),Za=function(){var e=l(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qa();case 2:aa();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$a=U({__name:"index",setup:function(e){return ne(Wa),function(e,t){var n=q;return H(),B("div",null,[F(n,{type:"card",modelValue:J(Ja),"onUpdate:modelValue":t[0]||(t[0]=function(e){return K(Ja)?Ja.value=e:null}),options:J(Ka)},null,8,["modelValue","options"])])}}}),eu=_e().siteInfo,tu=z([]),nu=function(){return{version:"",oldVersion:""}},ru=function(){var e=l(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a({request:mt({id:eu.value.id})});case 2:(n=e.sent).status?(t.value.version="".concat(n.data.used.name,":").concat(n.data.used.version),t.value.oldVersion="".concat(n.data.used.name,":").concat(n.data.used.version),tu.value=n.data.runtime_list.map((function(e){return{label:"PHP-".concat(e.version,"(").concat(e.name,")"),value:"".concat(e.name,":").concat(e.version)}}))):u.error(n.msg);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),au=function(){var e=l(i().mark((function e(t,n){var r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.version,o=t.oldVersion,e.prev=1,r!==o){e.next=5;break}return u.error("当前版本与原版本一致，无需切换"),e.abrupt("return");case 5:return e.next=7,f({title:"切换PHP版本",content:"切换PHP版本可能会导致无法访问，是否切换？"});case 7:a({loading:"正在切换PHP版本，请稍后...",request:ht({id:eu.value.id,runtime_name:r}),message:!0,success:function(e){e.status&&(n.value.oldVersion=r)}}),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(1);case 12:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}(),uu={class:"p-[16px]"},ou={class:"ml-[20px]"},su=U({__name:"index",setup:function(e,t){var n,r=t.expose,a=h({data:nu,options:function(){return Q((function(){return[Oe("PHP版本","version",tu.value,{attrs:{class:"!w-[22rem]"},rules:[{required:!0,message:"请选择PHP版本",trigger:"change"}]}),Ce("切换",{label:" ",attrs:{type:"primary",onClick:o}})]}))},submit:(n=l(i().mark((function e(t,n,r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:au(t.value,s);case 3:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)})}),u=a.BtForm,o=a.submit,s=a.param;return ne((function(){ru(s)})),re((function(){tu.value=[]})),r({init:function(){ru(s)}}),function(e,t){var n=j;return H(),B("div",uu,[F(J(u)),G("div",ou,[F(n,{options:[{content:"切换PHP版本可能会导致网站无法访问"},{content:"如果网站访问异常，建议删除网站重新创建以选择新的PHP版本"}]})])])}}}),iu=U({__name:"index",setup:function(e){var n=T(Ee()),a=n.settingTabActive,u=n.siteInfo,o=z(a.value||"domain"),s=O({type:"left-bg-card",value:o,options:[{label:"域名管理",name:"domain",lazy:!0,render:function(){return F(Zt,null,null)}},{label:"网站目录",name:"dir",lazy:!0,render:function(){return F(nn,null,null)}},{label:"反向代理",name:"urlProxy",lazy:!0,render:function(){return R((function(){return r.import("./index-legacy368.js?v=1734676359").then((function(e){return e.ac}))}),void 0,r.meta.url)}},{label:"全局配置",name:"golbalConfig",lazy:!0,render:function(){return R((function(){return r.import("./index-legacy369.js?v=1734676359")}),void 0,r.meta.url)}},{label:"伪静态",name:"pseudo",lazy:!0,render:function(){return F(zn,null,null)}},{label:"配置文件",name:"configFile",lazy:!0,render:function(){return F(rr,null,null)}},{label:"SSL",name:"ssl",lazy:!0,render:function(){return R((function(){return r.import("./index-legacy370.js?v=1734676359")}),void 0,r.meta.url)}}].concat(t("PHP"===u.value.type?[{label:"PHP",name:"php",lazy:!0,render:function(){return F(su,null,null)}}]:[]),[{label:"重定向",name:"redirect",lazy:!0,render:function(){return F(Ur,null,null)}},{label:"防盗链",name:"antiLeech",lazy:!0,render:function(){return F(Zr,null,null)}},{label:"日志",name:"siteLogs",lazy:!0,render:function(){return F($a,null,null)}}])}).BtTabs;return we((function(){return a.value}),(function(e){e&&(o.value=a.value,a.value="")})),function(e,t){return H(),pe(J(s))}}}),cu=k(iu,[["__scopeId","data-v-e2509047"]]),lu=Object.freeze(Object.defineProperty({__proto__:null,default:cu},Symbol.toStringTag,{value:"Module"}));e("_",lu)}}}))}();
