import{c as a,r as e,o as t,k as s,l,q as i,y as r,v as c,e as o,x as u,I as m,aX as p,p as n,J as f,M as v,ag as d,ah as y}from"./base-lib.js?v=1734676359";import{b}from"./utils-lib.js?v=1734676359";import{g as D}from"./useStore10.js?v=1734676359";import{C as _,D as j}from"./ssl.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";const x={class:"p-[2rem] flex justify-center flex-col"},h={class:"flex items-center"},g=a({__name:"index",props:{compData:{type:Object,default:()=>{}}},emits:["close"],setup(a,{expose:g,emit:w}){const L=b(),{refs:{isRefreshDomainList:k,isRefreshCertificateList:C,typeList:J}}=D(),O=a,S=w,V=e(""),q=e([]),N=e([]),R=async a=>{let e;try{switch(a){case"certificate":N.value=O.compData.itemList.map((a=>({id:a.id,type:a.type}))),e=await j({ids:JSON.stringify(N.value),group_id:V.value}),e.status&&(C.value=!0);break;case"domain":N.value=O.compData.itemList.map((a=>a.id)),e=await _({ids:JSON.stringify(N.value),type_id:V.value}),e.status&&(k.value=!0)}}catch(t){}return e};return g({onConfirm:async()=>{if(""===V.value)return L.error("请选择".concat("certificate"===O.compData.type?"证书分组":"域名分类"));let a;try{a=L.load("正在".concat("certificate"===O.compData.type?"设置证书分组":"设置域名分类","，请稍候..."));const e=await R(O.compData.type);L.request(e),e.status&&S("close")}catch(e){}finally{a&&a.close()}}}),t((()=>{q.value=J.value.filter((a=>"all"!==a.value))})),(e,t)=>{const b=d,D=y;return s(),l("div",x,[i("div",h,[r(c("certificate"===a.compData.type?"证书分组":"域名分类")+" ",1),o(D,{modelValue:n(V),"onUpdate:modelValue":t[0]||(t[0]=a=>v(V)?V.value=a:null),class:"!w-[31rem] ml-[1.2rem]"},{default:u((()=>[(s(!0),l(m,null,p(n(q),(a=>(s(),f(b,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])])}}});export{g as default};
