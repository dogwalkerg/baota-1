!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function n(t){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?e(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):e(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function r(e,n,r){return(n=function(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,n||"default");if("object"!=t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function a(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */a=function(){return n};var e,n={},r=Object.prototype,i=r.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},u="function"==typeof Symbol?Symbol:{},l=u.iterator||"@@iterator",c=u.asyncIterator||"@@asyncIterator",s=u.toStringTag||"@@toStringTag";function f(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(e){f=function(t,e,n){return t[e]=n}}function p(t,e,n,r){var a=e&&e.prototype instanceof x?e:x,i=Object.create(a.prototype),u=new q(r||[]);return o(i,"_invoke",{value:E(t,n,u)}),i}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}n.wrap=p;var v="suspendedStart",m="suspendedYield",y="executing",h="completed",g={};function x(){}function w(){}function _(){}var k={};f(k,l,(function(){return this}));var b=Object.getPrototypeOf,j=b&&b(b(A([])));j&&j!==r&&i.call(j,l)&&(k=j);var C=_.prototype=x.prototype=Object.create(k);function L(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function O(e,n){function r(a,o,u,l){var c=d(e[a],e,o);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==t(f)&&i.call(f,"__await")?n.resolve(f.__await).then((function(t){r("next",t,u,l)}),(function(t){r("throw",t,u,l)})):n.resolve(f).then((function(t){s.value=t,u(s)}),(function(t){return r("throw",t,u,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(t,e){function i(){return new n((function(n,a){r(t,e,n,a)}))}return a=a?a.then(i,i):i()}})}function E(t,n,r){var a=v;return function(i,o){if(a===y)throw Error("Generator is already running");if(a===h){if("throw"===i)throw o;return{value:e,done:!0}}for(r.method=i,r.arg=o;;){var u=r.delegate;if(u){var l=D(u,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===v)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=y;var c=d(t,n,r);if("normal"===c.type){if(a=r.done?h:m,c.arg===g)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(a=h,r.method="throw",r.arg=c.arg)}}}function D(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,D(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=d(a,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function A(n){if(n||""===n){var r=n[l];if(r)return r.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var a=-1,o=function t(){for(;++a<n.length;)if(i.call(n,a))return t.value=n[a],t.done=!1,t;return t.value=e,t.done=!0,t};return o.next=o}}throw new TypeError(t(n)+" is not iterable")}return w.prototype=_,o(C,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:w,configurable:!0}),w.displayName=f(_,s,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,f(t,s,"GeneratorFunction")),t.prototype=Object.create(C),t},n.awrap=function(t){return{__await:t}},L(O.prototype),f(O.prototype,c,(function(){return this})),n.AsyncIterator=O,n.async=function(t,e,r,a,i){void 0===i&&(i=Promise);var o=new O(p(t,e,r,a),i);return n.isGeneratorFunction(e)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},L(C),f(C,s,"Generator"),f(C,l,(function(){return this})),f(C,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},n.values=A,q.prototype={constructor:q,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(S),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,a){return u.type="throw",u.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;S(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},n}function i(t,e,n,r,a,i,o){try{var u=t[i](o),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,a)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function u(t){i(o,r,a,u,l,"next",t)}function l(t){i(o,r,a,u,l,"throw",t)}u(void 0)}))}}System.register(["./useStore-legacy3.js?v=1734676359","./base-lib-legacy.js?v=1734676359","./utils-lib-legacy.js?v=1734676359","./index-legacy88.js?v=1734676359","./useMethods-legacy.js?v=1734676359","./validator-legacy.js?v=1734676359","./vue-virtual-scroller.esm-legacy.js?v=1734676359","./vue-virtual-scroller-legacy.js?v=1734676359","./useController-legacy.js?v=1734676359","./__commonjsHelpers__-legacy.js?v=1734676359","./column-legacy.js?v=1734676359","./index-legacy91.js?v=1734676359"],(function(t,e){"use strict";var r,i,u,l,c,s,f,p,d,v,m,y,h,g,x,w,_,k,b,j,C,L,O,E,D,P,S,q,A,I,z,T,N,R,G,F,M,H,B,V,W,Y,K,U,$,J,X,Q,Z,tt,et,nt,rt,at,it,ot,ut,lt,ct,st,ft;return{setters:[function(t){r=t.g,i=t.a,u=t.b,l=t.s,c=t.r,s=t.c},function(t){f=t.c,p=t.R,d=t.ax,v=t.r,m=t.w,y=t.o,h=t.k,g=t.l,x=t.q,w=t.e,_=t.p,k=t.L,b=t.y,j=t.x,C=t.F,L=t.I,O=t.aX,E=t.J,D=t.C,P=t.D,S=t.v,q=t.z,A=t.ar,I=t.A,z=t.ao,T=t.an,N=t.ap,R=t.i,G=t.n,F=t.b5,M=t.aN,H=t.aY,B=t.W,V=t.b6,W=t.aB,Y=t.G,K=t.au,U=t.h,$=t.B},function(t){J=t.u,X=t.G,Q=t.a7,Z=t.c,tt=t.b,et=t.e,nt=t.l,rt=t.H,at=t.ai,it=t.o},function(t){ot=t._},function(t){ut=t.N,lt=t.u},function(t){ct=t.o},function(t){st=t.s},null,function(t){ft=t.o},null,null,null],execute:function(){var pt={class:"flex flex-1 relative items-center mb-20px"},dt={class:"text-[1.2rem] text-[#666] leading-[2rem] mx-[2rem] flex items-center"},vt={class:"w-full flex items-center"},mt={class:"flex flex-1 relative flex-wrap"},yt=["onClick"],ht=f({__name:"index",setup:function(t,e){var l=e.expose,c=r().refs.deployMenuData,s=J().mainWidth,f=tt(),R=p([]),G=p(""),F=d("appData",{loading:!1,list:[],total:0}),M=d("appParams",{p:1,row:200,query:"",force:0}),H=d("getAppList",(function(t){})),B=function(){return Math.floor((s.value-420)/140)},V=v(),W=function(){var t=o(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(M.p=1,Y(),"installed"!==c.value.app_type){t.next=7;break}return t.next=5,U("all");case 5:return e&&f.success("刷新成功"),t.abrupt("return");case 7:return M.force=e?1:0,t.next=10,H(M);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Y=function(){var t=o(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X({request:i(),data:[Array,R],success:function(t){V.value=t.slice(B(),t.length)}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),K=function(){var t=o(a().mark((function t(e){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return G.value=(null===(n=V.value)||void 0===n||null===(n=n.find((function(t){return t.type===e})))||void 0===n?void 0:n.desc)||"",c.value.app_type=e,M.query="",M.p=1,M.force=0,t.next=7,H(M);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),U=function(){var t=o(a().mark((function t(e){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:F.loading=!0,G.value=(null===(r=R.value)||void 0===r||null===(r=r.find((function(t){return t.type===e})))||void 0===r?void 0:r.desc)||"",c.value.app_type="installed",X({request:u({app_type:e,p:1,row:20,query:M.query||""}),loading:A(F,"loading"),success:function(t){t.status?(F.list=t.data.data.map((function(t,e){return n(n({},t),{},{index:e})}))||[],t.data.page?F.total=Q(t.data.page):F.total=0):f.error(t.msg)}});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),$=function(){"installed"===c.value.app_type&&U("all"),c.value.app_type="installed"};m((function(){return s.value}),(function(){var t,e;V.value=R.value.slice(B(),null===(t=R.value)||void 0===t?void 0:t.length),G.value=(null===(e=V.value)||void 0===e||null===(e=e.find((function(t){return t.type===c.value.app_type})))||void 0===e?void 0:e.desc)||""})),y(Y);var et=v();return l({testRef:et}),function(t,e){var n,r,a=ot,i=Z,o=I,u=N,l=z,s=T;return h(),g("div",{ref_key:"testRef",ref:et},[x("div",pt,[e[11]||(e[11]=x("span",{class:"w-[80px] pr-16px text-[14px] flex justify-end flex-shrink-0"},"应用搜索",-1)),w(a,{class:"!w-[52rem]",ref:"searchRef",icon:"el-search",modelValue:_(M).query,"onUpdate:modelValue":e[0]||(e[0]=function(t){return _(M).query=t}),clearable:"",onClear:e[1]||(e[1]=function(t){return W(!1)}),onIconClick:e[2]||(e[2]=function(t){return W(!1)}),placeholder:"支持应用名称、字段模糊搜索",onKeyup:e[3]||(e[3]=k((function(t){return W(!1)}),["enter","native"]))},null,8,["modelValue"]),x("span",dt,[e[9]||(e[9]=b(" 如果您希望添加其它Docker应用，请 ")),x("span",{class:"bt-link",onClick:e[4]||(e[4]=function(t){return _(ct)()})},"联系客服"),e[10]||(e[10]=b(" ,或进行 ")),x("span",{class:"bt-link",onClick:e[5]||(e[5]=function(t){return _(ut)()})},"需求反馈"),w(i,{href:"https://www.bt.cn/bbs/thread-137717-1-1.html",class:"ml-4px"},{default:j((function(){return e[8]||(e[8]=[b(">>使用帮助")])})),_:1})])]),x("div",vt,[e[15]||(e[15]=x("span",{class:"w-[80px] pr-16px text-[14px] flex justify-end"},"应用分类",-1)),x("div",{class:C(["class-item",{on:"all"===_(c).app_type}]),onClick:e[6]||(e[6]=function(t){return K("all")})},"全部",2),x("div",{class:C(["class-item flex-shrink-0",{on:"installed"===_(c).app_type}]),onClick:$},"已安装",2),x("div",mt,[(h(!0),g(L,null,O(null===(n=_(R))||void 0===n?void 0:n.slice(0,B()),(function(t,e){return h(),g("div",{key:e,onClick:function(e){return K(t.type)},class:C(["class-item",_(c).app_type===t.type?"on":""])},S(t.desc),11,yt)})),128)),null!==(r=_(V))&&void 0!==r&&r.length?(h(),E(s,{key:0,"show-timeout":200,onCommand:K},{dropdown:j((function(){return[w(l,null,{default:j((function(){return[(h(!0),g(L,null,O(_(V),(function(t,e){return h(),E(u,{key:e,command:t.type},{default:j((function(){return[b(S(t.desc),1)]})),_:2},1032,["command"])})),128))]})),_:1})]})),default:j((function(){return[w(o,{type:"default",class:C(["AppClassButton",{on:_(V).some((function(t){return t.type===_(c).app_type}))}])},{default:j((function(){return[e[12]||(e[12]=b(" 更多 ")),D(x("span",null,"（"+S(_(G))+"）",513),[[P,_(G)]]),e[13]||(e[13]=x("i",{class:"svgtofont-el-arrow-down ml-[.5rem]"},null,-1))]})),_:1},8,["class"])]})),_:1})):q("",!0)]),D(w(o,{title:"更新列表",class:"refresh !mr-[1.2rem]",onClick:e[7]||(e[7]=function(t){return W(!0)})},{default:j((function(){return e[14]||(e[14]=[b(" 更新应用列表 ")])})),_:1},512),[[P,"installed"!==_(c).app_type]])])],512)}}}),gt=et(ht,[["__scopeId","data-v-5b455e42"]]),xt=["src"],wt={class:"AppContent"},_t={class:"w-full flex items-start justify-between"},kt={class:"flex-col flex flex-grow-0"},bt={class:"AppRow"},jt=["title"],Ct=["href"],Lt={key:0,class:"flex items-center"},Ot={key:0,class:"flex items-center"},Et={key:1},Dt={class:"mx-8px"},Pt=["innerHTML","title"],St={key:1,class:"AppDescribe"},qt={class:"AppRow"},At={class:"flex items-center flex-1"},It={class:"flex items-center"},zt={class:"truncate max-w-[24rem]"},Tt={key:0,class:"flex"},Nt={key:1,class:"flex flex-col"},Rt={key:0,class:"absolute bottom-14px w-[80%]"},Gt=f({__name:"index",props:{data:{default:function(){return{}}}},emits:["refresh"],setup:function(t,i){var u=i.emit,s=t,f=r().refs.deployMenuData,p=tt(),m=u,y=d("appData",{loading:!1,list:[],total:0}),k=d("getAppList",(function(t){})),A=d("appParams",{p:1,row:200,query:"",force:0});v(!1);var z=d("getAppImages"),T=R((function(){switch(s.data.status){case"running":return["运行中","success"];case"exited":return["已停止","danger"];case"initializing":return["安装中","info"];default:return["异常","warning"]}})),N=function(){var t=o(a().mark((function t(n){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:nt({title:"".concat(n.appname,"安装配置"),area:70,component:function(){return rt((function(){return e.import("./add-app-soft-legacy.js?v=1734676359")}),void 0,e.meta.url)},compData:{appData:s.data,openDependInstall:B},showFooter:!0});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),B=function(){var t=o(a().mark((function t(n){var r,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.name,i=n.type,f.value.app_type=i,A.query="",t.next=5,k();case 5:G((function(){var t=y.list.find((function(t){return t.appname===r}));t&&nt({title:"".concat(t.appname,"安装配置"),area:70,component:function(){return rt((function(){return e.import("./add-app-soft-legacy.js?v=1734676359")}),void 0,e.meta.url)},compData:{appData:t,openDependInstall:B},showFooter:!0})}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),V=function(){var t=o(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:nt({title:"更新配置",area:42,component:function(){return rt((function(){return e.import("./app-update-legacy.js?v=1734676359")}),void 0,e.meta.url)},compData:s.data,showFooter:!0});case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),W=function(){var t=o(a().mark((function t(n){var r,i,o,u,l;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,rt((function(){return e.import("./utils-lib-legacy.js?v=1734676359").then((function(t){return t.dH}))}),void 0,e.meta.url);case 2:i=t.sent,o=i.router,u=null===(r=s.data.appinfo.filter((function(t){return"app_path"===t.fieldKey}))[0])||void 0===r?void 0:r.fieldValue,at("Path",u),l=p.load("正在跳转,请稍后..."),o.push({path:"/files"}),l.close();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Y=function(){var t=o(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:ft({id:e.site_id,name:e.site_name,addtime:e.site_addtime});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),K=function(t,r){if(!r||"initializing"===s.data.status){var a=!1;"log"===t&&"initializing"===s.data.status&&(a=!0);var i={back:function(){return rt((function(){return e.import("./backup-view-legacy.js?v=1734676359")}),void 0,e.meta.url)},log:function(){return rt((function(){return e.import("./app-log-legacy.js?v=1734676359")}),void 0,e.meta.url)}};nt({title:"back"===t?"应用备份":"应用日志",area:"back"===t?88:82,compData:n(n({},s.data),{},{isInit:a}),component:i[t]})}},U=function(){var t=o(a().mark((function t(e){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={rebuild:"重建",start:"启动",restart:"重启",stop:"停止"},t.next=3,it({title:"提示",content:"确定要".concat(n[e],"【").concat(s.data.service_name,"】吗?"),icon:"warning-filled"});case 3:return t.next=5,X({request:l({service_name:s.data.service_name,status:e,app_name:s.data.appname}),loading:"正在操作,请稍后...",message:!0});case 5:m("refresh");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),$=function(){var t=o(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,it({title:"提示",content:"确定要删除【".concat(s.data.appname,"】吗?"),icon:"warning-filled",type:"check",check:{content:"同时删除此应用的所有数据",onConfirm:function(){var t=o(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X({request:c({id:s.data.id,delete_data:Number(e)}),loading:"正在删除,请稍后...",message:!0});case 2:m("refresh");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}});case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),J=function(){return window.open("http://"+s.data.domain)};return function(t,n){var r,a,i,o=F,u=M,l=I,c=H;return h(),g("div",{class:C(["AppItem relative",{"!h-[12.8rem]":!t.data.installed}])},[x("img",{src:(a=t.data.appname,i="/static/img/soft_ico/dkapp".concat("/ico-dkapp_",null==a?void 0:a.replace(/-+[{0-9},\.,]+$/,""),".png"),z(i,null==a?void 0:a.replace(/-+[{0-9},\.,]+$/,""))),onError:n[0]||(n[0]=function(t){t.target.src.includes("icon_plug")?t.target.style.display="none":t.target.src="/static/img/soft_ico/icon_plug.svg"}),class:"AppImg"},null,40,xt),x("div",wt,[x("div",_t,[x("div",kt,[x("div",bt,[x("span",{class:C(["text-[1.6rem] font-600",{"truncate leading-[22px] !font-normal flex-1 max-w-[fit-content]":t.data.installed}]),title:t.data.installed?t.data.service_name:t.data.apptitle},[b(S(t.data.installed?t.data.service_name:t.data.apptitle)+" ",1),t.data.installedCount?(h(),g("span",{key:0,class:"mx-8px bt-link text-[1.2rem] font-normal",onClick:n[1]||(n[1]=function(t){return _(f).app_type="installed"})},"已安装 ("+S(t.data.installedCount)+")",1)):q("",!0),t.data.help?(h(),g("a",{key:1,href:t.data.help,target:"_blank",class:"ml-8px bt-link text-[1.2rem] font-normal"}," >>帮助",8,Ct)):q("",!0)],10,jt),t.data.installed?(h(),g("div",Lt,[w(o,{type:_(T)[1],class:C(["mx-[0.8rem]",{"cursor-pointer":"initializing"===t.data.status}]),onClick:n[2]||(n[2]=function(t){return K("log",!0)})},{default:j((function(){return["initializing"===t.data.status?(h(),g("span",Ot,n[13]||(n[13]=[b("正在安装 "),x("i",{class:"svgtofont-el-loading !text-[1.2rem] animation-spin"},null,-1)]))):(h(),g("span",Et,S(_(T)[0]),1))]})),_:1},8,["type","class"]),w(u,{class:"item",effect:"dark",content:"进入安装目录",placement:"top"},{default:j((function(){return[x("i",{class:"svgtofont-folder-open mr-[0.4rem]",onClick:n[3]||(n[3]=function(t){return W("path")})})]})),_:1}),w(u,{class:"item",effect:"dark",content:"打开日志",placement:"top"},{default:j((function(){return[x("i",{class:"svgtofont-left-logs",onClick:n[4]||(n[4]=function(t){return K("log")})})]})),_:1}),x("span",Dt,"已安装:"+S(t.data.createat),1)])):q("",!0)]),x("div",null,[t.data.installed?q("",!0):(h(),g("span",{key:0,innerHTML:t.data.appdesc,title:t.data.appdesc,class:"AppNoSetDes"},null,8,Pt)),t.data.installed?(h(),g("div",St,[x("div",qt,[w(o,{type:"info",class:"mr-[0.8rem]",effect:"plain"},{default:j((function(){return[b("版本:"+S(t.data.m_version+(t.data.s_version?".":"")+t.data.s_version),1)]})),_:1}),(h(!0),g(L,null,O(t.data.port,(function(t,e){return D((h(),E(o,{type:"info",class:"mr-[0.8rem]",effect:"plain",key:t},{default:j((function(){return[b("端口:"+S(t),1)]})),_:2},1024)),[[P,e<2]])})),128)),w(u,{placement:"top"},{content:j((function(){return[x("div",null,[(h(!0),g(L,null,O(t.data.port,(function(e,n){var r;return D((h(),g("span",{key:n},[b(S(e)+" ",1),D(x("span",null,",",512),[[P,n!==(null===(r=t.data.port)||void 0===r?void 0:r.length)-1]])])),[[P,n>1]])})),128))])]})),default:j((function(){var e;return[(null===(e=t.data.port)||void 0===e?void 0:e.length)>=3?(h(),E(o,{key:0,type:"info"},{default:j((function(){var e;return[b(" +"+S((null===(e=t.data.port)||void 0===e?void 0:e.length)-2),1)]})),_:1})):q("",!0)]})),_:1})]),x("div",At,[t.data.domain?(h(),E(o,{key:0,type:"info",class:"mr-[0.8rem] cursor-pointer",effect:"plain",onClick:J},{default:j((function(){return[x("div",It,[n[14]||(n[14]=x("i",{class:"svgtofont-icon-max-black mr-[0.4rem] !text-[1.4rem]"},null,-1)),w(u,{effect:"dark",content:"点击跳转域名:"+t.data.domain,placement:"top-start"},{default:j((function(){return[x("span",zt,"域名:"+S(t.data.domain),1)]})),_:1},8,["content"])])]})),_:1})):q("",!0),t.data.domain?(h(),g("span",{key:1,class:"bt-link",onClick:n[5]||(n[5]=function(e){return Y(t.data)})}," >管理网站")):q("",!0)])])):q("",!0)])]),t.data.installed?(h(),g("div",Tt,[(r=t.data,r.canUpdate&&r.installed?(h(),E(l,{key:0,size:"small",onClick:V},{default:j((function(){return n[15]||(n[15]=[b("更新")])})),_:1})):q("",!0)),w(l,{size:"small",onClick:n[6]||(n[6]=function(t){return K("back")})},{default:j((function(){return n[16]||(n[16]=[b("备份")])})),_:1})])):q("",!0),t.data.installed?q("",!0):(h(),g("div",Nt,[t.data.installed?q("",!0):(h(),E(l,{key:0,type:"primary",onClick:n[7]||(n[7]=function(e){return N(t.data)})},{default:j((function(){return n[17]||(n[17]=[b("安装")])})),_:1}))]))]),t.data.installed?(h(),g("div",Rt,[w(c,{class:"!my-[0.8rem] w-full"}),"exited"===t.data.status?(h(),E(l,{key:0,size:"small",onClick:n[8]||(n[8]=function(t){return U("start")})},{default:j((function(){return n[18]||(n[18]=[b("启动 ")])})),_:1})):q("",!0),"exited"!==t.data.status?(h(),E(l,{key:1,size:"small",onClick:n[9]||(n[9]=function(t){return U("stop")})},{default:j((function(){return n[19]||(n[19]=[b("停止 ")])})),_:1})):q("",!0),w(l,{size:"small",onClick:n[10]||(n[10]=function(t){return U("restart")})},{default:j((function(){return n[20]||(n[20]=[b("重启 ")])})),_:1}),w(l,{size:"small",onClick:n[11]||(n[11]=function(n){return r=t.data,void nt({title:"详情展示",area:64,component:function(){return rt((function(){return e.import("./detail-view-legacy.js?v=1734676359")}),void 0,e.meta.url)},compData:r,btns:!1});var r})},{default:j((function(){return n[21]||(n[21]=[b("详情 ")])})),_:1}),w(l,{type:"default",plain:"",size:"small",class:"danger-button",onClick:n[12]||(n[12]=function(t){return U("rebuild")})},{default:j((function(){return n[22]||(n[22]=[b("重建 ")])})),_:1}),w(l,{type:"default",plain:"",size:"small",class:"danger-button",onClick:$},{default:j((function(){return n[23]||(n[23]=[b("卸载")])})),_:1})])):q("",!0),t.data.installed?q("",!0):(h(),E(o,{key:1,type:"info",class:"absolute bottom-6"},{default:j((function(){return[b(S(t.data.appTypeCN),1)]})),_:1}))])],2)}}}),Ft=et(Gt,[["__scopeId","data-v-48ab0081"]]),Mt={class:"w-full !h-[4rem] p-2rem inline-block flex justify-center items-center text-[1.2rem]"},Ht=f({__name:"index",setup:function(t){var e=J(),i=e.mainHeight,l=e.mainWidth,c=r().refs,s=c.deployMenuData,f=c.isRefreshAppList,p=c.isRefreshInstallList,k=tt(),C=v(null),L=v(!1),O=v(!1),S=null,A=lt().getCachedImage;B("getAppImages",A);var I=d("appData",{loading:!1,list:[],total:0}),z=d("appParams",{p:1,row:20,query:"",force:0}),T=d("getAppList",(function(t){})),N=R((function(){return l.value<1125?1:l.value<1632?2:3})),G=R((function(){return(l.value-35)/N.value}));V(C,(function(){F()}),{distance:15});var F=function(){var t=o(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!L.value){t.next=2;break}return t.abrupt("return");case 2:if(L.value=!0,O.value=!0,!(I.list.length<I.total)){t.next=13;break}if(z.p++,"installed"!==s.value.app_type){t.next=11;break}return t.next=9,M("all");case 9:t.next=13;break;case 11:return t.next=13,T(z);case 13:L.value=!1;case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),M=function(){var t=o(a().mark((function t(e,r){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r||(I.loading=!0),s.value.app_type="installed",t.next=5,X({request:u({app_type:e||"all",p:1,row:20,query:z.query||""}),success:function(t){t.status?(I.list=t.data.data.map((function(t,e){return n(n({},t),{},{index:e})}))||[],t.data.page?I.total=Q(t.data.page):I.total=0):k.error(t.msg)}});case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0);case 10:return t.prev=10,I.loading=!1,t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[0,7,10,13]])})));return function(e,n){return t.apply(this,arguments)}}(),U=function(){I.list.some((function(t){return"initializing"===t.status}))&&(S=setTimeout((function(){M("all",!0),U()}),3e4))};return m((function(){return s.value.app_type}),function(){var t=o(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(C.value.scrollTop=0,O.value=!1,"installed"!==e){t.next=9;break}return clearTimeout(S),t.next=6,M("all");case 6:U(),t.next=10;break;case 9:clearTimeout(S);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),m((function(){return f.value}),(function(t){t&&(T(z),f.value=!1)})),m((function(){return p.value}),(function(t){t&&(clearTimeout(S),M("all"),p.value=!1)})),y((function(){"installed"===s.value.app_type?p.value=!0:f.value=!0})),W((function(){clearTimeout(S)})),function(t,e){var n=Z,r=H,a=K;return h(),g("div",{ref_key:"scrollContainerRef",ref:C,style:Y("height:".concat(_(i)-240,"px")),class:"overflow-hidden relative scrollBox"},[D(w(_(st),{class:"AppList",style:Y("height:".concat(_(i)-280,"px;width: calc(20px + ").concat(_(G),"px * ").concat(_(N),");")),items:_(I).list,"item-size":"installed"===_(s).app_type?175:145,itemSecondarySize:_(G),gridItems:_(N),buffer:100,"key-field":"index",itemClass:"app-item",onScrollEnd:F},{default:j((function(t){var e=t.item;return[w(Ft,{data:e,onRefresh:M},null,8,["data"])]})),after:j((function(){return[_(O)&&_(I).list.length&&"installed"!==_(s).app_type?(h(),E(r,{key:0},{default:j((function(){return[x("span",Mt,[e[2]||(e[2]=b("没有更多了,如没有想要的应用可")),w(n,{onClick:_(ut)},{default:j((function(){return e[1]||(e[1]=[b("提交需求反馈")])})),_:1},8,["onClick"])])]})),_:1})):q("",!0)]})),_:1},8,["style","items","item-size","itemSecondarySize","gridItems"]),[[P,_(I).list.length]]),_(I).list.length?q("",!0):(h(),E(a,{key:0,class:"w-full"},{description:j((function(){return[x("span",null,[e[3]||(e[3]=b("未查询到搜索内容,")),x("span",{class:"inline-flex bt-link",onClick:e[0]||(e[0]=function(){return _(ut)&&_(ut).apply(void 0,arguments)})},"提交需求反馈")])]})),_:1}))],4)}}}),Bt=et(Ht,[["__scopeId","data-v-9650efa5"]]),Vt={class:"w-full"},Wt={class:"px-[1.6rem] pt-[1.6rem]"},Yt=f({__name:"index",setup:function(t){var e=r().refs.deployMenuData,i=tt(),u=v(null),l=U({loading:!1,list:[],total:0}),c=U({p:1,row:200,query:"",force:0}),f=function(){var t=o(a().mark((function t(){var r,o=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=o.length>0&&void 0!==o[0]?o[0]:{query:c.query,p:c.p,row:c.row,force:0},X({request:s(n(n({},r),{},{app_type:e.value.app_type})),loading:A(l,"loading"),success:function(t){t.status?(1===r.force&&i.success("刷新成功"),l.list=t.data.data.map((function(t,e){return n(n({},t),{},{index:e})})),l.total=Q(t.data.page),e.value.maximum_cpu=t.data.maximum_cpu,e.value.maximum_memory=t.data.maximum_memory+" MB"):i.error(t.msg)}});case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return B("getAppList",f),B("appData",l),B("appParams",c),function(t,e){var n=$("bt-loading");return h(),g("div",Vt,[x("div",Wt,[w(gt,{ref_key:"TopToolsRef",ref:u,class:"mb-8px"},null,512)]),D(w(Bt,null,null,512),[[n,_(l).loading],[n,"正在加载列表，请稍后...","title"]])])}}});t("default",et(Yt,[["__scopeId","data-v-7438ea5e"]]))}}}))}();
