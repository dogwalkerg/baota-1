import{bX as e,aj as a,bY as t,an as s,l,b as r,ao as o,O as i}from"./utils-lib.js?v=1734676359";import{_ as n}from"./index90.js?v=1734676359";import{B as p}from"./index185.js?v=1734676359";import{c as m,e as d,y as u,C as c,B as f,A as h,k as b,l as j,x as v,p as y,J as x,z as C}from"./base-lib.js?v=1734676359";import{a as k,b as _,u as g}from"./column.js?v=1734676359";import{u as B,S as w}from"./useStore7.js?v=1734676359";import{u as S,i as q,f as E,a as F,e as H,j as R,g as T,c as V,b as z,q as A,s as J,h as L,k as O}from"./useController11.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./ace.js?v=1734676359";import"./index91.js?v=1734676359";import"./site.js?v=1734676359";const P={class:"h-full"},U=m({__name:"redirect",setup(m){const U=r(),{isBindExtranet:X,siteType:Y}=B();w();const{isRefreshList:D}=S(),G=o([{label:"启用重定向规则",value:"start",event:O},{label:"停用重定向规则",value:"stop",event:O},{label:"删除重定向规则",value:"delete",event:O}]),{BtTable:I,BtRefresh:K,BtBatch:M}=e({request:q,columns:[k(),{label:"被重定向",render:e=>{var t;return e.errorpage?"404错误页面":"domain"===e.domainorpath?null==(t=a(e.redirectdomain,"array",[]))?void 0:t.join("、"):e.redirectpath}},{label:"重定向类型",prop:"domainorpath",render:e=>e.errorpage?"错误":"domain"===e.domainorpath?"域名":"路径"},{label:"重定向到",render:e=>e.topath?e.topath:e.tourl},_({prop:"type",event:E,data:["已停止","运行中"]}),g([{width:70,title:"配置文件",onClick:e=>{if(!e.type)return U.warn("请先启用重定向规则再查看配置文件");N(e)}},{title:"编辑",onClick:e=>{e.errorpage?F(e):H(e)}},{onClick:R,title:"删除"}])],extension:[t(),G,s(D)]}),N=async e=>{const a=U.load("正在查询配置文件内容，请稍候...");await T(e),a.close(),l({title:"另存为模板",area:54,showFooter:!1,component:()=>d("div",{class:"p-[20px]"},[u("提示：Ctrl+F 搜索关键字，Ctrl+S 保存，Ctrl+H 查找替换"),c(d(p,{class:"!h-[36rem] my-[8px]",ref:"aceEditor",modelValue:z.value,"onUpdate:modelValue":e=>z.value=e,filePath:A.value},null),[[f("bt-loading"),V.value]]),d(h,{type:"primary",onClick:()=>J()},{default:()=>[u("保存")]}),d("ul",{class:"mt-[8px] leading-8 text-[1.2rem] list-disc ml-[20px]"},[d("li",null,[u("此处为该负载均衡的配置文件，若您不了解配置规则,请勿随意修改。")])])])})};return(e,a)=>{const t=n,s=i;return b(),j("div",P,[d(t,null,{"header-left":v((()=>[d(y(h),{type:"primary",onClick:a[0]||(a[0]=e=>y(H)())},{default:v((()=>a[1]||(a[1]=[u("添加重定向")]))),_:1}),["php","html"].includes(y(Y))?(b(),x(y(h),{key:0,type:"default",onClick:y(F)},{default:v((()=>a[2]||(a[2]=[u("404重定向")]))),_:1},8,["onClick"])):C("",!0)])),"header-right":v((()=>[d(y(K))])),content:v((()=>[d(y(I),{"max-height":460})])),"footer-left":v((()=>[d(y(M))])),_:1}),d(s,{class:"mt-2rem",options:y(L),"list-style":"disc"},null,8,["options"])])}}});export{U as default};
