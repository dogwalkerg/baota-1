import{c as e,s as a,ax as s,i as r,e as t,y as o,C as l,bv as p,aw as i,A as u,bT as m,o as n,k as c,l as d,p as v}from"./base-lib.js?v=1734676359";import{D as g,j as f}from"./utils-lib.js?v=1734676359";import{b as h,i as b,a as x,h as y}from"./form-item.js?v=1734676359";import{p as w,q as j,r as _,v as C,w as k,x as q}from"./index127.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./index91.js?v=1734676359";import"./index90.js?v=1734676359";import"./column.js?v=1734676359";import"./useStore3.js?v=1734676359";import"./useController.js?v=1734676359";import"./validator.js?v=1734676359";const V={class:"p-[2rem] max-h-[60rem] overflow-auto"},F=e({__name:"python-form",setup(e,{expose:F}){const U=w(),{versionOptions:O,extendOptions:z,popoverFocus:A,isEdit:B}=a(U),D=s("popupClose",(()=>{})),{BtForm:E,submit:H,param:M}=g({data:j,options:e=>r((()=>[h("名称","name",{attrs:{class:"!w-[320px]",placeholder:"请输入环境名称",disabled:B.value},rules:[{required:!0,message:"请输入环境名称",trigger:"blur"}]}),b("版本","version",O.value,{attrs:{class:"!w-[22rem]",disabled:B.value},rules:[{required:!0,message:"请选择Python版本",trigger:"change"}]}),x("运行目录","path",{attrs:{class:"!w-[320px]",placeholder:"请选择运行目录"},rules:[{required:!0,message:"请选择运行目录",trigger:"change"}],icon:"icon-file_mode",iconClick:()=>{_(e)}}),y("启动命令",(()=>t(i,{ref:"pythonpopover",placement:"top-start","popper-class":"green-tips-popover !p-0",title:"",width:"440",visible:A.value,"onUpdate:visible":e=>A.value=e,"trigger-keys":[],trigger:"focus"},{default:()=>t("div",{class:"!p-[12px] bg-[#20a53a] text-white"},[o("请填写完整启动命令，如：python main.py")]),reference:()=>l(t(f,{modelValue:e.value.command,"onUpdate:modelValue":a=>e.value.command=a,type:"textarea",width:"52rem",rows:7,resize:"none",onFocus:()=>{A.value=!0},placeholder:"请填写完整启动命令，如：python main.py"},null),[[p,"pythonpopover"]])})),"command",{attrs:{class:"!w-[52rem]"},rules:[{required:!0,message:"请填写完整启动命令，如：python main.py",trigger:"change"}]}),...e.value.port&&e.value.port.length>0?[C(e.value.port),y(" ",(()=>t(u,{type:"default",onClick:()=>{e.value.port.push({server:"",con:"",output:!1,protocol:["tcp"],id:1})}},{default:()=>[o("添加")]})))]:[y("端口",(()=>t(u,{type:"default",onClick:()=>{e.value.port.push({server:"",con:"",output:!1,protocol:["tcp"],id:1e3*Math.random()})}},{default:()=>[o("添加")]})))],y("镜像源",(()=>t(m,{modelValue:e.value.repo_url,"onUpdate:modelValue":a=>e.value.repo_url=a,class:"!w-[32rem]",placeholder:"请选择或输入镜像源","fetch-suggestions":(e,a)=>{a(z.value)},"popper-class":"my-extautocomplete"},{default:({item:a})=>t("div",{class:a.value===e.value.repo_url?"bg-[#f5f7fa] flex items-center justify-between px-[2rem]":"flex items-center justify-between px-[2rem]"},[t("div",{class:a.value===e.value.repo_url?"bt-link w-[38rem] truncate":"w-[38rem] truncate"},[a.label])])})),"repo_url",{attrs:{class:"!w-[22rem]"},rules:[{required:!0,message:"请输入或选择镜像源",trigger:"change"}]})])),submit:async(e,a,s)=>{await a(),k(e.value,D)}});return n((()=>{q(M)})),F({onConfirm:H}),(e,a)=>(c(),d("div",V,[t(v(E))]))}});export{F as default};
