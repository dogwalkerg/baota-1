import{c as e,s as a,ax as s,i as o,e as r,y as t,C as l,bv as i,aw as p,A as u,o as m,k as n,l as c,p as d}from"./base-lib.js?v=1734676359";import{D as g,j as v}from"./utils-lib.js?v=1734676359";import{b as f,i as h,a as b,h as j}from"./form-item.js?v=1734676359";import{y as x,z as w,A as C,B as y,C as _,E as k}from"./index127.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./index91.js?v=1734676359";import"./index90.js?v=1734676359";import"./column.js?v=1734676359";import"./useStore3.js?v=1734676359";import"./useController.js?v=1734676359";import"./validator.js?v=1734676359";const q={class:"p-[2rem] max-h-[60rem] overflow-auto"},F=e({__name:"go-form",setup(e,{expose:F}){const z=x(),{versionOptions:A,popoverFocus:B,isEdit:E}=a(z),U=s("popupClose",(()=>{})),{BtForm:V,submit:D,param:G}=g({data:w,options:e=>o((()=>[f("名称","name",{attrs:{class:"!w-[320px]",placeholder:"请输入环境名称",disabled:E.value},rules:[{required:!0,message:"请输入环境名称",trigger:"blur"}]}),h("版本","version",A.value,{attrs:{class:"!w-[22rem]",disabled:E.value},rules:[{required:!0,message:"请选择Go版本",trigger:"change"}]}),b("运行目录","path",{attrs:{class:"!w-[320px]",placeholder:"请选择运行目录"},rules:[{required:!0,message:"请选择运行目录",trigger:["blur","change"]}],icon:"icon-file_mode",iconClick:()=>{C(e)}}),j("启动命令",(()=>r(p,{ref:"gopopover",placement:"top-start","popper-class":"green-tips-popover !p-0",title:"",width:"440",visible:B.value,"onUpdate:visible":e=>B.value=e,"trigger-keys":[],trigger:"focus"},{default:()=>r("div",{class:"!p-[12px] bg-[#20a53a] text-white"},[t("请填写完整启动命令，如：go run main.go")]),reference:()=>l(r(v,{modelValue:e.value.command,"onUpdate:modelValue":a=>e.value.command=a,type:"textarea",width:"52rem",rows:7,resize:"none",onFocus:()=>{B.value=!0},placeholder:"请填写完整启动命令，如：go run main.go"},null),[[i,"gopopover"]])})),"command",{attrs:{class:"!w-[52rem]"},rules:[{required:!0,message:"请填写完整启动命令，如：go run main.go",trigger:"change"}]}),...e.value.port&&e.value.port.length>0?[y(e.value.port),j(" ",(()=>r(u,{type:"default",onClick:()=>{e.value.port.push({server:"",con:"",output:!1,protocol:["tcp"],id:1})}},{default:()=>[t("添加")]})))]:[j("端口",(()=>r(u,{type:"default",onClick:()=>{e.value.port.push({server:"",con:"",output:!1,protocol:["tcp"],id:1e3*Math.random()})}},{default:()=>[t("添加")]})))]])),submit:async(e,a,s)=>{await a(),_(e.value,U)}});return m((()=>{k(G)})),F({onConfirm:D}),(e,a)=>(n(),c("div",q,[r(d(V))]))}});export{F as default};
