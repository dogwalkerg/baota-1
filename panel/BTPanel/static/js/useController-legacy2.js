!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}var e=["p"];function r(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function n(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(e,r,n){return(r=function(e){var r=function(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,r||"default");if("object"!=t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==t(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function u(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */u=function(){return r};var e,r={},n=Object.prototype,a=n.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",i=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function p(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{p({},"")}catch(e){p=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var a=e&&e.prototype instanceof b?e:b,u=Object.create(a.prototype),c=new j(n||[]);return o(u,"_invoke",{value:_(t,r,c)}),u}function v(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}r.wrap=f;var d="suspendedStart",h="suspendedYield",g="executing",m="completed",y={};function b(){}function w(){}function x(){}var k={};p(k,s,(function(){return this}));var S=Object.getPrototypeOf,L=S&&S(S(C([])));L&&L!==n&&a.call(L,s)&&(k=L);var P=x.prototype=b.prototype=Object.create(k);function T(t){["next","throw","return"].forEach((function(e){p(t,e,(function(t){return this._invoke(e,t)}))}))}function O(e,r){function n(u,o,c,s){var i=v(e[u],e,o);if("throw"!==i.type){var l=i.arg,p=l.value;return p&&"object"==t(p)&&a.call(p,"__await")?r.resolve(p.__await).then((function(t){n("next",t,c,s)}),(function(t){n("throw",t,c,s)})):r.resolve(p).then((function(t){l.value=t,c(l)}),(function(t){return n("throw",t,c,s)}))}s(i.arg)}var u;o(this,"_invoke",{value:function(t,e){function a(){return new r((function(r,a){n(t,e,r,a)}))}return u=u?u.then(a,a):a()}})}function _(t,r,n){var a=d;return function(u,o){if(a===g)throw Error("Generator is already running");if(a===m){if("throw"===u)throw o;return{value:e,done:!0}}for(n.method=u,n.arg=o;;){var c=n.delegate;if(c){var s=E(c,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===d)throw a=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=g;var i=v(t,r,n);if("normal"===i.type){if(a=n.done?m:h,i.arg===y)continue;return{value:i.arg,done:n.done}}"throw"===i.type&&(a=m,n.method="throw",n.arg=i.arg)}}}function E(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,E(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var u=v(a,t.iterator,r.arg);if("throw"===u.type)return r.method="throw",r.arg=u.arg,r.delegate=null,y;var o=u.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function F(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function q(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(F,this),this.reset(!0)}function C(r){if(r||""===r){var n=r[s];if(n)return n.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var u=-1,o=function t(){for(;++u<r.length;)if(a.call(r,u))return t.value=r[u],t.done=!1,t;return t.value=e,t.done=!0,t};return o.next=o}}throw new TypeError(t(r)+" is not iterable")}return w.prototype=x,o(P,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:w,configurable:!0}),w.displayName=p(x,l,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,p(t,l,"GeneratorFunction")),t.prototype=Object.create(P),t},r.awrap=function(t){return{__await:t}},T(O.prototype),p(O.prototype,i,(function(){return this})),r.AsyncIterator=O,r.async=function(t,e,n,a,u){void 0===u&&(u=Promise);var o=new O(f(t,e,n,a),u);return r.isGeneratorFunction(e)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},T(P),p(P,l,"Generator"),p(P,s,(function(){return this})),p(P,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=C,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(q),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,a){return c.type="throw",c.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var u=this.tryEntries.length-1;u>=0;--u){var o=this.tryEntries[u],c=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=a.call(o,"catchLoc"),i=a.call(o,"finallyLoc");if(s&&i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!i)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var u=n;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=e&&e<=u.finallyLoc&&(u=null);var o=u?u.completion:{};return o.type=t,o.arg=e,u?(this.method="next",this.next=u.finallyLoc,y):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),q(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;q(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},r}function o(t,e,r,n,a,u,o){try{var c=t[u](o),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,a)}function c(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var u=t.apply(e,r);function c(t){o(u,n,a,c,s,"next",t)}function s(t){o(u,n,a,c,s,"throw",t)}c(void 0)}))}}System.register(["./utils-lib-legacy.js?v=1734676359","./index-legacy99.js?v=1734676359","./base-lib-legacy.js?v=1734676359","./index-legacy101.js?v=1734676359","./useStore-legacy6.js?v=1734676359","./index-legacy90.js?v=1734676359","./index-legacy272.js?v=1734676359","./column-legacy.js?v=1734676359","./validator-legacy.js?v=1734676359"],(function(t,r){"use strict";var o,s,i,l,p,f,v,d,h,g,m,y,b,w,x,k,S,L,P,T,O,_,E,F,q,j,C,D,M,A,N,R,I,V,B,H,G,J,W,z,Y,K,U,$,X,Q,Z,tt,et,rt,nt,at,ut,ot,ct,st,it,lt,pt,ft,vt,dt,ht,gt,mt,yt,bt,wt,xt,kt,St,Lt,Pt,Tt,Ot,_t,Et,Ft,qt,jt,Ct,Dt,Mt,At,Nt,Rt,It,Vt,Bt,Ht,Gt,Jt,Wt,zt,Yt,Kt,Ut,$t,Xt,Qt;return{setters:[function(t){o=t.G,s=t.M,i=t.ah,l=t.a7,p=t.S,f=t.u,v=t.J,d=t.aM,h=t.o,g=t.F,m=t.e,y=t.U,b=t.al,w=t.bI,x=t.bJ,k=t.R,S=t.bK,L=t.bL,P=t.t,T=t.l,O=t.k,_=t.bM,E=t.H,F=t.aj,q=t.bN,j=t.bO,C=t.bP},function(t){D=t._},function(t){M=t.g,A=t.s,N=t.r,R=t.R,I=t.i,V=t.h,B=t.c,H=t.w,G=t.k,J=t.l,W=t.q,z=t.J,Y=t.p,K=t.M,U=t.z,$=t.G,X=t.I,Q=t.aX,Z=t.e,tt=t.x,et=t.y,rt=t.F,nt=t.H,at=t.au,ut=t.v,ot=t.o,ct=t.A,st=t.b0,it=t.C,lt=t.B},function(t){pt=t._},function(t){ft=t.g,vt=t.b,dt=t.c,ht=t.d,gt=t.s,mt=t.e,yt=t.f,bt=t.h,wt=t.i,xt=t.j,kt=t.k,St=t.l,Lt=t.m,Pt=t.u,Tt=t.n,Ot=t.r,_t=t.o,Et=t.p,Ft=t.L,qt=t.q,jt=t.t,Ct=t.v,Dt=t.w,Mt=t.x,At=t.y,Nt=t.z,Rt=t.A,It=t.B,Vt=t.C,Bt=t.D,Ht=t.E,Gt=t.F,Jt=t.G,Wt=t.H,zt=t.a,Yt=t.I},function(t){Kt=t._},function(t){Ut=t._},function(t){$t=t.u,Xt=t.c},function(t){Qt=t.e}],execute:function(){var Zt,te=function(t){return t.TamperProof="网站防篡改",t.Syssafe="宝塔系统加固",t.Security="堡塔防入侵",t.TamperProofRefactored="网站防篡改程序-重构版",t}(te||{}),ee=t("k",M("LOG-SOFT-STORE",(function(){var t=N([]),e=N(""),r=N(),f=N([]),v=N(""),d=N(""),h=N(""),g=N("login"),m=N(""),y=function(){var r=c(u().mark((function r(){var n,a;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n=function(t){return t.map((function(t){return{name:t,id:t}}))},r.next=4,o({loading:"正在获取日志菜单，请稍后...",request:ft(),data:[Array,n],success:function(r){var n;t.value=r,e.value=null===(n=r[0])||void 0===n?void 0:n.name}});case 4:return a=r.sent,r.abrupt("return",{data:a,status:!0});case 8:return r.prev=8,r.t0=r.catch(0),r.abrupt("return",{status:!1,data:[],msg:"获取日志菜单失败"});case 12:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(){return r.apply(this,arguments)}}(),b=function(){var t=c(u().mark((function t(){var r,a,c,s,i=arguments;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:"",t.prev=1,a="Php"===e.value,c=a?vt:dt,t.next=6,o({loading:"正在获取日志数据，请稍后...",request:c({data:JSON.stringify({name:e.value,search:r})})});case 6:return s=t.sent,t.abrupt("return",n({},s.data));case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",{status:!1,data:[],msg:"获取日志数据失败"});case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(){return t.apply(this,arguments)}}(),w=function(){var t=c(u().mark((function t(){var e;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={type:1,path:h.value},t.next=3,o({loading:"正在清空日志,请稍候...",request:ht(e),message:!0});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),x=function(){var t=c(u().mark((function t(){var e,r,n,a;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=s.load("正在获取FTP日志状态，请稍后..."),t.prev=1,t.next=4,gt({exec_name:"getlog"});case 4:return r=t.sent,n=r.status,a=r.msg,t.abrupt("return",{status:n,data:a});case 10:return t.prev=10,t.t0=t.catch(1),i(t.t0),t.abrupt("return",{status:!1,data:"获取FTP日志状态失败"});case 14:return t.prev=14,e.close(),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,10,14,17]])})));return function(){return t.apply(this,arguments)}}(),k=function(){var t=c(u().mark((function t(){var e,r,n,a;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=s.load("正在开启FTP服务，请稍后..."),t.prev=1,t.next=4,gt({exec_name:"start"});case 4:return r=t.sent,n=r.status,a=r.msg,t.abrupt("return",{status:n,msg:a});case 10:return t.prev=10,t.t0=t.catch(1),i(t.t0),t.abrupt("return",{status:!1,msg:"开启FTP服务失败"});case 14:return t.prev=14,e.close(),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,10,14,17]])})));return function(){return t.apply(this,arguments)}}(),S=function(){var t=c(u().mark((function t(e){var r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o({loading:"正在获取FTP日志,请稍后...",request:mt(e),data:{data:Array,page:String}});case 3:if(r=t.sent,Array.isArray(null==r?void 0:r.data)){t.next=6;break}return t.abrupt("return",{total:0,data:[],other:{}});case 6:return t.abrupt("return",{data:r.data,total:l(r.page),other:{}});case 9:return t.prev=9,t.t0=t.catch(0),i(t.t0),t.abrupt("return",{total:0,data:[],other:{}});case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),L=function(){var t=c(u().mark((function t(e){var r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o({loading:"正在获取FTP操作日志,请稍后...",request:yt(e),data:{data:Array,page:String}});case 3:if(r=t.sent,Array.isArray(null==r?void 0:r.data)){t.next=6;break}return t.abrupt("return",{total:0,data:[],other:{}});case 6:return t.abrupt("return",{data:r.data,total:l(r.page),other:{}});case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",{total:0,data:[],other:{}});case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),P=function(){var t=c(u().mark((function t(){var e,r,n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o({loading:"正在获取FTP用户名,请稍后...",request:bt({p:1,limit:99999,search:"",table:"ftps"}),data:{data:Array}});case 3:return e=t.sent,r=e.data,n=e.status,t.abrupt("return",{data:r,status:n,msg:"获取用户成功"});case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",{status:!1,data:[],msg:"获取用户失败"});case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();a(a(a(a({Nginx:["Nginx","logs"],Apache:["Apache","logs"]},te.TamperProof,"bt_security"),te.Syssafe,"syssafe"),te.Security,"security"),te.TamperProofRefactored,"bt_security");var T=function(){var t=c(u().mark((function t(r){var n,a,c;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n=null,"Docker"!==e.value){t.next=11;break}return t.next=5,o({request:wt(r)});case 5:a=t.sent,c=a.data,(n=c).total=l(c.page),t.next=21;break;case 11:if(e.value!==te.Syssafe){t.next=17;break}return t.next=14,O(r);case 14:n=t.sent,t.next=21;break;case 17:if(e.value!==te.Security){t.next=21;break}return t.next=20,_(r);case 20:n=t.sent;case 21:return t.abrupt("return",{data:n.data,total:n.total,other:{}});case 24:return t.prev=24,t.t0=t.catch(0),i(t.t0),t.abrupt("return",{total:0,data:[],other:{}});case 28:case"end":return t.stop()}}),t,null,[[0,24]])})));return function(e){return t.apply(this,arguments)}}(),O=function(){var t=c(u().mark((function t(e){var r,n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o({loading:"正在获取日志数据，请稍后...",request:xt({data:JSON.stringify({name:"syssafe",search:e.search,ROWS:e.ROWS})})});case 3:return r=t.sent,n=r.data,t.abrupt("return",{data:n.msg.data,total:n.total||l(n.msg.page),other:{}});case 8:return t.prev=8,t.t0=t.catch(0),i(t.t0),t.abrupt("return",{total:0,data:[],other:{}});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),_=function(){var t=c(u().mark((function t(e){var r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o({loading:"正在获取日志数据，请稍后...",request:kt({data:JSON.stringify({name:"bt_security",search:e.search,ROWS:e.ROWS})}),data:{"msg.data":[Array,function(t){return{data:t}}],"msg.page":p()}});case 3:return r=t.sent,t.abrupt("return",{data:r.data,total:r.total,other:{}});case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{total:0,data:[],other:{}});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),E=function(){var t=c(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o({loading:"正在删除日志,请稍候...",request:ht({type:0,id:e.id}),message:!0,success:r.value});case 3:return t.abrupt("return",{status:!0,msg:"删除日志成功"});case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",{status:!1,data:[],msg:"删除日志失败"});case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),F=N("mysqlSlow"),q=N([]),j=function(){var t=c(u().mark((function t(e){var r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,St({data:JSON.stringify({limit:"5000",search:e})});case 3:return r=t.sent,t.abrupt("return",{data:r.data.msg,status:!0,msg:""});case 7:return t.prev=7,t.t0=t.catch(0),i(t.t0),t.abrupt("return",{status:!1,data:"",msg:"获取日志数据失败"});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),C=function(){var t=c(u().mark((function t(e,r){var n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Lt({screening:q.value.length?q.value.join(","):"",keywords:e||""});case 3:return n=t.sent,t.abrupt("return",{data:n.data,status:!0,msg:""});case 7:return t.prev=7,t.t0=t.catch(0),i(t.t0),t.abrupt("return",{status:!1,data:"",msg:"获取日志数据失败"});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,r){return t.apply(this,arguments)}}(),D=function(){var t=c(u().mark((function t(){var e;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e={type:2,assort:"mysqlSlow"===F.value?"slow":"error"},t.next=4,o({loading:"正在清空日志,请稍候...",request:ht(e),message:!0});case 4:return t.abrupt("return",{status:!0,msg:"清空日志成功"});case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{status:!1,msg:"清空日志失败"});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return{menuOptions:t,currentName:e,searchValue:m,phpData:f,phpChecked:v,logsMsg:d,logPath:h,getMenuList:y,getSoftLog:b,ftpType:g,getFtpMenu:P,getFtpLogStatus:x,startFtpLog:k,getFtpLogData:S,getFtpActionLog:L,renderSysSecurityLog:_,renderSysSafeLog:O,getPluginLogData:T,mysqlActive:F,checkList:q,getErrorMysqlData:C,getMysqlLogsData:j,handleMysqlTabClick:function(t){var e;return"mysqlSlow"===t||"mysqlSlow"===(null===(e=t.props)||void 0===e?void 0:e.name)?j():C()},delMysqlAllLogEvent:D,delAllLogDataEvent:w,delSoftLogEvent:E,refreshPlugin:r}}))),re=f().payment,ne=(Zt=ee(),A(Zt)),ae=ne.currentName,ue=ne.logsMsg,oe=ne.phpChecked,ce=ne.phpData,se=ne.mysqlActive,ie=(ne.ftpType,ne.logPath),le=ne.refreshPlugin,pe=ee(),fe=pe.getSoftLog,ve=pe.getFtpMenu,de=pe.getFtpLogStatus,he=pe.startFtpLog,ge=pe.getFtpActionLog,me=pe.getFtpLogData,ye=pe.delMysqlAllLogEvent,be=pe.delAllLogDataEvent,we=pe.getMysqlLogsData,xe=pe.getErrorMysqlData,ke=pe.delSoftLogEvent,Se=t("z",["Docker","宝塔系统加固","堡塔防入侵"]),Le=(t("p",{title:"FTP日志-功能介绍",ps:"记录FTP登录记录，FTP上传、下载、重命名和删除记录.",source:131,desc:["FTP登录记录","FTP上传记录","FTP重命名记录","FTP删除记录"],tabImgs:[{title:"FTP日志",imgSrc:"https://www.bt.cn/Public/new/plugin/introduce/logs/ftp-logs.png"}]}),t("i",N(!0)));R();var Pe=t("s",N("")),Te=t("g",N("")),Oe=t("h",N([])),_e=t("j",N(!1)),Ee=(t("D",function(){var t=c(u().mark((function t(e,r){var n,a;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=Pt(),a=n.selectedItem,ae.value=e.name,a.value=e.name,Pe.value="",!Se.includes(e.name)){t.next=8;break}return t.abrupt("return",le.value&&le.value());case 8:if("Mysql"!==e.name){t.next=12;break}t.next=19;break;case 12:if("FTP"!==e.name){t.next=16;break}t.next=19;break;case 16:return t.next=18,Ee(e);case 18:return t.abrupt("return",t.sent);case 19:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()),t("x",function(){var t=c(u().mark((function t(e,r){var n,a;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ae.value=e.name,t.next=3,fe(r);case 3:return n=t.sent,"Php"===ae.value?(v(n)?ce.value=n:ce.value=Object.values(n),ce.value=ce.value.filter((function(t){return t.status})),""===oe.value&&(oe.value=ce.value[0].version),Fe(oe.value)):d(n)&&(a=n,ie.value=(null==a?void 0:a.file)||"",ue.value=(null==a?void 0:a.msg)||"暂无数据"),t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}())),Fe=(t("B",function(){var t=c(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h({title:"清空日志【".concat(ae.value,"】"),icon:"warning-filled",type:"calc",content:"风险操作，清空该日志后，将无法查到以往的日志记录，此操作不可逆，是否继续清空？"});case 2:return t.next=4,be();case 4:Ee({name:ae.value});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t("C",(function(t){var e;null===(e=ce.value)||void 0===e||e.forEach((function(e){e.version==t&&(ue.value=e.msg,ie.value=e.file)}))}))),qe=(t("A",(function(){return window.open("/download?filename="+ie.value)})),function(){var t=c(u().mark((function t(){var e,r,n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("ltd"===re.value.authType){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,ve();case 4:r=t.sent,n=r.data,Oe.value=n.map((function(t){return{label:t.name,value:t.name,key:t.id}})),Te.value=(null===(e=n[0])||void 0===e?void 0:e.name)||"";case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()),je=function(){var t=c(u().mark((function t(){var e;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,de();case 2:if("stop"!==t.sent.data){t.next=12;break}return t.next=6,h({title:"FTP服务",content:"FTP服务未启动，无法获取日志,是否立即开启FTP服务?"});case 6:return t.next=8,he();case 8:return e=t.sent,s.request(e),_e.value=!0,t.abrupt("return",!1);case 12:return t.abrupt("return",!0);case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Ce=(t("r",function(){var t=c(u().mark((function t(e){var r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("ltd"===re.value.authType){t.next=2;break}return t.abrupt("return",{data:[],total:0,other:{}});case 2:if(!Le.value){t.next=6;break}return t.next=5,qe();case 5:Le.value=!1;case 6:return t.prev=6,t.next=9,je();case 9:if(t.sent){t.next=12;break}return t.abrupt("return",{data:[],total:0,other:{}});case 12:if((r=n({},e)).user_name=Te.value,delete r.ftpType,"login"!==e.ftpType){t.next=19;break}return t.next=18,me(r);case 18:return t.abrupt("return",t.sent);case 19:if("action"!==e.ftpType){t.next=23;break}return t.next=22,ge(r);case 22:return t.abrupt("return",t.sent);case 23:t.next=29;break;case 25:return t.prev=25,t.t0=t.catch(6),t.abrupt("return",{data:[],total:0,other:{}});case 29:case"end":return t.stop()}}),t,null,[[6,25]])})));return function(e){return t.apply(this,arguments)}}()),function(t){return t.TamperProof="网站防篡改",t.Syssafe="宝塔系统加固",t.Security="堡塔防入侵",t.TamperProofRefactored="网站防篡改程序-重构版",t}(Ce||{}));a(a(a(a({Nginx:["Nginx","logs"],Apache:["Apache","logs"]},Ce.TamperProof,"bt_security"),Ce.Syssafe,"syssafe"),Ce.Security,"security"),Ce.TamperProofRefactored,"bt_security");var De,Me=function(){var t=c(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h({title:"删除日志【".concat(ae.value,"】"),type:"calc",content:"风险操作，删除该日志后，将无法查到以往的日志记录，此操作不可逆，是否继续清空？"});case 2:ke(e);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Ae=(t("m",[{label:"Mysql慢日志",value:"mysqlSlow"},{label:"Mysql错误日志",value:"mysqlError"}]),t("T",[{label:"删除",value:"delete",event:(De=c(u().mark((function t(e,r){var n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=function(){var t=c(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ht({type:0,id:e.id});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.next=3,e({title:"批量删除",content:"即将删除所选中的日志，是否继续操作?",column:[{prop:"log",label:"日志内容"},Xt()],onConfirm:function(){var t=c(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r(n);case 2:return le.value(),t.abrupt("return",!1);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()});case 3:case"end":return t.stop()}}),t)}))),function(t,e){return De.apply(this,arguments)})}]),function(){return[{type:"selection"},{label:"用户",prop:"username"},{label:"详情",prop:"log"},{label:"操作时间",prop:"addtime",align:"right"},$t([{title:"删除",onClick:Me}])]}),Ne=(t("w",I((function(){return"宝塔系统加固"===ae.value?function(){return Ae().slice(1)}:function(){return Ae()}}))),t("q",N(""))),Re=(t("o",[{label:"警告",value:"warning"},{label:"错误",value:"error"},{label:"记录",value:"note"}]),t("n",c(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h({title:"清空日志【Mysql".concat("mysqlSlow"===se.value?"慢日志":"错误日志","】"),icon:"warning-filled",content:"您真的要清空所有【Mysql".concat("mysqlSlow"===se.value?"慢日志":"错误日志","】吗？")});case 2:return t.next=4,ye();case 4:Re();case 5:case"end":return t.stop()}}),t)})))),t("l",function(){var t=c(u().mark((function t(e){var r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null,"mysqlSlow"!==se.value){t.next=5;break}return t.next=4,we(e);case 4:r=t.sent;case 5:if("mysqlError"!==se.value){t.next=9;break}return t.next=8,xe(e);case 8:r=t.sent;case 9:Ne.value=r.data||"暂无数据";case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),Ie=(t("v",function(){var t=c(u().mark((function t(e){var r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.props,se.value=r.name,Re("");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),["Mysql","FTP","Docker","宝塔系统加固","堡塔防入侵"]),Ve=(t("y",I((function(){return Ie.includes(ae.value)}))),t("e",M("LOG-SSH-STORE",(function(){var t=N(!1),e=function(){var t=c(u().mark((function t(e){var r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o({loading:"正在获取日志数据，请稍后...",request:Tt({data:JSON.stringify(e)})});case 3:if((r=t.sent).status||!r.msg){t.next=6;break}return t.abrupt("return",s.error(r.msg));case 6:return t.abrupt("return",{data:r.data,total:r.data.length,other:{}});case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",{data:[],total:0,other:{}});case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),r=function(){var t=c(u().mark((function t(e,r){var n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o({loading:"正在处理中，请稍后...",request:r?Ot(e):_t(e)});case 3:return n=t.sent,t.abrupt("return",{msg:n.data[0].msg,status:n.data[0].status,data:{ip:n.data[0].ip}});case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{msg:"操作失败",status:!1,data:{}});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,r){return t.apply(this,arguments)}}(),n=function(){var t=c(u().mark((function t(e){var r,n,a,c;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=e.count,n=e.type,"all"===(a={count:r,select:n}).select&&delete a.select,t.next=6,o({loading:"正在导出日志，请稍后...",request:Et({data:JSON.stringify(a)}),success:function(t){window.open("/download?filename="+t.data.output_file)}});case 6:return c=t.sent,t.abrupt("return",{status:c.status,msg:"导出".concat(c.status?"成功":"失败")});case 10:return t.prev=10,t.t0=t.catch(0),t.abrupt("return",{status:!1,msg:"导出失败"});case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}();return{isRefreshList:t,getLogs:e,changeIpRules:r,outLogs:n}})))),Be=(t("f",(function(){return A(Ve())})),t("L",M("LOG-SITE-STORE",(function(){var t=Ft(),e=A(t).selectedWebSite,r=N(!1),a=N(!1),p=N(),f=N(!1),v=N(""),d=V({ipArea:!1,typeValue:"access",timeValue:"",searchValue:"",keywordSwitch:!1,keywordConfig:{}}),h=N(),g=V({give:"",keyword:"",cycle:""}),m=N(!1),y=N(!1),b=N(),w=N(),x=N(!1),k=V({site:[]}),S=N(!1),L=N(),P=N([]),T=V({ip:"",id:0,port:""}),O=function(){var t=c(u().mark((function t(){var r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o({loading:"正在获取网站列表，请稍后...",request:qt(),data:{msg:[Array,function(t){p.value=t,e.value=p.value[0]||""}]}});case 3:return r=t.sent,t.abrupt("return",{data:r.msg,status:!0});case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{msg:"获取网站列表失败 ",status:!1});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),_=function(){var t=c(u().mark((function t(r,n){var a;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o({loading:"正在清理日志中，请稍后....",request:jt({siteName:e.value,logType:n,time_search:JSON.stringify(r)}),message:!0});case 3:return a=t.sent,t.abrupt("return",{status:a.status,msg:a.msg});case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{msg:"清理失败",status:!1});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,r){return t.apply(this,arguments)}}(),E=function(){var t=c(u().mark((function t(r,n){var a;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o({loading:"正在导出日志中，请稍后....",request:Ct({siteName:e.value,logType:n,time_search:JSON.stringify(r)}),data:{msg:String,status:Boolean}});case 3:return(a=t.sent).status&&window.open("/download?filename="+a.msg),t.abrupt("return",{status:a.status,msg:"导出".concat(a.status?"成功":"失败"),data:a.msg});case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return",{msg:"导出失败",status:!1});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,r){return t.apply(this,arguments)}}(),F=function(){var t=c(u().mark((function t(r){var n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.value){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,o({loading:f,request:"error"===d.typeValue?Dt(r):Mt(r),data:{msg:String}});case 5:return n=t.sent,v.value=(null==n?void 0:n.msg)||"暂无数据",t.abrupt("return",{data:n.msg||"暂无数据",status:!0});case 11:t.prev=11,t.t0=t.catch(2),i(t.t0,"getSiteLogsData");case 14:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}(),q=function(){var t=c(u().mark((function t(){var r,a,o,c;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,At({sitename:e.value});case 3:return o=t.sent,c=o.data,d.keywordConfig=c.config,g.give=null===(r=d.keywordConfig.channel)||void 0===r?void 0:r.split(",").filter((function(t){return""!==t})),g.keyword=null===(a=d.keywordConfig.keys)||void 0===a?void 0:a.join(","),g.cycle=d.keywordConfig.cycle,d.keywordSwitch=c.status,t.abrupt("return",{data:n({},g),status:!0});case 13:return t.prev=13,t.t0=t.catch(0),i(t.t0,"getKeywordAlarmData"),t.abrupt("return",{msg:"获取关键字告警配置失败",status:!1});case 17:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),j=function(){var t=c(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o({loading:"正在设置关键字告警...",request:Nt(e),message:!0});case 3:return t.abrupt("return",{status:!0,msg:"设置关键字告警成功"});case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",{status:!1,msg:"设置关键字告警失败"});case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),C=function(){var t=c(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o({loading:"正在设置关键字告警配置，请稍后...",request:Nt(e),message:!0});case 3:return t.abrupt("return",{status:!0,msg:"设置关键字告警成功"});case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",{status:!1,msg:"设置关键字告警失败"});case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),D=function(){var t=c(u().mark((function t(){var r,n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o({loading:"正在获取关键字告警配置，请稍后...",request:At({sitename:e.value})});case 3:return r=t.sent,n=r.data,g.cycle=n.config.cycle,g.keyword=n.config.keys.join(","),""!=n.config.channel&&(g.give=n.config.channel.split(",")),t.abrupt("return",{data:g,status:!0});case 11:return t.prev=11,t.t0=t.catch(0),t.abrupt("return",{msg:"获取关键字告警配置失败",status:!1});case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),M=function(){var t=c(u().mark((function t(r){var n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e.value){t.next=3;break}return t.abrupt("return");case 3:return r.search||(r.search=e.value),t.next=6,o({loading:m,request:Rt({data:JSON.stringify(r)}),data:{data:Array,page:String}});case 6:return n=t.sent,t.abrupt("return",{data:n.data,total:l(n.page),other:{}});case 10:return t.prev=10,t.t0=t.catch(0),t.abrupt("return",{data:[],total:0,other:{}});case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}(),R=function(){var t=c(u().mark((function t(){var r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,It({search:e.value});case 3:return r=t.sent,window.open("/download?filename="+r.data.output_file),t.abrupt("return",{status:!0,msg:"导出成功"});case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return",{status:!1,msg:"导出失败"});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),I=function(){var t=c(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o({loading:"正在删除日志源，请稍候...",request:Vt(e),message:!0,success:G});case 3:return t.abrupt("return",{status:!0,msg:"删除成功"});case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",{status:!1,msg:"删除失败"});case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),B=function(){var t=c(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o({loading:"正在设置日志系统配置中...",request:e.server_id?Bt(e):Ht(e),message:!0});case 3:return t.abrupt("return",{status:!0,msg:"设置成功"});case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",{status:!1,msg:"设置失败"});case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),H=function(){var t=c(u().mark((function t(e){var r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o({loading:"正在设置日志源中...",request:Gt(e)});case 3:return r=t.sent,s.request(r.data[0]),x.value=!1,t.abrupt("return",r);case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",{status:!1,msg:"设置失败"});case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}();N([]);var G=function(){var t=c(u().mark((function t(){var e;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o({loading:m,request:Jt(),data:Array});case 3:return e=t.sent,t.abrupt("return",{data:e,total:e.length,other:{}});case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{data:[],total:0,other:{}});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),J=function(){var t=c(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o({loading:"正在获取日志服务系统配置中,请稍后...",request:Wt(),data:[Array,P]});case 3:return P.value.length>0&&(T.ip=P.value[0].ip,T.port=P.value[0].port,T.id=P.value[0].id),t.abrupt("return",{data:P.value,status:!0});case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{msg:"获取日志服务系统配置失败",status:!1});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return{siteList:p,getSiteList:O,logParams:d,preLoading:f,logMsg:v,logScanForm:h,msgForm:g,getSiteLogsData:F,setKeyWordConfigEvent:j,clearWebLogEvent:_,outWebLogEvent:E,getKeywordAlarmData:q,getScanData:D,tableLoading:m,getOperateLog:M,outLogs:R,sForm:w,logSysForm:L,sendSource:x,logSystemDialog:S,logSystemForm:T,sourceForm:k,logSystemData:b,logSystemLoad:y,logSystemList:P,getLogSystemData:G,getLogSystemSite:J,logSystemConfirm:B,sendSourceConfirm:H,delLogSourceEvent:I,onConfirmKeyConfig:C,isRefreshLogSystem:a,isRefreshList:r}})))),He=(t("u",(function(){return A(Be())})),Pt().selectedItem),Ge=t("d",(function(t){var e=[],r=new Date,n=new Date(r.getFullYear(),r.getMonth(),r.getDate()).getTime()/1e3,a=Math.floor((new Date).getTime()/1e3);switch(t){case"7":e=[n-604800,a];break;case"30":e=[n-2592e3,a];break;case"180":e=[n-15552e3,a]}return e})),Je=(t("E",function(){var t=c(u().mark((function t(e,r){var n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e,t.next="ssh"===t.t0?3:"login"===t.t0?5:"crontab"===t.t0?7:"website"===t.t0?9:12;break;case 3:return Ve().outLogs(r),t.abrupt("break",12);case 5:return zt().outLoginLogEvent(r),t.abrupt("break",12);case 7:return zt().outShellLogEvent(r),t.abrupt("break",12);case 9:return n=Ge(r.day),Be().outWebLogEvent(n,r.type),t.abrupt("break",12);case 12:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()),function(t,e){var r="crontab"===e?"id":"name";!function(t,e){switch(e){case"soft":Ee(t);break;case"crontab":Kr(t)}}(t.find((function(t){return String(t[r])===He.value})),e),s.success("刷新成功")}),We=t("a",(function(t){return Qt(n({type:22,name:"日志",id:999},t))})),ze={class:"flex items-start w-full"},Ye=["onClick","tabindex"],Ke={key:2,class:"menu p-[20px] bg-[#f1f1f120]"},Ue={class:"flex-1"},$e={class:"log-view"},Xe={class:"flex items-center"},Qe=B({__name:"index",props:{menuOptions:{default:function(){return[]}},logsType:{default:"pre"},width:{default:"24"},height:{default:"68"},logContent:{default:""}},emits:["tab-click","search"],setup:function(t,e){var r=e.emit,n=f().mainHeight,a=t,u=r,o=Ft(),c=A(o),s=c.searchValue,i=(c.logLoading,c.selectedItem),l=I((function(){return"Mysql"===a.logsType?n.value-300:"crontab"===a.logsType?n.value-248:n.value-188})),p=I((function(){return"crontab"===a.logsType?"id":"name"}));return H((function(){return a.menuOptions[0]}),(function(t){t&&(i.value=String(t[p.value]))}),{once:!0}),function(t,e){var r=g,n=at,a=pt;return G(),J("div",ze,[W("div",{class:rt("flex flex-col mr-[16px]"),style:$("width:".concat(t.width,"rem;"))},["crontab"==t.logsType?(G(),z(r,{key:0,class:"mb-[8px] !w-[24rem]",modelValue:Y(s),"onUpdate:modelValue":e[0]||(e[0]=function(t){return K(s)?s.value=t:null}),onSearch:Y(Qr),placeholder:"请输入日志名称"},null,8,["modelValue","onSearch"])):U("",!0),t.menuOptions.length>0?(G(),J("div",{key:1,class:"menu",style:$("height:".concat(Y(l)-("crontab"==t.logsType?56:-5),"px"))},[(G(!0),J(X,null,Q(t.menuOptions,(function(e,r){return G(),J("span",{onClick:function(t){return u("tab-click",e)},tabindex:r,key:r,style:$("width:".concat(t.width,"rem")),class:rt("menu-hover ".concat(String(e[Y(p)])===Y(i)?"activeClass":""))},ut(e.tabProps)+" "+ut(e.name),15,Ye)})),128))],4)):(G(),J("span",Ke,[Z(n,null,{image:tt((function(){return e[2]||(e[2]=[W("i",{class:"svgtofont-empty !text-[4.8rem] text-#999"},null,-1)])})),description:tt((function(){return e[3]||(e[3]=[et("暂无数据")])})),_:1})]))],4),nt(t.$slots,"LogView",{},(function(){return[W("div",Ue,[W("div",$e,[W("div",Xe,[nt(t.$slots,"LogLeft",{},void 0,!0),W("div",{class:"flex items-center",onClick:e[1]||(e[1]=function(t){return Y(We)()})},e[4]||(e[4]=[W("i",{class:"svgtofont-desired text-[1.6rem]"},null,-1),W("span",{class:"bt-link"},"需求反馈",-1)]))]),nt(t.$slots,"LogRight",{},void 0,!0)]),Z(a,{class:"w-full flex-1",content:t.logContent,isHtml:!0,autoScroll:!0,fullScreen:{title:"全屏查看-日志",onRefresh:function(){Y(Je)(t.menuOptions,t.logsType)}},style:$("height:"+Y(l)+"px")},null,8,["content","fullScreen","style"])])]}),!0)])}}}),Ze=t("b",m(Qe,[["__scopeId","data-v-e4fcf379"]])),tr={class:"flex items-center"},er={key:0,class:"flex items-center inline-block"},rr=B({__name:"crontab-log",setup:function(t){var e=f().mainHeight,r=zt(),n=A(r),a=n.logsMsg,o=n.currentItem,s=n.crontabForm;return ot(c(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Qr();case 2:return t.next=4,Kr(Dr.value[0]);case 4:case"end":return t.stop()}}),t)})))),function(t,r){var n=ct,u=y,c=st,i=D;return G(),J("div",{class:"flex items-start",style:$({height:Y(e)-195+"px"})},[Z(Ze,{logsType:"crontab","menu-options":Y(Dr),logContent:Y(a),onTabClick:Y(Kr),onSearch:Y(Qr)},{LogLeft:tt((function(){return[Z(n,{class:"!mr-[12px]",onClick:r[0]||(r[0]=function(t){return Y(Ur)(Y(o))})},{default:tt((function(){return r[7]||(r[7]=[et(" 清理日志 ")])})),_:1}),Y(Mr)?(G(),z(n,{key:0,onClick:Y(Xr)},{default:tt((function(){return r[8]||(r[8]=[et(" 导出日志 ")])})),_:1},8,["onClick"])):U("",!0)]})),LogRight:tt((function(){return[W("div",tr,[Y(Mr)?(G(),J("div",er,[Z(u,{class:"mr-[12px]",type:"button",onChange:r[1]||(r[1]=function(t){return Y(Kr)(Y(o))}),modelValue:Y(s).type,"onUpdate:modelValue":r[2]||(r[2]=function(t){return Y(s).type=t}),options:Y(Yr)},null,8,["modelValue","options"]),Z(c,{modelValue:Y(s).time_search,"onUpdate:modelValue":r[3]||(r[3]=function(t){return Y(s).time_search=t}),format:"YYYY/MM/DD","value-format":"x",onChange:r[4]||(r[4]=function(t){return Y(Kr)(Y(o))}),onClear:r[5]||(r[5]=function(t){return Y(Kr)(Y(o))}),type:"daterange",placement:"bottom-end","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])])):U("",!0),Z(i,{class:"ml-8px",onRefresh:r[6]||(r[6]=function(t){return Y(Kr)(Y(o))})})])]})),_:1},8,["menu-options","logContent","onTabClick","onSearch"])],4)}}}),nr={class:"flex items-center"},ar={class:"ml-1rem"},ur=B({__name:"login-log",setup:function(t){var r=f().mainHeight,a=zt().getLoginLogsEvent,u=b({options:[{label:"导出日志",type:"button",onClick:function(){Wr(d.data)}},{label:"清空日志",type:"button",onClick:function(){Jr(p)}}]}).BtOperation,o=w({options:Ar,key:"login_type"}),c=x({request:function(t){var r=t.p,u=function(t,e){if(null==t)return{};var r,n,a=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.includes(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(n=0;n<u.length;n++)r=u[n],e.includes(r)||{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}(t,e);return a(n({page:r},u))},columns:[{label:"IP地址（归属地）",prop:"remote_addr",minWidth:100,render:function(t){var e;return Z("span",null,[t.remote_addr,et("("),(null==t||null===(e=t.area)||void 0===e?void 0:e.info)||"",et(")")])}},{label:"用户代理",width:800,prop:"user_agent"},{label:"登录状态",render:function(t){return Z("span",{class:"text-".concat(t.login_type?"primary":"danger")},[et("登录"),t.login_type?"成功":"失败"])}},{label:"时间",width:150,sortable:"custom",align:"right",render:function(t){return k(t.login_time)}}],extension:[o]}),s=c.BtTable,i=c.BtSearch,l=c.BtPage,p=c.refresh,v=c.BtRadioButton,d=c.config;return function(t,e){var n=Ut,a=Kt;return G(),z(a,null,{"header-left":tt((function(){return[W("div",nr,[Z(n,{ref_key:"timeRef",ref:Cr,refreshFn:Y(p)},null,8,["refreshFn"]),Z(Y(u)),W("div",{class:"flex items-center ml-1rem",onClick:e[0]||(e[0]=function(t){return Y(We)()})},e[1]||(e[1]=[W("i",{class:"svgtofont-desired text-[1.6rem]"},null,-1),W("span",{class:"bt-link"},"需求反馈",-1)]))])]})),"header-right":tt((function(){return[Z(Y(v)),W("div",ar,[Z(Y(i),{class:"w-[32rem]",placeholder:"请输入搜索关键字"})])]})),content:tt((function(){return[Z(Y(s),{"max-height":Y(r)-290,onSortChange:Y(Gr)},null,8,["max-height","onSortChange"])]})),"footer-right":tt((function(){return[Z(Y(l))]})),_:1})}}}),or={class:"flex items-center"},cr=B({__name:"operate-log",setup:function(t){var e=f().mainHeight,r=b({options:[{type:"button",label:"导出日志",onClick:function(){if(!d.data.length)return s.error("暂无数据导出");Rr({search:v.value.search})}},{type:"button",label:"清空日志",onClick:function(){return Vr(l)}},{type:"button",label:"IP操作统计",onClick:Hr}]}).BtOperation,a=S({options:Nr,key:"log_type",other:{placeholder:"请选择分类",filterable:!0,class:"!w-16rem mr-1rem "}}),u=x({request:function(t){return Ir(n(n({},t),{},{table:"logs"}))},columns:[{label:"用户",prop:"username",width:180},{label:"操作类型",prop:"type",width:100,sortable:!0},{label:"详情",render:function(t){var e=(new DOMParser).parseFromString(t.log,"text/html");return Z("span",{innerHTML:L(e.body.innerHTML)},null)}},{label:"操作时间",width:150,prop:"addtime",align:"right",sortable:!0}],extension:[a]}),o=u.BtTable,c=u.BtSearch,i=u.BtPage,l=u.refresh,p=u.BtTableSelect,v=u.param,d=u.config;return function(t,n){var a=Ut,u=Kt;return G(),z(u,null,{"header-left":tt((function(){return[W("div",or,[Z(a,{ref_key:"timeRef",ref:Cr,class:"inline-block",refreshFn:Y(l)},null,8,["refreshFn"]),Z(Y(r)),W("div",{class:"flex items-center ml-1rem",onClick:n[0]||(n[0]=function(t){return Y(We)()})},n[1]||(n[1]=[W("i",{class:"svgtofont-desired text-[1.6rem]"},null,-1),W("span",{class:"bt-link"},"需求反馈",-1)]))])]})),"header-right":tt((function(){return[Z(Y(p)),Z(Y(c),{class:"!w-[28rem]",placeholder:"请输入搜索关键字"})]})),content:tt((function(){return[Z(Y(o),{"max-height":Y(e)-286},null,8,["max-height"])]})),"footer-right":tt((function(){return[Z(Y(i))]})),_:1})}}}),sr={class:"flex items-center justify-between mb-[12px]"},ir={class:"flex items-center"},lr={class:"ml-[1.6rem]"},pr={class:"inline-flex items-center"},fr=B({__name:"run-log",setup:function(t){var e=f().mainHeight,r=zt(),n=A(r),a=n.search,u=n.logMsg,o=n.size,c=r.getRunDataEvent;return ot(c),function(t,r){var n=Ut,s=ct,i=g;return G(),J("div",null,[W("div",sr,[W("div",ir,[Z(n,{class:"inline-block",refreshFn:Y(c)},null,8,["refreshFn"]),Z(s,{type:"default",onClick:r[0]||(r[0]=function(t){return Y(zr)()})},{default:tt((function(){return r[3]||(r[3]=[et("清空日志")])})),_:1}),W("span",lr,"日志大小："+ut(Y(P)(Y(o))),1),W("div",{class:"flex items-center ml-1rem",onClick:r[1]||(r[1]=function(t){return Y(We)()})},r[4]||(r[4]=[W("i",{class:"svgtofont-desired text-[1.6rem]"},null,-1),W("span",{class:"bt-link"},"需求反馈",-1)]))]),W("div",pr,[Z(i,{modelValue:Y(a),"onUpdate:modelValue":r[2]||(r[2]=function(t){return K(a)?a.value=t:null}),onSearch:Y(c),placeholder:"请输入搜索关键字",class:"!w-[30rem]"},null,8,["modelValue","onSearch"])])]),Z(pt,{content:Y(u),isHtml:!0,autoScroll:!0,fullScreen:{title:"全屏查看-运行日志",onRefresh:Y(c)},style:$("height:".concat(Y(e)-240,"px"))},null,8,["content","fullScreen","style"])])}}}),vr=zt(),dr=vr.getLogsMenu,hr=vr.outWebSiteEvent,gr=vr.getLogsInfoEvent,mr=vr.clearRunLogsEvent,yr=vr.clearOpLogsEvent,br=vr.getLogsDataEvent,wr=vr.clearShellLogEvent,xr=(vr.outShellLogEvent,vr.getIpDataEvent),kr=(vr.outLoginLogEvent,vr.clearLoginLogEvent),Sr=Pt(),Lr=Sr.clearDataForm,Pr=Sr.outDataForm,Tr=Sr.configData,Or=Sr.selectedItem,_r=Yt(),Er=_r.currentItem,Fr=_r.isRefreshList,qr=_r.crontabForm,jr=Ft(),Cr=N(),Dr=N([]),Mr=N(!1),Ar=(t("t",[{label:"操作日志",name:"operateLog",render:function(){return Z(cr,null,null)}},{label:"登录日志",name:"loginLog",lazy:!0,render:function(){return Z(ur,null,null)}},{label:"运行日志",name:"runLog",lazy:!0,render:function(){return Z(fr,null,null)}},{label:"计划任务日志",name:"crontabLog",lazy:!0,render:function(){return Z(rr,null,null)}}]),[{label:"全部",value:""},{label:"登录成功",value:"1"},{label:"登录失败",value:"0"}]),Nr=[{label:"全部",value:"全部"},{label:"网站管理",value:"网站管理"},{label:"用户登录",value:"用户登录"},{label:"数据库管理",value:"数据库管理"},{label:"FTP管理",value:"FTP管理"},{label:"文件管理",value:"文件管理"},{label:"安装器",value:"安装器"},{label:"软件管理",value:"软件管理"},{label:"守护程序",value:"守护程序"},{label:"面板设置",value:"面板设置"},{label:"进程管理",value:"进程管理"},{label:"面板配置",value:"面板配置"},{label:"PHP配置",value:"PHP配置"},{label:"计划任务",value:"计划任务"},{label:"防火墙管理",value:"防火墙管理"}],Rr=(t("c",(function(t){var e;null===(e=Cr.value)||void 0===e||e.clearIntervalFn()})),function(){var t=c(u().mark((function t(e,r){var n,a;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.search,t.t0=n,!t.t0){t.next=5;break}return t.next=5,h({title:"导出日志",icon:"warning-filled",content:"是否导出关键字为【".concat(n,"】的面板操作日志？")});case 5:return t.next=7,hr(n);case 7:a=t.sent,window.open("/download?filename="+a.data.output_file);case 9:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()),Ir=function(){var t=c(u().mark((function t(e){var r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,(r=e).search||delete r.search,"全部"===r.log_type&&(r.log_type=""),t.next=7,gr(r);case 7:return t.abrupt("return",t.sent);case 10:return t.prev=10,t.t0=t.catch(0),t.abrupt("return",{data:[],total:0,other:{}});case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}(),Vr=function(){var t=c(u().mark((function t(e){var r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h({icon:"warning-filled",type:"input",title:"清空面板操作日志",input:{content:"清空日志"},content:"风险操作，清空该日志后，将无法查询面板以往的操作记录，是否继续操作？"});case 2:return t.next=4,yr();case 4:r=t.sent,e&&e(r);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Br=[{label:"IP地址",prop:"ip"},{label:"IP属地",prop:"info"},{label:"操作次数",prop:"operation_num"}],Hr=function(){var t=c(u().mark((function t(){var e,r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,xr();case 2:e=t.sent,(r=e.data).sort((function(t,e){return e.operation_num-t.operation_num})),T({title:"IP操作统计",area:60,component:function(){return Z("div",{class:"p-20px"},[it(Z(O,{"max-height":"360",column:Br,data:r},null),[[lt("bt-loading"),"ipLoading"],[lt("bt-loading"),"'正在加载表格数据,请稍后...'","title"]])])}});case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Gr=function(t,e){t.column;var r=t.prop,n=t.order,a=_(function(t,e){return"ascending"===e?q(j(t)):C(j(t))}(r,n),e);return{data:a,total:a.length,other:{}}},Jr=function(){var t=c(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h({icon:"warning-filled",type:"input",title:"清空面板登录日志",input:{content:"清空日志"},content:"风险操作，清空该日志后，将无法查到以往的日志记录，此操作不可逆，是否继续清空？"});case 3:return t.next=5,kr();case 5:Fr.value=!0,e&&e(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),Wr=function(){var t=c(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.length){t.next=2;break}return t.abrupt("return",s.error("暂无数据导出"));case 2:Pr.value.type=jr.getType("login"),Tr.value={type:"login"},T({title:"导出日志",area:44,component:function(){return E((function(){return r.import("./index-legacy273.js?v=1734676359")}),void 0,r.meta.url)},showFooter:!0});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),zr=function(){var t=c(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h({icon:"warning-filled",title:"清空面板运行日志",type:"calc",content:"风险操作，清空该日志后，将无法查到以往的日志记录，此操作不可逆，是否继续清空？"});case 2:return e&&e(),t.next=5,mr();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Yr=[{label:"全部",value:""},{label:"异常",value:"warring"}],Kr=function(){var t=c(u().mark((function t(e){var r,n,a,o,c,i,l,p,f;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,F(e,"object",!1,null,!0)){t.next=4;break}return t.abrupt("return",s.error("当前未选定日志数据"));case 4:return Er.value=e,Or.value=String(e.id),Mr.value="webshell"===e.sType,r=qr.value,n=r.type,a=r.time_search,o=[],v(c=a)&&c.length&&(o=[c[0]/1e3,c[1]/1e3]),i={type:n,id:e.id,time_search:JSON.stringify(o)},t.next=14,br(i);case 14:l=t.sent,p=l.status,f=l.msg,p||s.error(f),t.next=24;break;case 20:return t.prev=20,t.t0=t.catch(0),t.abrupt("return",{data:"获取日志错误!",status:!1});case 24:case"end":return t.stop()}}),t,null,[[0,20]])})));return function(e){return t.apply(this,arguments)}}(),Ur=function(){var t=c(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:T({title:"清理【"+e.name+"】日志",area:44,component:function(){return E((function(){return r.import("./index-legacy274.js?v=1734676359")}),void 0,r.meta.url)},compData:{tips:"",type:"crontab",clearEvent:function(){return $r()}},showFooter:!0});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),$r=function(){var t=c(u().mark((function t(e){var r,n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Lr.value.day,t.next=3,h({icon:"warning-filled",type:"calc",title:"清空日志",content:"清空".concat("all"!==r?r+"天外":"","日志后，将无法查询").concat("all"!==r?r+"天外":"","日志记录，此操作不可逆，是否继续清理？")});case 3:return t.next=5,wr({id:Er.value.id,day:"all"===r?"":r});case 5:return n=t.sent,Fr.value=!0,t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Xr=function(){var t=c(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Pr.value.type=Ft().getType("crontab"),Tr.value={type:"crontab"},T({title:"导出日志",area:44,component:function(){return E((function(){return r.import("./index-legacy273.js?v=1734676359")}),void 0,r.meta.url)},compData:{type:"crontab"},showFooter:!0});case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Qr=function(){var t=c(u().mark((function t(e){var r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,dr(e);case 2:r=t.sent,Dr.value=r.data;case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}}))}();
