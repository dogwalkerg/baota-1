import{c as e,h as a,r as s,k as l,l as t,e as r,x as m,p as i,q as d,a7 as o,a4 as u}from"./base-lib.js?v=1734676359";import{o as p,G as n,M as c,ah as g,j as b}from"./utils-lib.js?v=1734676359";import{modifyDirAuthPass as f,setDirAuth as _}from"./site.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";const w={class:"p-[20px]"},h=e({__name:"add-pass-limit",props:{compData:{default:()=>({})}},emits:["close"],setup(e,{expose:h,emit:D}){const V=e,x=D,q=a({site_dir:V.compData.site_dir||"",name:V.compData.name||"",username:V.compData.username||"",password:V.compData.password||""}),v=s(!1),j=s(),y=a({site_dir:[{required:!0,message:"请输入需要加密访问的目录",trigger:"blur"}],name:[{required:!0,message:"请输入名称",trigger:"blur"},{min:3,message:"名称必须大于三位",trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,message:"用户名必须大于三位",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:3,message:"密码必须大于三位",trigger:"blur"}]});return h({onConfirm:async()=>{await j.value.validate();try{v.value=!0;const e=V.compData.name?f:_,a=await e({id:V.compData.id,...q});if(void 0!==a.tip&&!V.compData.name){await p({title:"添加须知",content:a.tip,icon:"warning-filled"});return void((await n({loading:"正在添加，请稍后...",request:_({id:V.compData.id,...q,force:!0}),message:!0})).status&&(x("close"),V.compData.refresh()))}c.request(a),a.status&&(V.compData.refresh(),x("close"))}catch(e){g(e)}finally{v.value=!1}}}),(e,a)=>{const s=b,p=o,n=u;return l(),t("div",w,[r(n,{ref_key:"passwordSiteForm",ref:j,rules:i(y),model:i(q),disabled:i(v)},{default:m((()=>[r(p,{label:"加密访问",prop:"site_dir"},{default:m((()=>[r(s,{disabled:!!e.compData.name,modelValue:i(q).site_dir,"onUpdate:modelValue":a[0]||(a[0]=e=>i(q).site_dir=e),placeholder:"输入需要加密访问的目录，如：/text/",width:"26rem"},null,8,["disabled","modelValue"])])),_:1}),r(p,{label:"名称",prop:"name"},{default:m((()=>[r(s,{modelValue:i(q).name,"onUpdate:modelValue":a[1]||(a[1]=e=>i(q).name=e),disabled:!!e.compData.name,width:"26rem"},null,8,["modelValue","disabled"])])),_:1}),r(p,{label:"用户名",prop:"username"},{default:m((()=>[r(s,{modelValue:i(q).username,"onUpdate:modelValue":a[2]||(a[2]=e=>i(q).username=e),placeholder:"请输入大于三位的用户名",width:"26rem"},null,8,["modelValue"])])),_:1}),r(p,{label:"密码",prop:"password"},{default:m((()=>[r(s,{modelValue:i(q).password,"onUpdate:modelValue":a[3]||(a[3]=e=>i(q).password=e),type:"password",placeholder:"请输入大于三位的密码",width:"26rem"},null,8,["modelValue"])])),_:1}),a[4]||(a[4]=d("ul",{class:"ml-6 mt-8 list-disc leading-10"},[d("li",{class:"text-medium"},"目录设置加密访问后，会导致目录及子目录下的“反向代理”失效"),d("li",{class:"text-medium"},"目录设置加密访问后，访问时需要输入账号密码才能访问"),d("li",{class:"text-medium"},"例如我设置了加密访问 /test/ ,那我访问 http://aaa.com/test/ 时就要输入账号密码才能访问")],-1))])),_:1},8,["rules","model","disabled"])])}}});export{h as default};
