import{j as e,O as l,al as a,k as t,V as s,X as n,e as o}from"./utils-lib.js?v=1734676359";import{c as u,w as i,B as r,k as d,l as m,C as p,p as c,J as f,x as b,e as _,q as v,I as h,aX as y,D as x,y as V,aj as k,a7 as g,ag as C,ah as w,A as j,aY as z,a4 as B,o as U,r as I,z as L,M as P,Q as R}from"./base-lib.js?v=1734676359";import{o as F,f as O,c as G,t as S,a as q,b as E,d as T,e as A,g as D,h as H,s as X,i as J,j as K,l as M,k as Q,m as W,n as Y,p as N,q as Z,r as $,u as ee,v as le,T as ae,w as te,x as se,y as ne,z as oe,A as ue,B as ie,C as re,D as de,E as me,F as pe,G as ce}from"./index129.js?v=1734676359";import{_ as fe}from"./index90.js?v=1734676359";import{B as be}from"./index185.js?v=1734676359";import{p as _e}from"./useController.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./index353.js?v=1734676359";import"./form-item.js?v=1734676359";import"./index91.js?v=1734676359";import"./useStore3.js?v=1734676359";import"./validator.js?v=1734676359";import"./column.js?v=1734676359";import"./useStore7.js?v=1734676359";import"./site.js?v=1734676359";import"./index101.js?v=1734676359";import"./ace.js?v=1734676359";const ve={class:"p-[20px]"},he={class:"pt-[1.6rem]"},ye={class:"flex items-center"},xe={class:"ml-[20px]"},Ve=u({__name:"cache",setup:(a,{expose:t})=>(i((()=>H.value.proxy_cache),(e=>{if(e){G.status=e.cache_status;let l="",a="m";e.expires.length>1&&(l=e.expires.slice(0,-1),a=e.expires.slice(-1)),G.time=l,G.unit=a}})),t({onConfirm:F}),(a,t)=>{const s=k,n=g,o=e,u=C,i=w,U=j,I=z,L=B,P=l,R=r("bt-loading");return d(),m("div",ve,[p((d(),f(L,{ref_key:"cacheFormRef",ref:E,class:"h-[40rem]",model:c(G),"label-width":"100px",rules:c(T),disabled:c(A)},{default:b((()=>[_(n,{label:"缓存开关",prop:"status"},{default:b((()=>[_(s,{modelValue:c(G).status,"onUpdate:modelValue":t[0]||(t[0]=e=>c(G).status=e),onChange:c(F)},null,8,["modelValue","onChange"])])),_:1}),p(v("div",he,[_(n,{label:"缓存时间",prop:"time"},{default:b((()=>[v("div",ye,[_(o,{modelValue:c(G).time,"onUpdate:modelValue":t[1]||(t[1]=e=>c(G).time=e)},null,8,["modelValue"]),_(n,{prop:"unit"},{default:b((()=>[_(i,{class:"ml-[1rem] !w-[8rem]",modelValue:c(G).unit,"onUpdate:modelValue":t[2]||(t[2]=e=>c(G).unit=e),placeholder:"请选择"},{default:b((()=>[(d(!0),m(h,null,y(c(S),(e=>(d(),f(u,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])])),_:1})],512),[[x,c(G).status]]),p(_(n,{class:"!pt-[1.6rem]",label:" "},{default:b((()=>[_(U,{type:"primary",onClick:c(F)},{default:b((()=>t[3]||(t[3]=[V("保存")]))),_:1},8,["onClick"])])),_:1},512),[[x,c(G).status]]),_(I),_(U,{type:"default",onClick:c(q)},{default:b((()=>t[4]||(t[4]=[V("清理缓存")]))),_:1},8,["onClick"])])),_:1},8,["model","rules","disabled"])),[[R,c(O)]]),v("div",xe,[_(P,{options:c(D)},null,8,["options"])])])})}),ke={class:"p-[20px]"},ge={class:"mt-[1.6rem]"},Ce={class:"flex items-center"},we={class:"ml-[20px]"},je=u({__name:"content-compression",setup:a=>(i((()=>H.value.gzip),(e=>{e?X(e):J.status=!1})),U((()=>{X(H.value.gzip)})),(a,t)=>{const s=k,n=g,o=e,u=C,i=w,z=j,U=B,I=l,L=r("bt-loading");return d(),m("div",ke,[p((d(),f(U,{ref_key:"compressFormRef",ref:Q,class:"h-[48rem]",model:c(J),rules:c(W),"label-width":"100px",disabled:c(A)},{default:b((()=>[_(n,{label:"内容压缩",prop:"status"},{default:b((()=>[_(s,{modelValue:c(J).status,"onUpdate:modelValue":t[0]||(t[0]=e=>c(J).status=e),onChange:c(K)},null,8,["modelValue","onChange"])])),_:1}),p(v("div",ge,[_(n,{label:"压缩类型",prop:"type"},{default:b((()=>[_(o,{modelValue:c(J).type,"onUpdate:modelValue":t[1]||(t[1]=e=>c(J).type=e),type:"textarea",width:"42rem",rows:6,resize:"none"},null,8,["modelValue"])])),_:1}),_(n,{label:"压缩级别",prop:"level"},{default:b((()=>[_(i,{class:"!w-[42rem]",modelValue:c(J).level,"onUpdate:modelValue":t[2]||(t[2]=e=>c(J).level=e)},{default:b((()=>[(d(),m(h,null,y(9,(e=>_(u,{key:e,label:e,value:String(e)},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1}),_(n,{label:"压缩最小长度",prop:"minLength"},{default:b((()=>[v("div",Ce,[_(o,{modelValue:c(J).minLength,"onUpdate:modelValue":t[3]||(t[3]=e=>c(J).minLength=e)},null,8,["modelValue"]),_(n,{prop:"unit"},{default:b((()=>[_(i,{class:"ml-[1rem] !w-[8rem]",modelValue:c(J).unit,"onUpdate:modelValue":t[4]||(t[4]=e=>c(J).unit=e),placeholder:"请选择"},{default:b((()=>[(d(!0),m(h,null,y(c(M),(e=>(d(),f(u,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])])),_:1})],512),[[x,c(J).status]]),p(_(n,{label:" ",class:"mt-[1.6rem]"},{default:b((()=>[_(z,{type:"primary",onClick:c(K)},{default:b((()=>t[5]||(t[5]=[V("保存")]))),_:1},8,["onClick"])])),_:1},512),[[x,c(J).status]])])),_:1},8,["model","rules","disabled"])),[[L,c(O)]]),v("div",we,[_(I,{options:c(Y)},null,8,["options"])])])})}),ze=u({__name:"ip-list",setup(e){const n=I();i((()=>H.value.ip_limit),(e=>{e?$(e):(ee.white=[],ee.black=[])}),{deep:!0});const{BtOperation:o}=a({options:[{type:"button",label:"添加IP".concat("ipBlackList"===N.value?"黑":"白","名单"),active:!0,onClick:Z}]});return U((()=>{$(H.value.ip_limit)})),(e,a)=>{const u=t,i=s,r=fe,p=l;return d(),m("div",null,[_(r,null,{"header-left":b((()=>[_(c(o))])),content:b((()=>["ipBlackList"!==c(N)?(d(),f(u,{key:0,ref_key:"ipListRef",ref:n,data:c(ee).white,"max-height":390,column:c(le)},{empty:b((()=>a[0]||(a[0]=[v("div",{class:"flex items-center justify-center"},"当前列表为空",-1)]))),_:1},8,["data","column"])):(d(),f(u,{key:1,ref_key:"ipListRef",ref:n,data:c(ee).black,"max-height":390,column:c(le)},{empty:b((()=>a[1]||(a[1]=[v("div",{class:"flex items-center justify-center"},"当前列表为空",-1)]))),_:1},8,["data","column"]))])),"footer-left":b((()=>[_(i,{"table-ref":c(n),options:c(ae)},null,8,["table-ref","options"])])),_:1}),"ipBlackList"!==c(N)?(d(),f(p,{key:0,class:"mt-[2rem] ml-[1.6rem]",options:[{content:"注意：设置IP白名单后会默认禁止除白名单以外的所有IP访问"}]})):L("",!0)])}}}),Be=u({__name:"http-auth",setup(e){i((()=>H.value.basic_auth),(e=>{se(e)}));const{BtOperation:l}=a({options:[{label:"添加",type:"button",active:!0,onClick:()=>{te()}}]});return U((async()=>{se(H.value.basic_auth)})),(e,a)=>{const s=t,n=fe,o=r("bt-loading");return d(),f(n,null,{"header-left":b((()=>[_(c(l))])),content:b((()=>[p((d(),f(s,{ref:"siteProxyTable","max-height":500,data:c(ne),column:c(oe)},{empty:b((()=>a[0]||(a[0]=[v("div",{class:"flex items-center justify-center"},"当前列表为空",-1)]))),_:1},8,["data","column"])),[[o,"正在加载中，请稍后...","title"]])])),_:1})}}}),Ue={class:"p-[20px]"},Ie=u({__name:"websocket",setup:e=>(i((()=>H.value.websocket),(e=>{ue(e)})),U((()=>{ue(H.value.websocket)})),(e,l)=>{const a=k,t=g,s=B,n=r("bt-loading");return d(),m("div",Ue,[p((d(),f(s,{ref:"customFormRef",model:c(ie),"label-width":"100px",disabled:c(A)},{default:b((()=>[_(t,{label:"websocket支持","label-width":"100px"},{default:b((()=>[_(a,{modelValue:c(ie).websocket,"onUpdate:modelValue":l[0]||(l[0]=e=>c(ie).websocket=e),onChange:c(re)},null,8,["modelValue","onChange"])])),_:1})])),_:1},8,["model","disabled"])),[[n,c(O)]])])})}),Le={class:"flex flex-col"},Pe={class:"flex items-center justify-between mb-[8px]"},Re={class:"h-[44rem] w-full"},Fe=u({__name:"set-404-page",setup(e,{expose:l}){const a=I(""),t=I(),s=I("utf-8"),n=I(["utf-8","GBK","GB2312","BIG5"]),o=I(!1),u=I(!1),i=async()=>{pe(a.value,s.value)};return U((()=>{de(u,a,s,o)})),l({onRefresh:()=>{de(u,a,s,o)}}),(e,l)=>{const x=R,k=C,g=w,z=be,B=j,U=r("bt-loading");return d(),m("div",Le,[v("div",Pe,[v("div",null,[_(x,{modelValue:c(o),"onUpdate:modelValue":l[0]||(l[0]=e=>P(o)?o.value=e:null),onChange:c(me)},{default:b((()=>l[3]||(l[3]=[V("开启404错误页设置")]))),_:1},8,["modelValue","onChange"])]),l[4]||(l[4]=V(" 提示：Ctrl+F 搜索关键字，Ctrl+S 保存，Ctrl+H 查找替换 ")),_(g,{class:"!w-[16rem]",modelValue:c(s),"onUpdate:modelValue":l[1]||(l[1]=e=>P(s)?s.value=e:null),onChange:i},{default:b((()=>[(d(!0),m(h,null,y(c(n),(e=>(d(),f(k,{key:e,value:e,label:e},null,8,["value","label"])))),128))])),_:1},8,["modelValue"])]),p((d(),m("div",Re,[_(z,{ref_key:"aceEditor",ref:t,"is-request":!1,modelValue:c(a),"onUpdate:modelValue":l[2]||(l[2]=e=>P(a)?a.value=e:null),editorOption:c(_e)(),saveEvent:i,class:"h-[40rem] w-full"},null,8,["modelValue","editorOption"]),_(B,{class:"flex !mt-[12px]",type:"primary",onClick:i},{default:b((()=>l[5]||(l[5]=[V("保存")]))),_:1})])),[[U,c(u)]])])}}}),Oe={class:"p-[20px]"},Ge=u({__name:"ipv6-status",setup:(e,{expose:l})=>(l({onConfirm:F}),(e,l)=>{const a=k,t=g,s=B,n=r("bt-loading");return d(),m("div",Oe,[p((d(),f(s,{ref_key:"cacheFormRef",ref:E,class:"h-[40rem]",model:c(G),"label-width":"100px",rules:c(T),disabled:c(A)},{default:b((()=>[_(t,{label:"监听IPv6",prop:"status"},{default:b((()=>[_(a,{modelValue:c(H).ipv6_status,"onUpdate:modelValue":l[0]||(l[0]=e=>c(H).ipv6_status=e),onChange:c(F)},null,8,["modelValue","onChange"])])),_:1})])),_:1},8,["model","rules","disabled"])),[[n,c(O)]]),l[1]||(l[1]=v("div",{class:"ml-[20px]"},null,-1))])})}),Se=o(u({__name:"index",setup(e){const{BtTabs:l}=n({type:"card",value:N,options:[{label:"缓存",name:"cache",lazy:!0,render:()=>_(Ve,null,null)},{label:"内容压缩",name:"compress",lazy:!0,render:()=>_(je,null,null)},{label:"IP黑名单",name:"ipBlackList",lazy:!0,render:()=>_(ze,null,null)},{label:"IP白名单",name:"ipWhiteList",lazy:!0,render:()=>_(ze,null,null)},{label:"http认证",name:"basicauth",lazy:!0,render:()=>_(Be,null,null)},{label:"websocket",name:"websocket",lazy:!0,render:()=>_(Ie,null,null)},{label:"404错误页",name:"404",lazy:!0,render:()=>_(Fe,null,null)},{label:"IPv6",name:"ipv6",lazy:!0,render:()=>_(Ge,null,null)}]});return i((()=>N.value),(e=>{ce()})),U((async()=>{ce()})),(e,a)=>(d(),f(c(l)))}}),[["__scopeId","data-v-7b68baca"]]);export{Se as default};
