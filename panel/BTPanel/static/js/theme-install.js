import{_ as e}from"./index90.js?v=1734676359";import{am as s,G as r,M as t,bf as l,an as a}from"./utils-lib.js?v=1734676359";import{c as o,s as i,e as n,y as p,k as m,l as u,x as c,p as d}from"./base-lib.js?v=1734676359";import{b as h}from"./index81.js?v=1734676359";import{a as _}from"./index419.js?v=1734676359";import{B as f}from"./index417.js?v=1734676359";import{u as j}from"./column.js?v=1734676359";import{u as x}from"./useStore9.js?v=1734676359";import{a3 as g}from"./useMethod5.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1734676359";import"./index116.js?v=1734676359";import"./index91.js?v=1734676359";import"./validator.js?v=1734676359";import"./index.vue_vue_type_style_index_0_scoped_03ce946a_lang.js?v=1734676359";import"./useStore7.js?v=1734676359";import"./site.js?v=1734676359";import"./useController4.js?v=1734676359";import"./useStore8.js?v=1734676359";import"./useController3.js?v=1734676359";import"./useStore12.js?v=1734676359";import"./form-item.js?v=1734676359";const b={class:"p-[2rem]"},v=o({__name:"theme-install",setup(o){const{localRow:v}=i(x()),{isRefreshThemeInstall:w,isRefreshThemeList:B}=i(h()),{BtTable:q,BtPage:y,BtRecommendSearch:C,BtRefresh:R,BtColumn:S,BtBatch:k,BtTableCategory:T,BtErrorMask:P,tableRef:M,classList:H,refresh:L,BtSearch:W}=s({request:e=>_(e),columns:[{label:"名称",prop:"name",minWidth:180,isCustom:!0,render:e=>n("span",{class:"flex items-center"},[n("img",{class:"w-[25px] h-[25px]",src:e.screenshot_url},null),n("span",{class:"ml-[5px]"},[e.name])])},{label:"描述",width:200,prop:"description",showOverflowTooltip:!0},{label:"作者",prop:"author",render:e=>n("a",{target:"_blank",style:"color : #1d9534",href:e.author.author_url},[e.author.author])},{label:"WP",prop:"requires",width:50,render:e=>e.requires?e.requires:"--"},{label:"PHP",prop:"requires_php",render:e=>e.requires_php?e.requires_php:"--"},{label:"等级",prop:"rating",width:140,render:e=>{const s=e.rating?e.rating/20:0;return n("div",{class:"flex items-center"},[n(f,{modelValue:s,disabled:!0,"allow-half":!0,class:"!text-[2rem]"},null)])}},j((e=>[{title:e.installed?"已安装":"安装",render:e=>{const s=v.value.wp_version<e.requires||v.value.php_version<e.requires_php||e.installed;return e.installed?n("span",{class:"text-[#999]",style:"cursor:not-allowed"},[p("已安装")]):n("span",{class:"bt-link",style:s?"cursor:not-allowed; color: #999;":"",onClick:s?void 0:()=>{r({loading:"安装中...",request:g({s_id:v.value.id,slug:e.slug}),success:e=>{e.status&&(w.value=!0,B.value=!0,t.success("安装成功"))}})}},[p("安装")])}}]),{label:"操作",width:100,fixed:"right"})],extension:[l("search",{name:"local-setting-plugin",list:[]}),a(w)]});return(s,r)=>{const t=e;return m(),u("div",b,[n(t,null,{"header-right":c((()=>[n(d(W),{type:"local-setting-theme",placeholder:"请输入主题名称",class:"!w-[270px] mr-[10px]"})])),content:c((()=>[n(d(q),{"max-height":500})])),"footer-right":c((()=>[n(d(y))])),_:1})])}}});export{v as default};
