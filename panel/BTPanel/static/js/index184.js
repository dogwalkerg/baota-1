import{e,aa as a}from"./utils-lib.js?v=1734676359";import{c as l,h as o,r as s,k as t,J as m,x as r,e as d,p as n,C as u,D as p,N as i,P as c,a7 as f,Q as _,a4 as b,l as v,M as V,ay as h}from"./base-lib.js?v=1734676359";import{B as k}from"./index185.js?v=1734676359";import{A as x}from"./add-compose.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./ace.js?v=1734676359";import"./useMethods.js?v=1734676359";import"./column.js?v=1734676359";import"./index91.js?v=1734676359";import"./useStore3.js?v=1734676359";const j=e(l({__name:"add-common",props:{compData:{default:()=>({})}},emits:["close","submit"],setup(e,{expose:a,emit:l}){const v=l,V=o({name:"",remark:"",data:"",env:"",save:!1,template:""}),h=s(),x=s(),j=s(),w={mode:"ace/mode/yaml",theme:"ace/theme/chrome",wrap:!0,showInvisibles:!1,showFoldWidgets:!1,useSoftTabs:!0,tabSize:2,showPrintMargin:!1,readOnly:!1,fontSize:"12px"},y={name:[{required:!0,message:"请输入编排名称",trigger:["blur"]}]};return a({onConfirm:async()=>{await j.value.validate();let e={mod_name:"docker",sub_mod_name:"com",def_name:"create",project_name:V.name,config:V.data,env:V.env,add_template:V.save?1:0,remark:V.remark,ws_callback:"create"};V.save&&(e.template_name=V.template),v("submit",{params:e,close:()=>v("close")})}}),(e,a)=>{const l=c,o=f,s=k,v=_,C=b;return t(),m(C,{ref_key:"cmdFormRef",ref:j,model:n(V),rules:y,class:"p-[16px]",onSubmit:a[6]||(a[6]=i((()=>{}),["prevent"]))},{default:r((()=>[d(o,{prop:"name",label:"编排名称"},{default:r((()=>[d(l,{class:"!w-[43.5rem]",modelValue:n(V).name,"onUpdate:modelValue":a[0]||(a[0]=e=>n(V).name=e),placeholder:"请输入编排名称"},null,8,["modelValue"])])),_:1}),d(o,{prop:"data",label:"compose内容"},{default:r((()=>[d(s,{class:"!h-[30rem] w-full",ref_key:"aceEditor",ref:h,id:"templateEditor",modelValue:n(V).data,"onUpdate:modelValue":a[1]||(a[1]=e=>n(V).data=e),autoFocus:!1,editorOption:w},null,8,["modelValue"])])),_:1}),d(o,{prop:"data",label:".env内容"},{default:r((()=>[d(s,{class:"!h-[10rem] w-full",ref_key:"envEditorRef",ref:x,id:"envEditor",autoFocus:!1,modelValue:n(V).env,"onUpdate:modelValue":a[2]||(a[2]=e=>n(V).env=e),editorOption:w},null,8,["modelValue"])])),_:1}),d(o,{label:"同时存为模板"},{default:r((()=>[d(v,{modelValue:n(V).save,"onUpdate:modelValue":a[3]||(a[3]=e=>n(V).save=e)},null,8,["modelValue"])])),_:1}),u(d(o,{prop:"name",label:"模板名称"},{default:r((()=>[d(l,{class:"!w-[43.5rem]",modelValue:n(V).template,"onUpdate:modelValue":a[4]||(a[4]=e=>n(V).template=e),placeholder:"请输入模板名"},null,8,["modelValue"])])),_:1},512),[[p,n(V).save]]),d(o,{prop:"remark",label:"备注"},{default:r((()=>[d(l,{class:"!w-[43.5rem]",modelValue:n(V).remark,"onUpdate:modelValue":a[5]||(a[5]=e=>n(V).remark=e),placeholder:"备注"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])}}}),[["__scopeId","data-v-0af5760a"]]),w={class:"flex flex-col p-[16px] lib-box"},y=e(l({__name:"index",props:{compData:{default:()=>({})}},emits:["close"],setup(e,{expose:l,emit:o}){const m=o,u=s("first"),p=s(),i=s(),c=()=>{m("close")};return l({onConfirm:async()=>{try{"first"==u.value?p.value.onConfirm():i.value.onConfirm()}catch(e){}}}),(e,l)=>{const o=h,s=a;return t(),v("div",w,[d(s,{type:"card",modelValue:n(u),"onUpdate:modelValue":l[0]||(l[0]=e=>V(u)?u.value=e:null)},{default:r((()=>[d(o,{label:"常规创建",name:"first"},{default:r((()=>[d(j,{ref_key:"first",ref:p,onClose:c,onSubmit:e.compData.wsConfirm},null,8,["onSubmit"])])),_:1}),d(o,{label:"使用模板",name:"second"},{default:r((()=>[d(x,{ref_key:"second",ref:i,onClose:c},null,512)])),_:1})])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-d1b2dc12"]]);export{y as default};
