!function(){function e(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||t(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */i=function(){return t};var e,t={},n=Object.prototype,a=n.hasOwnProperty,u=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",l=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function p(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(e){p=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var a=t&&t.prototype instanceof x?t:x,s=Object.create(a.prototype),i=new O(r||[]);return u(s,"_invoke",{value:T(e,n,i)}),s}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var v="suspendedStart",m="suspendedYield",h="executing",y="completed",g={};function x(){}function b(){}function w(){}var k={};p(k,o,(function(){return this}));var S=Object.getPrototypeOf,_=S&&S(S(j([])));_&&_!==n&&a.call(_,o)&&(k=_);var C=w.prototype=x.prototype=Object.create(k);function L(e){["next","throw","return"].forEach((function(t){p(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function n(u,s,i,o){var l=d(e[u],e,s);if("throw"!==l.type){var c=l.arg,p=c.value;return p&&"object"==r(p)&&a.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,i,o)}),(function(e){n("throw",e,i,o)})):t.resolve(p).then((function(e){c.value=e,i(c)}),(function(e){return n("throw",e,i,o)}))}o(l.arg)}var s;u(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return s=s?s.then(a,a):a()}})}function T(t,n,r){var a=v;return function(u,s){if(a===h)throw Error("Generator is already running");if(a===y){if("throw"===u)throw s;return{value:e,done:!0}}for(r.method=u,r.arg=s;;){var i=r.delegate;if(i){var o=N(i,r);if(o){if(o===g)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===v)throw a=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=h;var l=d(t,n,r);if("normal"===l.type){if(a=r.done?y:m,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(a=y,r.method="throw",r.arg=l.arg)}}}function N(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,N(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var u=d(a,t.iterator,n.arg);if("throw"===u.type)return n.method="throw",n.arg=u.arg,n.delegate=null,g;var s=u.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function j(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var u=-1,s=function n(){for(;++u<t.length;)if(a.call(t,u))return n.value=t[u],n.done=!1,n;return n.value=e,n.done=!0,n};return s.next=s}}throw new TypeError(r(t)+" is not iterable")}return b.prototype=w,u(C,"constructor",{value:w,configurable:!0}),u(w,"constructor",{value:b,configurable:!0}),b.displayName=p(w,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,p(e,c,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},L(A.prototype),p(A.prototype,l,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,a,u){void 0===u&&(u=Promise);var s=new A(f(e,n,r,a),u);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},L(C),p(C,c,"Generator"),p(C,o,(function(){return this})),p(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=j,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,a){return i.type="throw",i.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var u=this.tryEntries.length-1;u>=0;--u){var s=this.tryEntries[u],i=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var o=a.call(s,"catchLoc"),l=a.call(s,"finallyLoc");if(o&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(o){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var u=r;break}}u&&("break"===e||"continue"===e)&&u.tryLoc<=t&&t<=u.finallyLoc&&(u=null);var s=u?u.completion:{};return s.type=e,s.arg=t,u?(this.method="next",this.next=u.finallyLoc,g):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;E(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:j(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function o(e,t,n,r,a,u,s){try{var i=e[u](s),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,a)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var u=e.apply(t,n);function s(e){o(u,r,a,s,i,"next",e)}function i(e){o(u,r,a,s,i,"throw",e)}s(void 0)}))}}System.register(["./utils-lib-legacy.js?v=1734676359","./site-legacy.js?v=1734676359","./index-legacy90.js?v=1734676359","./base-lib-legacy.js?v=1734676359","./index-legacy91.js?v=1734676359","./column-legacy.js?v=1734676359","./useStore-legacy11.js?v=1734676359","./useStore-legacy7.js?v=1734676359","./useController-legacy3.js?v=1734676359","./useStore-legacy9.js?v=1734676359","./useStore-legacy10.js?v=1734676359","./validator-legacy.js?v=1734676359"],(function(n,a){"use strict";var o,c,p,f,d,v,m,h,y,g,x,b,w,k,S,_,C,L,A,T,N,D,E,O,j,P,I,V,q,H,M,B,R,F,U,J,z,G,X,Z,W,Y,K,Q,$,ee,te,ne,re,ae,ue,se,ie,oe,le,ce,pe,fe,de,ve,me,he,ye,ge,xe,be,we,ke,Se,_e,Ce,Le,Ae,Te,Ne,De,Ee,Oe,je,Pe,Ie,Ve,qe,He,Me,Be,Re,Fe,Ue,Je,ze,Ge,Xe,Ze,We,Ye,Ke,Qe,$e,et,tt,nt,rt,at,ut,st,it,ot,lt,ct,pt,ft,dt,vt,mt,ht,yt,gt,xt,bt;return{setters:[function(e){o=e.bR,c=e.bV,p=e.l,f=e.H,d=e.M,v=e.aM,m=e.G,h=e.a1,y=e.o,g=e.c,x=e.d,b=e.e,w=e.bX,k=e.bY,S=e.O,_=e.J,C=e.bJ,L=e.an,A=e.bK,T=e.U,N=e.h,D=e.x,E=e.aR,O=e.r,j=e.k,P=e.R,I=e.a6},function(e){V=e.applyCertOrderPay,q=e.checkSslMethod,H=e.applyBusSsl,M=e.checkUrlTxt,B=e.removeCloudCert,R=e.getDockerDeploySiteDomain,F=e.getDeploySiteDomain,U=e.uploadCertToCloud,J=e.getCertList,z=e.updateSslTask,G=e.setSslInfo,X=e.setProxyHttps,Z=e.setDockerHttps,W=e.setSiteHttps,Y=e.closeSiteHttps,K=e.downloadCert,Q=e.applyProxyCertArrange,$=e.applyCertApi,ee=e.getLetsEncryptList,te=e.downloadCertToLocal,ne=e.setDockerCertToSite,re=e.setCertToSite,ae=e.delLetsEncrypt,ue=e.getOrderDetail,se=e.authDomainApi,ie=e.renewalCert,oe=e.validateDomain,le=e.getComposerLine,ce=e.getDockerLetsEncryptSite,pe=e.getLetsEncryptSite,fe=e.getDnsData,de=e.setDomainDNS,ve=e.applyCertByca,me=e.applyTrustAsiaCert,he=e.verifyTrustAsiaCret,ye=e.verifyTrustAsiaCert,ge=e.getTrustAsiaList,xe=e.letCertInitApi,be=e.letRenewCert,we=e.reissueCertOrder,ke=e.getDnsApiList,Se=e.closeCertArrange,_e=e.setBatchCertToSite},function(e){Ce=e._},function(e){Le=e.s,Ae=e.r,Te=e.i,Ne=e.h,De=e.e,Ee=e.y,Oe=e.c,je=e.k,Pe=e.J,Ie=e.x,Ve=e.H,qe=e.q,He=e.m,Me=e.p,Be=e.aw,Re=e.A,Fe=e.j,Ue=e.l,Je=e.I,ze=e.aX,Ge=e.F,Xe=e.v,Ze=e.n,We=e.az,Ye=e.B,Ke=e.M,Qe=e.C,$e=e.at,et=e.av,tt=e.o,nt=e.z,rt=e.aj,at=e.P,ut=e.ag,st=e.ah,it=e.a2,ot=e.aY,lt=e.aT},function(e){ct=e._},function(e){pt=e.a,ft=e.u},function(e){dt=e.u,vt=e.S},function(e){mt=e.u},function(e){ht=e.n,yt=e.c},function(e){gt=e.u},function(e){xt=e.g},function(e){bt=e.o}],execute:function(){var wt=mt(),kt=wt.siteInfo,St=wt.siteType,_t=wt.isRefreshList,Ct=Le(gt()).isRefreshLocalList,Lt=dt(),At=Lt.orderInfo,Tt=Lt.sslApplicationInfo,Nt=Lt.certVerifyInfo,Dt=Lt.otherPopup,Et=Lt.isRefreshSSL,Ot=Lt.sslDnsApiInfo,jt=vt(),Pt=jt.buyArtificialServiceEvent,It=jt.getCertAdminInfoEvent,Vt=jt.submitCertInfoEvent,qt=jt.setBusSslDeployEvent,Ht=jt.getSslListEvent,Mt=jt.verifyBusCertEvent,Bt=jt.getCertSslListEvent,Rt=jt.getDomainListEvent,Ft=jt.jumpSslTabEvent,Ut=n("p",Ae(!1)),Jt=n("n",Ae([])),zt=["企业级证书","极速申请","防劫持/防篡改","提高SEO权重","赔付保证","不成功可退款","官方推荐(宝塔官网bt.cn也在使用)"],Gt=[{content:function(){return De("span",{class:"text-danger"},[Ee("如果您的站点有使用CDN、高防IP、反向代理、301重定向等功能，可能导致验证失败")])}},{content:"证书支持购买多年，只能一年签发一次（有效期一年），需在到期前30天内续签(续签暂不需要验证域名)。"},{content:"申请www.bt.cn这种以www为二级域名的证书，需绑定并解析顶级域名(bt.cn)，否则将验证失败。"},{content:"商用证书相对于普通证书，具有更高的安全性、赔付保障和支持通配符和多域名等方式。"}],Xt=function(e){var t="text-green";return e.endDate?(e.endDay<=30&&(t="text-orange"),De("span",{class:e.endDay<=10?"text-danger":t},[e.endDay>0?"剩余".concat(e.endDay," 天"):"已过期"])):De("span",null,[Ee("--")])},Zt=function(){var e=l(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.oid,e.prev=1,e.next=4,Pt({pdata:JSON.stringify({oid:n})});case 4:r=e.sent,At.value=r.data,p({isAsync:!0,title:"购买人工服务",area:60,component:function(){return f((function(){return a.import("./pay-ssl-service-legacy.js?v=1734676359")}),void 0,a.meta.url)},compData:r.data}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),Wt=function(){var e=l(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,It();case 2:n=e.sent,Tt.value=u(u({},Tt.value),n.data),At.value=t,vs({orderInfo:t});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Yt=function(){var e=l(i().mark((function e(t){var n,r,a,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vt({oid:t.oid});case 3:n=e.sent,-1===(r=n.data).code&&r.errors?(Kt(r.errors),Ut.value=!0):(a=r.msg||r.data.msg,u=r.status,d.request({msg:u?a||"提交成功":"资料提交错误，请检查管理员信息是否填写正确，如填写错误请联系客服重置订单",status:u}),u&&$t(t.oid)),en(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),Kt=function(e){try{var t=[];return Object.keys(e).forEach((function(n){e[n].forEach((function(e){t.push({field:n,error:e})}))})),{data:t,total:t.length,other:{}}}catch(n){return{data:[],total:0,other:{}}}},Qt=function(){var e=l(i().mark((function e(t){var n,r,a,u,s,o,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.oid,r=t.title,a=t.domainName,e.prev=1,u=kt.value.name,s=St.value,e.next=6,y({title:"部署证书",isHtml:!0,content:"是否部署该证书,是否继续？<br>\n\t\t    证书类型：".concat(r,"<br>\n\t\t    证书支持域名：").concat(a.join("、"),"<br>\n\t\t    部署站点名:").concat(u)});case 6:return o={proxy:{oid:n,site_name:u},docker:{oid:n,site_name:u},default:{oid:n,siteName:u}},e.next=9,qt(o[s]||o.default);case 9:return l=e.sent,en(),fs(),Et.value=!0,_t.value=!0,Ct.value=!0,Ft("currentCertInfo"),e.abrupt("return",l);case 19:e.prev=19,e.t0=e.catch(1);case 22:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t){return e.apply(this,arguments)}}(),$t=function(){var e=l(i().mark((function e(t){var n,r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mt(t);case 2:r=e.sent,a=r.data,r.status&&ms(a),null===(n=Dt.value)||void 0===n||n.unmount();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),en=function(){var e=l(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ht({siteName:kt.value.name});case 3:return t=e.sent,Et.value=!1,e.abrupt("return",t);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{data:[],total:0,other:{}});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),tn=n("a3",Ae(!1)),nn=n("a6",Ae(0)),rn=Ae({}),an={defalutList:[],domianNumList:[],classList:[],brandList:[],typeList:[]},un=n("a7",Ae({addPrice:0,productName:"",price:0,totalPrice:0,originalPrice:0,deploymentPrice:0,pid:0,years:1,yearsPrice:0,number:1,extraNumber:0,extraPrice:0,install:1})),sn=n("a4",Ae({num:1,certClassAcitve:"OV",certClass:[{name:"OV证书",title:"推荐企业使用",value:"OV",tips:[],data:[]},{name:"DV证书",title:"推荐个人，测试使用",value:"DV",subscript:"热销",tips:[]},{name:"EV证书",title:"推荐大型政企使用，高安全性",value:"EV",tips:[]}],certBrandAcitve:"",certBrand:[{name:"Positive",title:"Positive",value:"Positive",tips:[]},{name:"锐安信",title:"锐安信",value:"锐安信",tips:[]},{name:"CFCA",title:"CFCA",value:"CFCA",tips:[]},{name:"Digicert",title:"Digicert",value:"Digicert",tips:[]},{name:"GeoTrust",title:"GeoTrust",value:"GeoTrust",tips:[]},{name:"Sectigo",title:"Sectigo",value:"Sectigo",tips:[]}],certTypeAcitve:"single",certType:[{name:"single",title:"单域名",value:"single",tips:[]},{name:"multiple",title:"多域名",value:"multiple",tips:[]},{name:"wildcard",title:"泛域名",value:"wildcard",tips:[]}],certLifeAcitve:1,certLife:[{name:"1年",title:"1年",value:1,tips:[]},{name:"2年",title:"2年",value:2,tips:[]},{name:"3年",title:"3年",value:3,tips:[]},{name:"4年",title:"4年",value:4,tips:[]},{name:"5年",title:"5年",value:5,tips:[]}],certDeployAcitve:1,certDeploy:[{name:"不需要",title:"不需要",value:0,tips:[]},{name:"部署服务",title:"部署服务",value:1,tips:[]},{name:"部署服务（国密）",title:"部署服务（国密）",value:2,tips:[]}]})),on={single:["仅支持绑定一个二级域名或者子域名，例如 bt.com、cloud.bt.com、dnspod.cloud.bt.com的其中之一 。","如需要绑定同级的所有子域名，例如*.bt.com，请购买泛域名证书。"],wildcard:["带通配符的域名，例如：*.bt.com、*.cloud.bt.com均为泛域名，包含同一级的全部子域名。","注意泛域名不支持跨级，例如*.bt.com 不包含 *.cloud.bt.com的支持"]},ln={0:[],1:["宝塔提供9:00 - 24:00的人工部署证书部署服务，帮助客户排查部署证书部署生效问题，快速上线"],2:["宝塔提供9:00 - 24:00的人工部署国密算法证书部署服务，帮助客户排查部署证书部署生效问题，快速上线"]},cn=(n("a9",Te((function(){var e=sn.value.certClass.filter((function(e){return e.value===sn.value.certClassAcitve}));return e&&e.length>0?e[0].tips:[]}))),n("aa",Te((function(){var e=sn.value.certBrand.filter((function(e){return e.value===sn.value.certBrandAcitve}));return e&&e.length>0?e[0].tips:[]}))),n("ab",Te((function(){var e=sn.value.certType.filter((function(e){return e.value===sn.value.certTypeAcitve}));return e&&e.length>0?e[0].tips:[]}))),n("ac",Te((function(){var e=sn.value.certLife.filter((function(e){return e.value===parseInt(sn.value.certLifeAcitve)}));return e&&e.length>0?e[0].tips:[]}))),n("ad",Te((function(){var e=sn.value.certDeploy.filter((function(e){return e.value===parseInt(sn.value.certDeployAcitve)}));return e&&e.length>0?e[0].tips:[]}))),n("a2",l(i().mark((function e(){var t,n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,tn.value=!0,e.next=4,Bt();case 4:if(t=e.sent,n=t.data,r=t.status,tn.value=!1,r){e.next=11;break}return d.request({msg:"获取证书列表失败",status:!1}),e.abrupt("return",{status:!1,msg:"获取证书列表失败"});case 11:rn.value=n.info.recommend,pn(),dn(n.info),mn(n.data),hn(),e.next=22;break;case 18:return e.prev=18,e.t0=e.catch(0),e.abrupt("return",{status:!1,msg:"获取证书列表失败"});case 22:case"end":return e.stop()}}),e,null,[[0,18]])})))),n("a5",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sn.value.num,t=e;if(v(e)&&"number"!=typeof e?(e=Number(e.data),t=Number(sn.value.num)||1):t=Number(sn.value.num+e)||1,t&&(t<1||t>99))return sn.value.num=t<1?1:99,d.error("域名数量范围为1-99");sn.value.num=t,"wildcard"!==sn.value.certTypeAcitve&&(sn.value.certTypeAcitve=sn.value.num>1?"multiple":"single"),hn()})),n("a8",(function(e,t,n){n||(n=sn.value[t].filter((function(t){return t.value===e}))),n.disable||("".concat(t,"Acitve")in sn.value&&(sn.value["".concat(t,"Acitve")]=e),hn())})),function(){var e;return rn.value[null===(e=sn.value.certClassAcitve)||void 0===e?void 0:e.toLowerCase()]}),pn=function(){sn.value.certClassAcitve="OV",sn.value.certBrandAcitve=cn(),sn.value.certTypeAcitve="single",sn.value.certLifeAcitve=1,sn.value.certDeployAcitve=1},fn=function(e,t,n){return e.map((function(e,r){var a=n?n(e,t):t[e.value];return u(u({},e),{},{tips:a})}))},dn=function(e){var t=e.type,n=e.brand,r=e.times;sn.value.certClass=fn(sn.value.certClass,t,(function(e,t){return t["".concat(e.value).toLowerCase()]})),on.multiple=on.single,sn.value.certType=fn(sn.value.certType,on),sn.value.certDeploy=fn(sn.value.certDeploy,ln),sn.value.certBrand=fn(sn.value.certBrand,n,(function(e,t){return t["Positive"!==e.value?"".concat(e.value).toLowerCase():"Positive"]})),sn.value.certLife=fn(sn.value.certLife,r,(function(e,t){return t[e.value+"_year"]}))},vn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.num,n=e.classify,r=e.brand,a=e.type,u=e.life,s=e.deploy,i=sn.value;return t||(t=i.num),n||(n=i.certClassAcitve),r||(r=i.certBrandAcitve),a||(a=i.certTypeAcitve),u||(u=i.certLifeAcitve),s||(s=i.certDeployAcitve),{num:t,classify:n,brand:r,type:a,life:u,deploy:s}},mn=function(e){var t=[];e.forEach((function(e){var n,r=null===(n=e.type.match(/(OV|DV|EV)/))||void 0===n?void 0:n[0],a=-1!==e.code.indexOf("wildcard"),s=e.add_price>0,i=a?"wildcard":s?"multiple":"single";"Digicert"===e.brand&&(i=a?"wildcard":"single"),t.push(u(u({},e),{type:r,certType:i,isMulti:s}))})),an.defalutList=t},hn=function(){yn(an.defalutList),wn(),kn()},yn=function(e){var t=vn().num,n=e.filter((function(e){return!(t>1)||e.isMulti}));n.length>0&&(an.domianNumList=n,gn(n))},gn=function(e){var t=vn().classify,n=e.filter((function(e){return e.type===t}));n.length>0&&(an.classList=n,xn(n))},xn=function(e){var t=vn().brand,n=e.filter((function(e){return e.brand===t}));n.length>0&&(an.brandList=n,bn(n))},bn=function(e){var t=vn().type;1===e.length&&(sn.value.certTypeAcitve=e[0].certType);var n=e.filter((function(e){var n="multiple"===sn.value.certTypeAcitve&&"wildcard"!==e.certType&&e.isMulti,r="wildcard"===sn.value.certTypeAcitve&&"wildcard"===e.certType&&e.isMulti;return e.certType===t||n||r}));n.length>0&&(an.typeList=n)},wn=function(){var e=an.domianNumList,t=an.classList,n=an.brandList;an.typeList;sn.value.certClass.forEach((function(t){var n=e.some((function(e){return e.type===t.value}));"EV"==t.value&&"wildcard"===sn.value.certTypeAcitve&&(n=!1),t.disable=!n})),sn.value.certBrand.forEach((function(e){var n=!t.some((function(t){return t.brand===e.value}));if(e.hidden=n,e.subscript=e.value===cn()?"推荐":"",e.value===sn.value.certBrandAcitve&&e.hidden){var r;sn.value.certBrandAcitve=cn();var a=null==an||null===(r=an.classList)||void 0===r?void 0:r.filter((function(e){return e.brand===sn.value.certBrandAcitve}));a.length>0&&(an.brandList=a,bn(a))}})),sn.value.certType.forEach((function(e){var t=!n.some((function(t){return t.certType===e.value}));"single"===e.value&&sn.value.num>1&&(t=!0),"multiple"===e.value&&1===sn.value.num&&(t=!0),"multiple"===e.value&&sn.value.num>1&&(t=!1),e.hidden=t}))},kn=function(){var e=an.typeList[0]||null;if(nn.value=(null==e?void 0:e.num)||0,e){var t=vn(),n=t.num,r=t.life,a=t.deploy,u=e.price,s=e.other_price,i=e.add_price,o=e.pid,l=e.num,c=n-l<0?0:n-l,p=[0,e.install_price,e.install_price_v2][a],f=i*c,d=(f+u)*r+p,v=s+f+p;un.value={addPrice:i||0,productName:e.title,price:u,totalPrice:d,originalPrice:v,deploymentPrice:p,pid:o,years:r,yearsPrice:u*r,number:l,extraNumber:c,extraPrice:f,install:Number(a)}}},Sn=Ae({oid:0,wxcode:"",alicode:"",qq:"",orderInfo:{}}),_n=(n("ae",function(){var e=l(i().mark((function e(t){var n,r,a,s,o,l,c,p,f,v,h,y,g,x,b;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=un.value,r=n.pid,a=n.install,s=n.years,o=n.extraNumber,l={pdata:JSON.stringify({pid:r,install:a,years:s,num:o})},e.next=4,m({loading:"正在创建商业证书订单，请稍后...",request:V(l)});case 4:if(c=e.sent,p=c.data,f=c.msg,p.status){e.next=10;break}return e.abrupt("return",d.error(f));case 10:v=p.msg,h=v.oid,y=v.wxcode,g=v.alicode,x=v.qq,b=v.order_info,Sn.value={oid:h,wxcode:y,alicode:g,qq:x,orderInfo:b},Is(u(u({},Sn.value),{},{productInfo:un.value}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),[{content:"通配符证书只支持DNS验证"}]),Cn=[{content:"多域名只支持DNS验证"}],Ln=n("K",Ae(!1)),An=n("P",Ae(!1)),Tn=(n("F",Ae("")),n("H",Ae(""))),Nn=n("I",Ae([])),Dn=Ae([]),En=n("D",Ae(!1)),On=n("M",Ae()),jn=n("N",Ae({domain:""})),Pn=n("g",Ae("CNAME_CSR_HASH")),In=(n("h",Ae(!0)),n("k",Ae("dns"))),Vn=n("w",Ae(!1)),qn=n("B",Ae(!1)),Hn=[{content:"https或者http验证，必须保证网站能通过http/https访问"},{content:"域名前缀是www,提醒用户解析上级根域名，如申请www.bt.cn，请确保解析bt.cn"},{content:function(){return De("a",{class:"text-primary",href:"https://www.bt.cn/bbs/thread-85379-1-1.html",target:"_blank"},[Ee("如何验证商用证书?")])}}],Mn=(n("J",[{content:"申请之前，请确保域名已解析，如未解析会导致审核失败(包括根域名)"},{content:"申请www.bt.cn这种以www为二级域名的证书，需绑定并解析顶级域名(bt.cn)，否则将验证失败"},{content:"SSL证书可选名称赠送规则："},{content:"1、申请根域名(如：bt.cn),赠送下一级为www的域名(如：www.bt.cn)"},{content:"2、申请当前host为www的域名（如：www.bt.cn）,赠送上一级域名，(如: bt.cn)"},{content:"3、申请其它二级域名，(如：app.bt.cn)，赠送下一级为www的域名 (如：www.app.bt.cn)"}]),n("A",Ae([{value:"CNAME_CSR_HASH",label:"DNS验证(CNAME解析)",tips:"如网站还未备案完成，可选【DNS验证】",isCheck:"",checkTips:[]},{value:"HTTP_CSR_HASH",label:"文件验证(HTTP)",tips:"如网站未开启301、302、强制HTTPS、反向代理功能，请选择HTTP",isCheck:"",checkTips:[]},{value:"HTTPS_CSR_HASH",label:"文件验证(HTTPS)",tips:"如网站开启【强制HTTPS】，请选【HTTPS验证】",isCheck:"",checkTips:[]}]))),Bn=[{content:"OV/EV证书申请流程条件："},{content:"1、填写网站验证信息(文件验证或DNS验证)"},{content:"2、完成邮箱认证，根据CA发送的邮件完善邮件内容(中文填写即可)"},{content:"3、企查查或者爱企查、百度地图、114best能查询到相关企业信息，且公司名和公司地址完全匹配"},{content:"4、企查查或其他平台留下的电话能保证周一到周五(7:00 - 15:00)能接听到CA的认证电话，电话号码归属地来自美国，请留意接听。"}],Rn=(n("j",Te((function(){var e=[];return qn.value&&e.push.apply(e,_n),Vn.value&&e.push.apply(e,Cn),e.push.apply(e,Hn),"dv"!==At.value.type&&e.push.apply(e,Bn),e}))),n("x",Te((function(){var e=qn.value?"*":"www";return Vn.value?"多域名".concat(qn.value?"通配符":"","证书，每行一个域名，支持").concat(At.value.limit,"个域名，必填项,例如：\r").concat(e,".bt.cn\r").concat(e,".bttest.cn"):"请输入需要申请证书的域名（单域名".concat(qn.value?"通配符":"","证书），必填项，例如：").concat(e,".bt.cn")}))),n("f",Ae({domains:"",dcvMethod:"",auth_to:"",Administrator:{address:"",city:"",country:"",email:"",firstName:"",lastName:"",job:"",name:"",mobile:"",organation:"",postCode:"",state:""}}))),Fn=Te((function(){return Rn.value.Administrator.lastName+Rn.value.Administrator.firstName})),Un=(n("q",(function(){Rn.value.Administrator=u(u({},Tt.value),{},{name:""}),Rn.value.Administrator.name=Fn.value;var e=At.value,t=e.pid,n=e.oid,r=e.title,a=e.limit,s=e.install,i=e.code,o=i.indexOf("ev")>-1?"ev":i.indexOf("ov")>-1?"ov":"dv";Vn.value=i.indexOf("multi")>-1,qn.value=i.indexOf("wildcard")>-1,At.value={pid:t,oid:n,title:r,limit:a,install:s,isMulti:Vn.value,isWildcard:qn.value,type:o}})),n("y",l(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Rt();case 3:n=e.sent,Nn.value=n.data.map((function(e){return u({label:e.name,value:e.name},e)})),Ln.value=!0,Tn.value=(null===(t=Nn.value)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.name)||"",Dn.value=Nn.value,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))),n("G",(function(e){Nn.value=[],Dn.value.forEach((function(t){t.name.indexOf(e)>-1&&Nn.value.push(t)})),Nn.value.length||(Nn.value=Dn.value)})),n("L",l(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Rn.value.domains=Tn.value,Ln.value=!1,qn.value||Un();case 3:case"end":return e.stop()}}),e)})))),function(){var e=l(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return En.value=!0,e.next=3,q(Tn.value);case 3:t=e.sent,n=t.data,En.value=!1,Mn.value.forEach((function(e){h(n[e.value])?(e.isCheck=!!n[e.value],e.checkTips=!!n[e.value]):(e.isCheck=!1,e.checkTips=n[e.value])}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),Jn=(n("O",Ne({domain:[o({message:"域名不能为空"}),{validator:function(e,t,n){c(t)?!qn.value&&t.indexOf("*")>-1?n(new Error("当前为单域名证书，不支持通配符申请")):n():n(new Error("域名格式错误，请重新输入"))},trigger:["change"]}]})),n("z",(function(){An.value=!0})),n("Q",l(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=On.value)||void 0===t?void 0:t.validate();case 2:Rn.value.domains=jn.value.domain,An.value=!1,qn.value||Un();case 5:case"end":return e.stop()}}),e)})))),n("E",(function(e){var t=In.value;if("dns"!==t){var n=Ot.value.find((function(e){return e.value===t}));if(n){var r=!n.data;(!e||e&&r)&&gs({title:"设置".concat(n.info.title,"接口"),row:n.info})}}})),n("af",function(){var e=l(i().mark((function e(t){var n,r,a,u,s,o,l,c,p,f,m,h,y,g,x,b,w,k,S,_;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,t.value.domains){e.next=3;break}return e.abrupt("return",d.error("域名不能为空"));case 3:if(t.value.Administrator.state||t.value.Administrator.city){e.next=5;break}return e.abrupt("return",d.error("所在地区不能为空"));case 5:if(t.value.Administrator.address||"dv"===At.value.type){e.next=7;break}return e.abrupt("return",d.error("公司详细地址不能为空"));case 7:if(t.value.Administrator.organation){e.next=9;break}return e.abrupt("return",d.error("公司名称不能为空"));case 9:if(t.value.Administrator.name){e.next=11;break}return e.abrupt("return",d.error("姓名不能为空"));case 11:if(t.value.Administrator.email){e.next=13;break}return e.abrupt("return",d.error("邮箱不能为空"));case 13:if(t.value.Administrator.mobile){e.next=15;break}return e.abrupt("return",d.error("手机不能为空"));case 15:return e.prev=15,n=d.load("正在提交证书信息，请稍后..."),a=t.value.Administrator,u=a.job,s=a.postCode,o=a.country,a.firstName,a.lastName,l=a.name,c=a.state,p=a.city,f=a.address,m=a.organation,h=a.email,y=a.mobile,e.next=20,H(JSON.stringify({pid:At.value.pid,oid:At.value.oid,domains:null===(r=Rn.value.domains)||void 0===r?void 0:r.split("\n").filter((function(e){return e.trim()})),dcvMethod:Pn.value,auth_to:In.value,Administrator:{job:u,postCode:s,country:o,lastName:l,state:c,city:p,address:f,organation:m,email:h,mobile:y}}));case 20:if(g=e.sent,v(g.data.msg)&&g.data.msg.hasOwnProperty("code")?(x=g.data.errors,Jt.value=[],Object.keys(x).forEach((function(e){x[e].forEach((function(t,n){Jt.value.push({field:e,error:t})}))})),Ut.value=!0):(b=g.msg||g.data.msg,w=g.data.status,d.request(g.data||{msg:w?b||"提交成功":b||"资料提交错误，请检查管理员信息是否填写正确，如填写错误请联系客服重置订单",status:w})),!g.data.status){e.next=31;break}return Et.value=!0,e.next=26,Mt(At.value.oid);case 26:S=e.sent,_=S.data,S.status,_&&ms(_),null===(k=Dt.value)||void 0===k||k.unmount();case 31:e.next=36;break;case 33:e.prev=33,e.t0=e.catch(15);case 36:return e.prev=36,n&&n.close(),e.finish(36);case 39:case"end":return e.stop()}}),e,null,[[15,33,36,39]])})));return function(t){return e.apply(this,arguments)}}()),n("Y",function(){var e=l(i().mark((function e(t,n){var r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={url:t.url,content:t.content},e.next=4,m({loading:"正在验证商用证书，请稍后...",request:M(r),data:Number});case 4:a=e.sent,Zn.value[n].status=a,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()),n("X",l(i().mark((function e(){var t,n,r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mt(Nt.value.oid);case 2:return r=e.sent,(a=r.data)&&(Nt.value=a),e.next=7,zn();case 7:"PENDING"===(null===(t=Nt.value)||void 0===t?void 0:t.certStatus)&&d.success("验证中，请耐心等待！"),"COMPLETE"===(null===(n=Nt.value)||void 0===n?void 0:n.certStatus)&&d.success("验证成功！"),Dt.value.unmount(),Et.value=!0;case 11:case"end":return e.stop()}}),e)})))),n("W",(function(e){Gn({oid:Nt.value.oid,type:Xn.value})})),n("V",Ae([{content:"本次验证结果是由【本服务器验证】，实际验证将由【CA服务器】进行验证，请耐心等候"},{content:"请确保以上列表所有项都验证成功后点击【验证域名】重新提交验证"},{content:"如长时间验证不通过，请通过【修改验证方式】更改为【DNS验证】"},{content:function(){return De("span",null,[Ee("如何添加域名解析，《"),De("a",{href:"https://cloud.tencent.com/document/product/302/3446",class:"text-primary",target:"__blink"},[Ee("点击查看教程")]),Ee("》，和咨询服务器运营商")])}}]))),zn=n("R",l(i().mark((function e(){var t,n,r,a,u,s,o,l,c,p,f;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=Nt.value)||void 0===t||!t.data){e.next=9;break}return n=Nt.value,r=n.data,a=r.dcvList,u=r.DCVdnsHost,s=r.DCVdnsType,o=r.DCVdnsValue,l=r.DCVfileName,c=r.DCVfileContent,p=n.paths,Wn.value=null==a?void 0:a.map((function(e){return e.domainName})).join(","),Xn.value=a[0].dcvMethod,f={dnsHost:u,dnsType:s,dnsValue:o,fileName:l,fileContent:c,filePath:"/.well-known/pki-validation/"},"CNAME_CSR_HASH"!==Xn.value&&(Zn.value=null==p?void 0:p.map((function(e){return{url:e.url,status:e.status,content:c}})),Jn.value.splice(3,1,{content:function(){return De("span",null,[Ee("SSL添加文件验证方式 ->> "),De("a",{href:"https://www.bt.cn/bbs/thread-56802-1-1.html",target:"_blank",class:"text-primary"},[Ee("查看教程")])])}})),e.abrupt("return",f);case 9:return d.error("获取数据失败"),e.abrupt("return",{});case 11:case"end":return e.stop()}}),e)})))),Gn=function(e){return p({title:"验证域名-"+(e.type.indexOf("CNAME_")>-1?"DNS验证":"文件验证"),area:52,showFooter:!0,btn:["更改","取消"],component:function(){return f((function(){return a.import("./modify-verify-way-legacy.js?v=1734676359")}),void 0,a.meta.url)},compData:e})},Xn=n("S",Ae("")),Zn=n("U",Ae([])),Wn=n("T",Ae()),Yn={id:"wechat-customer",class:"wechat-customer"},Kn={style:{background:"rgba(32, 165, 58, 0.1)",width:"100%",height:"46px",display:"flex","flex-direction":"row","align-items":"center","justify-content":"center"}},Qn={class:"qrcode-wechat",style:{width:"128px",height:"128px",margin:"8px 0 4px 0"}},$n={id:"wechatCustomerQrcode"},er=Oe({__name:"customer-popover",props:{trigger:{default:"click"},showArrow:{type:Boolean,default:!0},placement:{default:"left"}},setup:function(e,t){var n=t.expose,r=e,a=Ae(null),u=Te((function(){return r.trigger})),s=Te((function(){return r.showArrow})),i=Te((function(){return r.placement}));return n({BtCustomerPopover:function(){return a}}),function(e,t){var n=g,r=x,o=Be;return je(),Pe(o,He({ref_key:"BtCustomerPopover",ref:a},e.$attrs,{trigger:Me(u),placement:Me(i),effect:"light","popper-class":"BtCustomerPopover","show-arrow":Me(s),"popper-style":{padding:"0",border:"0",background:"0"}}),{reference:Ie((function(){return[Ve(e.$slots,"default",{},void 0,!0)]})),default:Ie((function(){return[qe("div",Yn,[qe("div",Kn,[De(n,{target:"_blank",href:"https://www.bt.cn/new/wechat_customer",style:{"font-size":"16px",display:"flex","flex-direction":"row","flex-wrap":"nowrap","align-items":"center"}},{default:Ie((function(){return t[0]||(t[0]=[qe("div",{class:"flex items-center border-b border-solid border-[#20a53a60] pb-4px"},[Ee(" 点击咨询客服 "),qe("i",{class:"svgtofont-el-d-arrow-right ml-4px w-[15px]"})],-1)])})),_:1})]),qe("div",Qn,[qe("div",$n,[De(r,{src:"/customer/customer-qrcode.png"})])]),t[1]||(t[1]=qe("div",{class:"wechat-title"},[qe("img",{class:"icon",style:{width:"17px",height:"17px"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAATlJREFUSEvtVrFOw0AMfed8AxJsZWGAgQHBXP4DCQa+Ioou7g18BRIg9T/KDGJggIGFbiDxDXGQowSBuGvrFISEmtF+7/nis312RVEMiWgIoMT375aIjpj5KeJrTMy8JSJjAPsRzEhErl1Zlhd1XZ8kRKZEdMjM0xlBBiIyATCIYZxzl857X6uTiHaY+TElZrUz87aIPCjvI0gIwVmF5uG7H1gFmZepxv85XTdqCCEcLMQ0gLz3jbbTOm/rPdkLBt0v0E77xysq2it9T2nhuTzPN4ho10KyYEXkXvvkBcC6hWjEvmqQMwCnANZa8p1RJAbfa41vAM7/0cUzczOiZ43zvunrtPVOntuO3+wrluJ12qspvFBm/+bR+u03nhPrkKZk2ZVINUZO964sy44Ta9FSK5GuQ1VVXb0DLf+sHQ9tLL0AAAAASUVORK5CYII="}),qe("div",{class:"scan-title",style:{"font-size":"16px"}},"扫一扫")],-1)),t[2]||(t[2]=qe("span",{class:"layui-layer-setwin wechat-close",style:{display:"block"}},[qe("a",{href:"javascript:;",class:"layui-layer-ico layui-layer-close layui-layer-close2"})],-1))])]})),_:3},16,["trigger","placement","show-arrow"])}}}),tr=n("C",b(er,[["__scopeId","data-v-b8224117"]])),nr={class:"h-full"},rr={class:"recommendList"},ar={class:"text-[1.3rem] ml-[8px] text-stroke-primary"},ur={class:"flex flex-col w-full pt-[16px]"},sr={class:"flex items-center"},ir={class:"flex items-center"},or=b(Oe({__name:"index",setup:function(e,t){var n=t.expose,r=dt().sslAlertState,a=w({request:en,columns:[{label:"域名",prop:"domainName",width:120,render:function(e,t){return De("span",{class:"w-full whitespace-pre-line"},[e.domainName?e.domainName.join("、"):"--"])}},{label:"证书类型",prop:"title",showOverflowTooltip:!0},{label:"到期时间",width:100,render:Xt,showOverflowTooltip:!0},{label:"状态",prop:"expire",width:160,showOverflowTooltip:!1,render:function(e,t){var n,r,a=[],u=function(e,t){return De("span",{style:"color: ".concat(e,";")},[t])},s=De(Be,{placement:"bottom-end",width:"400","popper-class":"white-theme",trigger:"click"},{default:function(){return De("div",{class:"bus-ssl-popover"},[De("div",{class:"ssl-popover-item"},[De("span",{class:"ssl-popover-title"},[Ee("自行排查")]),De("p",null,[Ee("以图文的形式，一步步教您验证并部署商业SSL")]),De("a",{class:"bt-link",href:"https://www.bt.cn/bbs/thread-85379-1-1.html",target:"_blank"},[Ee("如何验证商用证书?")])]),De("div",{class:"ssl-popover-item"},[De("span",{class:"ssl-popover-title"},[Ee("购买人工")]),De("p",null,[Ee("不会部署?人工客服帮你全程部署，不成功可退款")]),De(Re,{size:"small",type:"primary",onClick:function(){return Zt(e)}},{default:function(){return[Ee("购买人工")]}})])])},reference:function(){return De("span",{class:"bt-link"},[Ee("排查方法?")])}}),i=e.domainName&&e.domainName.length>0;if(""!=e.certId||i)if(""==e.certId&&0!==e.domainName.length)a.push(De("span",{class:"bt-warn"},[Ee("待提交")]));else if(1===e.status)switch(e.orderStatus){case"COMPLETE":a.push(u("primary","订单完成"));break;case"PENDING":a.push((n="orange",r="验证中",De(Be,{trigger:"hover",placement:"left","popper-class":"popover-default",width:"300",enterable:!1,"open-delay":100,"close-delay":0},{default:function(){return De("div",{class:"flex items-center p-[2px] whitespace-nowrap"},[Ee("1、如填写错误，联系人工可重置订单"),De("br",null,null),Ee("2、如验证方式选择错误，联系人工修改验证方式")])},reference:function(){return De("div",{style:"color: ".concat(n,";")},[r])}})));break;case"CANCELLED":a.push(u("medium","已取消"));break;case"FAILED":a.push(u("danger","申请失败"));break;case"EXPIRED":a.push(u("medium","已过期"));break;default:a.push(u("orange","待验证"))}else switch(e.status){case 0:a.push(u("orange","未支付"));break;case-1:a.push(u("medium","已取消"))}else a.push(De("span",{class:"bt-warn",onClick:function(){return Wt(e)}},[Ee("待完善资料")])),a.push(s);var o=[];return a.map((function(e,t){o.push(e),t<a.length-1&&o.push(De(ct,null,null))})),o}},{label:"操作",prop:"ps",width:140,align:"right",render:function(e,t){var n=function(e,t){return De("span",{class:"bt-link",onClick:t},[e])},r=n("人工服务",(function(){return bt()})),a=n("下载",(function(){return t=e.oid,void window.open("/ssl?action=download_cert&oid=".concat(t));var t})),u=n("部署",(function(){return Qt(e)})),s=n("验证",(function(){return $t(e.oid)})),i=n("续签",(function(){return Ps(e.oid)})),o=[],l=e.domainName&&e.domainName.length>0;if(""!=e.certId||l)if(""==e.certId&&0!==e.domainName.length)o.push(n("提交",(function(){return Yt(e)})));else if(1===e.status)switch(e.orderStatus){case"COMPLETE":1===e.ssl_state?o.push(De("span",null,[Ee("已部署")])):o.push(u),e.endDay<30&&o.push(i),o.push(a);break;case"PENDING":default:e.install&&o.push(r),o.push(s);break;case"CANCELLED":o.push(De("span",null,[Ee("无操作")]));break;case"FAILED":o.push(De("span",{class:"bt-danger cursor-default"},[Ee("申请失败")]));break;case"EXPIRED":o.push(u),o.push(a)}else o.push(De("span",null,[Ee("无操作")]));else e.install&&o.push(r),o.push(n("完善资料",(function(){return Wt(e)})));var c=[];return o.map((function(e,t){c.push(e),t<o.length-1&&c.push(De(ct,null,null))})),c}}],extension:[k()]}),u=a.BtTable,s=a.BtRefresh,i=a.refresh,o=Fe((function(){var e=document.querySelector("#pane-busSslList");e&&e.click()}),1e3);return n({init:i}),function(e,t){var n=Re,a=x,i=Ce,l=S;return je(),Ue("div",nr,[qe("div",rr,[(je(!0),Ue(Je,null,ze(Me(zt),(function(e,n){return je(),Ue("div",{key:n,class:Ge("".concat(6===n?"w-[22rem]":"w-[14rem]"," recomItem"))},[t[0]||(t[0]=qe("i",{class:"svgtofont-el-check font-bold text-[#ff8d00] text-[1.6rem]"},null,-1)),qe("span",ar,Xe(e),1)],2)})),128))]),qe("div",ur,[De(i,null,{"header-left":Ie((function(){return[qe("div",sr,[De(n,{type:"primary",onClick:Me(ls)},{default:Ie((function(){return t[1]||(t[1]=[Ee(" 申请证书 ")])})),_:1},8,["onClick"]),De(tr,{placement:"right"},{default:Ie((function(){return[qe("div",ir,[De(a,{src:"/static/icons/we-com.svg",class:"mx-[4px] w-2rem h-2rem",all:!0}),t[2]||(t[2]=qe("span",{class:"bt-link"},"售前客服",-1))])]})),_:1})])]})),"header-right":Ie((function(){return[De(Me(s))]})),content:Ie((function(){return[De(Me(u),{"max-height":Me(r)?320:380,onWheel:Me(o)},null,8,["max-height","onWheel"])]})),_:1})]),De(l,{options:Me(Gt),listStyle:"disc"},null,8,["options"])])}}}),[["__scopeId","data-v-7ea86f43"]]),lr=mt(),cr=lr.siteType,pr=lr.siteInfo,fr=dt().isRefreshSSL,dr=[{label:"所有",value:0},{label:"未过期",value:1},{label:"即将过期",value:2},{label:"已过期",value:3}],vr=Ae(!1),mr=Ae(),hr=Ae({}),yr=Ae(!1),gr=Ne({typeValue:"全部",btnText:"部署证书",search:"",data:{all:[],site:[]},siteList:[]}),xr=function(){var e=l(i().mark((function e(){var t,n,r,a,u=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:cr.value,0!==gr.siteList.length){e.next=4;break}return d.error("请选择站点"),e.abrupt("return");case 4:return n=hr.value,r=n.hash,a=n.subject,e.next=7,hs({hash:r,subject:a,list:gr.siteList,type:t});case 7:yr.value=!1;case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),br=function(){var e=l(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({title:"删除证书",content:"删除后该证书将不会显示在证书夹，是否继续操作？",icon:"warning-filled"});case 2:return e.next=4,m({loading:"正在删除证书...",request:B({local:t.cloud_id>0?0:1,ssl_hash:t.hash}),message:!0});case 4:fr.value=!0;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Ae([pt(),{label:"站点名称",prop:"name",render:function(e){return e.current?e.name+"(当前站点)":e.name}}]);var wr=function(){var e=l(i().mark((function e(t){var n,r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},r=!0,void 0!==t&&(n={cert_list:JSON.stringify(t.dns)},r=!1,hr.value=t),e.next=4,m({request:"docker"===cr.value?R(n):F(n),data:{all:Array,site:Array}});case 4:a=e.sent,gr.data={all:a.all.map((function(e){return{name:e}})),site:a.site.map((function(e){return{name:e}}))},r||(yr.value=!0,Ze((function(){var e;gr.data.all.forEach((function(e,t){e.name===pr.value.name&&(e.current=!0,gr.data.all.unshift(gr.data.all.splice(t,1)[0]))})),null===(e=mr.value)||void 0===e||e.toggleRowSelection(gr.data.all.find((function(e){return e.name===pr.value.name})),!0)})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),kr=function(e){gr.siteList=e,e.length<=0?gr.btnText="部署证书":gr.btnText="部署证书[已选择".concat(e.length,"项]")},Sr=function(e){gr.typeValue=e},_r=function(){var e=l(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y({title:"上传云端证书",content:"将会上传证书信息至云端进行替换，是否继续操作？",icon:"warning-filled",type:"calc"});case 3:return e.next=5,m({loading:"正在上传证书至云端...",request:U({ssl_hash:t.hash}),message:!0});case 5:e.sent,fr.value=!0,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),Cr=Ae(!1),Lr=function(){var e=l(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Cr.value=!0,fr.value=!0,d.success("获取成功");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ar=function(){var e=l(i().mark((function e(t){var n,r,a,u,s=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:Cr.value,e.prev=1,r={search_limit:t.search_limit,search_name:t.search,force_refresh:Number(n)},Cr.value=!1,e.next=6,m({loading:vr,request:J(r)});case 6:return a=e.sent,u=a.data,_(u)||d.request(u),n&&d.success("获取成功"),e.abrupt("return",{data:u,total:0,other:{}});case 13:return e.prev=13,e.t0=e.catch(1),e.abrupt("return",{data:[],total:0,other:{}});case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),Tr={class:"relative h-[45rem]"},Nr={class:"p-[20px]"},Dr={class:"flex flex-col p-[12px] bg-[#f5faf2]"},Er={class:"mb-[4px]"},Or={class:"mb-[4px]"},jr={class:"mb-[4px]"},Pr={class:"flex justify-between mb-[1rem]"},Ir={class:"absolute bottom-0 w-full bg-[#f6f8f8] flex items-center justify-end p-[12px]"},Vr=Oe({__name:"index",setup:function(e,t){var n=t.expose,r=dt().isRefreshSSL,a=A({key:"search_limit",options:dr,other:{class:"!w-[10rem] mr-1rem",filterable:!0}}),u=C({request:Ar,columns:[{label:"域名",prop:"subject",render:function(e){var t;return We("div",{class:"whitespace-pre-wrap"},(null===(t=e.dns)||void 0===t?void 0:t.join("\n"))||e.subject)}},{label:"到期时间",prop:"not_after"},{label:"品牌",prop:"info.issuer",showOverflowTooltip:!0},{label:"位置",render:function(e){return e.cloud_id>0?"云端":"本地"}},ft([{onClick:_r,width:60,title:"上传云端",isHide:function(e){return e.cloud_id>0}},{onClick:wr,title:"部署"},{onClick:br,title:"删除"}])],extension:[a,L(r)]}),s=u.BtTable,i=u.BtSearch,o=u.BtTableSelect;return n({init:u.refresh}),function(e,t){var n=Re,r=T,a=$e,u=et,l=N,c=Ce,p=Ye("bt-loading");return je(),Ue("div",null,[De(c,null,{"header-left":Ie((function(){return[De(n,{type:"default",onClick:Me(Lr)},{default:Ie((function(){return t[4]||(t[4]=[Ee(" 从云端同步 ")])})),_:1},8,["onClick"])]})),"header-right":Ie((function(){return[qe("div",null,[De(Me(o))]),De(Me(i),{class:"w-[30rem]",placeholder:"请输入域名搜索"})]})),content:Ie((function(){return[De(Me(s),{"max-height":500})]})),popup:Ie((function(){return[De(l,{title:"部署当前证书",modelValue:Me(yr),"onUpdate:modelValue":t[3]||(t[3]=function(e){return Ke(yr)?yr.value=e:null}),area:52},{default:Ie((function(){var e;return[qe("div",Tr,[qe("div",Nr,[qe("div",Dr,[qe("span",Er,"认证域名："+Xe(Me(hr).subject),1),qe("span",Or,"证书类型："+Xe(null===(e=Me(hr).info)||void 0===e?void 0:e.issuer),1),qe("span",jr,"到期时间："+Xe(Me(hr).not_after),1)]),t[5]||(t[5]=qe("span",{class:"!mt-[24px] !mb-[4px] inline-block"},"如下是需要批量部署证书的站点：",-1)),qe("div",Pr,[De(r,{type:"button",modelValue:Me(gr).typeValue,"onUpdate:modelValue":t[0]||(t[0]=function(e){return Me(gr).typeValue=e}),size:"default",options:[{label:"全部",value:"全部"},{label:"匹配站点",value:"匹配站点"}],onChange:Me(Sr)},null,8,["modelValue","onChange"])]),Qe((je(),Pe(u,{ref_key:"deploySiteTableRef",ref:mr,onSelectionChange:Me(kr),data:Me(gr).data["全部"===Me(gr).typeValue?"all":"site"],"max-height":180},{default:Ie((function(){return[De(a,{type:"selection",width:"55"}),De(a,{label:"站点名称",prop:"name"},{default:Ie((function(e){return[Ee(Xe(String(e.row.name)+(e.row.current?"(当前站点)":"")),1)]})),_:1})]})),_:1},8,["onSelectionChange","data"])),[[p,"正在加载中，请稍后...","title"],[p,Me(vr)]])]),qe("div",Ir,[De(n,{type:"warning",onClick:t[1]||(t[1]=function(e){return yr.value=!1})},{default:Ie((function(){return t[6]||(t[6]=[Ee("取消")])})),_:1}),De(n,{type:"primary",onClick:t[2]||(t[2]=function(e){return Me(xr)()})},{default:Ie((function(){return[Ee(Xe(Me(gr).btnText),1)]})),_:1})])])]})),_:1},8,["modelValue"])]})),_:1})])}}}),qr=dt(),Hr=qr.sslInfo,Mr=qr.sslTabActive,Br=mt(),Rr=Br.siteInfo,Fr=Br.siteType,Ur=Br.isRefreshList,Jr=Le(gt()).isRefreshLocalList,zr=[{content:function(){return De("span",null,[Ee("粘贴您的*.key以及*.pem内容，然后保存即可"),De("a",{href:"http://www.bt.cn/bbs/thread-704-1-1.html",class:"text-primary",target:"_blank"},[Ee("[帮助]")]),Ee("。")])}},{content:"如果浏览器提示证书链不完整,请检查是否正确拼接PEM证书"},{content:"PEM格式证书 = 域名证书.crt + 根证书(root_bundle).crt"},{content:"在未指定SSL默认站点时,未开启SSL的站点使用HTTPS会直接访问到已开启SSL的站点"},{content:"如开启后无法使用HTTPS访问，请检查安全组是否正确放行443端口"}],Gr=function(e){switch(e){case 3:Mr.value="busSslList";break;case 2:Mr.value="trustAsiaList";break;case 1:Mr.value="letsEncryptList";break;case 0:Mr.value="currentCertInfo";break;default:Mr.value="certFolderList"}},Xr=Ae(!1),Zr=Ae(!1),Wr=function(){var e=l(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t?ht({onCancel:function(){Hr.value.pushAlarm=!t}}):(Zr.value="all"===Hr.value.push.task_data.project,Xr.value=!0);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Yr=function(){Hr.value.pushAlarm=!0},Kr=function(){var e=l(i().mark((function e(){var t,n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Xr.value=!1,e.prev=1,t=d.load("正在关闭证书到期提醒，请稍后..."),a=void 0,u=void 0,s=void 0,i=void 0,a=Hr.value.push,u=a.id,s=a.task_data,i=a.sender,n={template_id:1,task_id:u,status:0,task_data:JSON.stringify({task_data:{status:!1,type:"site_ssl",project:Zr.value?"all":Rr.value.name,cycle:parseInt(s.cycle),title:"网站SSL到期提醒",interval:600,tid:1},sender:i,time_rule:{send_interval:0,time_range:[0,86399]},number_rule:{day_num:0,total:3}})},e.next=6,z(n);case 6:r=e.sent,d.request(r),r.status&&fs(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1);case 14:return e.prev=14,t&&t.close(),e.finish(14);case 17:case"end":return e.stop()}var a,u,s,i}),e,null,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}(),Qr=function(){var e=l(i().mark((function e(){var t,n,r,a,u,s,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,n=Hr.value,r=n.key,a=n.csr,u=n.type,s=Rr.value.name,ea.value||ta.value){e.next=5;break}return e.abrupt("return",d.error("请填写完整的证书内容"));case 5:if(ea.value===r&&ta.value===a){e.next=9;break}return t=!0,e.next=9,y({title:"证书保存提示",content:"当前证书内容发生改变，证书信息将同步更新，继续操作？"});case 9:return o={proxy:{site_name:s,key:ea.value,csr:ta.value},docker:{site_name:s,key:ea.value,csr:ta.value},default:{type:t?0:u,siteName:s,key:ea.value,csr:ta.value}},e.next=12,m({loading:"正在保存证书信息，请稍后...",request:G(o[Fr.value]||o.default,Fr.value),message:!0,success:function(e){e.status&&(Ur.value=!0,Jr.value=!0,fs())}});case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$r=function(){var e=l(i().mark((function e(t){var n,r,a,u,s,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=4;break}return e.next=4,y({title:"关闭强制HTTPS",content:"关闭强制HTTPS后需要清空浏览器缓存才能生效,是否继续操作?",icon:"warning-filled"});case 4:return n=Rr.value.name,r=Fr.value,u=(a={proxy:{site_name:n,force_https:t?"1":"0"},docker:{site_name:n,force_https:t?"1":"0"},default:{siteName:n}})[r]||a.default,o=(s={proxy:X,docker:Z,default:t?W:Y})[r]||s.default,e.next=12,m({loading:"正在".concat(t?"开启":"关闭","强制HTTPS，请稍后..."),request:o(u),message:!0});case 12:return e.next=14,fs();case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),Hr.value.https=!t;case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}(),ea=Te({get:function(){return Hr.value.key},set:function(e){Hr.value.key=e}}),ta=Te({get:function(){return Hr.value.csr},set:function(e){Hr.value.csr=e}}),na=function(){var e=l(i().mark((function e(){var t,n,r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={siteName:Rr.value.name,pem:ta.value,key:ea.value},e.next=3,m({loading:"正在下载证书，请稍后...",request:K(t),data:{status:Boolean,msg:String}});case 3:n=e.sent,r=n.status,a=n.msg,r&&window.open("/download?filename="+encodeURIComponent(a));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ra=!0,aa=function(){try{ra?ra=!1:cs()}catch(e){}},ua=(n("i",(function(){try{var e,t={},n=Hr.value.push;if(n&&r(n.status)){var a=Hr.value.push,u=a.sender,s=(a.module,a.status,a.id);t={cycle:n.task_data.cycle||1,push:Array.isArray(u)?u:u?u.split(","):[],dueAlarm:n.status,id:s||(new Date).getTime(),domainName:Rr.value.name}}return"all"===(null==n||null===(e=n.task_data)||void 0===e?void 0:e.project)&&n.status&&(t.allSsl=!0),{data:t,status:!0}}catch(i){return{status:!1,msg:"获取证书到期提醒配置失败"}}})),function(e){e.id;var t=e.allSsl,n=e.push,r=e.cycle,a=e.dueAlarm;return{template_id:1,task_id:Hr.value.push.id,status:a?1:0,task_data:JSON.stringify({task_data:{status:a,type:"site_ssl",project:t?"all":Rr.value.name,cycle:parseInt(r),title:"网站SSL到期提醒",interval:600,tid:1},sender:n,time_rule:{send_interval:0,time_range:[0,86399]},number_rule:{day_num:0,total:3}})}}),sa=(n("o",function(){var e=l(i().mark((function e(t,n){var r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n();case 3:return r=ua(t.value),e.next=6,m({loading:"正在设置到期提醒，请稍后...",request:z(r),message:!0});case 6:return a=e.sent,fs(),e.abrupt("return",a.status);case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()),{class:"flex flex-col w-full overflow-y-hidden"}),ia={key:0,class:"ssl-status-info"},oa={class:"left flex-1"},la=["title"],ca={class:"!mb-0"},pa={class:"right flex-1"},fa=["title"],da={key:0},va={key:1,class:"text-danger"},ma={class:"!mb-0"},ha={class:"flex items-center"},ya={class:"flex flex-1 justify-start"},ga={class:"flex-1 mr-[20px]"},xa={class:"flex-1"},ba={class:"my-[16px]"},wa={class:"p-2rem"},ka={class:"flex"},Sa={class:"ml-4"},_a={class:"mt-8px flex items-center"},Ca=Oe({__name:"index",setup:function(e,t){var n=t.expose,r=dt().sslInfo,a=["其他证书","Let's Encrypt","宝塔SSL","商业证书"],u=Te((function(){return-1!==r.value.type?a[r.value.type]:a[0]}));return tt(aa),n({init:aa}),function(e,t){var n,a,s,i,o=g,l=rt,c=at,p=Re,f=S,d=ut,v=st,m=N;return je(),Ue("div",sa,[null!==(n=Me(r))&&void 0!==n&&n.isCertInfo?(je(),Ue("div",ia,[qe("div",oa,[qe("div",null,[t[10]||(t[10]=qe("span",null,"证书分类：",-1)),qe("span",null,[De(o,{onClick:t[0]||(t[0]=function(e){return Me(Gr)(Me(r).type)})},{default:Ie((function(){return[Ee(Xe(Me(u)),1)]})),_:1})])]),qe("div",null,[t[11]||(t[11]=qe("span",null,"认证域名：",-1)),qe("span",{class:"truncate max-w-24rem",title:Me(r).dns.join("、")},Xe(Me(r).dns.join("、")),9,la)]),qe("div",ca,[t[12]||(t[12]=qe("span",null,"强制HTTPS：",-1)),qe("span",null,[De(l,{size:"small",class:"!mb-0",modelValue:Me(r).https,"onUpdate:modelValue":t[1]||(t[1]=function(e){return Me(r).https=e}),onChange:Me($r)},null,8,["modelValue","onChange"])])])]),qe("div",pa,[qe("div",null,[t[13]||(t[13]=qe("span",null,"证书品牌：",-1)),qe("span",{class:"truncate max-w-24rem",title:Me(r).issuer},Xe(Me(r).issuer),9,fa)]),qe("div",null,[t[14]||(t[14]=qe("span",null,"到期时间：",-1)),qe("span",null,[Number(Me(r).endtime)>0?(je(),Ue("span",da,Xe(Me(r).notAfter),1)):(je(),Ue("span",va,"证书已过期"))])]),qe("div",ma,[t[16]||(t[16]=qe("span",null,"到期提醒：",-1)),qe("span",ha,[De(l,{size:"small",class:"!mb-0",modelValue:Me(r).pushAlarm,"onUpdate:modelValue":t[2]||(t[2]=function(e){return Me(r).pushAlarm=e}),onChange:Me(Wr)},null,8,["modelValue","onChange"]),De(o,{class:"ml-[8px]",onClick:t[3]||(t[3]=function(e){return Me(ht)()})},{default:Ie((function(){return t[15]||(t[15]=[Ee(" 到期设置提醒 ")])})),_:1})])])])])):nt("",!0),qe("div",ya,[qe("div",ga,[t[17]||(t[17]=qe("div",{class:"mb-[4px]"},"密钥(KEY)",-1)),De(c,{type:"textarea",rows:12,modelValue:Me(ea),"onUpdate:modelValue":t[4]||(t[4]=function(e){return Ke(ea)?ea.value=e:null})},null,8,["modelValue"])]),qe("div",xa,[t[18]||(t[18]=qe("div",{class:"mb-[4px]"},"证书(PEM格式)",-1)),De(c,{type:"textarea",rows:12,modelValue:Me(ta),"onUpdate:modelValue":t[5]||(t[5]=function(e){return Ke(ta)?ta.value=e:null})},null,8,["modelValue"])])]),qe("div",ba,[De(p,{type:"primary",class:"mr-[4px]",onClick:Me(Qr)},{default:Ie((function(){var e;return[Ee(Xe(null!==(e=Me(r))&&void 0!==e&&e.isStart?"保存":"保存并启用证书"),1)]})),_:1},8,["onClick"]),null!==(a=Me(r))&&void 0!==a&&a.isSupportRenewal||1===(null===(s=Me(r))||void 0===s?void 0:s.type)?(je(),Pe(p,{key:0,type:"primary",class:"mr-[4px]",onClick:t[6]||(t[6]=function(e){return Me(Ds)()})},{default:Ie((function(){return t[19]||(t[19]=[Ee(" 续签证书 ")])})),_:1})):nt("",!0),Me(r).csr?(je(),Pe(p,{key:1,type:"default",class:"mr-[4px]",onClick:t[7]||(t[7]=function(e){return Me(na)()})},{default:Ie((function(){return t[20]||(t[20]=[Ee(" 下载证书 ")])})),_:1})):nt("",!0),null!==(i=Me(r))&&void 0!==i&&i.isStart?(je(),Pe(p,{key:2,type:"default",onClick:Me(Vs)},{default:Ie((function(){return t[21]||(t[21]=[Ee(" 关闭SSL ")])})),_:1},8,["onClick"])):nt("",!0)]),De(f,{options:Me(zr),"list-style":"disc",class:"ml-[20px]"},null,8,["options"]),De(m,{title:"关闭证书到期提醒",showFooter:"",modelValue:Me(Xr),"onUpdate:modelValue":t[9]||(t[9]=function(e){return Ke(Xr)?Xr.value=e:null}),onConfirm:Me(Kr),onCancel:Me(Yr),area:["auto"]},{default:Ie((function(){return[qe("div",wa,[qe("div",ka,[t[24]||(t[24]=qe("i",{class:"svgtofont-el-warning-filled !text-[4rem] text-warning"},null,-1)),qe("div",Sa,[t[23]||(t[23]=qe("div",{class:"py-[.3rem] leading-[2.4rem] text-[1.3rem]"},"关闭证书到期提醒后将不在提醒和证书到期，是否继续操作？",-1)),qe("div",_a,[t[22]||(t[22]=qe("div",null,"应用配置",-1)),De(v,{modelValue:Me(Zr),"onUpdate:modelValue":t[8]||(t[8]=function(e){return Ke(Zr)?Zr.value=e:null}),class:"!w-[20rem] ml-2rem"},{default:Ie((function(){return[De(d,{label:"应用到当前站点",value:!1}),De(d,{label:"应用到所有未设置过的站点",value:!0})]})),_:1},8,["modelValue"])])])]),De(f,{options:[{content:"任务优先级：单个站点的任务优先于所有站点的任务。"}],"list-style":"disc",class:"ml-4rem mt-2rem"})])]})),_:1},8,["modelValue","onConfirm","onCancel"])])}}}),La=b(Ca,[["__scopeId","data-v-14f3a614"]]),Aa=mt(),Ta=Aa.siteInfo,Na=Aa.siteType,Da=dt(),Ea=Da.isRefreshSSL,Oa=Da.sslDnsApiInfo,ja=Da.otherPopup,Pa=vt().jumpSslTabEvent,Ia=Ae(!1),Va=Ne({}),qa=Ae([]),Ha=Ae([]),Ma=Ae(!1),Ba=Ae(""),Ra=function(e){var t,n,r=(null===(t=e.domains)||void 0===t?void 0:t.length)>0,a=r?(n=e.endDay)<=0||n<=7?"text-danger":n<=15?"text-orange":"text-[#20a53a]":"text-[#333]",u=r?e.endDay>0?"剩余".concat(e.endDay,"天"):"已过期":"--";return De("span",{class:a},[u])},Fa=function(e){var t="";if("pending"===e.status){if(e.expires<(new Date).getTime()/1e3)return t=De("span",null,[Ee("--")]);t=De("span",{class:"text-[#e6a23c]"},[Ee("待验证")])}else t=De("span",{class:"text-[#20a53a]"},[Ee("订单完成")]);return t},Ua=[{content:function(){return De("span",{class:"text-danger"},[Ee("注意：请勿将SSL证书用于非法网站")])}},{content:function(){return De("span",null,[Ee("Let's Encrypt 证书申请和续签限制"),De("a",{class:"bt-link",href:"https://letsencrypt.org/zh-cn/docs/rate-limits/",target:"_blank"},[Ee("点击查看")])])}},{content:function(){return De(Je,null,[Ee("Let's Encrypt因更换根证书，部分老旧设备访问时可能提示不可信，考虑购买")," ",De("span",{class:"bt-link",onClick:function(){return Pa("busSslList")}},[Ee("[商业证书]")])])}},{content:"申请之前，请确保域名已解析，如未解析会导致审核失败"},{content:"Let's Encrypt免费证书，有效期3个月，支持多域名。默认会自动续签"},{content:"若您的站点使用了CDN或301重定向会导致续签失败"},{content:"在未指定SSL默认站点时未开启SSL的站点使用HTTPS会直接访问到已开启SSL的站点"},{content:"如开启后无法使用HTTPS访问，请检查安全组是否正确放行443端口"}],Ja=Ae([{label:"解析域名",prop:"domain"},{label:"记录值",showOverflowTooltip:!0,prop:"auth_value",render:function(e,t){var n="dns"===Va.auth_type?e.auth_value:e.file_path;return De("div",{class:"flex items-center"},[De("div",{class:"truncate w-[15rem]"},[n]),De("span",{class:"svgtofont-icon-copy ml-[4px] text-[#666] text-[1.6rem] w-[1.6rem] cursor-pointer",onClick:function(){return D({value:n})}},null)])}},{label:"类型",prop:"type",render:function(e,t){return"dns"===Va.auth_type?De("span",null,[e.type]):De("div",{class:"flex items-center"},[De("div",{class:"truncate w-[15rem]"},[e.content]),De("span",{class:"svgtofont-icon-copy ml-[4px] text-[#666] text-[1.6rem] w-[1.6rem] cursor-pointer",onClick:function(){return D({value:e.content})}},null)])}},{label:"必需",prop:"must",width:100}]),za=Ae(!1),Ga=function(){var e=l(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m({loading:za,request:ee({siteName:Ta.value.name}),data:Array});case 3:return t=e.sent,e.abrupt("return",{data:t,total:t.length,other:{}});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{data:[],total:0,other:{}});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Xa=function(){var e=l(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.index,e.prev=1,e.next=4,m({loading:"正在获取证书信息，请稍后...",request:te({index:n}),message:!1,data:{status:Boolean,msg:String}});case 4:return(r=e.sent).status?window.open(r.msg):d.request(r),e.abrupt("return",{status:r.status,msg:r.msg});case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",{status:!1,msg:"下载失败"});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),Za=function(){var e=l(i().mark((function e(t){var n,r,a,u,s,o=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.index,r=o.length>1&&void 0!==o[1]&&o[1],a=o.length>2&&void 0!==o[2]?o[2]:Ta.value.name,e.prev=3,u={index:n,siteName:a},e.next=7,m({loading:"正在部署证书，请稍候...",request:"docker"===Na.value?ne(u):re(u),message:!1,data:{status:Boolean,msg:String}});case 7:return s=e.sent,ys(s,r),s.status&&Pa("currentCertInfo"),e.abrupt("return",{status:s.status,msg:s.msg});case 13:return e.prev=13,e.t0=e.catch(3),e.abrupt("return",{status:!1,msg:"部署失败"});case 17:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}(),Wa=function(){var e=l(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.index,e.prev=1,e.next=4,y({title:"删除证书订单",content:"确定删除证书订单吗？"});case 4:return e.next=6,m({loading:"正在删除证书，请稍候...",request:ae({index:n}),message:!0});case 6:return r=e.sent,Ea.value=!0,e.abrupt("return",{status:r.status,msg:r.msg});case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",{status:!1,msg:"删除失败"});case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),Ya=function(){var e=l(i().mark((function e(t){var n,r,a,u,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m({loading:"正在验证证书申请状态，请稍后...",request:ue({index:t.index}),message:!1});case 2:n=e.sent,(r=n.data).hasOwnProperty("status")&&r.hasOwnProperty("msg")?d.request(r):(Ha.value=r.auths,r.hasOwnProperty("error")?(Ma.value=r.error,Ba.value=r.error_msg):(Ma.value=!1,Ba.value=""),Object.assign(Va,t),qa.value=[],null===(a=r.auths)||void 0===a||a.forEach((function(e){qa.value.push(e.data)})),o="dns"===t.auth_type,Ja.value[1].label=o?"记录值":"文件路径",Ja.value[1].prop=o?"auth_value":"file_path",Ja.value[2].label=o?"类型":"文件内容",Ja.value[2].prop=o?"type":"content",tu.value[1].content="可通过CMD命令来手动验证域名解析是否生效: nslookup -q=txt _acme-challenge.".concat(null===(u=qa.value[0])||void 0===u||null===(u=u.domain)||void 0===u?void 0:u.replace("*.","")),p({title:"手动".concat("dns"===Va.auth_type?"解析TXT记录":"创建验证文件"),area:70,component:function(){return De("div",{class:"p-[1.5rem]"},[Ee("请按以下列表做TXT解析:"),De("span",{class:"ml-[.4rem] text-danger"},{errorMsg:Ba}),De(Ce,null,s({content:function(){return De("div",{class:"max-h-[38rem] overflow-auto"},[Ha.value.map((function(e,t){return e.data.length>0&&De("div",{key:t},[De("span",null,[Ee("验证域名："),e.domain]),De(j,{class:"my-[1rem]",column:Ja.value,data:e.data},null),Ma.value&&De("div",{class:"flex justify-end"},[De(Re,{type:"default",onClick:function(){return Ka(e)}},{default:function(){return[Ee("验证")]}})])])}))])}},"footer-right",(function(){return!Ma.value&&De(Re,{type:"default",onClick:$a},{default:function(){return[Ee("验证")]}})}))),De(S,{options:tu.value,listStyle:"disc",class:"ml-[20px]"},null)])}}),Ea.value=!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ka=function(){var e=l(i().mark((function e(t){var n,r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ks();case 2:return n=e.sent,e.next=5,se({index:Va.index,domain:t.domain});case 5:r=e.sent,a=r.data,n._props.onCancel(),"valid"===a.status?d.success("验证成功"):!0===a.status?(Ia.value=!1,Za(a,!0)):ws(a,t.data,Va);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qa=function(){var e=l(i().mark((function e(t){var n,r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.index,e.next=3,ks();case 3:return r=e.sent,e.next=6,m({request:ie({index:n}),message:!1,data:{status:Boolean,msg:String}});case 6:a=e.sent,r._props.onCancel(),d.msg({dangerouslyUseHTMLString:!0,message:a.msg,type:a.status?"success":"error",duration:a.status?2e3:0,showClose:!a.status}),a.status&&Ga();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$a=function(){var e=l(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ks();case 2:return t=e.sent,e.next=5,m({request:oe({index:Va.index}),message:!1});case 5:n=e.sent,t._props.onCancel(),!0===n.status?(Ia.value=!1,Za(n,!0)):ws({msg:n.data},qa.value,Va);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),eu=function(){qs({})},tu=Ae([{content:"解析域名需要一定时间来生效,完成所以上所有解析操作后,请等待1分钟后再点击验证按钮"},{content:""},{content:"若您使用的是宝塔云解析插件,阿里云DNS,DnsPod作为DNS,可使用DNS接口自动解析"}]),nu=n("az",Ae([])),ru=n("am",Ae("dns")),au=n("aw",Ae(!1)),uu=n("au",l(i().mark((function e(){var t,n,r=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{id:Ta.value.id},e.prev=1,e.next=4,m({request:"docker"==Na.value?ce(t):pe(t),data:{domains:Array}});case 4:return n=e.sent,su.domain=n.domains.map((function(e){return e.name})),nu.value=n.domains,e.abrupt("return",{data:n.domains,status:!0,msg:"获取站点数据成功"});case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",{status:!1,msg:"获取站点数据失败"});case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))),su=(n("at",function(){var e=l(i().mark((function e(t){var n,r,a,s,o,l,c,p;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=it(t.value),n=Na.value,r=Ta.value.name,0!==t.checkList.length){e.next=7;break}return d.error("请选择一个域名"),e.abrupt("return",!1);case 7:if(a=nu.value.filter((function(e){return t.checkList.includes(e.name)})),"1"!==t.resource||!cu(a)||su.auth_to){e.next=11;break}return d.error("选中的域名存在未设置DNS接口配置"),e.abrupt("return",!1);case 11:if("1"!==t.resource||!t.autoWildcard||!t.checkList.some((function(e){return-1!==e.indexOf("*")}))){e.next=14;break}return d.error("开启自动组合泛域名时不能选择泛域名"),e.abrupt("return",!1);case 14:return s={domains:JSON.stringify(t.checkList),auth_type:"1"==t.resource?"dns":"http",auth_to:"1"===t.resource&&t.auth_to?"dns":JSON.stringify(t.checkList),auto_wildcard:t.autoWildcard?"1":"0",id:Ta.value.id},e.next=17,ks();case 17:return o=e.sent,l={proxy:u(u({},s),{},{site_name:r}),docker:u(u({},s),{},{site_name:r}),default:s},e.next=21,$(l[n]||l.default,n);case 21:return c=e.sent,o._props.onCancel(),e.next=25,ja.value;case 25:return p=e.sent,c.status&&(null==p||p.unmount()),Cs(c.data,t),e.abrupt("return",c.status);case 31:return e.prev=31,e.t0=e.catch(0),d.error("程序发生错误！"),e.abrupt("return",!1);case 36:case"end":return e.stop()}}),e,null,[[0,31]])})));return function(t){return e.apply(this,arguments)}}()),n("aA",(function(e){p({isAsync:!0,title:"配置DNS接口",area:50,component:function(){return f((function(){return a.import("./set-domain-dns-legacy.js?v=1734676359")}),void 0,a.meta.url)},compData:{row:e,refresh:uu},showFooter:!0})})),n("an",(function(e){var t=ru.value;if("dns"!==t&&"http"!==t){var n,r=null===(n=Oa.value)||void 0===n?void 0:n.find((function(e){return e.value===t}));if(r){var a=!r.data;(!e||e&&a)&&gs({title:"设置".concat(r.info.title,"接口"),row:r.info})}}})),n("ax",(function(e){var t=nu.value.filter((function(e){return 1===e.apply_ssl}));su.checkList=e?t.map((function(e){return e.name})):[],au.value=!1})),n("ay",(function(e){var t=e.length;su.checkAll=t===su.domain.length,au.value=t>0&&t<su.domain.length})),n("ar",Ne({resource:"0",auth_to:!1,autoWildcard:!1,checkAll:!1,domain:[],checkList:[]}))),iu=Ae([{content:"如开启后无法使用HTTPS访问，请检查安全组是否正确放行443端口"},{content:function(){return De("span",null,[Ee("在DNS验证中，我们提供了多种自动化DNS-API，并提供了手动模式-"),De("span",{class:"bt-link",onClick:function(){E(),O.push({name:"domain"})}},[Ee("点击添加DNS接口")])])}},{content:"使用DNS接口申请证书可自动续期，手动模式下证书到期后需重新申请"}]),ou=[{content:function(){return De("span",{class:"text-danger"},[Ee("注意：请勿将SSL证书用于非法网站")])}},{content:"使用【DnsPod/阿里云DNS】等接口前您需要先在弹出的窗口中设置对应接口的API"}],lu=Ae([{content:function(){return De("span",null,[" ",Ee("Let's Encrypt 证书申请和续签限制")," ",De("a",{class:"bt-link",target:"_blank",href:"https://letsencrypt.org/zh-cn/docs/rate-limits/"},[Ee("点击查看")])])}},{content:"申请之前，请确保域名已解析，如未解析会导致审核失败"},{content:"Let's Encrypt免费证书，有效期3个月，支持多域名。默认会自动续签"},{content:"若您的站点使用了CDN或301重定向会导致续签失败"},{content:"在未指定SSL默认站点时,未开启SSL的站点使用HTTPS会直接访问到已开启SSL的站点"}]),cu=(n("as",Te((function(){var t="0"===su.resource?lu.value:iu.value,n=ou.concat([]);return n.splice.apply(n,[1,0].concat(e(t))),n}))),n("av",(function(){Object.assign(su,{resource:"0",auth_to:!1,autoWildcard:!1,checkAll:!1,domain:[],checkList:[]})})),function(e){return e.some((function(e){return 0===e.dns_status}))}),pu=n("ai",Ae("正在申请证书...")),fu=n("ah",Ae()),du=(n("ag",l(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fu.value=setInterval(l(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m({request:le({filename:"/www/server/panel/logs/letsencrypt.log",num:10}),data:{msg:[String,pu]}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),clearInterval(fu.value);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),2e3);case 1:case"end":return e.stop()}}),e)})))),n("aq",Ae())),vu=n("ao",Ae([{title:"文件验证 - HTTP",name:"http",data:!1,config:!1}])),mu=(n("ap",function(){var e=l(i().mark((function e(t){var n,r,a,s,o,l,c,p,f,v;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.dns,r=t.id,a={domains:JSON.stringify(n),auth_type:"http",auth_to:r||"dns",auto_wildcard:"0"},"http"!==ru.value){e.next=8;break}if(-1===(null==(s=JSON.stringify(n))?void 0:s.indexOf("*."))){e.next=6;break}return e.abrupt("return",d.error("包含通配符的域名不能使用文件验证(HTTP)!"));case 6:e.next=17;break;case 8:if("dns"===ru.value){e.next=16;break}if(o=Oa.value.find((function(e){return e.value===ru.value})),l=o.data,c=o.info.data,!l){e.next=14;break}a.auth_to="".concat(ru.value,"|").concat(c[0].value,"|").concat(c[1].value),e.next=16;break;case 14:return d.error("指定dns接口没有设置密钥信息"),e.abrupt("return");case 16:a.auth_type="dns";case 17:return a.id=Ta.value.id,a.siteName=Ta.value.name,e.next=21,ja.value;case 21:return e.sent.unmount(),e.next=25,ks();case 25:if(p=e.sent,"proxy"!=Ta.value.project_type&&"nginx"!=Ta.value.project_type&&"docker"!=Ta.value.project_type){e.next=32;break}return e.next=29,Q(u(u({},a),{},{site_name:Ta.value.name}),"docker"==Ta.value.project_type?"docker":"proxy");case 29:e.t0=e.sent,e.next=35;break;case 32:return e.next=34,$(a,Na.value);case 34:e.t0=e.sent;case 35:f=e.t0,v=f.data,null==p||p.unmount(),Cs(v,a);case 39:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n("al",l(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ru.value="http",e.next=3,xs();case 3:t=e.sent,(n=t.data)&&Array.isArray(n)&&(vu.value=vu.value.concat(n));case 6:case"end":return e.stop()}}),e)})))),n("aD",Ae([]))),hu=(n("aC",l(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m({request:fe(),data:{data:[Array,mu]}});case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",{data:[],total:0,other:{}});case 9:case"end":return e.stop()}}),e,null,[[0,5]])})))),n("aB",function(){var e=l(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.dns_id){e.next=4;break}return d.error("请选择验证类型"),e.abrupt("return");case 4:return n={dns_id:t.dns_id,ids:JSON.stringify(t.ids)},e.next=7,m({loading:"正在配置DNS接口，请稍候...",request:de(n),message:!0});case 7:return(r=e.sent).status&&(t.dns_id="",t.ids=[],uu()),e.abrupt("return",r.status);case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()),Oe({__name:"index",setup:function(e,t){var n=t.expose,r=dt(),a=r.isRefreshSSL,u=r.sslAlertState,s=w({request:Ga,columns:[{label:"域名",prop:"domains",render:function(e,t){return De("span",{class:"w-full whitespace-pre-line"},[e.domains?e.domains.join("\n"):"--"])}},{label:"到期时间",prop:"expires",width:110,render:Ra},{label:"订单状态",prop:"status",width:80,render:Fa},{label:"验证方式",prop:"auth_type",width:80,render:function(e,t){return De("span",null,["dns"===e.auth_type?"DNS验证":"文件验证"])}},{label:"操作",prop:"ps",width:190,showOverflowTooltip:!1,align:"right",render:function(e,t){var n=[];return"pending"!==e.status?n=[De("span",{class:"cursor-pointer bt-link",onClick:function(){return Za(e,!1)}},[Ee("部署")]),De(ct,null,null),De("span",{class:"cursor-pointer bt-link",onClick:function(){return Xa(e)}},[Ee("下载")]),De(ct,null,null),De("span",{class:"cursor-pointer bt-link",onClick:function(){return Qa(e)}},[Ee("续签")]),De(ct,null,null)]:e.expires>=(new Date).getTime()/1e3&&(n=[De("span",{class:"cursor-pointer bt-link",onClick:function(){return Ya(e)}},[Ee("验证")]),De(ct,null,null)]),n.push(De("span",{class:"cursor-pointer bt-link",onClick:function(){return Wa(e)}},[Ee("删除")])),n}}],extension:[k(),L(a)]}),i=s.BtTable,o=s.BtRefresh;return n({init:s.refresh}),function(e,t){var n=Re,r=Ce,a=S;return je(),Ue("div",null,[De(r,null,{"header-left":Ie((function(){return[De(n,{type:"primary",onClick:Me(eu)},{default:Ie((function(){return t[0]||(t[0]=[Ee("申请证书")])})),_:1},8,["onClick"])]})),"header-right":Ie((function(){return[De(Me(o))]})),content:Ie((function(){return[De(Me(i),{"default-sort":{prop:"date",order:"descending"},maxHeight:Me(u)?280:320},null,8,["maxHeight"])]})),_:1}),De(a,{options:Me(Ua),"list-style":"disc",class:"pl-1rem"},null,8,["options"])])}}})),yu=xt().refs.isRefreshCertificateList,gu=dt(),xu=(gu.sslInfo,gu.sslTabActive,gu.isRefreshSSL),bu=gu.applySslInfo,wu=mt(),ku=wu.siteInfo,Su=wu.siteType,_u=vt(),Cu=_u.useDeployTrustAsiaCert,Lu=_u.getDomainListEvent,Au=_u.jumpSslTabEvent,Tu=Ae(!1),Nu=Ae(""),Du=n("a0",Ae()),Eu=n("$",Ae([])),Ou=[{content:function(){return De("span",{class:"text-danger"},[Ee("注意：请勿将SSL证书用于非法网站，一经发现，吊销证书。")])}},{content:"申请之前，请确保域名已解析，如未解析会导致审核失败(包括根域名)。"},{content:"宝塔SSL申请的是免费版TrustAsia DV SSL CA - G5证书，仅支持单个域名申请。"},{content:"有效期1年，不支持续签，到期后需要重新申请"},{content:"建议使用二级域名为www的域名申请证书,此时系统会默认赠送顶级域名为可选名称"},{content:"在未指定SSL默认站点时,未开启SSL的站点使用HTTPS会直接访问到已开启SSL的站点"},{content:function(){return De("span",null,[Ee("测试SSL申请注意事项及教程"),De("a",{href:"https://www.bt.cn/bbs/thread-33113-1-1.html",target:"_blank",class:"btlink"},[" ",Ee("使用帮助")])])}}],ju=function(e){switch(e.stateName){case"待验证":return De("span",{class:"text-[#e6a23c]"},[e.stateName]);case"已过期":return De("span",{class:"text-danger"},[e.stateName]);case"验证中":return De("span",{class:"text-[#fc6d26]"},[e.stateName]);case"审核已终止":return De("span",null,[e.stateName]);default:return De("span",{class:"text-[#20a53a]"},[e.stateName])}},Pu=n("a",(function(e){Du.value=e,p({isAsync:!0,title:"申请免费宝塔SSL证书",area:60,component:function(){return f((function(){return a.import("./apply-bt-ssl-legacy.js?v=1734676359")}),void 0,a.meta.url)}})})),Iu=function(){var e=l(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vs();case 3:e.sent,Hu(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Vu=function(){var e=l(i().mark((function e(t){var n,r,a,u,s,o,l,c=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.partnerOrderId,r=c.length>1&&void 0!==c[1]&&c[1],a=Su.value,u=ku.value.name,o=(s={proxy:{site_name:u,partnerOrderId:n},default:{siteName:u,partnerOrderId:n}})[a]||s.default,e.next=8,Cu(o,a);case 8:l=e.sent,ys(l,r),Au("currentCertInfo");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qu=function(){var e=l(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={partnerOrderId:t.partnerOrderId,siteName:ku.value.name},e.next=3,m({loading:"正在验证证书申请状态，请稍后...",request:ye(n),message:!0,data:{status:Boolean,"data.stateCode":[String,"stateCode"]}});case 3:(r=e.sent).status&&"COMPLETED"===r.stateCode?Vu(t,!0):d.success("等待CA验证中，若长时间未能成功验证，请登录官网使用DNS方式重新申请...");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Hu=function(){var e=l(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m({loading:Tu,request:ge({siteName:ku.value.name})});case 3:return t=e.sent,n=t.data,Nu.value=n.partnerOrderId,xu.value=!1,e.abrupt("return",{data:n.data,total:n.data.length,other:{}});case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",{data:[],total:0,other:{}});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),Mu=(n("_",l(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Lu();case 3:return t=e.sent,Eu.value=t.data,Du.value&&Du.value.ssl_id&&(bu.value.domain=null===(n=Eu.value)||void 0===n||null===(n=n.find((function(e){return e.name===Du.value.authDomain})))||void 0===n?void 0:n.name),Eu.value=Eu.value.map((function(e){var t=e.name;e.id;return{value:t,label:t}})),e.abrupt("return",{data:bu.value,status:!0});case 10:e.prev=10,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))),n("a1",function(){var e=l(i().mark((function e(t){var n,r,a,s,o,l,c,p,f,v,h,y;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=null===(n=Du.value)||void 0===n?void 0:n.ssl_id,a=u(u({},t),{},{orgDivision:"总务",path:ku.value.path}),r&&(a.ssl_id=r),delete a.data,a.status,s=r?ve:me,e.next=8,m({loading:"正在提交证书申请资料，请稍后...",request:s(a)});case 8:if(o=e.sent,l=o.data,c=o.msg,!(p=o.status)){e.next=23;break}return d.success(l.msg||c||"申请成功"),e.next=16,m({loading:"正在验证证书申请状态，请稍后...",request:he({partnerOrderId:l.partnerOrderId,siteName:ku.value.name})});case 16:f=e.sent,v=f.data,h=f.status,y=f.msg,h?"COMPLETED"==v.stateCode?(d.success("验证成功！即将开始证书部署！"),Vu(l)):d.success("等待CA验证中，若长时间未能成功验证，请登录官网使用DNS方式重新申请..."):d.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,message:y,type:"error",duration:0,showClose:!0}),e.next=24;break;case 23:d.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,message:l.msg||c,type:"error",duration:0,showClose:!0});case 24:return xu.value=!0,yu.value=!0,e.abrupt("return",p);case 29:return e.prev=29,e.t0=e.catch(0),e.abrupt("return",!1);case 33:case"end":return e.stop()}}),e,null,[[0,29]])})));return function(t){return e.apply(this,arguments)}}()),{class:"text-[1.2rem] h-[4.2rem] leading-[1.8rem]"}),Bu={class:"flex flex-col w-full pt-[16px]"},Ru=Oe({__name:"index",setup:function(e,t){var n=t.expose,r=dt(),a=r.sslAlertState,u=r.isRefreshSSL,s=w({request:Hu,columns:[{label:"域名",prop:"commonName"},{label:"到期时间",width:110,render:function(e,t){return P(e.endtime,"yyyy/MM/dd")}},{label:"状态",prop:"stateName",width:100,render:ju},{label:"操作",prop:"ps",width:200,showOverflowTooltip:!1,align:"right",render:function(e){if("审核已终止"===e.stateName)return De("span",null,[Ee("--")]);var t=[De("span",{class:"bt-link",onClick:function(){return Vu(e,!1)}},[Ee("部署")])];return"WF_DOMAIN_APPROVAL"===e.stateCode&&""!==e.authDomain?t=[De("span",{class:"bt-link",onClick:function(){return qu(e)}},[Ee("验证域名")]),De(ot,{direction:"vertical"},null),De("span",{class:"bt-link",onClick:function(){return Pu(e)}},[Ee("修改域名")])]:"WF_DOMAIN_APPROVAL"===e.stateCode&&""===e.authDomain?t=[De("span",{class:"bt-link",onClick:function(){return Pu(e)}},[Ee("填写域名")])]:e.partnerOrderId===Nu.value&&(t=[De("span",null,[Ee("已部署")]),De(ct,null,null),De("span",{class:"bt-link",onClick:function(){return Iu()}},[Ee("关闭")])]),t}}],extension:[k(),L(u)]}),i=s.BtTable,o=s.BtRefresh;return n({init:s.refresh}),function(e,t){var n=g,r=lt,u=Re,s=Ce,l=S;return je(),Ue("div",null,[De(r,{type:"error",class:"my-[16px]",closable:!1},{title:Ie((function(){return[qe("span",Mu,[t[2]||(t[2]=qe("span",null," 提示：尊敬的用户您好，感谢您对宝塔免费证书的支持，由于证书签发机制的调整，原一年的免费证书，将缩短至90天。本调整将于2024年4月25日生效。请注意及时续签。 ",-1)),De(n,{class:"!inline-block",href:"https://www.trustasia.com/view-free-ssl-one-year-adjustment-announcement/",target:"_blank"},{default:Ie((function(){return t[1]||(t[1]=[Ee(" 查看详情 ")])})),_:1}),t[3]||(t[3]=Ee(" 。 "))])]})),_:1}),qe("div",Bu,[De(s,null,{"header-left":Ie((function(){return[De(u,{type:"primary",onClick:t[0]||(t[0]=function(e){return Me(Pu)()})},{default:Ie((function(){return t[4]||(t[4]=[Ee(" 申请证书 ")])})),_:1})]})),"header-right":Ie((function(){return[De(Me(o))]})),content:Ie((function(){return[De(Me(i),{"default-sort":{prop:"date",order:"descending"},"max-height":Me(a)?280:320},null,8,["max-height"])]})),_:1})]),De(l,{options:Me(Ou),"list-style":"disc",class:"ml-[20px]"},null,8,["options"])])}}}),Fu=dt(),Uu=Fu.sslInfo,Ju=Fu.certVerifyInfo,zu=Fu.sslTabActive,Gu=Fu.letApplyInfo,Xu=Fu.isRefreshSSL,Zu=Fu.pollingPopup,Wu=Fu.sslDnsApiInfo,Yu=Fu.productInfo,Ku=Fu.orderInfo,Qu=Fu.otherPopup,$u=mt(),es=$u.siteInfo,ts=$u.siteType,ns=$u.isBindExtranet,rs=$u.isRefreshList,as=Le(gt()).isRefreshLocalList,us=vt(),ss=us.getSSLInfoEvent,is=us.jumpSslTabEvent,os=Te((function(){var e,t;return'当前证书 -<span class="'.concat(null!==(e=Uu.value)&&void 0!==e&&e.isStart?"text-primary":"text-danger",'">[').concat(null!==(t=Uu.value)&&void 0!==t&&t.isStart?"已部署SSL":"未部署SSL","]</span>")})),ls=(n("t",[{label:function(){return De("span",{innerHTML:os.value},null)},name:"currentCertInfo",lazy:!0,render:function(){return De(La,null,null)}},{label:"商用SSL证书",name:"busSslList",lazy:!0,render:function(){return De(or,null,null)}},{label:"宝塔证书",name:"trustAsiaList",lazy:!0,render:function(){return De(Ru,null,null)}},{label:"Let's Encrypt",name:"letsEncryptList",lazy:!0,render:function(){return De(hu,null,null)}},{label:"证书夹",name:"certFolderList",lazy:!0,render:function(){return De(Vr,null,null)}}]),n("d",(function(){zu.value="busSslList",p({isAsync:!0,title:"购买商业证书",area:[79],component:function(){return f((function(){return a.import("./apply-bus-ssl-legacy.js?v=1734676359")}),void 0,a.meta.url)}})}))),cs=n("m",(function(){var e,t,n=null===(e=es.value.project_type)||void 0===e?void 0:e.toLowerCase();ts.value=n,ns.value=!(null===(t=es.value.project_config)||void 0===t||!t.bind_extranet);["php","html","phpasync","proxy","docker"].includes(n)&&(ns.value=!0),ns.value&&ps()})),ps=function(){var e=l(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.load("正在获取站点证书部署信息，请稍候..."),e.next=3,fs();case 3:t.close();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fs=n("aE",l(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ss({siteName:es.value.name});case 3:return t=e.sent,n=t.data,ds(n),e.abrupt("return",{data:n,status:!0,msg:"获取证书信息成功"});case 9:e.prev=9,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))),ds=function(e){var t=e.type,n=e.httpTohttps,a=e.index,s=e.auth_type,i=e.key,o=e.csr,l=e.cert_data,c=void 0===l?{}:l,p=c.dns,f=void 0===p?[]:p,d=c.subject,v=void 0===d?"":d,m=c.issuer,h=void 0===m?"":m,y=c.endtime,g=void 0===y?"":y,x=c.notAfter,b=void 0===x?"":x,w=e.push,k=e.status,S=e.oid;Uu.value=u(u({},Uu.value),{},{isCertInfo:!!v,https:n,type:t,key:i||"",csr:o||"",index:a||"",authType:s||"",oid:S,dns:f||[],subject:v,issuer:h,endtime:g,notAfter:b,push:w,pushAlarm:!!("object"===r(w)?w.status:w),isSupportRenewal:function(){var e=!1;return g<=30&&(e=!0),2===t&&g<0&&(e=!0),0!==t&&-1!==t||(e=!1),e}(),isStart:k})},vs=n("ak",function(){var e=l(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ku.value=t.orderInfo,e.next=3,p({title:"完善商业证书资料",area:64,component:function(){return f((function(){return a.import("./bus-cert-verify-info-legacy.js?v=1734676359")}),void 0,a.meta.url)},compData:t});case 3:Qu.value=e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ms=n("Z",function(){var e=l(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ju.value=t,e.next=3,p({title:"验证域名-"+(t.isCNAME?"DNS验证":"文件验证"),area:64,component:function(){return f((function(){return a.import("./bus-cert-verify-way-legacy.js?v=1734676359")}),void 0,a.meta.url)}});case 3:Qu.value=e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),hs=n("c",function(){var t=l(i().mark((function t(n){var r,a,u,s,o,l,c,p,f;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.hash,u=n.subject,s=n.list,o=n.type,t.next=3,y({title:"部署证书",content:"批量部署证书后，原有证书将被覆盖，是否继续？",icon:"warning-filled"});case 3:return l=s.map((function(e){return{ssl_hash:a,siteName:e.name,certName:u}})),c={proxy:{BatchInfo:JSON.stringify(l),site_name:es.value.name},docker:{BatchInfo:JSON.stringify(l),site_name:es.value.name},default:{BatchInfo:JSON.stringify(l)}},p=c[o]||c.default,t.next=8,m({loading:"正在部署证书，请稍候...",request:_e(p,o),data:{faildList:Array,successList:Array}});case 8:return f=t.sent,null!==(r=es.value)&&void 0!==r&&r.name&&fs(),rs.value=!0,as.value=!0,t.next=14,yt({title:"批量部署结果",resultTitle:"部署证书操作",resultData:[].concat(e(f.faildList.map((function(e){return{name:e.siteName,status:!1,msg:e.msg||e.error_msg}}))),e(f.successList.map((function(e){return{name:e.siteName,status:!0}}))))});case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),ys=n("u",(function(e,t){if(e.status)d.request(e),fs(),rs.value=!0,Xu.value=!0,as.value=!0;else{var n=t?"当前证书已成功申请！自动部署失败，请尝试手动部署证书！\n":"";d.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,message:n+e.msg,type:e.status?"success":"error",showClose:!e.status})}})),gs=function(e){return p({isAsync:!0,title:e.title,area:50,component:function(){return f((function(){return a.import("./dns-verify-info-legacy.js?v=1734676359")}),void 0,a.meta.url)},showFooter:!0,compData:e.row})},xs=n("v",l(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m({request:ke(),data:Array});case 3:return t=e.sent,_(t)&&bs(t),e.abrupt("return",{data:t,status:!0});case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{status:!1,msg:"获取DNS接口信息失败"});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))),bs=function(e){Wu.value=e.filter((function(e){return"CloudxnsDns"!==e.name})).map((function(e){return{label:e.title,value:e.name,config:!!e.data,data:!!e.data&&""!=e.data[0].value,info:e}}))},ws=n("s",(function(e,n,r){var a;if(e.msg&&I(e.msg))d.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,message:e.msg,type:"error",showClose:!0,duration:0});else{var u,s,i="",o=e.msg[0];if(void 0===(null===(a=e.msg[1])||void 0===a?void 0:a.challenges))i+="\n\t\t\t<p><span>响应状态：</span>".concat(e.msg[1].status,"</p>\n\t\t\t<p><span>错误类型：</span>").concat(e.msg[1].type,"</p>\n\t\t\t<p><span>错误来源：</span><a href='https://letsencrypt.org/' style='color:#20a53a'>Let's Encrypt官网</a></p>\n\t\t\t<div class=\"flex flex-col\">\n\t\t\t\t错误代码：\n\t\t\t\t<pre class=\"!text-white !bg-[#333] !inline-block !ml-[4px]\">\n\t\t\t\t\t").concat(e.msg[1].detail,"\n\t\t\t\t</pre>\n\t\t\t</div>");else if(null!==(u=e.msg[1])&&void 0!==u&&u.challenges[1]||null===(s=e.msg[1])||void 0===s||!s.challenges[0]||(e.msg[1].challenges[1]=e.msg[1].challenges[0]),"invalid"===e.msg[1].status){var l,c,p,f="",v=function(e,n){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=t(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var a=0,u=function(){};return{s:u,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:u}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){o=!0,s=e},f:function(){try{i||null==r.return||r.return()}finally{if(o)throw s}}}}(n);try{for(v.s();!(p=v.n()).done;){var m=p.value,h=m.outerText||m.auth_value;if(null!=h&&h.includes(e.msg[1].identifier.value)){var y=h.split("\t");if((null==y?void 0:y.length)>1){f=y[1];break}}}}catch(L){v.e(L)}finally{v.f()}var g=null===(l=e.msg[1])||void 0===l?void 0:l.identifier.value,x=null===(c=e.msg[1])||void 0===c?void 0:c.challenges[1],b=null==x?void 0:x.error.detail;if(i+="\n\t\t\t\t<p><span>验证域名：</span>".concat(g,"</p>\n\t\t\t"),"dns"===(null==r?void 0:r.type)||"dns"===(null==r?void 0:r.auth_type)){var w="_acme-challenge.".concat(g);i+="\n\t\t\t\t\t<p><span>验证解析：</span>".concat(w,"</p>\n\t\t\t\t\t<p><span>验证内容：</span>").concat(f||x.token,'</p>\n\t\t\t\t\t<div class="flex flex-col">\n\t\t\t\t\t\t错误代码：\n\t\t\t\t\t\t<pre class="!text-white !bg-[#333] !inline-block !ml-[4px]">\n\t\t\t\t\t\t\t').concat(b,"\n\t\t\t\t\t\t</pre>\n\t\t\t\t\t</div>\n\t\t\t\t")}else{var k,S,_,C="http://".concat(g,"/.well-known/acme-challenge/").concat(null===(k=e.msg[1])||void 0===k?void 0:k.challenges[0].token);i+="\n\t\t\t\t\t<p><span>验证URL：</span><a style='color:#20a53a' href='".concat(C,"' target='_blank'>点击查看</a></p>\n\t\t\t\t\t<p><span>验证内容：</span>").concat(null===(S=e.msg[1])||void 0===S?void 0:S.challenges[0].token,'</p>\n\t\t\t\t\t<div class="flex flex-col">\n\t\t\t\t\t\t错误代码：\n\t\t\t\t\t\t<pre class="!text-white !bg-[#333] !inline-block !ml-[4px]">\n\t\t\t\t\t\t\t').concat(null===(_=e.msg[1])||void 0===_?void 0:_.challenges[0].error.detail,"\n\t\t\t\t\t\t</pre>\n\t\t\t\t\t</div>\n\t\t\t\t")}i+="<p><span>验证结果：</span> <a style='color:red;'>验证失败</a></p>"}d.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,icon:"x",message:'\n\t\t\t<div class="flex items-center justify-center mt-[.8rem] mb-2rem">\n\t\t\t\t<i class="svgtofont-el-circle-close-filled mr-[.8rem] text-[#F56C6C] !text-[3rem]"></i>\n\t\t\t\t<a style="color: red; font-size:16px">\n\t\t\t\t\t'.concat(o,'\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t\t<div class="p-[2rem] border border-1 border-color-[#dedede] !rounded-[4px] !mb-[12px] !leading-[26px] bg-[#f8f8f8]">\n\t\t\t\t').concat(i,"\n\t\t\t</div>\n\t\t"),showClose:!0,duration:0})}})),ks=n("l",(function(){return p({area:[50,25],showFooter:!1,component:function(){return f((function(){return a.import("./lets-encrypt-progress-legacy.js?v=1734676359")}),void 0,a.meta.url)}})})),Ss=Ae([{label:"解析域名",prop:"name"},{label:"记录值",prop:"txt",render:function(e,t){return De("div",{class:"flex items-center"},[De("div",{class:"truncate w-[15rem]"},[e.txt]),De("span",{class:"svgtofont-icon-copy ml-[4px] text-[#666] text-[1.6rem] w-[1.6rem] cursor-pointer",onClick:function(){return D({value:e.txt})}},null)])}},{label:"类型",prop:"type"},{label:"必需",prop:"force",width:100}]),_s=Ae(),Cs=function(e,t){if(!1===e.status&&e.hasOwnProperty("msg")&&I(e.msg))d.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,message:e.msg,type:"error",showClose:!0,duration:0});else if(!0!==e.status&&"pending"!==e.status&&void 0===(null==e?void 0:e.save_path))ws(e,Gu.value.dnsTable,Gu.value.info);else{if("pending"===e.status&&"dns"===e.auth_type){Ts(e,t);var n=[];e.auths.forEach((function(e){var t=[],r=e.domain.replace("*.","");t.push({name:"_acme-challenge.".concat(r),type:"TXT",txt:e.auth_value,force:"是"}),t.push({name:r,type:"CAA",txt:'0 issue "letsencrypt.org"',force:"否"}),n.push({domain:e.domain,data:t})}));var r=[{content:"解析域名需要一定时间来生效,完成所以上所有解析操作后,请等待1分钟后再点击验证按钮"},{content:"可通过CMD命令来手动验证域名解析是否生效: nslookup -q=txt _acme-challenge.".concat(e.auths[0].domain.replace("*.",""))},{content:"若您使用的是宝塔云解析插件,阿里云DNS,DnsPod作为DNS,可使用DNS接口自动解析"}],a=!!e.hasOwnProperty("error")&&e.error;return Object.assign(Va,e),void(_s.value=p({title:"手动解析TXT记录",area:70,component:function(){return De("div",{class:"p-[1.5rem]"},[Ee("请按以下列表做TXT解析:"),De(Ce,null,s({content:function(){return De("div",{class:"max-h-[38rem] overflow-auto"},[n.map((function(t,n){return De("div",{key:n},[t.data.length>0&&De(Je,null,[De("span",null,[Ee("验证域名："),t.domain]),De(j,{class:"my-[1rem]",column:Ss.value,data:t.data},null),a.value&&De("div",{class:"flex justify-end"},[De(Re,{type:"default",onClick:function(){return Ls({index:e.index,domain:t.domain})}},{default:function(){return[Ee("验证")]}})])])])}))])}},"footer-right",(function(){return!a.value&&De(Re,{type:"default",onClick:$a},{default:function(){return[Ee("验证")]}})}))),De(S,{options:r,listStyle:"disc",class:"ml-20x"},null)])}}))}Ns(e)}},Ls=function(){var e=l(i().mark((function e(t){var n,r,a,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ks();case 2:return n=e.sent,e.next=5,se(t);case 5:if(r=e.sent,a=r.data,null==n||n.unmount(),"valid"!==a.status){e.next=12;break}d.success("验证成功"),e.next=21;break;case 12:if(!0!==a.status){e.next=20;break}return e.next=15,_s.value;case 15:(u=e.sent)&&u.unmount(),As(a,!0),e.next=21;break;case 20:ws(a,Gu.value.dnsTable,Gu.value.info);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),As=function(){var e=l(i().mark((function e(t){var n,r,a,u,s=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.index,r=s.length>1&&void 0!==s[1]&&s[1],a=s.length>2&&void 0!==s[2]?s[2]:es.value.name,e.next=5,m({loading:"正在部署证书，请稍候...",request:re({index:n,siteName:a}),message:!1,data:{status:Boolean,msg:String}});case 5:u=e.sent,ys(u,r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ts=function(e,t){Gu.value.dnsTable=e.auths,Gu.value.info.index=e.index,Gu.value.info.type=t.auth_type},Ns=function(){var e=l(i().mark((function e(t,n){var r,a,u,s,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.private_key&&t.cert&&t.root){e.next=3;break}return d.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,message:"部署失败，请关闭SSL后重新尝试部署！",type:"error",showClose:!0,duration:0}),e.abrupt("return");case 3:return r=t.private_key,a=t.cert,u=t.root,s=es.value.project_type,o={proxy:{site_name:es.value.name,key:r,csr:a+u},default:{type:1,siteName:es.value.name,key:r,csr:a+u}},e.next=8,m({loading:"正在保存证书信息，请稍后...",request:G(o[s]||o.default,s),message:!0,success:function(e){if(!0===e.status)fs(),is("currentCertInfo");else{var t=e.msg;t="当前证书申请并验证成功，自动部署失败，请尝试手动部署证书！\n"+t,d.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,message:t,type:"error",showClose:!0,duration:0})}}});case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ds=(n("aj",(function(e){p({title:"支付成功",area:[60,60],component:function(){return f((function(){return a.import("./pay-bus-success-legacy.js?v=1734676359")}),void 0,a.meta.url)},compData:e})})),n("r",l(i().mark((function e(){var t,n,r,a,u,s,o,l,c,p=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=p.length>0&&void 0!==p[0]?p[0]:Uu.value,n=t.type,r=t.oid,a=t.index,u=t.authType,s=p.length>1&&void 0!==p[1]?p[1]:es.value,o=s.name,3!==n){e.next=6;break}js(r,n),e.next=15;break;case 6:if(32!==(null==a?void 0:a.length)||-1!==a.indexOf("/")||"dns"===u){e.next=10;break}Os(a),e.next=15;break;case 10:return e.next=12,m({request:xe({siteName:o,pem_file:a})});case 12:l=e.sent,c=l.data,Es(c);case 15:case"end":return e.stop()}}),e)}))))),Es=function(){var e=l(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:du.value=t,Qu.value=p({title:"续签Let's Encrypt证书",area:50,component:function(){return f((function(){return a.import("./lets-encrypt-renew-legacy.js?v=1734676359")}),void 0,a.meta.url)},compData:t});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Os=function(){var e=l(i().mark((function e(t){var n,r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ks();case 2:return n=e.sent,e.next=5,m({request:be({index:t})});case 5:r=e.sent,a=r.data,n._props.onCancel(),Cs(a,{auth_type:a.auth_type});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),js=function(e,t){if(3===t)Ps(e)},Ps=function(){var e=l(i().mark((function e(t){var n,r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({title:"商业证书续签",content:"当前证书订单需要重新生成新订单，需要手动续签，和重新部署证书，是否继续操作？"});case 2:return n={pdata:JSON.stringify({oid:t})},e.next=5,m({loading:"正在续签商业证书，可能等待时间较长，请稍后...",request:we(n),data:Object});case 5:r=e.sent,v(r)&&r.hasOwnProperty("order_info")?(a=r.order_info,Is({oid:r.oid,wxcode:r.wxcode,alicode:r.alicode,orderInfo:a,productInfo:u(u({},a),{},{productName:a.title,totalPrice:r.data.price,isRenew:!0})})):d.request(r),fs();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Is=n("b",function(){var e=l(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Yu.value=t.productInfo,Ku.value=t.orderInfo,Zu.value=p({title:"支付商业证书订单",area:[60],component:function(){return f((function(){return a.import("./pay-bus-ssl-legacy.js?v=1734676359")}),void 0,a.meta.url)},compData:t});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Vs=function(){var e=l(i().mark((function e(){var t,n,r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ts.value,n=es.value.name,a=(r={proxy:{site_name:n},default:{updateOf:1,siteName:n}})[t]||r.default,e.next=6,m({loading:"正在关闭证书，请稍后...",request:Se(a,t),message:!0,success:function(){rs.value=!0,as.value=!0}});case 6:fs();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),qs=function(){var e=l(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Qu.value=p({isAsync:!0,title:"申请Let's Encrypt证书",area:64,component:function(){return f((function(){return a.import("./applay-lest-ssl-legacy.js?v=1734676359")}),void 0,a.meta.url)},compData:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();n("e",(function(){p({component:function(){return f((function(){return a.import("./index-legacy143.js?v=1734676359")}),void 0,a.meta.url)},area:52,compData:{title:"SSL证书需求反馈收集",type:28,isNoRate:!0,softName:"1",isCard:!1,id:993}})}))}}}))}();
