import{o as a,G as e,M as l,H as s,aa as t}from"./utils-lib.js?v=1734676359";import{_ as n}from"./index116.js?v=1734676359";import{g as i,a as o}from"./useMethod4.js?v=1734676359";import{getFirewallStore as r}from"./useStore4.js?v=1734676359";import{c as u,r as m,o as d,k as c,l as p,q as _,e as v,p as g,y as f,v as b,H as x,x as w,aj as y,A as j,h,w as P,a1 as V,M as I,J as k,z as q}from"./base-lib.js?v=1734676359";import{s as E,a as C,c as A,g as z}from"./firewall.js?v=1734676359";import{o as R}from"./column.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./index91.js?v=1734676359";import"./validator.js?v=1734676359";import"./index.vue_vue_type_style_index_0_scoped_03ce946a_lang.js?v=1734676359";const T={class:"tab-header-operate"},W={class:"flex items-center"},D={class:"mx-[0.4rem]"},G=u({__name:"index",setup(s,{expose:t}){const{refs:{firewallInfo:n}}=r(),o=m(""),u=m(""),h=async l=>{n.value.status=!l,await a({icon:"question-filled",title:l?"启用系统防火墙":"停用系统防火墙",content:l?"推荐启用，启用系统防火墙后，可以更好的防护当前的服务器安全，是否继续操作？":"停用系统防火墙，服务器将失去安全防护，是否继续操作？"}),await e({loading:"正在"+(l?"启用系统防火墙":"停用系统防火墙")+"，请稍后...",request:E({status:Number(l)}),message:!0}),n.value.status=l},P=async l=>{n.value.ping=!l,await a({icon:"question-filled",title:l?"禁Ping":"解Ping",content:l?"禁PING后不影响服务器正常使用，但无法ping通服务器，您真的要禁PING吗？":"解除禁PING状态可能会被黑客发现您的服务器，您真的要解禁吗？"}),await e({loading:"正在"+(l?"禁Ping":"解Ping")+"，请稍后...",request:C({status:l?"0":"1"}),message:!0}),n.value.ping=l};return d((async()=>{await i(),(async()=>{await e({request:z(),data:{size:[String,o],log_path:[String,u]}})})()})),t({onChangeFirewall:h}),(s,t)=>{const i=y,r=j;return c(),p("div",T,[t[6]||(t[6]=_("div",{class:"mr-4"},"防火墙开关",-1)),_("div",null,[v(i,{modelValue:g(n).status,"onUpdate:modelValue":t[0]||(t[0]=a=>g(n).status=a),width:36,onChange:h},null,8,["modelValue"])]),t[7]||(t[7]=_("div",{class:"bg-[#ccc] w-[1px] h-2rem mx-8"},null,-1)),t[8]||(t[8]=_("div",{class:"mr-4"},"禁ping",-1)),_("div",null,[v(i,{modelValue:g(n).ping,"onUpdate:modelValue":t[1]||(t[1]=a=>g(n).ping=a),width:36,onChange:P},null,8,["modelValue"])]),t[9]||(t[9]=_("div",{class:"bg-[#ccc] w-[1px] h-2rem mx-8"},null,-1)),_("div",W,[t[4]||(t[4]=_("span",null,"Web日志：",-1)),_("span",{onClick:t[2]||(t[2]=a=>g(R)({path:g(u)})),class:"bt-link"},[f(b(g(u)||"--")+" ",1),x(s.$slots,"default")]),_("span",D,b(g(o)),1)]),v(r,{onClick:t[3]||(t[3]=s=>(async()=>{await a({icon:"question-filled",type:"calc",title:"清空Web日志",content:"清空Web日志后，网站访问数据将彻底删除，此操作不可逆，是否继续操作？"}),await e({loading:"正在清空Web日志，请稍后...",request:A(),data:[String,o]}),l.success("清空Web日志成功")})())},{default:w((()=>t[5]||(t[5]=[f("清空")]))),_:1})])}}}),H=u({__name:"index",setup(a){var e,l,i,u;const{refs:{firewallInfo:b,systemTabActive:x}}=r(),y=m(),j=h([{label:"端口规则："+(null!=(e=b.value.port)?e:"获取中..."),name:"port",render:()=>s((()=>import("./index225.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)},{label:"IP规则："+((null==(l=b.value)?void 0:l.ip)||"获取中..."),name:"ip",lazy:!0,render:()=>s((()=>import("./index226.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)},{label:"端口转发："+((null==(i=b.value)?void 0:i.trans)||"获取中..."),name:"forward",lazy:!0,render:()=>s((()=>import("./index227.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)},{label:"地区规则："+((null==(u=b.value)?void 0:u.country)||"获取中..."),name:"area",lazy:!0,render:()=>s((()=>import("./index228.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)}]),E=async()=>{y.value.onChangeFirewall(!0)};return P((()=>b.value),(a=>{if(a){const{port:e,ip:l,trans:s,country:t}=a;j[0].label="端口规则："+e,j[1].label="IP规则："+l,j[2].label="端口转发："+s,j[3].label="地区规则："+t}})),d((()=>{o()})),V((()=>{x.value="port"})),(a,e)=>{const l=t,s=n;return c(),p("div",null,[v(G,{ref_key:"HeaderRef",ref:y},null,512),_("div",null,[v(l,{type:"card",modelValue:g(x),"onUpdate:modelValue":e[0]||(e[0]=a=>I(x)?x.value=a:null),options:g(j)},null,8,["modelValue","options"]),g(b).status?q("",!0):(c(),k(s,{key:0,width:"38rem"},{content:w((()=>[_("div",{class:"content-mask"},[e[2]||(e[2]=_("i",{class:"svgtofont-el-warning text-orange mr-[4px] !text-[2rem]"},null,-1)),_("div",{class:"flex items-center"},[e[1]||(e[1]=f(" 未开启防火墙，请 ")),_("span",{onClick:E,class:"bt-link"},"点击开启")])])])),_:1}))])])}}});export{H as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
