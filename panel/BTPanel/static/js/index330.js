import{c as s,h as a,r as o,o as e,aJ as i,k as l,l as t,e as d,x as n,p as m,q as r,y as p,I as u,aX as c,N as f,ah as _,a7 as v,a4 as w,J as D,v as h,ag as b}from"./base-lib.js?v=1734676359";import{c as j,b as y}from"./utils-lib.js?v=1734676359";import{G as g,H as x}from"./ssl.js?v=1734676359";import{g as L}from"./useStore10.js?v=1734676359";import{d as S}from"./useMethod7.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./column.js?v=1734676359";import"./index91.js?v=1734676359";import"./useMethod6.js?v=1734676359";const N={class:"p-2rem"},k={slot:"empty"},z={class:"el-select-dropdown__empty"},C={style:{float:"left"}},J={class:"ml-[1rem]",style:{float:"right",color:"#8492a6","font-size":"13px"}},V=s({__name:"index",props:{compData:{type:Object,default:()=>{}}},emits:["close"],setup(s,{expose:V,emit:q}){const H=y(),{refs:{isRefreshDomainList:M,isRefreshDomainConfigList:O}}=L(),R=s,E=q,G=a({dns_id:"",ids:[]}),I=o([]),U=()=>{G.dns_id="",G.ids=[]},X=()=>{E("close"),S()};return e((()=>{var s,a,o,e;(async()=>{const{data:s}=await g(),{data:a}=s;I.value=a})(),R.compData.row.id&&((null==(s=R.compData.row)?void 0:s.dns)&&(G.dns_id=R.compData.row.dns.id),G.ids.push(R.compData.row.id)),R.compData.row.domain_id&&G.ids.push(R.compData.row.domain_id),(null==(a=R.compData)?void 0:a.rowList)&&(null==(e=null==(o=R.compData)?void 0:o.rowList)?void 0:e.length)&&(G.ids=[],R.compData.rowList.forEach((s=>{G.ids.push(s.id),s.domain_id&&G.ids.push(s.domain_id)})))})),V({onConfirm:async()=>{var s,a,o,e;if(G.dns_id)try{const i=await x({dns_id:G.dns_id,ids:JSON.stringify(G.ids)});H.request(i),i.status&&(U(),(R.compData.row.domain_id||(null==(a=null==(s=R.compData)?void 0:s.rowList)?void 0:a.some((s=>s.domain_id))))&&(O.value=!0),(R.compData.row.id||(null==(e=null==(o=R.compData)?void 0:o.rowList)?void 0:e.some((s=>s.id))))&&(M.value=!0),E("close"))}catch(i){}else H.error("请选择验证类型")}}),(s,a)=>{const o=j,e=b,y=_,g=v,x=w,L=i("global-dns-form-popup");return l(),t("div",N,[d(x,{model:m(G),class:"relative w-full","label-position":"right",size:"small",onSubmit:a[1]||(a[1]=f((()=>{}),["prevent"]))},{default:n((()=>[d(g,{label:"验证类型",prop:"dns_name",class:"!m-0"},{default:n((()=>[d(y,{modelValue:m(G).dns_id,"onUpdate:modelValue":a[0]||(a[0]=s=>m(G).dns_id=s),class:"!w-[33rem]",filterable:"","default-first-option":"",size:"default",placeholder:"请选择验证类型"},{default:n((()=>[r("template",k,[r("p",z,[a[3]||(a[3]=r("span",null,"暂无数据，请先添加DNS接口",-1)),d(o,{class:"!text-[14px]",onClick:X},{default:n((()=>a[2]||(a[2]=[p(">>添加")]))),_:1})])]),(l(!0),t(u,null,c(m(I),(s=>(l(),D(e,{key:s.id,label:s.dns_name,value:s.id},{default:n((()=>[r("span",C,h(s.dns_name),1),r("span",J,h(s.ps),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"]),d(L,{title:"添加NDS接口"})])}}});export{V as default};
