!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e=function(){return r};var n,r={},a=Object.prototype,o=a.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",s=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function p(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{p({},"")}catch(n){p=function(t,e,n){return t[e]=n}}function f(t,e,n,r){var a=e&&e.prototype instanceof _?e:_,o=Object.create(a.prototype),c=new S(r||[]);return i(o,"_invoke",{value:N(t,n,c)}),o}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}r.wrap=f;var y="suspendedStart",m="suspendedYield",v="executing",d="completed",g={};function _(){}function x(){}function w(){}var b={};p(b,u,(function(){return this}));var k=Object.getPrototypeOf,L=k&&k(k(z([])));L&&L!==a&&o.call(L,u)&&(b=L);var E=w.prototype=_.prototype=Object.create(b);function j(t){["next","throw","return"].forEach((function(e){p(t,e,(function(t){return this._invoke(e,t)}))}))}function q(e,n){function r(a,i,c,u){var s=h(e[a],e,i);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"==t(p)&&o.call(p,"__await")?n.resolve(p.__await).then((function(t){r("next",t,c,u)}),(function(t){r("throw",t,c,u)})):n.resolve(p).then((function(t){l.value=t,c(l)}),(function(t){return r("throw",t,c,u)}))}u(s.arg)}var a;i(this,"_invoke",{value:function(t,e){function o(){return new n((function(n,a){r(t,e,n,a)}))}return a=a?a.then(o,o):o()}})}function N(t,e,r){var a=y;return function(o,i){if(a===v)throw Error("Generator is already running");if(a===d){if("throw"===o)throw i;return{value:n,done:!0}}for(r.method=o,r.arg=i;;){var c=r.delegate;if(c){var u=T(c,r);if(u){if(u===g)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===y)throw a=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=v;var s=h(t,e,r);if("normal"===s.type){if(a=r.done?d:m,s.arg===g)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(a=d,r.method="throw",r.arg=s.arg)}}}function T(t,e){var r=e.method,a=t.iterator[r];if(a===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=n,T(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=h(a,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,g;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,g):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,g)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function z(e){if(e||""===e){var r=e[u];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function t(){for(;++a<e.length;)if(o.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=n,t.done=!0,t};return i.next=i}}throw new TypeError(t(e)+" is not iterable")}return x.prototype=w,i(E,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:x,configurable:!0}),x.displayName=p(w,l,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,p(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},r.awrap=function(t){return{__await:t}},j(q.prototype),p(q.prototype,s,(function(){return this})),r.AsyncIterator=q,r.async=function(t,e,n,a,o){void 0===o&&(o=Promise);var i=new q(f(t,e,n,a),o);return r.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},j(E),p(E,l,"Generator"),p(E,u,(function(){return this})),p(E,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},r.values=z,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,a){return c.type="throw",c.arg=t,e.next=r,a&&(e.method="next",e.arg=n),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),s=o.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;P(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:z(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),g}},r}function n(t,e,n,r,a,o,i){try{var c=t[o](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,a)}function r(t){return function(){var e=this,r=arguments;return new Promise((function(a,o){var i=t.apply(e,r);function c(t){n(i,a,o,c,u,"next",t)}function u(t){n(i,a,o,c,u,"throw",t)}c(void 0)}))}}System.register(["./utils-lib-legacy.js?v=1734676359","./index-legacy90.js?v=1734676359","./base-lib-legacy.js?v=1734676359","./column-legacy.js?v=1734676359","./useStore-legacy3.js?v=1734676359","./validator-legacy.js?v=1734676359","./useController-legacy.js?v=1734676359"],(function(t,n){"use strict";var a,o,i,c,u,s,l,p,f,h,y,m,v,d,g,_,x,w,b,k,L,E,j,q,N,T,O,P,S,z,A,I,$,C,U,G,R,F,X,B,W,D;return{setters:[function(t){a=t.G,o=t.l,i=t.H,c=t.o,u=t.ah,s=t.bR,l=t.b,p=t.al,f=t.bX,h=t.an,y=t.O},function(t){m=t._},function(t){v=t.r,d=t.e,g=t.y,_=t.h,x=t.I,w=t.aN,b=t.c,k=t.k,L=t.l,E=t.x,j=t.p},function(t){q=t.u,N=t.a,T=t.g},function(t){O=t.bM,P=t.bN,S=t.bO,z=t.bP,A=t.bQ,I=t.bR,$=t.bS,C=t.bT,U=t.bU,G=t.bV,R=t.bW,F=t.bX,X=t.bY,B=t.bZ},function(t){W=t.f},function(t){D=t.n}],execute:function(){var M,Y=l(),H=D().siteInfo,Z=v({}),Q=v(!1),V=[{content:"支持添加多个不同目录的代理"},{content:"如添加后访问异常请尝试清理浏览器缓存"}],J=function(){var t=r(e().mark((function t(){var n;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a({request:O({site_name:H.value.name}),data:{data:Array}});case 3:if(n=t.sent,Array.isArray(n.data)){t.next=6;break}return t.abrupt("return",{data:[],total:0});case 6:return t.abrupt("return",{data:n.data,total:n.data.length});case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",{data:[],total:0});case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}(),K=function(){o({isAsync:!0,title:"添加反向代理",area:60,btn:"确认",component:function(){return i((function(){return n.import("./add-url-proxy-legacy.js?v=1734676359")}),void 0,n.meta.url)}})},tt=function(){var t=r(e().mark((function t(n,r){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({loading:"正在修改反向代理备注，请稍后...",request:P({site_name:H.value.name,proxy_path:n.proxy_path,remark:r}),message:!0});case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),et=function(t){Z.value=t,o({isAsync:!0,title:"反向代理设置【".concat(t.proxy_path,"】"),area:[76,60],component:function(){return i((function(){return n.import("./setting-legacy.js?v=1734676359")}),void 0,n.meta.url)},compData:{row:t}})},nt=function(){var t=r(e().mark((function t(n){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("/"!==n.proxy_path){t.next=3;break}return Y.error("根目录不能删除"),t.abrupt("return");case 3:return t.next=5,c({title:"删除反向代理【".concat(n.proxy_path,"】"),width:"35rem",icon:"warning-filled",content:"您真的要删除反向代理【".concat(n.proxy_path,"】吗？")});case 5:return t.next=7,a({loading:"正在删除，请稍后...",request:S({site_name:H.value.name,proxy_path:n.proxy_path}),message:!0});case 7:t.sent.status&&(Q.value=!0);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),rt=(t("e",[{content:"目标：可以填写你需要代理的站点，目标如果选URL地址则必须为可正常访问的URL，如果选UNIX则必须是套接字文件"},{content:"http地址示例：http://127.0.0.1:15700"},{content:"unix地址示例：/tmp/panel.sock"},{content:function(){return d("span",null,[g("发送域名：将域名添加到请求头传递到后端服务器，默认为目标URL域名，若设置不当可能导致代理无法正常访问，例如："),d("br",null,null),g("http://192.168.100.20:19888，则发送域名保持$http_host即可"),d("br",null,null),g("http://www.bt.cn，则发送域名应当改为www.bt.cn"),d("br",null,null),g("上面例子仅为常见情况，请以实际为准")])}}]),t("t",[{label:"URL地址",value:"http"},{label:"UNIX地址",value:"unix"}]),t("u",_({targetType:"http",sitename:"",cachetime:1,proxysite:"http://",todomain:"$http_host",path:"",ps:"",websocket:!1}))),at=(t("p",v(!1)),t("f",v(!1)),t("d",v(!1))),ot=t("b",v()),it=(t("c",_({proxyname:[{required:!0,message:"请输入代理名称",trigger:"blur"},{validator:function(t,e,n){e.length<3?n(new Error("代理名称必须大于3个字符串")):e.match(/^[a-zA-Z0-9_.-]+$/g)?n():n(new Error("代理名称不能包含特殊字符"))}}],proxysite:[{required:!0,message:"请输入目标地址",trigger:"blur"},{validator:function(t,e,n){if(e)if("unix"!==rt.targetType){var r=e.replace(/^http[s]?:\/\//,"");r=r.replace(/(:|\?|\/|\\)(.*)$/,""),/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/.test(r)?rt.todomain="$http_host":rt.todomain=r,n()}else n();else n(new Error("http"===rt.targetType?"目标地址不能为空":"请选择sock文件"))}},{}],todomain:[{required:!0,message:"请输入发送域名",trigger:["blur","change"]}],path:[{required:!0,message:"请输入根目录",trigger:"blur"}]})),t("s",r(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:rt.proxysite="http"===rt.targetType?"http://":"";case 1:case"end":return t.stop()}}),t)})))),t("h",(function(t){if("unix"!==rt.targetType){var e=t.replace(/^http[s]?:\/\//,"");e=e.replace(/(:|\?|\/|\\)(.*)$/,""),rt.todomain=e}else rt.todomain="$http_host"})),t("a",(function(){W({type:"file",path:rt.proxysite||"/www/dk_project/wwwroot",change:function(t){rt.proxysite=t}})})),t("o",function(){var t=r(e().mark((function t(n){var r,o,i,c,u,s;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=rt.path,o=rt.proxysite,i=rt.todomain,c=rt.targetType,u=rt.ps,s={site_name:H.value.name,proxy_path:r,proxy_pass:o,proxy_host:i,proxy_type:c,remark:u},t.next=4,ot.value.validate();case 4:return t.next=6,a({loading:at,request:z(s),message:!0});case 6:t.sent.status&&(Q.value=!0,n&&n());case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t("Q",v("proxy"))),ct=t("i",v({proxy_type:"",proxy_path:"",proxy_pass:"",proxy_host:"$http_host",ip_limit:{},basic_auth:{},proxy_cache:{},gzip:{},sub_filter:{},websocket:{},proxy_log:{},custom_config:[],proxy_conf:"",remark:"",template_proxy_conf:""})),ut=t("_",r(e().mark((function t(){var n;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O({site_name:H.value.name,proxy_path:Z.value.proxy_path});case 3:if((n=t.sent).status){t.next=7;break}return Y.error(n.msg),t.abrupt("return");case 7:ct.value=n.data.data,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),u(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))),st=t("k",v(!1)),lt=t("j",_({targetType:"http",sitename:"",proxysite:"",todomain:"$http_host",path:"",ps:"",websocket:!1,proxy_connect_timeout:30,proxy_send_timeout:30,proxy_read_timeout:30})),pt=(t("m",_({proxysite:[{required:!0,message:"请输入目标url",trigger:"blur",validator:function(t,e,n){e?n():n(new Error("目标URL不能为空"))}}],todomain:[{required:!0,message:"请输入发送域名",trigger:["blur","change"]}],proxy_connect_timeout:[{required:!0,message:"请输入连接超时时间",trigger:["blur","change"],validator:function(t,e,n){e?isNaN(Number(e))?n(new Error("请输入数字")):n():n(new Error("连接超时时间不能为空"))}}],proxy_send_timeout:[{required:!0,message:"请输入后端请求超时时间",trigger:["blur","change"],validator:function(t,e,n){e?isNaN(Number(e))?n(new Error("请输入数字")):n():n(new Error("后端请求超时时间不能为空"))}}],proxy_read_timeout:[{required:!0,message:"请输入代理响应超时时间",trigger:["blur","change"],validator:function(t,e,n){e?isNaN(Number(e))?n(new Error("请输入数字")):n():n(new Error("代理响应超时时间不能为空"))}}]})),t("g",(function(t){var e=t.proxy_type,n=t.proxy_pass,r=t.proxy_host,a=t.proxy_path,o=t.remark,i=t.global_websocket,c=t.websocket,u=t.timeout;lt.targetType=e,lt.proxysite=n,lt.todomain=r,lt.path=a,lt.ps=o,st.value=i,lt.websocket=null==c?void 0:c.websocket_status,lt.proxy_connect_timeout=null==u?void 0:u.proxy_connect_timeout,lt.proxy_send_timeout=null==u?void 0:u.proxy_send_timeout,lt.proxy_read_timeout=null==u?void 0:u.proxy_read_timeout})),t("l",r(e().mark((function t(){var n,r,o,i,c,u,s,l,p,f;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=lt.path,r=lt.proxysite,o=lt.todomain,i=lt.targetType,c=lt.ps,u=lt.websocket,s=lt.proxy_connect_timeout,l=lt.proxy_send_timeout,p=lt.proxy_read_timeout,f={site_name:H.value.name,proxy_path:n,proxy_pass:r,proxy_host:o,proxy_type:i,remark:c,websocket:u?1:0,proxy_connect_timeout:s,proxy_send_timeout:l,proxy_read_timeout:p},t.next=4,ot.value.validate();case 4:return t.next=6,a({loading:at,request:A(f),message:!0});case 6:case"end":return t.stop()}}),t)})))),t("r",'一行一条配置，请以;结尾，例如：\nproxy_set_header Cookie "cookie_name=cookie_value";\nallow 192.168.1.0/24;\naccess_log /www/wwwlogs/xxx.log;'),t("q",_({config:""}))),ft=(t("w",[{content:"注意：一行一条配置，请以;结尾"},{content:function(){return d(x,null,[g("案例："),d("br",null,null),g("重定向请求：return 301 /new-page;"),d("br",null,null),g("重写URL：rewrite ^/blog/(.*)$ /$1 break;"),d("br",null,null),g("文件上传限制：client_max_body_size 10M;"),d("br",null,null),g("处理特定http方法："),d("br",null,null),g("limit_except POST "),"{",g(" "),d("br",null,null),g("    allow 192.168.1.0/24;"),d("br",null,null),g("    deny all;"),d("br",null,null),"}",d("br",null,null),g("限制请求速率：limit_rate 100k;"),d("br",null,null)])}},{content:"保存配置前请核对配置是否正确，错误的配置可能会导致反向代理无法正常访问"}]),t("v",function(){var t=r(e().mark((function t(n){var r,a;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r={site_name:H.value.name,proxy_path:ct.value.proxy_path,custom_conf:pt.config},t.next=4,I(r);case 4:a=t.sent,Y.request(a),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()),t("n",(function(){pt.config=ct.value.custom_conf||""})),t("y",_({subfilter:[]}))),ht=(t("A",[{content:"规则解释如下"},{content:"g：替换所有匹配到的关键字"},{content:"i：不区分大小写"},{content:"o：只替换匹配到的第一个"},{content:"r：使用正则表达式"}]),function(){var t=r(e().mark((function t(n){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a({loading:"正在删除，请稍后...",request:F({site_name:H.value.name,proxy_path:ct.value.proxy_path,oldstr:n.oldstr,newstr:n.newstr}),message:!0});case 2:ut();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),yt=function(t){var e=[t.oldstr,t.newstr],n=t.sub_type.replace(/g/g,""),r=n.includes("i")?"不区分大小写":"",a=n.includes("o")?"只替换第一个":"",o=n.includes("r")?"使用正则表达式":"";switch(n.length){case 0:return"效果:将全部'".concat(e[0],"'替换为'").concat(e[1],"''");case 1:return"效果:将".concat(a?"":"全部","'").concat(e[0],"'替换为'").concat(e[1],"'，匹配时").concat(r||a||o);case 2:return"效果:将".concat(a?"":"全部","'").concat(e[0],"'替换为'").concat(e[1],"'，匹配时").concat(r||a||o,"并且").concat(o||a||r);case 3:return"效果:将'".concat(e[0],"'替换为'").concat(e[1],"'，匹配时").concat(r,"、").concat(a,"并且").concat(o)}},mt=(t("B",(function(t){try{ft.subfilter=t.sub_filter_str}catch(e){}})),t("z",v([{label:"原关键词",prop:"oldstr"},{label:"替换词",prop:"newstr"},{label:"规则",prop:"mode",width:50,render:function(t){return d(w,{class:"item",effect:"dark","open-delay":500,content:yt(t),placement:"top-start"},{default:function(){return[d("div",{class:"flex items-center"},["".concat(t.sub_type)])]}})}},q([{title:"删除",onClick:function(t){ht(t)}}])])),t("x",(function(){Object.assign(mt,{oldstr:"",newstr:""}),vt.value=[],dt.value="默认效果:将全部'http://www.bt.cn'替换为'https://www.bt.cn'",o({isAsync:!0,title:"添加内容替换【".concat(ct.value.proxy_path,"】"),area:60,btn:"确认",component:function(){return i((function(){return n.import("./setting-replace-add-legacy.js?v=1734676359")}),void 0,n.meta.url)},compData:{proxy_path:ct.value.proxy_path,subs_filter:ct.value.subs_filter}})})),t("a0",_({oldstr:"",newstr:""}))),vt=(t("a6",{oldstr:[s({message:"请输入原关键词"})]}),t("a2",v([]))),dt=t("a4",v("默认效果:将全部'http://www.bt.cn'替换为'https://www.bt.cn'")),gt=t("a5",v()),_t=(t("a1",(function(t){_t(vt.value)})),t("a3",(function(t){var e=t.includes("i")?"不区分大小写":"",n=t.includes("o")?"只替换第一个":"",r=t.includes("r")?"使用正则表达式":"";switch(t.length){case 0:dt.value="默认效果:将全部".concat(mt.oldstr,"替换为").concat(mt.newstr);break;case 1:dt.value="效果:将".concat(n?"":"全部").concat(mt.oldstr,"替换为").concat(mt.newstr,"，匹配时").concat(e||n||r);break;case 2:dt.value="效果:将".concat(n?"":"全部").concat(mt.oldstr,"替换为").concat(mt.newstr,"，匹配时").concat(e||n||r,"并且").concat(r||n||e);break;case 3:dt.value="效果:将".concat(mt.oldstr,"替换为").concat(mt.newstr,"，匹配时").concat(e,"、").concat(n,"并且").concat(r)}}))),xt=(t("$",function(){var t=r(e().mark((function t(n){var r;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,gt.value.validate();case 2:return r={site_name:H.value.name,oldstr:mt.oldstr,newstr:mt.newstr,proxy_path:ct.value.proxy_path,sub_type:vt.value.length?vt.value.join(""):"g"},t.next=5,a({loading:at,request:$(r),message:!0});case 5:t.sent.status&&(ut(),n&&n());case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t("G",v())),wt=t("C",_({status:!1,time:"",unit:"m"})),bt=(t("E",[{label:"分钟",value:"m"},{label:"小时",value:"h"},{label:"天",value:"d"}]),t("H",[{content:"缓存是一种用于加速网站性能和提高用户体验的技术"},{content:"开启后资源会被缓存，如果影响网站访问请关闭"},{content:"缓存键由主机名、URI 和请求参数组成"},{content:"默认忽略的响应头有：Set-Cookie|Cache-Control|expires|X-Accel-Expires"},{content:"默认缓存的静态资源有：css|js|jpg|jpeg|gif|png|webp|woff|eot|ttf|svg|ico|css.map|js.map"}]),t("D",(function(t){bt()})),t("F",r(e().mark((function t(){var n;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={site_name:H.value.name,proxy_path:ct.value.proxy_path,cache_status:wt.status?1:0,expires:"".concat(wt.time).concat(wt.unit)},t.next=3,xt.value.validate();case 3:return t.next=5,a({loading:at,request:C(n),message:!0});case 5:case"end":return t.stop()}}),t)}))))),kt=(t("X",_({status:!1})),t("Y",function(){var t=r(e().mark((function t(n){var r;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={site_name:H.value.name,proxy_path:ct.value.proxy_path,status:n?1:0},t.next=3,a({loading:"正在保存，请稍后...",request:U(r),message:!0});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t("Z",[{content:"启用缓冲（默认）：Nginx 会将后端服务器（被代理的服务器）的响应数据先存储在自己的缓冲区中"},{content:"启用缓冲（默认）：提高性能和稳定性，优化资源利用，但也会造成延迟问题，内存占用高"},{content:"关闭缓冲：数据访问实时性增强，降低内存占用风险，但也会对后端服务器（被代理的服务器）压力增大，性能也有一定影响"},{content:"什么业务可以关闭缓冲：例如AI类型的，比如ThinkChat等"}]),t("N",v())),Lt=t("J",_({status:!1,type:"",level:1,minLength:"",unit:"m"})),Et=(t("L",[{label:"k",value:"k"},{label:"m",value:"m"}]),t("P",[{content:"用于对 HTTP 响应的内容进行压缩，以减少数据传输量，提高网站性能和加载速度"},{content:"压缩级别1-9，例如：1为压缩速度最快，但压缩率较低；9为压缩速度最慢，但压缩率最高，建议默认"},{content:"如果开启gzip后影响网站正常访问，请关闭此功能 和请求参数组成"}]),t("O",{type:[{required:!0,message:"请输入压缩类型",trigger:["blur","change"]}],minLength:[{required:!0,message:"请输入正确的压缩最小长度",trigger:"blur",validator:function(t,e,n){e?isNaN(Number(e))?n(new Error("请输入数字")):Number(e)<1?n(new Error("请输入正确数字")):n():n(new Error("压缩最小长度不能为空"))}},{}]}),t("I",(function(t){Lt.status=t.gzip_status,Lt.type=t.gzip_types,Lt.level=t.gzip_comp_level;var e="",n="m";t.gzip_min_length&&t.gzip_min_length.length>1&&(e=t.gzip_min_length.slice(0,-1),n=t.gzip_min_length.slice(-1)),Lt.minLength=e,Lt.unit=n})),t("K",(function(t){Et()})),t("M",r(e().mark((function t(){var n;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={site_name:H.value.name,proxy_path:ct.value.proxy_path,gzip_status:Lt.status?1:0,gzip_min_length:"".concat(Lt.minLength).concat(Lt.unit),gzip_comp_level:Lt.level,gzip_types:Lt.type},t.next=3,kt.value.validate();case 3:return t.next=5,a({loading:at,request:G(n),message:!0});case 5:case"end":return t.stop()}}),t)}))))),jt=t("T",_({loading:!1,type:"black",white:[],black:[]})),qt=t("W",(function(t){jt.white=t.ip_white.map((function(t){return{ip:t,type:"white"}})),jt.black=t.ip_black.map((function(t){return{ip:t,type:"black"}}))})),Nt=function(){var t=r(e().mark((function t(n){var r,o,i;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=!!Array.isArray(n),t.next=3,c({title:"".concat(r?"批量删除":"删除").concat("white"===jt.type?"白":"黑","名单"),content:"".concat(r?"批量删除选中的ip，是否继续操作？":"删除".concat("white"===jt.type?"白":"黑","名单【").concat(n.ip,"】，是否继续操作？"))});case 3:return o={site_name:H.value.name,proxy_path:ct.value.proxy_path},r?(o.ips=n.map((function(t){return t.ip})).join("\n"),o.ip_type=jt.type):(o.ip=n.ip,o.ip_type=n.type),i=r?X:B,t.next=8,a({loading:"正在删除，请稍后...",request:i(o),message:!0});case 8:t.sent.status&&ut();case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Tt=(t("U",v([N(),{label:"IP",prop:"ip",minWidth:120},q([{title:"删除",onClick:function(t){Nt(t)}}])])),t("V",[{label:"删除IP",value:"delete",event:(M=r(e().mark((function t(n,r,a,o){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Nt(a.value);case 1:case"end":return t.stop()}}),t)}))),function(t,e,n,r){return M.apply(this,arguments)})}]),t("S",(function(){jt.type="ipBlackList"===it.value?"black":"white",Tt.value.types=jt.type,Tt.value.address="",qt(ct.value.ip_limit)})),t("R",(function(){o({isAsync:!0,title:"添加IP".concat("ipBlackList"===it.value?"黑":"白","名单【").concat(ct.value.proxy_path,"】"),area:40,btn:"确认",component:function(){return i((function(){return n.import("./setting-ip-add-legacy.js?v=1734676359")}),void 0,n.meta.url)},compData:{name:H.value.name,proxy_path:ct.value.proxy_path,listType:jt.type,refreshEvent:function(){Tt.value.address="",ut()}}})})),t("a8",v({types:jt.type,address:""}))),Ot=t("aa",v()),Pt=(t("a9",[{content:"一行一条配置，多个IP请换行"}]),t("ab",{address:[{validator:function(t,e,n){e.length>0?n():n(new Error("请输入IP地址"))},trigger:["blur","change"]}]}),t("a7",function(){var t=r(e().mark((function t(n){var r,o,i,c;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Tt.value,o=r.types,i=r.address,c={site_name:H.value.name,proxy_path:ct.value.proxy_path,ip_type:o,ips:i},t.next=4,Ot.value.validate();case 4:return t.next=6,a({loading:at,request:R(c),message:!0});case 6:t.sent.status&&(ut(),n());case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),b({__name:"index",setup:function(t,e){var n=e.expose,r=p({options:[{label:"添加反向代理",type:"button",active:!0,onClick:K}]}).BtOperation,a=f({request:J,columns:[{label:"代理目录",prop:"proxy_path",minWidth:120},{label:"目标",prop:"proxy_pass",minWidth:200},T({request:tt,prop:"remark"}),q([{onClick:et,title:"设置"},{onClick:nt,title:"删除"}])],extension:[h(Q)]}),o=a.BtTable;return n({init:a.refresh}),function(t,e){var n=m,a=y;return k(),L("div",null,[d(n,{class:"h-[59rem]"},{"header-left":E((function(){return[d(j(r))]})),content:E((function(){return[d(j(o),{"max-height":560})]})),_:1}),d(a,{class:"mt-[2rem] ml-[1.6rem]",options:j(V)},null,8,["options"])])}}})),St=Object.freeze(Object.defineProperty({__proto__:null,default:Pt},Symbol.toStringTag,{value:"Module"}));t("ac",St)}}}))}();
