import{u as e,aO as a,G as l,D as s}from"./utils-lib.js?v=1734676359";import{s as t,i as o,e as n,P as u,y as m,aN as r,c as p,o as i,k as d,l as c,p as v}from"./base-lib.js?v=1734676359";import{u as b}from"./useStore9.js?v=1734676359";import{l as h}from"./form-item.js?v=1734676359";import{E as w}from"./useMethod5.js?v=1734676359";import{p as f}from"./validator.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./index91.js?v=1734676359";import"./column.js?v=1734676359";const{payment:y}=e(),{localRow:x,cloneLocalForm:g,isRefreshLocalList:D}=t(b()),_={class:"p-[2rem]"},j=p({__name:"index",setup(e,{expose:p}){const{cloneLocalForm:j}=t(b()),{resetCloneLocalForm:P}=b(),{BtForm:V,submit:F}=s({data:()=>j.value,options:o((()=>{const e={type:"custom",key:"subDomain",render:()=>n(a,{label:" ",prop:"subDomain"},{default:()=>[n(u,{style:"min-width: 220px; max-width: 300px",modelValue:g.value.subDomain,"onUpdate:modelValue":e=>g.value.subDomain=e},{append:()=>n("span",null,[m("."),x.value.name])}),n(u,{style:"width: 120px",class:"ml-[1rem]",modelValue:g.value.subPath,"onUpdate:modelValue":e=>g.value.subPath=e,placeholder:"克隆路径"},{prepend:()=>n("span",null,[m("/")])}),n(r,{content:"空克隆路径意味着克隆在根目录中",placement:"top"},{default:()=>[n("span",{class:"svgtofont-el-warning !text-[2rem] ml-[1rem]"},null)]})]}),rules:{subDomain:[{required:!0,message:"请输入子域名",trigger:"blur"}]}},l={type:"custom",render:()=>n(a,{label:" ",prop:"newDomain"},{default:()=>[n(u,{style:"width: 200px",modelValue:g.value.newDomain,"onUpdate:modelValue":e=>g.value.newDomain=e,placeholder:"新域名"},null),n(u,{style:"width: 120px",class:"ml-[1rem]",modelValue:g.value.newPath,"onUpdate:modelValue":e=>g.value.newPath=e,placeholder:"克隆路径"},{prepend:()=>n("span",null,[m("/")])}),n(r,{content:"空克隆路径意味着克隆在根目录中",placement:"top"},{default:()=>[n("span",{class:"svgtofont-el-warning !text-[2rem] ml-[1rem]"},null)]})]}),rules:{newDomain:[{required:!0,message:"请输入新的域名",trigger:"blur"}]}};return[{type:"custom",render:()=>n(a,{label:"来源站点"},{default:()=>[n("span",null,[x.value.name])]})},{label:"目标站点",key:"method",type:"radio:button",options:[{label:"创建子域名",value:1},{label:"创建新域名",value:2}]},1===g.value.method?e:l,h("FastCGI缓存","cache_status",{attrs:{class:"!w-[100px]"}})]})),submit:async(e,a,l)=>{await a()}});return i((()=>{P()})),p({onConfirm:async e=>{await F(),(async e=>{"ltd"===y.value.authType?l({loading:"正在克隆站点...",request:w({domain:1===g.value.method?"".concat(g.value.subDomain,".").concat(x.value.name):g.value.newDomain,s_id:x.value.id,sub_path:1===g.value.method?g.value.subPath:g.value.newPath,enable_cache:g.value.cache_status?1:0}),message:!0,success:a=>{a.status&&(e(),D.value=!0)}}):f({disablePro:!0,sourceId:335})})(e)}}),(e,a)=>(d(),c("div",_,[n(v(V))]))}});export{j as default};
