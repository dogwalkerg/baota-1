import{c as e,h as a,r as s,o as l,k as t,l as n,e as o,x as c,p as r,y as u,q as d,aj as m,a7 as i,a4 as p}from"./base-lib.js?v=1734676359";import{_ as f}from"./validator.js?v=1734676359";import{u as y,G as _,j as h,b,e as j}from"./utils-lib.js?v=1734676359";import{a_ as v,a$ as V}from"./firewall.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./index91.js?v=1734676359";import"./column.js?v=1734676359";const x={class:"p-[2rem]"},w={class:"tip"},g=j(e({__name:"index",emits:["close"],setup(e,{expose:j,emit:g}){const k=g,{payment:q}=y(),{authType:U}=q.value,C=b(),T=a({cycle:"0",channel:[],status:!1}),F=s(),G=s(!1),H=async(e=!1)=>{const{data:a}=await _({request:v()});T.cycle=a.cycle,T.channel=""===a.channel?[]:a.channel.split(","),T.status=!!a.status,e&&C.success("刷新成功")};return j({onConfirm:async()=>{if("ltd"!==U)return C.error("抱歉！该功能为企业版专享功能！");T.channel=T.channel.filter((e=>e));let e=T.channel.join(",");e||!T.status?(await F.value.validate(),_({loading:G,request:V({day:Number(T.cycle),channel:e,status:T.status?1:0}),message:!0,success:e=>{e.status&&(H(),k("close"))}})):C.error("请选择告警方式")}}),l((()=>{H()})),(e,a)=>{const s=m,l=i,y=h,_=f,b=p;return t(),n("div",x,[o(b,{model:r(T),ref_key:"safeScanForm",ref:F,disabled:r(G)},{default:c((()=>[o(l,{label:"自动扫描"},{default:c((()=>[o(s,{modelValue:r(T).status,"onUpdate:modelValue":a[0]||(a[0]=e=>r(T).status=e)},null,8,["modelValue"])])),_:1}),o(l,{label:"周期",prop:"cycle"},{default:c((()=>[o(y,{class:"!w-[14rem]",modelValue:r(T).cycle,"onUpdate:modelValue":a[1]||(a[1]=e=>r(T).cycle=e),min:0,type:"number",textType:"天"},{append:c((()=>a[4]||(a[4]=[u(" 天 ")]))),_:1},8,["modelValue"])])),_:1}),o(l,{label:"告警方式",prop:"give"},{default:c((()=>[o(_,{class:"!w-[36rem]",modelValue:r(T).channel,"onUpdate:modelValue":a[2]||(a[2]=e=>r(T).channel=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","disabled"]),d("div",w,[d("ul",null,[d("li",null,[a[5]||(a[5]=u(" 点击配置后状态未更新，尝试点击【 ")),d("span",{class:"text-[#20a53a] hover:text-[#1d9534] cursor-pointer",onClick:a[3]||(a[3]=e=>H(!0))},"手动刷新"),a[6]||(a[6]=u(" 】 "))])])])])}}}),[["__scopeId","data-v-d41f253d"]]);export{g as default};
