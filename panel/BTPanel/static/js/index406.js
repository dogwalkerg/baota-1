import{aa as a,ah as e,x as t,b as s,c as l}from"./utils-lib.js?v=1734676359";import{c as n,r as o,w as i,o as r,a1 as u,B as c,C as p,p as d,k as m,l as v,q as f,z as y,J as x,x as h,I as g,aX as _,M as b,y as j,e as k,A as w,ay as C}from"./base-lib.js?v=1734676359";import{B as F}from"./index185.js?v=1734676359";import{_ as V}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1734676359";import{getJavaProjectConfigList as S,getFileBody as D,saveFileBody as U}from"./site.js?v=1734676359";import{u as q,S as z}from"./useStore7.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./ace.js?v=1734676359";const B={class:"h-full relative"},E={key:0,class:"bg-[#7F7F7F] flex items-center justify-center h-[72rem]"},H={key:0},I={class:"inline-block text-[#666] items-center flex"},L={class:"max-w-[55rem] truncate leading-[1.3] inline-block"},M=["onClick"],O={class:"my-12px"},T={key:0,class:"flex"},A={key:1,class:"bg-[#7F7F7F] flex items-center justify-center h-full"},J={class:"bg-white px-48px py-16px text-[#333] flex items-center"},X=n({__name:"index",props:{compData:{default:()=>({})}},setup(n,{expose:X}){const{siteInfo:G}=q(),{jumpTabEvent:K}=z(),N=s(),P=o(!1),Q=o(""),R=o(!1),W=o([]),Y=o(""),Z=o(!1),$=o(""),aa=async a=>{if(R.value)try{if(a.data)return Y.value=a.data;Z.value=!0;const{data:e}=await D({path:a.path});Y.value=e.data,Z.value=!1}catch(t){e(t),Y.value=""}finally{Z.value=!1}},ea=async a=>{aa(W.value.find((e=>e.path===a)))},ta=async()=>{let a=N.load("正在保存内容，请稍候...");try{const a=await U({data:Y.value,encoding:"utf-8",path:W.value.find((a=>a.path===Q.value)).path});N.msg({dangerouslyUseHTMLString:!0,message:'<div class="max-h-[60rem] overflow-auto">'.concat(a.msg,"</div>"),type:a.status?"success":"error",duration:a.status?2e3:0,showClose:!a.status,customClass:"!max-w-[70rem]"})}catch(e){}finally{a.close()}};i((()=>G.value),(a=>{var e;(null==(e=G.value.project_config)?void 0:e.bind_extranet)&&(R.value=!!G.value.project_config.bind_extranet)}),{immediate:!0});const sa=async()=>{let a=G.value.project_type.toLowerCase();$.value=a,R.value=!0,(async()=>{try{P.value=!0;const{data:a}=await S({project_name:G.value.name});if(!a.status)return void N.error(a.msg);if(W.value=a.data,a.data.length>0){const e=a.data.find((a=>!0===a.status));e&&(Q.value=e.path),aa(e)}}catch(a){e(a)}finally{P.value=!1}})()};return r(sa),X({init:sa}),u((()=>{W.value=[]})),(e,s)=>{const n=F,o=w,i=l,r=C,u=a,S=c("bt-loading");return p((m(),v("div",B,[d(W).length?y("",!0):(m(),v("div",E,s[3]||(s[3]=[f("div",{class:"bg-white px-48px py-16px text-[#333]"},"暂无配置文件",-1)]))),d(W).length?(m(),x(u,{key:1,type:"card",modelValue:d(Q),"onUpdate:modelValue":s[2]||(s[2]=a=>b(Q)?Q.value=a:null),onChange:ea},{default:h((()=>[(m(!0),v(g,null,_(d(W),(a=>(m(),v(g,null,[a.status?(m(),x(r,{key:a.path,label:a.name,lazy:!0,name:a.path},{default:h((()=>[d(R)?(m(),v("div",H,[f("span",I,[s[4]||(s[4]=j(" 文件位置： ")),f("div",L,[k(V,{text:a.path},null,8,["text"])]),f("span",{class:"ml-[2rem] svgtofont-el-document-copy cursor-pointer",onClick:e=>d(t)({value:a.path})},null,8,M)]),f("div",O,[p(k(n,{class:"!h-[54rem] !w-[64rem] border border-[#DCDFE6] rounded-4px",modelValue:d(Y),"onUpdate:modelValue":s[0]||(s[0]=a=>b(Y)?Y.value=a:null),request:!1,onSave:ta,editorOption:{readonly:"spring"===a.type}},null,8,["modelValue","editorOption"]),[[S,d(Z)]])]),"spring"!==a.type?(m(),v("div",T,[k(o,{type:"primary",onClick:ta},{default:h((()=>s[5]||(s[5]=[j("保存")]))),_:1})])):y("",!0)])):(m(),v("div",A,[f("div",J,[s[7]||(s[7]=j("请开启 ")),k(i,{onClick:s[1]||(s[1]=a=>d(K)("mapping"))},{default:h((()=>s[6]||(s[6]=[j("外网映射")]))),_:1}),s[8]||(s[8]=j(" 后查看配置信息"))])]))])),_:2},1032,["label","name"])):y("",!0)],64)))),256))])),_:1},8,["modelValue"])):y("",!0)])),[[S,d(P)],[S,"正在加载配置文件，请稍后...","title"]])}}});export{X as default};
