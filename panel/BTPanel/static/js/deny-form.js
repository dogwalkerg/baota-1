import{G as e,O as a}from"./utils-lib.js?v=1734676359";import{c as s,r as l,h as r,k as i,l as d,e as t,x as u,q as o,p as n,P as m,a7 as p,a4 as f,a2 as g}from"./base-lib.js?v=1734676359";import{setFileDeny as c}from"./site.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";const _={class:"p-20px"},x={class:"w-280px"},b={class:"w-280px"},w={class:"w-280px"},y=s({__name:"deny-form",props:{compData:{}},setup(s,{expose:y}){const V=s,{isEdit:q,siteName:v,row:h,getList:j}=V.compData,U=l(null),k=r({deny_name:"",suffix:"php|jsp",dir:""}),D={deny_name:[{required:!0,message:"请填写规则名称",trigger:"blur"},{required:!0,message:"请填写规则名称",trigger:"input"},{min:3,message:"规则名称至少需要3个字符",trigger:["blur","input"]}],suffix:[{required:!0,message:"请填写不允许的后缀",trigger:"blur"},{required:!0,message:"请填写不允许的后缀",trigger:"input"}],dir:[{required:!0,message:"请填写在此目录中引用的规则",trigger:"blur"},{required:!0,message:"请填写在此目录中引用的规则",trigger:"input"}]},C=e=>({...g(k),dir:k.dir.replace(/\/$/,"")+"/",website:v,act:e});return q&&h&&(k.deny_name=h.name,k.suffix=h.suffix,k.dir=h.dir),y({onConfirm:async a=>{var s;await(null==(s=U.value)?void 0:s.validate()),e({request:c(C(q?"edit":"add")),loading:q?"修改中...":"添加中...",message:!0,success:()=>{null==j||j(),a&&a()}})}}),(e,s)=>{const l=m,r=p,g=f,c=a;return i(),d("div",_,[t(g,{ref_key:"formRef",ref:U,model:n(k),rules:D},{default:u((()=>[t(r,{label:"名称",prop:"deny_name"},{default:u((()=>[o("div",x,[t(l,{modelValue:n(k).deny_name,"onUpdate:modelValue":s[0]||(s[0]=e=>n(k).deny_name=e),disabled:n(q),placeholder:"请填写规则名称"},null,8,["modelValue","disabled"])])])),_:1}),t(r,{label:"后缀",prop:"suffix"},{default:u((()=>[o("div",b,[t(l,{modelValue:n(k).suffix,"onUpdate:modelValue":s[1]||(s[1]=e=>n(k).suffix=e),placeholder:"不允许的后缀"},null,8,["modelValue"])])])),_:1}),t(r,{label:"路径",prop:"dir"},{default:u((()=>[o("div",w,[t(l,{modelValue:n(k).dir,"onUpdate:modelValue":s[2]||(s[2]=e=>n(k).dir=e),placeholder:"在此目录中引用的规则，例如：/a/"},null,8,["modelValue"])])])),_:1})])),_:1},8,["model"]),t(c,{options:[{content:"后缀：禁止访问的文件后缀"},{content:"访问路径：如需要禁止https://www.bt.cn/api/，则填写/api即可"}],class:"mt-4px"})])}}});export{y as default};
