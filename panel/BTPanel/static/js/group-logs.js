import{aa as a,b as l}from"./utils-lib.js?v=1734676359";import{c as e,r as n,i as t,w as s,o as u,k as r,l as i,q as o,e as d,x as m,y as v,v as c,p as g,C as p,D as _,I as f,aX as b,J as j,M as x,bL as y,bM as h,A as k,ay as w}from"./base-lib.js?v=1734676359";import{_ as C}from"./index101.js?v=1734676359";import{getProjectLogs as S}from"./site.js?v=1734676359";import{j as V}from"./group-detail.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./index90.js?v=1734676359";import"./column.js?v=1734676359";import"./index91.js?v=1734676359";const D={class:"p-[2rem]"},H={class:"text-[1.6rem] text-[#555] mb-[2rem] mt-[1.6rem] font-bold flex justify-between"},J={class:"mt-[2rem]"},M=e({__name:"group-logs",props:{compData:{default:{}}},setup(e){const M=l(),q=n(""),A=t((()=>{var a;return(null==(a=V.value.running_step)?void 0:a.names)||[]})),I=n(!1),L=n(""),N=t((()=>!A.value.length));let O=t((()=>!V.value.running));s((()=>V.value.running_step),(a=>{a&&(q.value=A.value[0],T(q.value))}),{immediate:!0});const R=t((()=>{var a,l;return(null==(a=V.value.running_step)?void 0:a.msg)||(null==(l=V.value.running_data)?void 0:l.msg)||V.value.msg||"--"})),T=async a=>{I.value=!0;try{const l=await S({data:JSON.stringify({project_name:a})},"java");l.status?L.value=l.data.data:M.error(l.msg)}catch(l){}finally{I.value=!1}};return u((()=>{})),(l,e)=>{const n=y,t=h,s=k,u=C,S=w,M=a;return r(),i("div",D,[o("div",null,[d(t,{title:"项目组信息",border:"",column:3},{default:m((()=>[d(n,{label:"总项目数"},{default:m((()=>{var a,l,e,n;return[v(c((null==(l=null==(a=g(V))?void 0:a.running_data)?void 0:l.length)>-1?null==(n=null==(e=g(V))?void 0:e.running_data)?void 0:n.length:"--"),1)]})),_:1}),d(n,{label:"未执行的项目数"},{default:m((()=>{var a,l,e,n;return[v(c((null==(l=null==(a=g(V))?void 0:a.running_data)?void 0:l.remaining)>-1?null==(n=null==(e=g(V))?void 0:e.running_data)?void 0:n.remaining:"--"),1)]})),_:1}),d(n,{label:"正在执行中的项目数"},{default:m((()=>{var a,l,e,n;return[v(c((null==(l=null==(a=g(V))?void 0:a.running_data)?void 0:l.executing)>-1?null==(n=null==(e=g(V))?void 0:e.running_data)?void 0:n.executing:"--"),1)]})),_:1}),d(n,{label:"当前执行步骤"},{default:m((()=>[v(c(g(R)),1)])),_:1})])),_:1})]),o("div",H,[e[4]||(e[4]=v(" 项目日志 ")),p(d(s,{type:"default",onClick:e[0]||(e[0]=a=>T(g(q)))},{default:m((()=>e[3]||(e[3]=[v("刷新")]))),_:1},512),[[_,!g(O)&&!g(N)]])]),p(d(M,{class:"h-[30rem]",type:"card",modelValue:g(q),"onUpdate:modelValue":e[1]||(e[1]=a=>x(q)?q.value=a:null),onTabClick:e[2]||(e[2]=a=>T(g(q)))},{default:m((()=>[(r(!0),i(f,null,b(g(A),(a=>(r(),j(S,{key:a,label:a,name:a},{default:m((()=>[d(u,{content:g(L),isHtml:!0,class:"mt-16x",fullScreen:{title:"全屏查看【项目】日志",onRefresh:()=>T(g(q))},style:{height:"48rem",width:"99.5%"}},null,8,["content","fullScreen"])])),_:2},1032,["label","name"])))),128))])),_:1},8,["modelValue"]),[[_,!g(N)]]),p(o("span",J,"暂无日志",512),[[_,g(N)]])])}}});export{M as default};
