import{G as e,ab as t,l as a,H as l,x as n,R as o,t as s,J as i,b1 as r,aS as p,a6 as c,M as m,a4 as d,j as u}from"./utils-lib.js?v=1734676359";import{e as b,aN as h,C as w,B as v,az as k,an as f,y as g,ap as C,ao as _,b7 as y,b5 as D,r as x,a1 as E,a5 as O,P as j,aj as W,aa as P,a9 as T,A as I}from"./base-lib.js?v=1734676359";import{d as L,u as R,a as V,c as A}from"./column.js?v=1734676359";import{g as N,w as z,x as q,y as S}from"./useStore3.js?v=1734676359";function U(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!O(e)}const{refreshActiveTable:H,refs:{cpuAndMemData:M}}=N(),B=e=>{const t=(e.p-1)*e.limit,a=t+e.limit;return r(t,a,e.list)},J=e=>{const t=e.prop||"ps";return{label:"备注",prop:t,width:e.width?e.width:200,isCustom:!e.noCustom,render:a=>{if(void 0===a[t])return w(b("div",{class:"loading"},null),[[v("bt-loading"),!0]]);const l={lt:"<",gt:">",nbsp:" ",amp:"&",quot:'"'};return a[t]=a[t].replace(/&(lt|gt|nbsp|amp|quot);/gi,((e,t)=>l[t])),k("input",{type:"text",value:a[t],class:"bt-table-input w-full",title:"点击修改备注，失去焦点后自动保存",placeholder:e.noPlace?"":"".concat("点击编辑备注"),onBlur:l=>{if(a[t]===l.target.value)return!1;a[t]=l.target.value,e.edit?e.edit(a):K(a,e.table)}})}}},K=async({id:t,ps:a,remark:l},n)=>{await e({loading:"正在修改备注信息，请稍后...",request:p({id:t,table:n,ps:a||l||""}),message:!0})},F=e=>a({component:()=>l((()=>import("./index177.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),compData:e,title:"创建容器",area:74,btn:"创建"}),Y=e=>a({component:()=>l((()=>import("./real-monitor-dialog.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),title:"【".concat(e.name,"】实时监控"),area:100,compData:{row:e}}),G=e=>a({component:()=>l((()=>import("./container-rename.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),compData:{row:e,type:"dialog"},title:"重命名容器【".concat(e.name,"】"),area:40,btn:"保存"}),X=async()=>{e({request:t({version:-1,product_type:10}),data:Array,success:e=>{a({component:()=>l((()=>import("./index143.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),area:52,compData:{name:"Docker",type:10,id:e[0].id,description:e[0].question}})}})},$=(e,t)=>(c(t)||(t=""),a({component:()=>l((()=>import("./index178.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),title:"容器【".concat(e.name,"】详情"),area:[90,64],compData:{row:e,type:t}})),Q=e=>a({component:()=>l((()=>import("./container-terminal-dialog.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),title:"宝塔终端",area:[80,50],compData:{cmd:e}}),Z=async e=>{if("running"!==e.status)return m.error("容器未运行");a({title:"shell类型",area:40,component:()=>l((()=>import("./shell-type-select.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),compData:{row:e,openTerminalLog:Q},btn:["确认"]})},ee=e=>a({component:()=>l((()=>import("./pull-mirror-dialog.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),title:"日志",area:64,compData:{isOther:e}}),te=e=>a({component:()=>l((()=>import("./index179.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),title:"添加Yaml模板",area:64,btn:"添加",compData:{callback:e}}),ae=(e={})=>a({component:()=>l((()=>import("./add-compose-template.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),title:"编辑Yaml模板",area:64,btn:"保存",compData:{row:e}}),le=async(e,t,a,l)=>{const{label:n,value:o}=l,s=async(e,t)=>{const{id:a}=e;if("delete"===o)return await S({data:JSON.stringify({id:a})});{const e={id:a,status:o};return await q({data:JSON.stringify(e)})}};await e({title:"批量".concat(n,"容器"),content:"批量".concat(n,"已选的容器，是否继续操作！"),column:[{label:"容器名",prop:"name"},A()],onConfirm:async()=>(await t(s),H(),!1)})},ne=({terminalEvent:t,logDataEvent:a,deleteDataEvent:l,conDetailEvent:s,setStatusEvent:i,setStatusTitle:r,openContainerBackups:p,changeTaskTopEvent:c,statusFilterKey:m,moreEvent:d})=>[{type:"selection",width:36},L({event:(e,t)=>c(e,t),param:"is_top"}),{label:"容器名",prop:"name",render:e=>b("span",{class:"bt-link",onClick:()=>s(e)},[e.name])},{label:"容器ID",isCustom:!0,prop:"id",width:120,render:e=>b(h,{placement:"top"},{default:()=>b("div",{class:"w-[100px] h-full",onClick:()=>n({value:e.id})},[e.id.slice(0,12)]),content:()=>b("div",null,[e.id])})},{label:"备份",isCustom:!1,width:60,render:e=>e.hasOwnProperty("backup_count")?b("span",{class:"bt-link ".concat(e.backup_count>0?"":"!text-warning"),onClick:()=>p(e)},[e.backup_count>0?"有(".concat(e.backup_count,")"):"无备份"]):w(b("div",{class:"loading"},null),[[v("bt-loading"),!0]])},{label:"状态",renderHeader(){const e=[{title:"全部",key:"all"},{title:"正在运行",key:"running"},{title:"暂停",key:"paused"},{title:"停止",key:"exited"}];return k("div",{class:"flex items-center flex-nowrap"},["",k(f,{onCommand:e=>r(e)},{default:()=>k("span",{class:"text-[1.2rem] flex items-center"},[[b("span",{class:"status-header-text"},[g("状态"),"all"===m.value?"":"(".concat(e.find((e=>e.key===m.value)).title,")")])],k("i",{class:"svgtofont-el-arrow-down "})]),dropdown:()=>{let t;return b(_,null,U(t=e.map((e=>b(C,{command:e.key},{default:()=>[e.title]}))))?t:{default:()=>[t]})}})])},prop:"status",isCustom:!0,width:120,render:e=>{let t=[],a=[];return"running"===e.status?(a=["运行中",k("span",{class:"svgtofont-icon-start text-[#20a53a]"})],t=[{title:"停止",key:"stop"},{title:"重启",key:"restart"},{title:"强制停止",key:"kill"},{title:"暂停",key:"pause"}]):"exited"===e.status?(a=["已停止",k("span",{class:"svgtofont-icon-stop text-[#ff0000]"},{})],t=[{title:"启动",key:"start"},{title:"重启",key:"restart"}]):(a=["已暂停",k("span",{class:"svgtofont-icon-stop text-[#ff0000]"},{})],t=[{title:"重启",key:"restart"},{title:"恢复",key:"unpause"},{title:"强制停止",key:"kill"}]),k(f,{onCommand:t=>i(e,t)},{default:()=>b("span",{class:("running"===e.status?"text-[#20a53a]":"text-[#ff0000]")+" flex items-center"},[a]),dropdown:()=>{let e;return b(_,null,U(e=t.map((e=>b(C,{key:e.key,command:e.key},{default:()=>[e.title]}))))?e:{default:()=>[e]})}})}},{label:"镜像",isCustom:!0,prop:"image",minWidth:100,showOverflowTooltip:!0},{label:"IP",isCustom:!1,prop:"ip",minWidth:60,render:e=>e.ip.length>0?e.ip[0]:""},{label:"IPV6",isCustom:!1,prop:"ipv6",minWidth:60,render:e=>e.ipv6.length>0?e.ipv6[0]:""},{label:"CPU / 内存",isCustom:!1,prop:"cpu_mem",columnKey:"cpu_mem",showOverflowTooltip:!1,render:e=>{const t=M.value[e.id];let a=Number(t.cpu_usage),l=Number(t.mem_percent);return a&&a>100&&(a=100),l&&l>100&&(l=100),"running"===e.status?void 0===t.cpu_usage||void 0===t.mem_percent?b("div",{class:"loading h-[4.6rem] flex items-center"},[g("正在获取中...")]):b(h,{placement:"top"},{default:()=>b("div",{class:"w-[100px]"},[b("div",{class:"flex items-center justify-between"},[b("span",{class:"w-[3rem] inline-block whitespace-nowrap"},[g("cpu：")]),b(y,{class:"w-[7rem] ml-[1rem]",percentage:a||0,"show-text":!1},null)]),b("div",{class:"flex items-center justify-between"},[b("span",{class:"w-[3rem] inline-block whitespace-nowrap"},[g("内存：")]),b(y,{class:"w-[7rem] ml-[1rem]",percentage:l||0,"show-text":!1},null)])]),content:()=>b("div",null,[g("CPU："),a,g("%"),b("br",null,null),g("内存："),l,g("%")])}):b("div",{class:"h-[4.6rem] flex items-center"},[g("--")])}},{label:"端口(主机--\x3e容器)",prop:"ports",isCustom:!0,minWidth:130,columnKey:"ports",showOverflowTooltip:!0,render:e=>{const t=Object.entries(e.ports)||[],a=[];let l=0;for(let n=0;n<t.length;n++){if(l>=10){a.push("......");break}const e=t[n];e[1]&&(a.push("".concat(e[1][0].HostIp||"0.0.0.0",":").concat(e[1][0].HostPort,"--\x3e").concat(e[0]," ")),l++)}return b("span",{key:e.id,class:"whitespace-pre-wrap gap-4 leading-[2.5]"},[a.map((e=>b(D,{type:"success",size:"default",class:"mr-1"},U(e)?e:{default:()=>[e]})))])}},{label:"创建时间",isCustom:!1,prop:"created_time",width:150,render:e=>o(e.created_time)},J({edit:async t=>{try{e({request:z({data:JSON.stringify({id:t.id,remark:t.remark})}),message:!0})}catch(a){}},noPlace:!0,noCustom:!0,prop:"remark",table:"containers",width:200}),R([{onClick:s,title:"管理"},{onClick:t,title:"终端"},{onClick:l,title:"删除"},{width:50,onClick:d,isMore:!0,menu:[{key:"log",title:"日志"},{key:"reName",title:"重命名"},{key:"realMonitor",title:"实时监控"},{key:"dir",title:"目录"}]}])],oe=({createEvent:e,pushDataEvent:t,exportDataEvent:a,deleteDataEvent:l,conDetailEvent:r})=>[{type:"selection",width:36},{label:"ID",prop:"id",width:110,render:e=>{const t=e.id.slice(7);return b(h,{placement:"top"},{default:()=>b("div",{onClick:()=>n({value:e.id})},[t.slice(0,12)]),content:()=>b("div",null,[e.id])})}},{label:"镜像名",prop:"name",isCustom:!0},{label:"大小",prop:"size",width:100,isCustom:!0,render:e=>s(e.size)},{label:"创建时间",prop:"time",width:160,isCustom:!0,render:e=>o(e.time)},{label:"使用镜像的容器",prop:"used",minWidth:180,isCustom:!0,render:e=>1!==e.used?"--":i(e.containers)&&e.containers.length>0?b("span",{class:"whitespace-pre-wrap gap-4 leading-[2.5]"},[e.containers.map((e=>b(D,{class:"mr-1 cursor-pointer",type:"success",size:"small",onClick:()=>r(e)},{default:()=>[e.container_name]})))]):"--"},R([{onClick:e,width:80,title:"创建容器"},{onClick:t,title:"推送"},{onClick:a,title:"导出"},{onClick:l,title:"删除"}])],se=({deleteDataEvent:e})=>[V(),{label:"网络名",prop:"name",showOverflowTooltip:!0,minWidth:100},{label:"设备",prop:"driver",minWidth:100,isCustom:!0},{label:"ipv4网络号",prop:"subnet",minWidth:100,isCustom:!0},{label:"ipv4网关",prop:"gateway",minWidth:100,isCustom:!0},{label:"ipv6网络号",prop:"subnetv6",minWidth:100,isCustom:!1},{label:"ipv6网关",prop:"gatewayv6",minWidth:100,isCustom:!1},{label:"标签",prop:"labels",minWidth:100,showOverflowTooltip:!0,isCustom:!0,render:e=>{if(!e.labels)return k("span","");return(Object.entries(e.labels)||[]).map((e=>"".concat(e[0],":").concat(e[1]))).join(",")}},{label:"创建时间",prop:"time",minWidth:100,isCustom:!0,render:e=>o(e.time)},R([{onClick:e,title:"删除"}])],ie=({deleteDataEvent:e})=>x([V(),{label:"存储卷",prop:"Name",minWidth:100,showOverflowTooltip:!0},{label:"挂载点",prop:"Mountpoint",minWidth:100,isCustom:!0,showOverflowTooltip:!0},{label:"所属容器",prop:"container",minWidth:100,isCustom:!0},{label:"设备",prop:"Driver",minWidth:100,isCustom:!0},{label:"创建时间",prop:"CreatedAt",minWidth:100,isCustom:!0,render:e=>o(e.CreatedAt)},{label:"标签",prop:"Labels",minWidth:100,showOverflowTooltip:!0,isCustom:!0,render:e=>{if(!e.Labels)return k("span","");return(Object.entries(e.Labels)||[]).map((e=>"".concat(e[0],":").concat(e[1]))).join(",")}},R([{onClick:e,title:"删除"}])]),re=({editDataEvent:t,deleteDataEvent:a})=>x([V(),{label:"URL",prop:"url",minWidth:100},{label:"用户",prop:"namespace",minWidth:100,isCustom:!0},{label:"仓库名",prop:"name",minWidth:100,isCustom:!0},J({table:"images",prop:"remark",edit:async t=>{e({request:z({data:JSON.stringify({id:t.id,remark:t.remark})}),message:!0})},noPlace:!0,noCustom:!0,width:200}),R([{onClick:t,isHide:e=>"docker.io"==e.url&&"docker官方库"==e.name&&""==e.username,title:"编辑"},{onClick:a,isHide:e=>"docker.io"==e.url&&"docker官方库"==e.name&&""==e.username,title:"删除"}])]),pe=({editDataEvent:e,pullDataEvent:t,deleteDataEvent:a})=>x([V(),{label:"模板名",prop:"name",minWidth:100},{label:"路径",prop:"path",minWidth:100,isCustom:!0},{label:"备注",prop:"remark",minWidth:100,isCustom:!0},R([{onClick:e,title:"编辑"},{onClick:t,width:60,title:"拉取镜像"},{onClick:a,title:"删除"}])]),ce=()=>[V(),{label:"Compose模板名",prop:"project_name",minWidth:100},{label:"路径",prop:"conf_file",showOverflowTooltip:!0,minWidth:100},{label:"备注",prop:"remark",minWidth:100}],me=({setPort:e,delPort:t})=>[{label:"本地端口",prop:"server",render:t=>b(j,{size:"small",modelValue:t.server,onInput:a=>e(a,t,"server"),placeholder:"例如：80"},null)},{label:"容器",prop:"con",render:t=>b(j,{size:"small",modelValue:t.con,onInput:a=>e(a,t,"con"),placeholder:"例如：80"},null)},{label:"对外暴露",prop:"output",width:100,render:t=>b(W,{size:"small",modelValue:t.output,onChange:a=>e(a,t,"output")},null),renderHeader:()=>{return e="允许外部访问会将端口映射出去，所有人都可以访问这个端口(不建议)",b("div",{class:"flex items-center"},[b("span",null,["对外暴露"]),b(h,{content:e,placement:"top"},{default:()=>[b("span",{class:"ml-4px bt-ico-ask"},["?"])]})]);var e}},{label:"协议",prop:"protocol ",width:220,render:a=>b("div",{class:"flex items-center"},[b(P,{modelValue:a.protocol,onChange:t=>e(t,a,"protocol")},{default:()=>[b(T,{value:"tcp"},{default:()=>[g("TCP")]}),b(T,{value:"udp"},{default:()=>[g("UDP")]})]}),b(I,{class:"!ml-[1rem] h-[2.8]",onClick:()=>t(a)},{default:()=>[b("i",{class:"svgtofont-el-delete"},null)]})])}],de=({changeNet:e,delNet:t,netOptions:a})=>[{label:"网络名称",prop:"network",minWidth:110,render:t=>b(d,{modelValue:t.network,class:"!w-[21rem]",options:a.value,onChange:a=>e(t,a,"network")},null)},{label:"IPV4地址",prop:"con",width:150,render:t=>b(u,{size:"small",value:t.ip4,disabled:"bridge"==t.network||"none"==t.network||"host"==t.network,onBlur:a=>e(t,a.target.value,"ip4"),placeholder:"bridge"===t.network||"none"===t.network||"host"===t.network?"非自定义网卡":"例如：172.20.x.x"},null)},{label:"IPV6地址",prop:"protocol ",minWidth:100,render:a=>b("div",{class:"flex items-center"},[b(u,{size:"small",value:a.ip6,disabled:"bridge"==a.network||"none"==a.network||"host"==a.network,onBlur:t=>e(a,t.target.value,"ip6"),placeholder:"bridge"===a.network||"none"===a.network||"host"===a.network?"自定义网卡可以设置":"例如：2001:0db8::1"},null),b(I,{class:"!ml-[1rem] h-[2.8]",onClick:()=>t(a)},{default:()=>[b("i",{class:"svgtofont-el-delete"},null)]})])}],ue=async e=>new Promise(((t,a)=>{if(e||a("请传入imgUrl内容"),/\.(png|jpe?g|gif|svg)(\?.*)?$/.test(e)){window.URL=window.URL||window.webkitURL;var l=new XMLHttpRequest;l.open("get",e,!0),l.responseType="blob",l.onload=function(){if(200==this.status){const e=this.response,a=new FileReader;a.onloadend=e=>{var a;return t((null==(a=e.target)?void 0:a.result)||"")},a.readAsDataURL(e)}else 404==this.status&&t("/static/img/soft_ico/ico-dkapp_rabbitmq.png")},l.send()}else a("非(png/jpe?g/gif/svg等)图片地址")})),be=()=>{const e=new Map,t=()=>e.clear();return E((()=>t())),{getCachedImage:(t,a)=>{const l=a||t;return e.has(l)?e.get(l):((async(e,t,a)=>{if(a.has(t))return Promise.resolve(a.get(t));const l=await ue(e);a.set(t,l)})(t,l,e),t)},clearCache:t}};export{Y as C,X as N,ne as a,le as b,F as c,B as d,oe as e,se as f,ie as g,re as h,me as i,de as j,te as k,ce as l,pe as m,ae as n,$ as o,ee as p,G as r,Z as t,be as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
