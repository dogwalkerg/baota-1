import{c as e,s as a,i as s,o as l,k as t,l as r,e as m,x as d,p as i,M as o,J as n,y as u,z as p,q as c,P as g,a7 as f,ae as x,ad as b,a4 as _}from"./base-lib.js?v=1734676359";import{_ as y}from"./validator.js?v=1734676359";import{j as v,e as V}from"./utils-lib.js?v=1734676359";import{f as j}from"./index45.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./index91.js?v=1734676359";import"./column.js?v=1734676359";import"./index95.js?v=1734676359";import"./store3.js?v=1734676359";import"./store4.js?v=1734676359";import"./hooks.js?v=1734676359";const k={class:"px-[2rem] py-[4rem] give-dialog"},w={class:"flex items-center"},D={key:0,class:"text-[#999]"},h={key:0,class:"text-[#999] ml-1.6rem text-[1.2rem]"},R={key:1,class:"text-[#999] ml-1.6rem text-[1.2rem]"},U={class:"flex items-center"},O=V(e({__name:"alarm-config",setup(e){const V=j(),{giveFormDisabled:O,giveFormRef:q,msgForm:C,maxCapacityAndUsageRate:F,nextData:I,options:P,rowData:$}=a(V),{type:z,data:A,id:B}=$.value,G={num:[{required:!0,message:"请输入发送次数",trigger:"blur"},{pattern:/^[0-9]\d*$/,message:"请输入正整数",trigger:"blur"}],usageRate:[{required:!0,message:"请输入告警阈值",trigger:"blur"},{pattern:/^[0-9]\d*$/,message:"请输入正整数",trigger:"blur"}],give:[{required:!0,message:"请至少选择一个告警方式",trigger:"change"}]},H=s((()=>{switch(z){case"load":return"【负载状态】告警";case"cpu":return"【CPU使用率】告警";case"mem":return"【内存使用率】告警"}if(-1!==z.indexOf("disk"))return"磁盘【".concat(z.split("-")[1],"】告警")})),J=s((()=>{switch(z){case"load":return"负载状态";case"cpu":case"mem":return"使用率"}if(-1!==z.indexOf("disk"))return 2===A.cycle||"2"===C.value.typeDetection?"占用率":"剩余容量"}));return s((()=>"2"===C.value.typeDetection?"%":"GB")),l((async()=>{V.alarmInfo()})),(e,a)=>{const s=g,l=f,j=x,I=b,P=v,$=y,A=_;return t(),r("div",k,[m(A,{model:i(C),rules:G,ref_key:"giveFormRef",ref:q,disabled:i(O)},{default:d((()=>[m(l,{label:"任务类型"},{default:d((()=>[m(s,{class:"!w-[30rem]",modelValue:i(H),"onUpdate:modelValue":a[0]||(a[0]=e=>o(H)?H.value=e:null),readonly:!0,disabled:""},null,8,["modelValue"])])),_:1}),-1!==i(z).indexOf("disk")?(t(),n(l,{key:0,label:"检测类型"},{default:d((()=>[m(I,{modelValue:i(C).typeDetection,"onUpdate:modelValue":a[1]||(a[1]=e=>i(C).typeDetection=e),onChange:i(V).switchTypeDetection},{default:d((()=>[m(j,{label:"2"},{default:d((()=>a[5]||(a[5]=[u("占用百分比")]))),_:1}),m(j,{label:"1"},{default:d((()=>a[6]||(a[6]=[u("剩余容量")]))),_:1})])),_:1},8,["modelValue","onChange"])])),_:1})):p("",!0),m(l,{label:i(J),prop:"usageRate"},{default:d((()=>[c("div",w,[m(P,{class:"!w-[12rem]",modelValue:i(C).usageRate,"onUpdate:modelValue":a[2]||(a[2]=e=>i(C).usageRate=e),min:0,max:i(F),type:"number"},{append:d((()=>[-1===i(z).indexOf("disk")?(t(),r("span",D,"%")):p("",!0)])),_:1},8,["modelValue","max"]),-1===i(z).indexOf("disk")?(t(),r("span",h," 每5分钟平均负载超过该数值就告警 ")):(t(),r("span",R," 每隔10分钟磁盘占用超过该数值就告警 "))])])),_:1},8,["label"]),m(l,{label:"发送次数",prop:"num"},{default:d((()=>[c("div",U,[m(P,{class:"!w-[12rem]",modelValue:i(C).num,"onUpdate:modelValue":a[3]||(a[3]=e=>i(C).num=e),min:0,type:"number"},{append:d((()=>a[7]||(a[7]=[c("span",{class:"text-[#999]"},"次",-1)]))),_:1},8,["modelValue"]),a[8]||(a[8]=c("span",{class:"text-[#999] ml-1.6rem text-[1.2rem]"}," 后将不再发送告警信息，如需发送多次请填写2次以上 ",-1))])])),_:1}),m(l,{label:"告警方式",prop:"give"},{default:d((()=>[m($,{class:"!w-[30rem]",modelValue:i(C).give,"onUpdate:modelValue":a[4]||(a[4]=e=>i(C).give=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","disabled"]),a[9]||(a[9]=c("div",{class:"tip"},[c("ul",null,[c("li",null,"【发送次数】设置0时，每天触发告警次数没有上限")])],-1))])}}}),[["__scopeId","data-v-3689a4d9"]]);export{O as default};
