!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e=function(){return n};var r,n={},a=Object.prototype,i=a.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},u="function"==typeof Symbol?Symbol:{},l=u.iterator||"@@iterator",c=u.asyncIterator||"@@asyncIterator",s=u.toStringTag||"@@toStringTag";function m(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{m({},"")}catch(r){m=function(t,e,r){return t[e]=r}}function d(t,e,r,n){var a=e&&e.prototype instanceof b?e:b,i=Object.create(a.prototype),u=new T(n||[]);return o(i,"_invoke",{value:E(t,r,u)}),i}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}n.wrap=d;var f="suspendedStart",h="suspendedYield",_="executing",v="completed",y={};function b(){}function g(){}function x(){}var w={};m(w,l,(function(){return this}));var k=Object.getPrototypeOf,j=k&&k(k(B([])));j&&j!==a&&i.call(j,l)&&(w=j);var O=x.prototype=b.prototype=Object.create(w);function P(t){["next","throw","return"].forEach((function(e){m(t,e,(function(t){return this._invoke(e,t)}))}))}function q(e,r){function n(a,o,u,l){var c=p(e[a],e,o);if("throw"!==c.type){var s=c.arg,m=s.value;return m&&"object"==t(m)&&i.call(m,"__await")?r.resolve(m.__await).then((function(t){n("next",t,u,l)}),(function(t){n("throw",t,u,l)})):r.resolve(m).then((function(t){s.value=t,u(s)}),(function(t){return n("throw",t,u,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(t,e){function i(){return new r((function(r,a){n(t,e,r,a)}))}return a=a?a.then(i,i):i()}})}function E(t,e,n){var a=f;return function(i,o){if(a===_)throw Error("Generator is already running");if(a===v){if("throw"===i)throw o;return{value:r,done:!0}}for(n.method=i,n.arg=o;;){var u=n.delegate;if(u){var l=L(u,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===f)throw a=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=_;var c=p(t,e,n);if("normal"===c.type){if(a=n.done?v:h,c.arg===y)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(a=v,n.method="throw",n.arg=c.arg)}}}function L(t,e){var n=e.method,a=t.iterator[n];if(a===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=r,L(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=p(a,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,y;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,y):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y)}function V(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(V,this),this.reset(!0)}function B(e){if(e||""===e){var n=e[l];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(i.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=r,t.done=!0,t};return o.next=o}}throw new TypeError(t(e)+" is not iterable")}return g.prototype=x,o(O,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:g,configurable:!0}),g.displayName=m(x,s,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,m(t,s,"GeneratorFunction")),t.prototype=Object.create(O),t},n.awrap=function(t){return{__await:t}},P(q.prototype),m(q.prototype,c,(function(){return this})),n.AsyncIterator=q,n.async=function(t,e,r,a,i){void 0===i&&(i=Promise);var o=new q(d(t,e,r,a),i);return n.isGeneratorFunction(e)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},P(O),m(O,s,"Generator"),m(O,l,(function(){return this})),m(O,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},n.values=B,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,a){return u.type="throw",u.arg=t,e.next=n,a&&(e.method="next",e.arg=r),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:B(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),y}},n}function r(t,e,r,n,a,i,o){try{var u=t[i](o),l=u.value}catch(t){return void r(t)}u.done?e(l):Promise.resolve(l).then(n,a)}function n(t){return function(){var e=this,n=arguments;return new Promise((function(a,i){var o=t.apply(e,n);function u(t){r(o,a,i,u,l,"next",t)}function l(t){r(o,a,i,u,l,"throw",t)}u(void 0)}))}}function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function o(e,r,n){return(r=function(e){var r=function(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,r||"default");if("object"!=t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==t(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}System.register(["./index-legacy90.js?v=1734676359","./utils-lib-legacy.js?v=1734676359","./base-lib-legacy.js?v=1734676359","./column-legacy.js?v=1734676359","./validator-legacy.js?v=1734676359","./form-item-legacy.js?v=1734676359","./__commonjsHelpers__-legacy.js?v=1734676359","./index-legacy91.js?v=1734676359"],(function(t,r){"use strict";var a,o,u,l,c,s,m,d,p,f,h,_,v,y,b,g,x,w,k,j,O,P,q,E,L,V,S,T,B,D,C,F,G,H,N,U,W,I;return{setters:[function(t){a=t._},function(t){o=t.D,u=t.ch,l=t.ci,c=t.b,s=t.j,m=t.c4,d=t.aM,p=t.l,f=t.o,h=t.cj,_=t.u,v=t.bJ,y=t.t,b=t.R,g=t.bY,x=t.E},function(t){w=t.s,k=t.g,j=t.r,O=t.c,P=t.i,q=t.k,E=t.l,L=t.e,V=t.x,S=t.p,T=t.Q,B=t.a7,D=t.w,C=t.aJ,F=t.J,G=t.y,H=t.q},function(t){N=t.u},function(t){U=t.e},function(t){W=t.b,I=t.f},null,null],execute:function(){var r=k("VHOST-PACKAGE-STORE",(function(){var t=j(!1),e=j({package_name:"",remark:"",disk_space_quota:{value:0,unlimited:!0},monthly_bandwidth_limit:{value:0,unlimited:!0},max_site_limit:{value:0,unlimited:!0},php_start_children:1,php_max_children:3,max_database:{value:0,unlimited:!0}}),r=j(0);return{isEdit:t,formData:e,refreshInfo:r,refreshList:function(){r.value=(new Date).getTime()},resetFormData:function(){e.value={package_name:"",remark:"",disk_space_quota:{value:0,unlimited:!0},monthly_bandwidth_limit:{value:0,unlimited:!0},max_site_limit:{value:0,unlimited:!0},php_start_children:1,php_max_children:3,max_database:{value:0,unlimited:!0}},t.value=!1}}})),A=function(){var t=r(),e=w(t);return i(i({},t),e)},J={class:"p-[2rem]"},M=O({__name:"index",setup:function(t,r){var a,i=r.expose,m=A(),d=m.isEdit,p=m.formData,f=m.refreshList,h=m.resetFormData,_=c(),v=_.request,y=_.load,b=o({data:p.value,options:function(t){return P((function(){return[W("资源包名称","package_name",{attrs:{class:"!w-[22rem]",clearable:!0,placeholder:"请输入资源包名称"},rules:[{required:!0,message:"资源包名称不能为空！",trigger:"blur"},{min:2,max:20,message:"资源包名称在 2 到 20 个字符",trigger:"blur"}]}),{type:"slots",key:"disk_space_quota",rules:{"disk_space_quota.value":[{required:!0,message:"磁盘配额空间不能为空！",trigger:"blur"}]}},{type:"slots",key:"monthly_bandwidth_limit",rules:{"monthly_bandwidth_limit.value":[{required:!0,message:"每月带宽限制不能为空！",trigger:"blur"}]}},{type:"slots",key:"max_site_limit",rules:{"max_site_limit.value":[{required:!0,message:"最大网站数不能为空！",trigger:"blur"}]}},{type:"slots",key:"max_database",rules:{"max_database.value":[{required:!0,message:"最大数据库数不能为空！",trigger:"blur"}]}},W("PHP起始子进程","php_start_children",{attrs:{class:"!w-[22rem]",type:"number",clearable:!0,placeholder:"请输入最大子进程数"},rules:[{required:!0,message:"PHP起始子进程不能为空！",trigger:"blur"}]}),W("PHP最大子进程","php_max_children",{attrs:{class:"!w-[22rem]",type:"number",clearable:!0,placeholder:"请输入最大子进程数"},rules:[{required:!0,message:"PHP最大子进程不能为空！",trigger:"blur"}]}),W("备注","remark",{attrs:{class:"!w-[22rem]",clearable:!0,placeholder:"请输入备注内容，可为空"}}),I("备注",[{content:"PHP起始子进程数量：此值越大网站响应性能越好，同时内存占用越高"},{content:"PHP最大子进程数量：此值越大网站并发性能越好，同时峰值内存占用越高"}])]}))},submit:(a=n(e().mark((function t(r,n,a){var i,o,c;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n();case 2:if(i=rt(r.value,!0),o={},c=y("正在提交表单，请稍候..."),d.value||delete i.package_id,t.prev=6,!d.value){t.next=13;break}return t.next=10,u(i);case 10:t.t0=t.sent,t.next=16;break;case 13:return t.next=15,l(i);case 15:t.t0=t.sent;case 16:if(o=t.t0,h(),v(o),f(),o.status){t.next=22;break}return t.abrupt("return",!1);case 22:t.next=27;break;case 24:t.prev=24,t.t1=t.catch(6);case 27:return t.prev=27,c.close(),t.finish(27);case 30:return t.abrupt("return",o);case 31:case"end":return t.stop()}}),t,null,[[6,24,27,30]])}))),function(t,e,r){return a.apply(this,arguments)})}),g=b.BtForm;return i({onConfirm:b.submit,onCancel:h}),function(t,e){var r=s,n=T,a=B;return q(),E("div",J,[L(S(g),{"label-width":"120px"},{disk_space_quota:V((function(){return[L(a,{prop:"disk_space_quota.value",label:"磁盘配额空间(MB)"},{default:V((function(){return[L(r,{type:"number",modelValue:S(p).disk_space_quota.value,"onUpdate:modelValue":e[0]||(e[0]=function(t){return S(p).disk_space_quota.value=t}),width:"22rem",disabled:S(p).disk_space_quota.unlimited,clearable:"",class:"mr-[10px]"},null,8,["modelValue","disabled"]),L(n,{modelValue:S(p).disk_space_quota.unlimited,"onUpdate:modelValue":e[1]||(e[1]=function(t){return S(p).disk_space_quota.unlimited=t}),label:"无限制"},null,8,["modelValue"])]})),_:1})]})),monthly_bandwidth_limit:V((function(){return[L(a,{prop:"monthly_bandwidth_limit.value",label:"每月带宽限制(MB)"},{default:V((function(){return[L(r,{type:"number",modelValue:S(p).monthly_bandwidth_limit.value,"onUpdate:modelValue":e[2]||(e[2]=function(t){return S(p).monthly_bandwidth_limit.value=t}),disabled:S(p).monthly_bandwidth_limit.unlimited,width:"22rem",class:"mr-[10px]"},null,8,["modelValue","disabled"]),L(n,{modelValue:S(p).monthly_bandwidth_limit.unlimited,"onUpdate:modelValue":e[3]||(e[3]=function(t){return S(p).monthly_bandwidth_limit.unlimited=t}),label:"无限制"},null,8,["modelValue"])]})),_:1})]})),max_site_limit:V((function(){return[L(a,{prop:"max_site_limit.value",label:"最大网站数"},{default:V((function(){return[L(r,{type:"number",modelValue:S(p).max_site_limit.value,"onUpdate:modelValue":e[4]||(e[4]=function(t){return S(p).max_site_limit.value=t}),disabled:S(p).max_site_limit.unlimited,width:"22rem",class:"mr-[10px]"},null,8,["modelValue","disabled"]),L(n,{modelValue:S(p).max_site_limit.unlimited,"onUpdate:modelValue":e[5]||(e[5]=function(t){return S(p).max_site_limit.unlimited=t}),label:"无限制"},null,8,["modelValue"])]})),_:1})]})),max_database:V((function(){return[L(a,{prop:"max_database.value",label:"最大数据库数"},{default:V((function(){return[L(r,{type:"number",modelValue:S(p).max_database.value,"onUpdate:modelValue":e[6]||(e[6]=function(t){return S(p).max_database.value=t}),disabled:S(p).max_database.unlimited,width:"22rem",class:"mr-[10px]"},null,8,["modelValue","disabled"]),L(n,{modelValue:S(p).max_database.unlimited,"onUpdate:modelValue":e[7]||(e[7]=function(t){return S(p).max_database.unlimited=t}),label:"无限制"},null,8,["modelValue"])]})),_:1})]})),_:1})])}}}),R=c(),Y=R.error,K=R.request,Q=A(),z=Q.isEdit,X=Q.refreshList,Z=Q.formData,$=function(){var t=n(e().mark((function t(r){var n,a;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m({p:r.p,search_value:r.search,rows:r.limit});case 2:if(n=t.sent,a=n.data,!d(a)){t.next=6;break}return t.abrupt("return",{data:a.list,total:a.page.count});case 6:return t.abrupt("return",{data:[],total:0});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),tt=function(){var t=n(e().mark((function t(r){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:f({title:"删除资源包".concat(r.package_name),content:"删除".concat(r.package_name,"资源包，是否继续？"),onConfirm:function(){var t=n(e().mark((function t(){var n;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1!==r.status){t.next=2;break}return t.abrupt("return",Y("资源包正在使用中，无法删除"));case 2:return t.next=4,h({package_id:r.package_id});case 4:return n=t.sent,t.next=7,K(n);case 7:X();case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),et=function(){var t=n(e().mark((function t(){var r,n=arguments;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(r=n.length>0&&void 0!==n[0]&&n[0])&&(z.value=!0,Z.value=rt(r,!1)),p({title:"".concat(r?"编辑":"添加","资源包"),area:50,showFooter:!0,component:M});case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),rt=function(t,e){return e?{package_id:null==t?void 0:t.package_id,package_name:t.package_name,remark:t.remark,disk_space_quota:t.disk_space_quota.unlimited?0:1024*t.disk_space_quota.value*1024,monthly_bandwidth_limit:t.monthly_bandwidth_limit.unlimited?0:1024*t.monthly_bandwidth_limit.value*1024,max_site_limit:t.max_site_limit.unlimited?0:t.max_site_limit.value,php_start_children:t.php_start_children,php_max_children:t.php_max_children,max_email_account:0,max_database:t.max_database.unlimited?0:t.max_database.value}:{package_id:null==t?void 0:t.package_id,package_name:t.package_name,remark:t.remark,disk_space_quota:{value:t.disk_space_quota?t.disk_space_quota/1024/1024:0,unlimited:0===t.disk_space_quota},monthly_bandwidth_limit:{value:t.monthly_bandwidth_limit?t.monthly_bandwidth_limit/1024/1024:0,unlimited:0===t.monthly_bandwidth_limit},max_site_limit:{value:t.max_site_limit,unlimited:0===t.max_site_limit},php_start_children:t.php_start_children,php_max_children:t.php_max_children,max_email_account:0,max_database:{value:t.max_database,unlimited:0===t.max_database}}};t("default",O({__name:"index",setup:function(t){var e=_().mainHeight,r=A().refreshInfo,n=v({request:function(t){return $(t)},columns:[{label:"资源包名称",prop:"package_name",minWidth:84},{label:"网站",prop:"php_start_children",minWidth:80,render:function(t){return L("div",null,[0===t.max_site_limit?"无限制":t.max_site_limit])}},{label:"磁盘配额",prop:"disk_space_quota",minWidth:100,render:function(t){return L("div",null,[0===t.disk_space_quota?"无限制":y(t.disk_space_quota,!0,0)])}},{label:"月带宽限制",prop:"monthly_bandwidth_limit",minWidth:100,render:function(t){return L("div",null,[0===t.monthly_bandwidth_limit?"无限制":y(t.monthly_bandwidth_limit,!0,0)])}},{label:"备注",prop:"remark",minWidth:80,render:function(t){return t.remark?t.remark:"--"}},{label:"创建时间",prop:"create_time",minWidth:140,render:function(t){return b(t.create_time)}},N([{onClick:et,title:"编辑"},{onClick:tt,title:"删除"}])],extension:[g()]}),i=n.BtTable,o=n.BtSearch,u=n.BtRefresh,l=n.BtPage,c=n.refresh;return D((function(){return r.value}),c),function(t,r){var n=C("BtOperation"),c=x,s=C("BtTableCategory"),m=C("BtBatch"),d=a;return q(),F(d,null,{"header-left":V((function(){return[L(n),L(c,{type:"primary",onClick:r[0]||(r[0]=function(t){return S(et)()})},{default:V((function(){return r[2]||(r[2]=[G("添加资源包")])})),_:1}),H("div",{class:"flex items-center ml-1rem",onClick:r[1]||(r[1]=function(t){return S(U)({name:"用户管理",type:35,id:62})})},r[3]||(r[3]=[H("i",{class:"svgtofont-desired text-[1.6rem] mr-[4px]"},null,-1),H("span",{class:"bt-link"},"需求反馈",-1)]))]})),"header-right":V((function(){return[L(s,{class:"!w-[140px] mr-[10px]"}),L(S(o),{placeholder:"请输入资源包名称",class:"!w-[270px] mr-[10px]"}),L(S(u))]})),content:V((function(){return[L(S(i),{"min-height":S(e)},null,8,["min-height"])]})),"footer-left":V((function(){return[L(m)]})),"footer-right":V((function(){return[L(S(l))]})),_:1})}}}))}}}))}();
