import{v as s,A as a,s as e,B as t,b as r,o as i,C as l,u as o,D as n,E as c,e as d}from"./utils-lib.js?v=1734676359";import{F as m,a as p,b as u}from"./form-item.js?v=1734676359";import{h as w,c as f,i as g,o as b,l as h,e as x,p as y,G as j,k as _,y as k,I as v}from"./base-lib.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./index91.js?v=1734676359";const{load:C,request:q}=r(),H=w({password1:"",password2:""}),B=async()=>{let s=C("正在设置面板密码，请稍候...");try{const s=await a({password1:e(H.password1),password2:e(H.password2)});return q(s),s.status&&t("/login?dologin=True",1500),s.status}catch(r){}finally{s.close()}},E=()=>{H.password1=s(10)},F=async()=>{try{await i({icon:"warning-filled",title:"危险操作",isHtml:!0,content:'延用上次密码会降低面板的<span class="text-danger">安全性</span>，是否继续操作？'});const s=await l();q(s),window.location.href="/"}catch(s){}},I=d(f({__name:"index",setup(s){const{mainHeight:a}=o(),e=g((()=>[m((()=>x("div",{class:"text-center !mb-[22px] flex justify-center"},[x("h3",{class:"text-[2rem] font-bold text-dark inline-block mr-2 mt-12px"},[k("当前面板密码已过期，请立即修改密码！")])]))),p("新的密码","password1",{icon:"el-refresh",iconClick:E,attrs:{placeholder:"请输入新的密码",style:{width:"32rem"}},rules:[{required:!0,message:"请输入新的密码",trigger:["blur","change"]},{min:6,message:"密码长度必须大于5位",trigger:["blur","change"]}]}),u("确认密码","password2",{attrs:{placeholder:"重复输入密码，确认新的密码",style:{width:"32rem"}},rules:[{required:!0,message:"请再次输入密码",trigger:["blur","change"]},{validator:(s,a,e)=>{a!==H.password1?e(new Error("两次输入密码不一致")):e()},trigger:["blur","change"]}]}),m((()=>x(v,null,[x(c,{class:"w-[100%] mt-[1.2rem]",type:"primary",onClick:B},{default:()=>[k("修改密码")]}),x("div",{class:"flex justify-end mt-1rem"},[x("span",{class:"bt-link",onClick:F},[k("延用上一次密码")])])])))])),{BtForm:t}=n({data:()=>H,options:e,submit:async(s,a)=>(await a(),B())});return b(E),(s,e)=>(_(),h("div",{class:"flex flex-col items-center mt-[8%]",style:j({"min-height":y(a)-200+"px"})},[x(y(t),{size:"default",class:"bind-user-info w-[44rem] bind-form"})],4))}}),[["__scopeId","data-v-6f6b2bb0"]]);export{I as default};
