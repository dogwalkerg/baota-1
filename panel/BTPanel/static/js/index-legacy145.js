!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function r(t){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?e(Object(a),!0).forEach((function(e){n(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):e(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function n(e,r,n){return(r=function(e){var r=function(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,r||"default");if("object"!=t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==t(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function a(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */a=function(){return r};var e,r={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",s=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function p(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{p({},"")}catch(e){p=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var a=e&&e.prototype instanceof g?e:g,o=Object.create(a.prototype),c=new D(n||[]);return i(o,"_invoke",{value:S(t,r,c)}),o}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}r.wrap=f;var v="suspendedStart",h="suspendedYield",m="executing",y="completed",b={};function g(){}function w(){}function x(){}var _={};p(_,u,(function(){return this}));var k=Object.getPrototypeOf,j=k&&k(k(C([])));j&&j!==n&&o.call(j,u)&&(_=j);var q=x.prototype=g.prototype=Object.create(_);function O(t){["next","throw","return"].forEach((function(e){p(t,e,(function(t){return this._invoke(e,t)}))}))}function L(e,r){function n(a,i,c,u){var s=d(e[a],e,i);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"==t(p)&&o.call(p,"__await")?r.resolve(p.__await).then((function(t){n("next",t,c,u)}),(function(t){n("throw",t,c,u)})):r.resolve(p).then((function(t){l.value=t,c(l)}),(function(t){return n("throw",t,c,u)}))}u(s.arg)}var a;i(this,"_invoke",{value:function(t,e){function o(){return new r((function(r,a){n(t,e,r,a)}))}return a=a?a.then(o,o):o()}})}function S(t,r,n){var a=v;return function(o,i){if(a===m)throw Error("Generator is already running");if(a===y){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===v)throw a=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=m;var s=d(t,r,n);if("normal"===s.type){if(a=n.done?y:h,s.arg===b)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a=y,n.method="throw",n.arg=s.arg)}}}function P(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var o=d(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,b;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function D(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function C(r){if(r||""===r){var n=r[u];if(n)return n.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var a=-1,i=function t(){for(;++a<r.length;)if(o.call(r,a))return t.value=r[a],t.done=!1,t;return t.value=e,t.done=!0,t};return i.next=i}}throw new TypeError(t(r)+" is not iterable")}return w.prototype=x,i(q,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:w,configurable:!0}),w.displayName=p(x,l,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,p(t,l,"GeneratorFunction")),t.prototype=Object.create(q),t},r.awrap=function(t){return{__await:t}},O(L.prototype),p(L.prototype,s,(function(){return this})),r.AsyncIterator=L,r.async=function(t,e,n,a,o){void 0===o&&(o=Promise);var i=new L(f(t,e,n,a),o);return r.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},O(q),p(q,l,"Generator"),p(q,u,(function(){return this})),p(q,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=C,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,a){return c.type="throw",c.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),s=o.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;T(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},r}function o(t,e,r,n,a,o,i){try{var c=t[o](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,a)}function i(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var i=t.apply(e,r);function c(t){o(i,n,a,c,u,"next",t)}function u(t){o(i,n,a,c,u,"throw",t)}c(void 0)}))}}System.register(["./index-legacy90.js?v=1734676359","./utils-lib-legacy.js?v=1734676359","./base-lib-legacy.js?v=1734676359","./column-legacy.js?v=1734676359","./useStore-legacy.js?v=1734676359","./index-legacy91.js?v=1734676359","./form-item-legacy.js?v=1734676359","./index-legacy349.js?v=1734676359","./index-legacy261.js?v=1734676359","./__commonjsHelpers__-legacy.js?v=1734676359","./config-legacy.js?v=1734676359"],(function(t,e){"use strict";var n,o,c,u,s,l,p,f,d,v,h,m,y,b,g,w,x,_,k,j,q,O,L,S,P,E,T,D,C,N,R,F,M,G,z,A,J,U,H,I,B,W,Y,X,Z;return{setters:[function(t){n=t._},function(t){o=t.c,c=t.D,u=t.G,s=t.cD,l=t.Z,p=t.cE,f=t.e,d=t.u,v=t.bX,h=t.l,m=t.E,y=t.o,b=t.cF,g=t.cG,w=t.cH,x=t.cI,_=t.cJ},function(t){k=t.c,j=t.t,q=t.r,O=t.i,L=t.e,S=t.y,P=t.o,E=t.k,T=t.l,D=t.p,C=t.h,N=t.B,R=t.x,F=t.q,M=t.bH,G=t.C,z=t.J},function(t){A=t.u},function(t){J=t.g},function(t){U=t._},function(t){H=t.b,I=t.c,B=t.f,W=t.d,Y=t.i},function(t){X=t._},function(t){Z=t._},null,null],execute:function(){var e={class:"w-[460px] px-16px py-24px"},K=k({__name:"mail",props:{compData:{default:function(){return{title:"",type:"",data:{},callback:function(){}}}}},setup:function(t,r){var n,l,p=r.expose,f=t,d=j(f.compData),v=d.type,h=d.data,m="https://www.bt.cn/bbs/thread-108097-1-1.html",y=q({title:"",qq_mail:"",qq_stmp_pwd:"",hosts:"",port:"465",receiveMail:""}),b=O((function(){var t="w-[320px]";return[H("名称","title",{attrs:{placeholder:"请输入邮箱名称",class:t},rules:[{required:!0,message:"请输入名称",trigger:["blur","change"]},{max:15,message:"名称不能超过15个字符",trigger:["blur","change"]}]}),H("发送人邮箱","qq_mail",{attrs:{placeholder:"请输入发送人邮箱",class:t,autocomplete:"new-password"},rules:[{required:!0,message:"请输入发送人邮箱",trigger:["blur","change"]}]}),H("SMTP密码","qq_stmp_pwd",{attrs:{placeholder:"请输入SMTP密码",showPassword:!0,class:t},rules:[{required:!0,message:"请输入SMTP密码",trigger:["blur","change"]}]}),H("SMTP服务器","hosts",{attrs:{placeholder:"请输入SMTP服务器",class:t},rules:[{required:!0,message:"请输入SMTP服务器",trigger:["blur","change"]}]}),H("端口","port",{attrs:{placeholder:"请输入端口",class:t},rules:[{required:!0,message:"请输入端口",trigger:["blur","change"]}]}),I("邮箱","receiveMail",{attrs:{placeholder:"接收者邮箱，每行1个",rows:6,class:t},rules:[{required:!0,message:"请输入接收者邮箱",trigger:["blur","change"]}]}),B(" ",[{content:"推荐使用465端口，协议为SSL/TLS"},{content:"25端口为SMTP协议，587端口为STARTTLS协议"},{content:L(o,{href:m,target:"_blank"},{default:function(){return[S("配置教程")]}})}])]})),g=c({data:function(){return y.value},options:b,submit:(n=i(a().mark((function t(e,r){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r();case 2:return t.abrupt("return",_());case 3:case"end":return t.stop()}}),t)}))),function(t,e){return n.apply(this,arguments)})}),w=g.BtForm,x=g.submit,_=function(){var t=i(a().mark((function t(e){var r,n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=void 0,a=void 0,o=void 0,e={qq_mail:y.value.qq_mail,qq_stmp_pwd:y.value.qq_stmp_pwd,hosts:y.value.hosts,port:y.value.port},a=y.value.receiveMail.split("\n").filter((function(t){return""!==t&&" "!==t})),o={sender_type:v.value,sender_data:JSON.stringify({send:e,receive:a,title:y.value.title})},"id"in h.value||(o.sender_id=h.value.id),r=o,t.next=4,u({loading:"正在设置,请稍候...",request:s(r),message:!0,success:function(t){t.status&&f.compData.callback(!0)}});case 4:return n=t.sent,t.abrupt("return",n.status);case 8:t.prev=8,t.t0=t.catch(0);case 11:case"end":return t.stop()}var e,a,o}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}();return P((function(){if("id"in h.value){var t=h.value.data||{},e=t.send,r=t.receive,n=void 0===r?[]:r,a=t.title,o=void 0===a?"":a,i=e||{},c=i.hosts,u=i.port,s=i.qq_mail,l=i.qq_stmp_pwd;y.value.hosts=c,y.value.port=u,y.value.qq_mail=s,y.value.qq_stmp_pwd=l,y.value.receiveMail=Array.isArray(n)?n.join("\n"):"",y.value.title=o}})),p({onConfirm:(l=i(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x();case 2:if(t.t0=t.sent,!t.t0){t.next=5;break}t.t0=e();case 5:return t.abrupt("return",t.t0);case 6:case"end":return t.stop()}}),t)}))),function(t){return l.apply(this,arguments)})}),function(t,r){return E(),T("div",e,[L(D(w),{size:"small"})])}}}),Q={class:"w-[90%] px-16px py-24px"},V=k({__name:"web-hook",props:{compData:{default:function(){return{title:"",type:"",data:{},callback:function(){}}}}},setup:function(t,e){var n,p,f=e.expose,d=t,v=j(d.compData),h=(v.title,v.type),m=v.data,y="自定义webhook",b="https://www.bt.cn/bbs/thread-121791-1-1.html",g=q({title:"",url:"",atall:"True",method:"POST",body_type:"json",custom_parameter:"",headers:""}),w=[{label:"POST",value:"POST"},{label:"PUT",value:"PUT"},{label:"PATCH",value:"PATCH"}],x=[{label:"application/json",value:"json"},{label:"x-www-form-urlencoded",value:"form_data"}],_={class:"!w-[140px]"},k=function(t){return{placeholder:"非必填，可输入JSON格式的字符串，例如：{aa:bb}",autosize:{minRows:t,maxRows:t},resize:"none"}},S=O((function(){return[H("名称","title",{attrs:{placeholder:"机器人名称或备注",class:"w-[320px]"},rules:[{required:!0,message:"请输入机器人名称或备注",trigger:["blur","change"]}]}),I("URL","url",{attrs:{placeholder:"请输入".concat(y,"机器人URL"),autosize:{minRows:5,maxRows:5},resize:"none",class:"w-[320px]"},rules:[{required:!0,message:"请输入".concat(y,"机器人URL"),trigger:["blur","change"]}]}),W([Y("请求方式","method",w,{attrs:_}),Y("参数格式","body_type",x,{attrs:_,labelAttrs:{labelWidth:"w-[120px]"}})]),I("自定义参数","custom_parameter",{attrs:r(r({},k(4)),{},{class:"w-[320px]"})}),I("请求头","headers",{attrs:r(r({},k(2)),{},{class:"w-[320px]"})}),B(" ",[{content:L(o,{href:b},{default:function(){return["如何创建".concat(y,"机器人")]}})}])]})),C=c({data:function(){return g.value},options:S,submit:(n=i(a().mark((function t(e,r){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r();case 2:return t.abrupt("return",M());case 3:case"end":return t.stop()}}),t)}))),function(t,e){return n.apply(this,arguments)})}),N=C.BtForm,R=C.submit,F=function(){var t,e=l(g.value);["custom_parameter","query","headers"].forEach((function(t){e[t]=""===e[t]?{}:new Function("return ".concat(e[t]))()}));var n=m.value.data,a={sender_type:h.value,sender_data:JSON.stringify(r(r({},n),e))};return null!==(t=m.value)&&void 0!==t&&t.id&&(a.sender_id=m.value.id),a},M=function(){var t=i(a().mark((function t(e){var r,n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=F(),t.next=4,u({loading:"正在设置,请稍候...",request:s(r),message:!0,success:function(t){t.status&&d.compData.callback(!0)}});case 4:return n=t.sent,t.abrupt("return",n.status);case 8:t.prev=8,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}();return P((function(){if("id"in m.value){var t=m.value.data,e=t.title,r=t.url,n=t.method,a=t.body_type,o=t.custom_parameter,i=t.headers;g.value.title=e,g.value.url=r,g.value.method=n,g.value.body_type=a,g.value.custom_parameter=o?JSON.stringify(o):"",g.value.headers=i?JSON.stringify(i):"",g.value.atall="True"}})),f({onConfirm:(p=i(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R();case 2:if(t.t0=t.sent,!t.t0){t.next=5;break}t.t0=e();case 5:return t.abrupt("return",t.t0);case 6:case"end":return t.stop()}}),t)}))),function(t){return p.apply(this,arguments)})}),function(t,e){return E(),T("div",Q,[L(D(N))])}}}),$={class:"p-[16px]"},tt={class:"flex items-center justify-around mt-[1.6rem]"},et={class:"bind"},rt={class:"code p-[1rem]"},nt=k({__name:"wx-account",props:{compData:{default:function(){return{title:"",type:"",data:{},callback:function(){}}}}},setup:function(t,e){var r=e.expose,n=t,o=q(!1),c=C({bindCode:"www.bt.cn"}),s=function(){var t=i(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u({loading:o,request:p(),success:function(t){t.status?c.bindCode=t.data.res:c.bindCode="二维码失效，请重新获取"}});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(){return t.apply(this,arguments)}}();return P(s),r({onCancel:function(){return n.compData.callback(!0)}}),function(t,e){var r=Z,n=X,a=N("bt-loading");return E(),T("div",$,[L(r,{closable:!1,"show-icon":!0,type:"warning"},{title:R((function(){return e[0]||(e[0]=[F("div",null,"没有绑定微信公众号无法接收面板告警信息",-1),F("div",null,"当前为体验版，限制每个宝塔账号发送频率100条/天",-1)])})),_:1}),F("div",tt,[e[2]||(e[2]=M('<div class="bind" data-v-324e6539><div class="title" data-v-324e6539><span class="steps" data-v-324e6539>1</span>关注堡塔公众号</div><div class="code" data-v-324e6539><img src="https://www.bt.cn/Public/img/bt_wx.jpg" alt="堡塔公众号" class="w-[160px]" data-v-324e6539></div></div>',1)),F("div",et,[e[1]||(e[1]=F("div",{class:"title"},[F("span",{class:"steps"},"2"),S("绑定微信账号")],-1)),G((E(),T("div",rt,[L(n,{value:D(c).bindCode,logo:"/static/images/config/wx_logo.png",level:"L",size:140},null,8,["value"])])),[[a,D(o)],[a,"正在获取二维码，请稍候...","title"]])])])])}}}),at=f(nt,[["__scopeId","data-v-324e6539"]]),ot={class:"w-[470px] px-16px py-24px"},it=k({__name:"common",props:{compData:{default:function(){return{title:"",type:"",data:{},callback:function(){}}}}},setup:function(t,e){var n,l,p=e.expose,f=t,d=j(f.compData),v=d.title,h=d.type,m=d.data,y=q({title:"",url:""}),b=O((function(){return[{name:"dingding",ps:"如何创建钉钉机器人",help:"https://www.bt.cn/bbs/thread-108081-1-1.html"},{name:"feishu",ps:"如何创建飞书机器人",help:"https://www.bt.cn/bbs/thread-108274-1-1.html"},{name:"weixin",ps:"如何创建企业微信机器人",help:"https://www.bt.cn/bbs/thread-108116-1-1.html"}].find((function(t){return t.name===h.value}))})),g=O((function(){var t;return[H("名称","title",{attrs:{placeholder:"机器人名称或备注",class:"w-[320px]"},rules:[{required:!0,message:"请输入机器人名称或备注",trigger:["change","blur"]}]}),I("URL","url",{attrs:{placeholder:"请输入".concat(v.value,"机器人URL"),autosize:{minRows:5,maxRows:5},resize:"none",class:"w-[320px]"},rules:[{required:!0,message:"请输入".concat(v.value,"机器人URL"),trigger:["change","blur"]}]}),B(" ",[{content:L(o,{href:null===(t=b.value)||void 0===t?void 0:t.help},{default:function(){var t;return[null===(t=b.value)||void 0===t?void 0:t.ps]}})}])]})),w=c({data:function(){return y.value},options:g,submit:(n=i(a().mark((function t(e,r){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r();case 3:return t.abrupt("return",k(e));case 6:t.prev=6,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])}))),function(t,e){return n.apply(this,arguments)})}),x=w.BtForm,_=w.submit,k=function(){var t=i(a().mark((function t(e){var n,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={sender_type:h.value,sender_data:JSON.stringify(r(r({},e.value),{},{atall:"True"}))},"id"in m.value&&(n.sender_id=m.value.id),t.next=5,u({loading:"正在设置,请稍候...",request:s(n),message:!0,success:function(t){t.status&&f.compData.callback(!0)}});case 5:return o=t.sent,t.abrupt("return",o.status);case 9:t.prev=9,t.t0=t.catch(0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}();return P((function(){if("id"in m.value){var t=m.value.data,e=t.title,r=t.url;y.value.title=e,y.value.url=r}})),p({onConfirm:(l=i(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_();case 2:if(t.t0=t.sent,!t.t0){t.next=5;break}t.t0=e();case 5:return t.abrupt("return",t.t0);case 6:case"end":return t.stop()}}),t)}))),function(t){return l.apply(this,arguments)})}),function(t,e){return E(),T("div",ot,[L(D(x),{size:"small"})])}}});t("default",k({__name:"index",props:{compData:{default:function(){return{type:"",title:"",callback:function(){}}}}},setup:function(t,e){var o,c,s=e.expose,l=J().refs.isRefreshList,p=t,f=j(p).compData,k=d(),q=k.getSenderAlarmListInfo,O=k.push,P=function(){var t=i(a().mark((function t(){var e,r=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]&&r[0],t.prev=1,t.next=4,q(e);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1);case 9:return t.abrupt("return",O.value.config);case 10:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(){return t.apply(this,arguments)}}(),T=function(){var t=i(a().mark((function t(){var e,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P();case 2:return e=t.sent,r=e.filter((function(t){return t.sender_type===f.value.type}))||[],t.abrupt("return",{data:r,total:r.length,other:e});case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),C=function(t){switch(t){case"mail":return K;case"webhook":return V;case"wx_account":return at;default:return it}},N=function(){var t=i(a().mark((function t(e){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=C(f.value.type),t.next=3,h({title:"".concat(p.compData.title,"配置"),area:"webhook"===p.compData.type?60:50,compData:r(r({data:e||{}},f.value),{},{callback:function(){W(),l.value=!0}}),showFooter:"wx_account"!==p.compData.type,component:n});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),F=function(){var t=i(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y({title:"设置默认配置",content:"设置【".concat(e.data.title,"】为默认配置后，将会覆盖原有默认配置，是否继续操作？")});case 3:return t.next=5,u({loading:"正在设置，请稍后...",message:!0,request:b({sender_id:e.id,sender_type:e.sender_type}),success:function(t){t.status&&W()}});case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),M=function(){var t=i(a().mark((function t(e,r){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y({title:"".concat(e.used?"禁用":"启用").concat(r,"【").concat(e.data.title,"】"),content:"您真的要".concat(e.used?"禁用":"启用").concat(r,"【").concat(e.data.title,"】吗？")});case 3:return t.next=5,u({loading:"正在设置，请稍后...",message:!0,request:g({sender_id:e.id}),success:function(t){t.status&&W()}});case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,r){return t.apply(this,arguments)}}(),G=function(){var t=i(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u({loading:"正在测试，请稍后...",message:!0,request:w({sender_id:e.id})});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}(),H=function(){var t=i(a().mark((function t(e,r){var n,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y({title:"解绑【".concat(e.data.title,"】").concat(r),content:"您真的要解绑".concat(r,"【").concat(e.data.title,"】吗？")});case 3:return n={sender_id:e.id},o="wx_account"===e.sender_type,t.next=7,u({loading:"正在解绑，请稍后...",message:!0,request:o?x(n):_(n),success:function(t){t.status&&(W(),l.value=!0)}});case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,r){return t.apply(this,arguments)}}(),I=v({request:T,columns:(c=(null===(o=[{label:"邮箱",name:"mail"},{label:"公众号",name:"wx_account"},{label:"钉钉机器人",name:"dingding"},{label:"飞书机器人",name:"feishu"},{label:"企业微信机器人",name:"weixin"},{label:"自定义Webhook",name:"webhook"}].find((function(t){return t.name===f.value.type})))||void 0===o?void 0:o.label)||"自定义Webhook",[{label:c,prop:"data.title",render:function(t){var e;return L("div",null,[null===(e=t.data)||void 0===e?void 0:e.title,t.original?"【默认配置】":""])}},{label:"状态",width:65,render:function(t){return L("span",{class:"".concat(t.used?"bt-link":"bt-link !text-danger"),onClick:function(){return M(t,c)}},[t.used?"已启用":"未启用"])}},A([{onClick:F,isHide:function(t){return t.original},title:"设置默认",width:60},{onClick:function(t){return N(t)},isHide:function(t){return"wx_account"===t.sender_type},title:"编辑"},{title:"测试",render:function(t){return L("div",{class:"item-center inline-flex"},[L("span",{class:"bt-link",onClick:(e=i(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.load){e.next=2;break}return e.abrupt("return");case 2:return t.load=!0,e.next=5,G(t);case 5:t.load=!1;case 6:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})},[t.load?"测试中":"测试"]),L(U,{class:"mt-[4px]"},null)]);var e}},{onClick:function(t){return H(t,c)},title:"解绑"}])])}),B=I.BtTable,W=I.refresh;return s({onCancel:p.compData.callback}),function(t,e){var r=m,a=n;return E(),z(a,{class:"p-[2rem]"},{"header-left":R((function(){return[L(r,{type:"primary",onClick:e[0]||(e[0]=function(t){return N()})},{default:R((function(){return e[1]||(e[1]=[S("添加")])})),_:1})]})),content:R((function(){return[L(D(B),{"max-height":350})]})),_:1})}}}))}}}))}();
