import{c as e,r as a,ax as s,h as l,o as t,k as o,l as u,e as n,x as m,p as r,q as i,y as d,aj as p,a7 as c,a4 as f}from"./base-lib.js?v=1734676359";import{_ as b}from"./validator.js?v=1734676359";import{G as _,j as h,b as v}from"./utils-lib.js?v=1734676359";import{b3 as x,b4 as V}from"./firewall.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./index91.js?v=1734676359";import"./column.js?v=1734676359";const g={class:"p-[2rem]"},j={class:"flex"},y=e({__name:"index",setup(e,{expose:y}){const w=v(),C=a(!1),U=s("popupClose"),k=a(),q=l({give:[],status:!1,hour:12,minute:0}),A=e=>{q.give=e},F=async()=>{_({request:V(),success:e=>{const a=e.data;q.status="1"===a.status||1===a.status,q.hour=a.hour,q.minute=a.minute,""!=a.channel&&(q.give=a.channel.split(","))}})};return t((()=>{F()})),y({onConfirm:async()=>{const{give:e,minute:a,hour:s,status:l}=q;let t=e.join(",");if(0===t.indexOf(",")&&(t=t.substring(1)),0===e.length||""===t)return w.error("请选择告警方式");const o={status:l?1:0,hour:s,minute:a,channel:t};await k.value.validate(),_({request:x(o),loading:C,message:!0,success:e=>{e.status&&U&&U()}})}}),(e,a)=>{const s=p,l=c,t=h,_=b,v=f;return o(),u("div",g,[n(v,{model:r(q),disabled:r(C),ref_key:"scanForm",ref:k},{default:m((()=>[n(l,{label:"自动扫描"},{default:m((()=>[n(s,{modelValue:r(q).status,"onUpdate:modelValue":a[0]||(a[0]=e=>r(q).status=e)},null,8,["modelValue"])])),_:1}),n(l,{label:"每天"},{default:m((()=>[i("div",j,[n(t,{type:"number",class:"!w-[13rem] mr-4",min:"0",max:"23",modelValue:r(q).hour,"onUpdate:modelValue":a[1]||(a[1]=e=>r(q).hour=e)},{append:m((()=>a[4]||(a[4]=[d("小时")]))),_:1},8,["modelValue"]),n(t,{type:"number",class:"!w-[13rem]",min:"0",max:"59",modelValue:r(q).minute,"onUpdate:modelValue":a[2]||(a[2]=e=>r(q).minute=e)},{append:m((()=>a[5]||(a[5]=[d("分钟")]))),_:1},8,["modelValue"])])])),_:1}),n(l,{label:"告警方式"},{default:m((()=>[n(_,{modelValue:r(q).give,"onUpdate:modelValue":a[3]||(a[3]=e=>r(q).give=e),isMult:!0,needAll:!1,onChange:A},null,8,["modelValue"])])),_:1}),n(l,{label:" "},{default:m((()=>[i("div",{class:"text-[#666]"},[a[6]||(a[6]=d(" 配置后状态未更新,请尝试[ ")),i("span",{class:"text-[#20a53a] hover:text-[#1d9534] cursor-pointer",onClick:F}," 手动刷新 "),a[7]||(a[7]=d(" ] "))])])),_:1})])),_:1},8,["model","disabled"])])}}});export{y as default};
