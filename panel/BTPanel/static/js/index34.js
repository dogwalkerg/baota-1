import{G as e,o as a,l as t,H as s,h as l,e as o}from"./utils-lib.js?v=1734676359";import{B as r}from"./index185.js?v=1734676359";import{_ as i}from"./index116.js?v=1734676359";import{c as n,r as c,i as u,o as m,B as d,C as p,p as _,k as v,l as f,e as g,x as k,y,v as V,q as b,F as x,D as h,z as j,J as w,N as C,M as D,A as P,a7 as O,aj as S,P as U,a4 as E}from"./base-lib.js?v=1734676359";import{g as I,R,S as q,T as L,U as A,V as J,W as N,X as T}from"./useStore3.js?v=1734676359";import{m as F}from"./validator.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./ace.js?v=1734676359";import"./index91.js?v=1734676359";import"./index.vue_vue_type_style_index_0_scoped_03ce946a_lang.js?v=1734676359";import"./column.js?v=1734676359";const B={class:"p-[1.6rem]"},H={key:0,class:"flex items-center text-[1.2rem]"},W={key:1},z={key:0,class:"unit !text-danger"},G={class:"flex items-center"},M={class:"content-mask"},X={key:1},K={class:"h-[50rem] p-2rem"},Q=o(n({__name:"index",setup(o){const{refs:{settingData:n,loading:Q},getSet:Y,getDockerState:Z}=I(),$=c(!1),ee=c(""),ae=u((()=>!n.value.docker_installed||!n.value.docker_compose_installed)),te=()=>{e({request:R({data:JSON.stringify({daemon_json:ee.value})}),message:!0,success:({status:e})=>{e&&($.value=!1)}})},se=async t=>{try{(n.value.service_status||"toggle"!==t)&&await a({title:"".concat("reset"===t?"重启":"关闭","Docker服务"),content:"是否".concat("reset"===t?"重启":"关闭","Docker服务？")}),Q.value=!0,"reset"===t?(await q({data:JSON.stringify({act:"restart"})}),window.location.reload()):(n.value.service_status=!n.value.service_status,e({request:q({data:JSON.stringify({act:n.value.service_status?"start":"stop"})}),message:!0,success:()=>{window.location.reload()}}))}catch(s){}finally{Q.value=!1}},le=async()=>{try{const e=await A();t({component:()=>s((()=>import("./uninstall-confirm.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),compData:{needForce:!e.status,msg:e.msg},title:"卸载Docker",btn:"确定",area:45})}catch(e){}},oe=async a=>{n.value.monitor_status=a,e({request:J({data:JSON.stringify({act:a?"start":"stop"})}),message:!0,success:Y})},re=async()=>{t({component:()=>s((()=>import("./set-docker-path-dialog.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),title:"设置Compose路径",area:45,btn:!0})},ie=async()=>{t({component:()=>s((()=>import("./set-install-url.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),title:"安装",area:64,btn:"确定"})},ne=()=>t({component:()=>s((()=>import("./ipv6-setting-dialog.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),title:"ipv6设置",btn:"确定",area:60}),ce=async t=>{try{await a({icon:"question-filled",title:t?"开启IPV6":"关闭IPV6",content:"".concat(t?"开启":"关闭","IPV6后需要重启docker，请确保可以重启docker再操作。是否继续？")}),await e({loading:"正在设置IPV6,请稍后...",request:T({status:t?1:0}),message:!0,success:Z,error:()=>{n.value.ipv6=!t}})}catch(s){n.value.ipv6=!t}};return m((async()=>{Y(!1)})),(o,c)=>{const u=P,m=O,I=S,R=U,q=E,A=i,J=r,T=l,Z=d("bt-loading");return p((v(),f("div",B,[g(q,{ref:"settingRef",model:_(n),"label-position":"right",labelWidth:"9.6rem",onSubmit:c[11]||(c[11]=C((()=>{}),["prevent"]))},{default:k((()=>[g(m,{prop:"service_status",label:"Docker服务"},{default:k((()=>[_(ae)?j("",!0):(v(),f("span",H,[y(" 当前状态："+V(_(n).service_status?"开启":"停止")+" ",1),b("span",{class:x(_(n).service_status?"svgtofont-icon-start text-[#20a53a]":"svgtofont-icon-stop text-[#ff0000]")},null,2),g(u,{class:"!ml-[2rem]",title:_(n).service_status?"停止":"开启",onClick:c[0]||(c[0]=e=>se("toggle"))},{default:k((()=>[y(V(_(n).service_status?"停止":"开启"),1)])),_:1},8,["title"]),g(u,{title:"重启",onClick:c[1]||(c[1]=e=>se("reset"))},{default:k((()=>c[14]||(c[14]=[y("重启")]))),_:1}),p(g(u,{onClick:c[2]||(c[2]=t=>(async()=>{try{await a({title:"修复docker模块",content:"修复docker可能会导致容器异常，修复大约5分钟，是否继续修复？"}),e({request:L(),message:!0,success:e=>{e.status&&F()}})}catch(t){}})())},{default:k((()=>c[15]||(c[15]=[y("修复")]))),_:1},512),[[h,!_(n).service_status]])])),_(ae)?(v(),f("span",W,"当前状态：未安装")):j("",!0)])),_:1}),_(n).monitor_status?(v(),w(m,{key:0,prop:"monitor_status",label:"容器监控"},{default:k((()=>[g(I,{modelValue:_(n).monitor_status,"onUpdate:modelValue":c[3]||(c[3]=e=>_(n).monitor_status=e),onChange:oe},null,8,["modelValue"]),c[16]||(c[16]=b("span",{class:"unit"},"*设置容器页面监控开关,关闭后CPU使用率将不再监控",-1))])),_:1})):j("",!0),_(n).monitor_status?(v(),w(m,{key:1,prop:"monitor_save_date",label:"监控天数"},{default:k((()=>[g(R,{class:"!w-[32rem]",modelValue:_(n).monitor_save_date,"onUpdate:modelValue":c[4]||(c[4]=e=>_(n).monitor_save_date=e)},null,8,["modelValue"]),g(u,{type:"primary",class:"!ml-[4px]",onClick:c[5]||(c[5]=a=>(async a=>{"date"===a&&e({request:N({data:JSON.stringify({save_date:n.value.monitor_save_date})}),message:!0,success:Y()})})("date"))},{default:k((()=>c[17]||(c[17]=[y("保存")]))),_:1}),c[18]||(c[18]=b("span",{class:"unit"},"*设置容器页面监控保存天数",-1))])),_:1})):j("",!0),g(m,{prop:"url",label:"加速URL"},{default:k((()=>[g(R,{class:"!w-[32rem]",modelValue:_(n).url,"onUpdate:modelValue":c[6]||(c[6]=e=>_(n).url=e),disabled:""},null,8,["modelValue"]),g(u,{type:"primary",class:"!ml-[4px]",onClick:c[7]||(c[7]=e=>(async e=>{t({component:()=>s((()=>import("./set-url.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),title:"设置加速URL",area:64,btn:!0,compData:{url:e}})})(_(n).url))},{default:k((()=>c[19]||(c[19]=[y("修改")]))),_:1}),_(n).bad_registry?(v(),f("span",z,"*提示：检测到您上次拉取镜像出现异常，请尝试更换推荐的加速站: "+V(_(n).bad_registry_path),1)):j("",!0)])),_:1}),g(m,{prop:"url",label:"docker compose"},{default:k((()=>[g(R,{class:"!w-[32rem]",modelValue:_(n).docker_compose_path,"onUpdate:modelValue":c[8]||(c[8]=e=>_(n).docker_compose_path=e),disabled:""},null,8,["modelValue"]),g(u,{type:"primary",class:"!ml-[4px]",onClick:re},{default:k((()=>c[20]||(c[20]=[y("修改")]))),_:1}),c[21]||(c[21]=b("span",{class:"unit"},"*docker compose路径",-1))])),_:1}),g(m,{prop:"url",label:"配置文件"},{default:k((()=>[g(u,{type:"primary",title:"全局配置文件",onClick:c[9]||(c[9]=e=>$.value=!0)},{default:k((()=>c[22]||(c[22]=[y("打开配置文件")]))),_:1})])),_:1}),g(m,{prop:"url",label:"ipv6网络"},{default:k((()=>[b("div",G,[g(I,{modelValue:_(n).ipv6,"onUpdate:modelValue":c[10]||(c[10]=e=>_(n).ipv6=e),onChange:ce},null,8,["modelValue"]),p(g(u,{title:"ipv6地址配置",type:"primary",class:"!ml-[1rem]",onClick:ne},{default:k((()=>c[23]||(c[23]=[y(" ipv6地址配置 ")]))),_:1},512),[[h,_(n).ipv6]]),c[24]||(c[24]=b("span",{class:"unit"},"*此ipv6范围将会在默认的bridge网络中使用，启用或关闭ipv6后需要重启docker，请确保可以重启docker再操作",-1))])])),_:1}),g(m,{prop:"url",label:"卸载Docker"},{default:k((()=>[g(u,{title:"卸载Docker",type:"default",onClick:le},{default:k((()=>c[25]||(c[25]=[y("卸载")]))),_:1})])),_:1})])),_:1},8,["model"]),_(ae)?(v(),w(A,{key:0,width:_(n).installing?"40rem":"36rem"},{content:k((()=>[b("div",M,[c[26]||(c[26]=b("i",{class:"svgtofont-el-warning text-warning !text-[2.2rem] mr-4px"},null,-1)),b("span",null,"当前"+V(1===_(n).installing?"正在安装":"未安装")+"docker或docker-compose",1),c[27]||(c[27]=y("， ")),1!==_(n).installing?(v(),f("span",{key:0,onClick:ie,class:"bt-link"},"立即安装")):j("",!0),1===_(n).installing?(v(),f("span",X,"请稍后...")):j("",!0)])])),_:1},8,["width"])):j("",!0),g(T,{title:"全局配置文件",modelValue:_($),"onUpdate:modelValue":c[13]||(c[13]=e=>D($)?$.value=e:null),showFooter:"",area:64,onConfirm:te},{default:k((()=>[b("div",K,[g(J,{modelValue:_(ee),"onUpdate:modelValue":c[12]||(c[12]=e=>D(ee)?ee.value=e:null),filePath:_(n).daemon_path,autoSave:!1,editorOption:{mode:"ace/mode/nginx"}},null,8,["modelValue","filePath"])])])),_:1},8,["modelValue"])])),[[Z,_(Q)],[Z,"正在获取docker设置，请稍候...","title"]])}}}),[["__scopeId","data-v-6d946937"]]);export{Q as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
