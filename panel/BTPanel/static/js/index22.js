import{l as a,H as t,G as e,k as s,V as l,o}from"./utils-lib.js?v=1734676359";import{_ as i}from"./index90.js?v=1734676359";import{c as n,r,e as c,w as m,o as p,B as u,k as d,l as _,x as b,y as f,C as h,p as j,A as k}from"./base-lib.js?v=1734676359";import{a as v,h as y,i as w,u as q,c as C}from"./column.js?v=1734676359";import{getModulesList as x,deleteDatabase as E}from"./database.js?v=1734676359";import{g as R,v as g}from"./useMethod3.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./index91.js?v=1734676359";import"./validator.js?v=1734676359";const D=n({__name:"index",setup(n){const{refs:{isRefreshTable:D},resetRefresh:T}=R(),A=r(),L=r(!1),V=r([]),I=async(a,t,e,s)=>{const{label:l,value:o}=s,i=async a=>{const t={back:g,delete:a=>E({path:a.path},"sqlite")}[o];if(t)return await t(a)};await a({title:"批量".concat(l),content:"批量".concat(l,"已选数据库，是否继续操作！"),column:[{prop:"name",label:"数据库名"},C()],onConfirm:async()=>(await t(i),P(),!1)})},O=()=>{a({title:"添加SQLite数据库",area:48,btn:!0,component:()=>t((()=>import("./add-sqlite.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)})},P=async()=>{try{const a=await e({request:x({},"sqlite"),loading:L});V.value=null==a?void 0:a.data}catch(a){}},H=[v(),{label:"数据库名称",prop:"name",minWidth:90},{label:"备份",minWidth:180,isCustom:!0,render:e=>c("span",{class:"cursor-pointer",style:{color:e.backup_count>0?"#20a53a":"#f0ad4e"},onClick:()=>(e=>{a({title:"数据库备份详情【"+e.name+"】",area:70,compData:e,component:()=>t((()=>import("./back-sqlite.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)})})(e)},[e.backup_count>0?"有备份(".concat(e.backup_count,")"):"点击备份"])},y({prop:"path"}),w({prop:"size",width:100}),q([{onClick:e=>{a({title:"管理",area:[114,65],compData:{...e,list:V.value},component:()=>t((()=>import("./index123.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)})},title:"管理"},{onClick:async a=>{try{await o({title:"删除数据库文件【"+(null==a?void 0:a.name)+"】",content:"删除选中的数据库文件后，该数据库文件将不在列表中显示，是否继续操作？"}),await e({request:E({path:a.path},"sqlite"),loading:"正在删除数据库,请稍后...",message:!0}),P()}catch(t){}},title:"删除"}])],W=[{label:"备份数据库",value:"back",event:I},{label:"删除数据库",value:"delete",event:I}];return m((()=>D.value),(async a=>{a&&await P(),T()})),p((()=>{P()})),(a,t)=>{const e=k,o=s,n=l,r=i,m=u("bt-loading");return d(),_("div",null,[c(r,null,{"header-left":b((()=>[c(e,{type:"primary",onClick:O},{default:b((()=>t[0]||(t[0]=[f(" 添加数据库文件 ")]))),_:1})])),content:b((()=>[h(c(o,{ref_key:"sqliteTableRef",ref:A,column:H,data:j(V)},null,8,["data"]),[[m,j(L)],[m,"正在加载数据库列表...","title"]])])),"footer-left":b((()=>[c(n,{"table-ref":j(A),options:W},null,8,["table-ref"])])),_:1})])}}});export{D as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
