import{e as s,u as e,l as a,H as o,bt as t,bu as n,bv as i,a6 as l,bw as c}from"./utils-lib.js?v=1734676359";import{g as r,r as m,c as p,s as u,o as g,k as f,l as d,q as v,y as _,v as w,p as y,J as I,x as b,z as h,aN as k,bA as P,az as S}from"./base-lib.js?v=1734676359";const O=r("HOME-LOGIN-PROMPT-STORE",(()=>{const s=m({ip_info:{ip:"",info:""},last_login:{ip_info:{ip:"",info:""},login_time_str:""}});return{loginInfo:s,initData:()=>{const e=JSON.parse(sessionStorage.getItem("loginInfo"));s.value=e||s.value}}})),T={class:"login-message"},x={class:"login-message-row"},D={class:"login-message-content"},N={class:"login-message-row"},U={class:"login-message-content"},j={class:"login-message"},B={class:"login-message-row"},C={class:"login-message-content"},R={class:"login-message-row"},E={class:"login-message-content"},H={class:"login-message-row"},L={class:"login-message-content"},M=s(p({__name:"index",setup(s){const e=O(),{loginInfo:a}=u(e);return g((()=>e.initData())),(s,e)=>{const o=k;return f(),d("div",null,[v("div",null,[e[2]||(e[2]=_(" 当前登录信息： ")),v("div",T,[v("div",x,[e[0]||(e[0]=v("span",{class:"login-message-title"},"IP",-1)),v("span",D,w(y(a).ip_info.ip),1)]),v("div",N,[e[1]||(e[1]=v("span",{class:"login-message-title"},"归属地",-1)),v("span",U,w(y(a).ip_info.info),1)])])]),v("div",null,[e[7]||(e[7]=_(" 上次登录信息： ")),v("div",j,[v("div",B,[e[4]||(e[4]=v("span",{class:"login-message-title"},"IP",-1)),v("span",C,[_(w(y(a).last_login.ip_info.ip)+" ",1),y(a).last_login.ip_info.ip!==y(a).ip_info.ip?(f(),I(o,{key:0,content:"登录异常",effect:"dark",placement:"top"},{default:b((()=>e[3]||(e[3]=[v("i",{class:"svgtofont-el-warning text-orange cursor-pointer ml-[8px]"},null,-1)]))),_:1})):h("",!0)])]),v("div",R,[e[5]||(e[5]=v("span",{class:"login-message-title"},"归属地",-1)),v("span",E,w(y(a).last_login.ip_info.info),1)]),v("div",H,[e[6]||(e[6]=v("span",{class:"login-message-title"},"时间",-1)),v("span",L,w(y(a).last_login.login_time_str),1)])])])])}}}),[["__scopeId","data-v-6207466b"]]),z=r("HOME-STORE",(()=>{const{getGlobalInfo:s}=e(),r=m(0),p=m(!1),u=m({name:"",simpleName:""}),g=m(0),f=m({runningDays:0,isBeta:!1,isUpgrade:!1,cloudBeta:!1,betaInfo:null,officialInfo:null,grayscale:1,isSetup:!0,isRestart:!1}),d=m({one:0,max:0,five:0,fifteen:0}),v=m({occupy:"",framework:"",coresOccupy:[0,0,0],cpuNumber:0,logicCores:0,cores:0,process:[0,0]}),_=m({}),w=m({memRealUsed:0,memTotal:0,memFree:0,memShared:0,memAvailable:0,memBuffers:0,memCached:0}),y=m({cpuBaseInfo:{active_processes:0,cpu_name:"Common KVM processor * 2",load_avg:{},logical_cpu:0,num_phys_cores:0,physical_cpu:0,total_processes:0},cpuProcess:[],memProcess:[]}),I=m([]),b=m([]),h=m([]),k=m([]),O=m([]),T=m([]),x=m([]),D=s=>{const e=window.vite_public_version,a=e.split(".").pop(),o=parseInt(a).toString()===a&&2===a.length,{is_beta:t,version:i,beta:l,downUrl:c,updateMsg:r,uptime:m,grayscale_test:p}=s;Object.assign(f.value,{isBeta:o,isUpgrade:!n(e,o?l.version:i),cloudBeta:t,betaInfo:l,officialInfo:{downUrl:c,updateMsg:r,version:i,uptime:m},grayscale:p})},N=s=>{const{disk:e,mem:a,network:o,iostat:t,cpu:n,installed:i,cpu_times:l,down:c,up:r,downPackets:m,upPackets:y,downTotal:I,upTotal:b,system:h,simple_system:P,time:S}=s,T={ALL:{down:c,up:r,downPackets:m,upPackets:y,downTotal:I,upTotal:b},...o};U(e);const x=Date.now();p.value=i,w.value=a,k.value=T,O.value=t,v.value={occupy:n[0],cores:n[1],coresOccupy:n[2],framework:n[3],logicCores:n[4],cpuNumber:n[5],process:[l["活动进程数"],l["总进程数"]]},_.value=l,d.value=s.load,g.value=x,u.value.name=P,u.value.simpleName=h,f.value.runningDays=S},U=s=>{var e;const a=[],o=[];s.forEach((s=>{const{path:e,size:t}=s,n=l(t),i=n?0:parseFloat(t[3].substring(0,t[3].lastIndexOf("%"))),c=n?"未挂载":"".concat(t[1]," / ").concat(t[0]);a.push({show:!1,data:s,info:{title:n?"未挂载":e,range:i,desc:c}}),o.push({diskName:e,diskQuota:Number.parseFloat(t[0].split("G")[0])})})),T.value=(null==(e=s[0])?void 0:e.size)||[],I.value=a,b.value=o};return{panelInfo:f,memory:w,systemInfo:u,refreshTime:g,load:d,cpu:v,cpuTimes:_,disk:I,diskQuota:b,recommendSoft:h,network:k,diskIo:O,diskUsage:T,overviewShowList:x,isRefreshData:r,recommendInstall:p,specificResource:y,recommendInstallDialog:async()=>a({component:()=>o((()=>import("./index269.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),title:'<div class="flex items-center justify-between text-[1.2rem]"><span>初始化推荐配置</span><span class="close-ad">不再显示推荐</span></div>',area:105,closeBtn:2}),getUpdateInfo:async(s={})=>{try{const{data:e}=await t(s),{status:a,msg:o}=e;return!(!a||!o)&&(D(o),o)}catch(e){}},getHomeConfig:async()=>{const e=await s();"object"==typeof e&&e&&(f.value.isSetup=e.isSetup)},getSystemInfo:async()=>{try{const s=await i();r.value=(new Date).getTime(),N(s.data)}catch(s){}},monitorLoginInfo:async()=>{var s;const e=sessionStorage.getItem("loginInfo");if(null!=e){let a=JSON.parse(e);null!=a&&""!=a&&(null==(s=null==a?void 0:a.last_login)?void 0:s.login_time_str)&&P({title:"登录成功",message:S(M),type:"success",position:"bottom-right",dangerouslyUseHTMLString:!0,customClass:"login-success",onClose:()=>sessionStorage.removeItem("loginInfo")})}},getHomeProcessInfo:async()=>{try{const{data:{info:s,CPU_high_occupancy_software_list:e,memory_high_occupancy_software_list:a}}=await c();Object.assign(y.value,{cpuBaseInfo:s,cpuProcess:e,memProcess:a,refresh:Date.now()})}catch(s){}},$reset:()=>{I.value=[],b.value=[],h.value=[],k.value=[],O.value=[],x.value=[],Object.assign(y.value,{cpuProcess:[],memProcess:[]})}}}));export{z as H};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
