import{l as a,H as e,G as l,di as s,M as t,k as o,O as n,j as r,aa as i,S as u,e as m}from"./utils-lib.js?v=1734676359";import{c as d,r as p,h as c,o as g,B as f,k as _,l as h,e as v,x as y,q as b,p as w,M as j,C as x,L as V,y as I,aj as P,ay as k,A as q}from"./base-lib.js?v=1734676359";import{_ as C}from"./index90.js?v=1734676359";import{aN as D,aO as A,aP as E,aQ as F,aR as O}from"./firewall.js?v=1734676359";import{u as S}from"./column.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./index91.js?v=1734676359";const T={class:"flex items-center"},U=m(d({__name:"login-alert-setting",props:{compData:{default:()=>({alertStatus:"",refreshFn:()=>""})}},setup(m){const d=m,U=p("login"),z=p(""),H=p([]),L=p(!1),M=p("");p([]);const R=p({}),B=p(0),G=p(!1),K=p([]),N=c({p:1,p_size:8}),Q=[{content:"只有root用户登录才会触发告警"}],J=async()=>{a({title:"到期设置提醒",component:()=>e((()=>import("./alert-setting-dialog.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),area:50,compData:{...R.value,refreshEvent:X},showFooter:!0})},W=async(a,e)=>{a?J():(await l({loading:G,request:D({task_id:R.value.id,status:0}),message:!0}),X())},X=async()=>{var a;const e=await(null==(a=d.compData)?void 0:a.refreshFn());M.value=e.status,R.value=e},Y=a=>{var e;"white"===a?$():(M.value=null==(e=d.compData)?void 0:e.alertStatus,X(),(async()=>{await l({loading:G,request:O({...N}),data:{data:[Array,K],page:u(B)}})})())},Z=async()=>{z.value&&s(z.value)?(await l({loading:"正在添加IP白名单，请稍后...",request:A({ip:z.value}),message:!0}),z.value="",$()):t.error("请输入正确的IP地址")},$=async(a=1)=>{await l({loading:L,request:E(),data:{msg:[Array,H]}})},aa=[{label:"IP地址",render:a=>a},S([{onClick:a=>(async a=>{await l({loading:"正在删除IP白名单，请稍后...",request:F({ip:a}),message:!0}),$()})(a),title:"删除"}])],ea=[{label:"详情",prop:"log"},{label:"添加时间",prop:"addtime",align:"right",width:160}];return g((async()=>{Y(U.value)})),(a,e)=>{const l=P,s=o,t=C,u=n,m=k,d=r,p=q,c=i,g=f("bt-loading");return _(),h("div",null,[v(c,{class:"!h-[580px]",modelValue:w(U),"onUpdate:modelValue":e[2]||(e[2]=a=>j(U)?U.value=a:null),type:"left-bg-card",position:"left",onChange:Y},{default:y((()=>[v(m,{label:"登录日志",name:"login"},{default:y((()=>[v(t,null,{"header-left":y((()=>[b("span",T,[e[3]||(e[3]=b("span",{class:"mr-[1rem]"},"登录告警",-1)),v(l,{size:"small",class:"!mb-0",modelValue:w(M),"onUpdate:modelValue":e[0]||(e[0]=a=>j(M)?M.value=a:null),onChange:W},null,8,["modelValue"]),b("span",{class:"bt-link ml-8px",onClick:J}," 告警通道设置 ")])])),content:y((()=>[x(v(s,{"max-height":"450",ref:"portTable",column:ea,data:w(K)},null,8,["data"]),[[g,w(G)],[g,"正在加载列表，请稍后...","title"]])])),"footer-right":y((()=>e[4]||(e[4]=[]))),_:1}),v(u,{options:Q,class:"mt-[1rem] mx-[1rem]"})])),_:1}),v(m,{label:"IP白名单",name:"white"},{default:y((()=>[v(t,null,{"header-left":y((()=>[v(d,{class:"mr-4",modelValue:w(z),"onUpdate:modelValue":e[1]||(e[1]=a=>j(z)?z.value=a:null),width:"20rem",placeholder:"请输入IP",onKeyup:V(Z,["enter","native"]),clearable:""},null,8,["modelValue"]),v(p,{type:"primary",onClick:Z},{default:y((()=>e[5]||(e[5]=[I("添加")]))),_:1})])),content:y((()=>[x(v(s,{"max-height":"500",ref:"portTable",column:aa,data:w(H)},null,8,["data"]),[[g,w(L)]])])),default:y((()=>[v(u,{options:Q})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-51d8466c"]]);export{U as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
