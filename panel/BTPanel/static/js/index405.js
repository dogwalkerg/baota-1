import{c as l,G as a,aa as s,b as e,O as n}from"./utils-lib.js?v=1734676359";import{B as o}from"./index185.js?v=1734676359";import{c as t,r,e as i,y as u,I as m,o as d,B as p,k as c,l as g,p as v,M as f,q as x,x as j,C as y,J as L,z as b,A as _}from"./base-lib.js?v=1734676359";import{u as C,S as V}from"./useStore7.js?v=1734676359";import{getSiteAccessLogs as z,getSiteErrorLog as k,getProjectLog as h,getSetupLog as q}from"./site.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./ace.js?v=1734676359";const B={class:"h-full"},E={class:"mt-1rem"},N=t({__name:"index",setup(t){const N=e(),{siteInfo:S}=C(),{jumpTabEvent:w}=V(),I=r(!1),M=r("nginxLogs"),O=r(""),U=r([{label:"Nginx日志",name:"nginxLogs",lazy:!0,render:()=>i("span",null,null)},{label:"Nginx错误日志",name:"nginxErrorLogs",lazy:!0,render:()=>i("span",null,null)},{label:"项目日志",name:"projectLogs",lazy:!0,render:()=>i("span",null,null)},{label:"依赖安装日志",name:"installLogs",lazy:!0,render:()=>i("span",null,null)}]),A=[{content:i(m,null,[i("div",{class:"flex items-center"},[u("若依赖安装出现问题，可以前往 "),i(l,{onClick:()=>w("composer")},{default:()=>[u("Composer")]}),u(" 自定义安装")])])}],G=async(l=!1)=>{const{name:s}=S.value,e=new Map([["nginxLogs",z],["nginxErrorLogs",k],["projectLogs",h],["installLogs",q]]).get(M.value),n={projectLogs:{sitename:s},installLogs:{sitename:s,type:"install"},default:{siteName:s}},o=n[M.value]||n.default;e&&a({loading:I,request:e(o),success:a=>{var s,e;O.value=(null==(s=null==a?void 0:a.data)?void 0:s.data)||(null==(e=null==a?void 0:a.data)?void 0:e.msg)||a.msg,l&&N.success("刷新成功")}})},H=l=>{M.value=l,G()};return d((()=>G())),(l,a)=>{const e=s,t=_,r=o,m=n,d=p("bt-loading");return c(),g("div",null,[i(e,{type:"card",modelValue:v(M),"onUpdate:modelValue":a[0]||(a[0]=l=>f(M)?M.value=l:null),options:v(U),onChange:H},null,8,["modelValue","options"]),x("div",B,[i(t,{type:"primary",onClick:a[1]||(a[1]=l=>G(!0))},{default:j((()=>a[3]||(a[3]=[u("刷新日志")]))),_:1}),x("div",E,[y(i(r,{class:"!h-[40rem] !w-full",modelValue:v(O),"onUpdate:modelValue":a[2]||(a[2]=l=>f(O)?O.value=l:null),id:"configContent",request:!1,isScrollBottom:!0,editorOption:{readonly:!0}},null,8,["modelValue"]),[[d,v(I)]])]),"installLogs"===v(M)?(c(),L(m,{key:0,class:"px-2rem",options:A})):b("",!0)])])}}});export{N as default};
