import{M as s,p as e,c as r}from"./utils-lib.js?v=1734676359";import{c as t,h as a,i as l,w as i,o,k as c,l as m,q as n,F as u,p as d,v as f,G as p,e as x,x as g,y as v,z as y}from"./base-lib.js?v=1734676359";import{p as _}from"./useMethod3.js?v=1734676359";const w={class:"flex items-start"},b={class:"flex flex-1"},h={class:"mr-[12px] text-[1.2rem] min-w-[16rem] max-w-30rem"},k={class:"flex items-center"},j={key:0,class:"flex items-center"},C=t({__name:"index",props:{server:{default:()=>({sid:0,ip:""})}},setup(t){const C=t,M=a({status:!1,msg:"检查中...",error:!1}),A=l((()=>M.status?"svgtofont-el-success-filled text-[#20A53A]":"svgtofont-el-circle-close-filled text-[#EF0808]")),F=async()=>{q(),s.success("刷新成功")},S=()=>{s.msg({dangerouslyUseHTMLString:!0,message:String(M.error)||"暂无异常信息",type:"error",showClose:!0,duration:0})},q=async()=>{if(e(C.server.sid))return s.error("查询失败");M.msg="连接中...";const{db_status:r,msg:t,err_msg:a}=await _(C.server.sid);M.status=r,M.msg=r?"正常":t,M.error=!r&&a};return i((()=>C.server.sid),(s=>{!e(s)&&q()}),{immediate:!0}),o((()=>{})),(s,e)=>{const t=r;return c(),m("div",w,[n("i",{class:u("text-[1.6rem] mr-[4px] ".concat(d(A)))},null,2),n("div",b,[n("div",h,[n("span",null,f(s.server.ip)+"状态：",1),n("span",{style:p("color:#".concat(d(M).status?"20a53a":"ef0808"))},f(d(M).msg),5)]),n("div",k,[e[2]||(e[2]=n("i",{class:"svgtofont-icon-refresh text-[1.4rem] mr-[4px] text-[#20a53a]"},null,-1)),x(t,{onClick:F},{default:g((()=>e[0]||(e[0]=[v("刷新")]))),_:1}),d(M).error?(c(),m("div",j,[x(t,{onClick:S,class:"ml-8px"},{default:g((()=>e[1]||(e[1]=[v("| 查看异常信息")]))),_:1})])):y("",!0)])])])}}});export{C as _};
