import{_ as e}from"./index90.js?v=1734676359";import{am as s,G as r,M as t,bf as l,an as i}from"./utils-lib.js?v=1734676359";import{c as o,s as a,e as n,y as p,k as u,l as m,x as c,p as d}from"./base-lib.js?v=1734676359";import{b as h}from"./index81.js?v=1734676359";import{g as _}from"./index419.js?v=1734676359";import{B as x}from"./index417.js?v=1734676359";import{u as f}from"./column.js?v=1734676359";import{u as g}from"./useStore9.js?v=1734676359";import{a2 as j}from"./useMethod5.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1734676359";import"./index116.js?v=1734676359";import"./index91.js?v=1734676359";import"./validator.js?v=1734676359";import"./index.vue_vue_type_style_index_0_scoped_03ce946a_lang.js?v=1734676359";import"./useStore7.js?v=1734676359";import"./site.js?v=1734676359";import"./useController4.js?v=1734676359";import"./useStore8.js?v=1734676359";import"./useController3.js?v=1734676359";import"./useStore12.js?v=1734676359";import"./form-item.js?v=1734676359";const b={class:"p-[2rem]"},v=o({__name:"plugin-install",setup(o){const{localRow:v}=a(g()),{isRefreshPluginInstall:w,isRefreshPluginList:B}=a(h()),{BtTable:q,BtPage:y,BtRecommendSearch:C,BtRefresh:P,BtColumn:R,BtBatch:S,BtTableCategory:k,BtErrorMask:M,tableRef:T,classList:H,refresh:L,BtSearch:W}=s({request:e=>_(e),columns:[{label:"名称",prop:"name",minWidth:180,isCustom:!0,render:e=>n("span",{class:"flex items-center"},[n("img",{class:"w-[25px] h-[25px]",src:e.icons["1x"]?e.icons["1x"]:e.icons.default},null),n("span",{class:"ml-[5px]"},[e.name])])},{label:"描述",width:200,prop:"short_description",showOverflowTooltip:!0},{label:"作者",prop:"author",render:e=>n("span",{innerHTML:e.author},null)},{label:"WP",prop:"requires",width:50,render:e=>e.requires?e.requires:"--"},{label:"PHP",prop:"requires_php",render:e=>e.requires_php?e.requires_php:"--"},{label:"等级",prop:"rating",width:140,render:e=>{const s=e.rating?e.rating/20:0;return n("div",{class:"flex items-center"},[n(x,{modelValue:s,disabled:!0,"allow-half":!0,class:"!text-[2rem]"},null)])}},f((e=>[{title:e.installed?"已安装":"安装",render:e=>{const s=v.value.wp_version<e.requires||v.value.php_version<e.requires_php||e.installed;return e.installed?n("span",{class:"text-[#999]",style:"cursor:not-allowed"},[p("已安装")]):n("span",{class:"bt-link",style:s?"cursor:not-allowed; color: #999;":"",onClick:s?void 0:()=>{r({loading:"安装中...",request:j({s_id:v.value.id,slug:e.slug}),success:e=>{e.status&&(w.value=!0,B.value=!0,t.success("安装成功"))}})}},[p("安装")])}}]),{label:"操作",width:100,fixed:"right"})],extension:[l("search",{name:"local-setting-plugin",list:[]}),i(w)]});return(s,r)=>{const t=e;return u(),m("div",b,[n(t,null,{"header-right":c((()=>[n(d(W),{type:"local-setting-plugin",placeholder:"请输入插件名称",class:"!w-[270px] mr-[10px]"})])),content:c((()=>[n(d(q),{"max-height":500})])),"footer-right":c((()=>[n(d(y))])),_:1})])}}});export{v as default};
