import{G as a,aa as e,O as s,b as l}from"./utils-lib.js?v=1734676359";import{c as t,r as n,i as o,o as u,B as r,C as i,p as m,k as d,l as c,e as p,M as v,q as f,y,z as b,x as g,A as x}from"./base-lib.js?v=1734676359";import{B as j}from"./index185.js?v=1734676359";import{u as h,S as C}from"./useStore7.js?v=1734676359";import{getConfigFile as _}from"./site.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./ace.js?v=1734676359";const k={class:"flex items-center justify-between my-[4px]"},w={key:0,class:"flex items-center"},V={class:"my-[12px]"},S=t({__name:"index",setup(t){const S=l(),{siteInfo:E}=h(),{getFileEvent:F,saveFileEvent:q}=C(),H=n(!1),U=n(!1),z=n(""),A=n([]),B=n(""),D=[{content:"此处为站点主配置文件,若您不了解配置规则,请勿随意修改."}],M=o((()=>A.value.find((a=>a.type===z.value)))),O=async()=>{const a=await q({path:z.value,data:B.value,encoding:"utf-8"});S.msg({dangerouslyUseHTMLString:!0,message:a.msg,type:a.status?"success":"error",duration:a.status?2e3:0}),a.status&&T()},T=async(a=z.value)=>{U.value=!0;const e=await F({path:a});B.value=e.data.data,U.value=!1},G=a=>{z.value=a,T()};return u((()=>{a({loading:H,request:_({sitename:E.value.name}),success:a=>{A.value=[],Object.keys(a.data).forEach((e=>{A.value.push({label:e,lazy:!0,name:a.data[e],render:()=>p("span",null,null)})})),z.value=A.value[0].name,T()}})})),(a,l)=>{var t;const n=e,o=j,u=x,h=s,C=r("bt-loading");return i((d(),c("div",null,[p(n,{type:"card",modelValue:m(z),"onUpdate:modelValue":l[0]||(l[0]=a=>v(z)?z.value=a:null),options:m(A),onChange:G},null,8,["modelValue","options"]),f("div",k,[l[4]||(l[4]=f("span",{class:"text-[#666]"},"提示：Ctrl+F 搜索关键字，Ctrl+S 保存，Ctrl+H 查找替换",-1)),"伪静态配置文件"===(null==(t=m(M))?void 0:t.label)?(d(),c("span",w,l[3]||(l[3]=[y("规则转换工具： "),f("a",{class:"bt-link",href:"https://www.bt.cn/Tools",target:"_blank"},[y("Apache转Nginx "),f("i",{class:"svgtofont-el-link"})],-1)]))):b("",!0)]),f("div",V,[i(p(o,{class:"!h-[40rem] border border-[#DCDFE6] rounded-[4px]",modelValue:m(B),"onUpdate:modelValue":l[1]||(l[1]=a=>v(B)?B.value=a:null),id:"configContent",request:!1,onSave:O},null,8,["modelValue"]),[[C,m(U)]])]),p(u,{type:"primary",onClick:l[2]||(l[2]=a=>O())},{default:g((()=>l[5]||(l[5]=[y("保存")]))),_:1}),p(h,{options:D,class:"ml-2rem"})])),[[C,m(H)]])}}});export{S as default};
