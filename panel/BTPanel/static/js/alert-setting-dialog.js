import{c as e,r as a,h as s,o as t,k as r,l as i,e as o,x as l,p as n,N as m,a7 as p,a4 as d,bj as c}from"./base-lib.js?v=1734676359";import{_ as u}from"./validator.js?v=1734676359";import{bo as g}from"./firewall.js?v=1734676359";import{M as f,e as _}from"./utils-lib.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./index91.js?v=1734676359";import"./column.js?v=1734676359";const v={class:"p-[2.4rem] give-dialog"},h=_(e({__name:"alert-setting-dialog",props:{compData:{default:()=>({})}},setup(e,{expose:_}){const{proxy:h}=c(),b=e;a(!1);const j=s({switch:!1,give:[]}),y=s({give:[{required:!0,trigger:"blur",message:"请选择告警方式"}]});return t((async()=>{(async()=>{j.give=b.compData.sender,j.switch=!0})()})),_({onCancel:()=>b.compData.refreshEvent(),onConfirm:e=>{try{h.$refs.pushMsg.validate((async a=>{if(a){if(!j.give.length)return f.error("请选择告警方式");const a=await g({task_data:JSON.stringify({task_data:{tid:"7",type:"ssh_login",title:"SSH登录告警",status:j.switch,count:0,interval:600,project:""},sender:j.give,number_rule:{day_num:3,total:0},time_rule:{send_interval:0,time_range:[0,86399]}}),template_id:"7"});b.compData.refreshEvent&&b.compData.refreshEvent(),e(),f.request(a)}}))}catch(a){}}}),(e,a)=>{const s=u,t=p,c=d;return r(),i("div",v,[o(c,{ref:"pushMsg",model:n(j),"label-width":"80px",rules:n(y),onSubmit:a[1]||(a[1]=m((()=>{}),["prevent"]))},{default:l((()=>[o(t,{label:"告警方式",prop:"give"},{default:l((()=>[o(s,{modelValue:n(j).give,"onUpdate:modelValue":a[0]||(a[0]=e=>n(j).give=e),class:"!w-[28rem]",limit:["sms"]},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])}}}),[["__scopeId","data-v-fd89fc09"]]);export{h as default};
