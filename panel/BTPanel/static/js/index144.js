import{c as a,h as e,r as t,o as l,k as s,l as o,q as r,y as n,v as i,p as d,e as u,x as m,I as p,aX as c,J as v,P as _,a7 as f,a4 as y,A as b}from"./base-lib.js?v=1734676359";import{ab as x,aI as g,b as h,e as w}from"./utils-lib.js?v=1734676359";import{q as j}from"./validator.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./index91.js?v=1734676359";import"./column.js?v=1734676359";const V={class:"nps_survey_box"},q={"data-v-30672cd2":"",class:"text-[1.9rem] font-bold text-center text-[#000] mt-[2rem]"},D={class:"p-[2rem] flex flex-col items-center"},k={class:"w-[100%]"},I=w(a({__name:"index",emits:["close"],setup(a,{emit:w}){let I=e({mustData:"",data:[]});const z=t(),S=t([]),U=t([]),A={mustData:[{required:!0,message:"请输入内容",trigger:"blur"}]},{load:E}=h(),J=w,C=async()=>{if(await z.value.validate()){let e=E("正在提交问卷，请稍后..."),t={};for(let a=0;a<S.value.length;a++)t[S.value[a].id]=0==a?I.mustData:I.data[a];try{await g({questions:JSON.stringify(t),product_type:19,software_name:"Enterprise-Edition-Survey",rate:0}),e.close(),localStorage.setItem("ltd_nps","1"),j(),J("close")}catch(a){}finally{e.close()}}};return l((async()=>{const{data:a}=await x({product_type:19,version:-1});S.value=a;for(let e=0;e<a.length;e++)I.data.push("");U.value=a.slice(1)})),(a,e)=>{var t;const l=_,x=f,g=y,h=b;return s(),o("div",V,[e[2]||(e[2]=r("div",{class:"nps_survey_banner"},[r("span",null,[r("i"),n(),r("span",{style:{"vertical-align":"4px"}},"企业版用户专属调研")])],-1)),r("div",q,i(null==(t=d(S)[0])?void 0:t.hint),1),r("div",D,[r("div",k,[u(g,{ref_key:"formLabelAlignFrom",ref:z,"label-position":"top","label-width":"80px",model:d(I),rules:A},{default:m((()=>{var a;return[u(x,{label:null==(a=d(S)[0])?void 0:a.question,prop:"mustData"},{default:m((()=>[u(l,{type:"textarea",rows:3,maxlength:500,resize:"none",placeholder:"请留下您的建议",modelValue:d(I).mustData,"onUpdate:modelValue":e[0]||(e[0]=a=>d(I).mustData=a)},null,8,["modelValue"])])),_:1},8,["label"]),(s(!0),o(p,null,c(d(U),((a,e)=>(s(),v(x,{key:e,label:a.question},{default:m((()=>[u(l,{type:"textarea",rows:3,maxlength:500,resize:"none",placeholder:"请留下您的建议",modelValue:d(I).data[e+1],"onUpdate:modelValue":a=>d(I).data[e+1]=a},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label"])))),128))]})),_:1},8,["model"])]),u(h,{class:"w-[12.5rem] !mt-[2rem]",type:"primary",size:"large",onClick:C},{default:m((()=>e[1]||(e[1]=[n("提交")]))),_:1})])])}}}),[["__scopeId","data-v-3a5c711a"]]);export{I as default};
