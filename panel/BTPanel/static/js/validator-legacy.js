!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e){return function(e){if(Array.isArray(e))return e}(e)||a(e)||r(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e){return function(e){if(Array.isArray(e))return u(e)}(e)||a(e)||r(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){if(e){if("string"==typeof e)return u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function a(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function i(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */i=function(){return n};var t,n={},r=Object.prototype,a=r.hasOwnProperty,u=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function p(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(t){p=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var a=t&&t.prototype instanceof b?t:b,i=Object.create(a.prototype),o=new O(r||[]);return u(i,"_invoke",{value:T(e,n,o)}),i}function v(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=f;var d="suspendedStart",m="suspendedYield",h="executing",g="completed",y={};function b(){}function x(){}function w(){}var k={};p(k,c,(function(){return this}));var _=Object.getPrototypeOf,P=_&&_(_(D([])));P&&P!==r&&a.call(P,c)&&(k=P);var j=w.prototype=b.prototype=Object.create(k);function S(e){["next","throw","return"].forEach((function(t){p(e,t,(function(e){return this._invoke(t,e)}))}))}function L(t,n){function r(u,i,o,c){var s=v(t[u],t,i);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"==e(p)&&a.call(p,"__await")?n.resolve(p.__await).then((function(e){r("next",e,o,c)}),(function(e){r("throw",e,o,c)})):n.resolve(p).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,c)}))}c(s.arg)}var i;u(this,"_invoke",{value:function(e,t){function a(){return new n((function(n,a){r(e,t,n,a)}))}return i=i?i.then(a,a):a()}})}function T(e,n,r){var a=d;return function(u,i){if(a===h)throw Error("Generator is already running");if(a===g){if("throw"===u)throw i;return{value:t,done:!0}}for(r.method=u,r.arg=i;;){var o=r.delegate;if(o){var c=C(o,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=h;var s=v(e,n,r);if("normal"===s.type){if(a=r.done?g:m,s.arg===y)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(a=g,r.method="throw",r.arg=s.arg)}}}function C(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var u=v(a,e.iterator,n.arg);if("throw"===u.type)return n.method="throw",n.arg=u.arg,n.delegate=null,y;var i=u.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function D(n){if(n||""===n){var r=n[c];if(r)return r.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var u=-1,i=function e(){for(;++u<n.length;)if(a.call(n,u))return e.value=n[u],e.done=!1,e;return e.value=t,e.done=!0,e};return i.next=i}}throw new TypeError(e(n)+" is not iterable")}return x.prototype=w,u(j,"constructor",{value:w,configurable:!0}),u(w,"constructor",{value:x,configurable:!0}),x.displayName=p(w,l,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,p(e,l,"GeneratorFunction")),e.prototype=Object.create(j),e},n.awrap=function(e){return{__await:e}},S(L.prototype),p(L.prototype,s,(function(){return this})),n.AsyncIterator=L,n.async=function(e,t,r,a,u){void 0===u&&(u=Promise);var i=new L(f(e,t,r,a),u);return n.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(j),p(j,l,"Generator"),p(j,c,(function(){return this})),p(j,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=D,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,a){return o.type="throw",o.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var u=this.tryEntries.length-1;u>=0;--u){var i=this.tryEntries[u],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=a.call(i,"catchLoc"),s=a.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var u=r;break}}u&&("break"===e||"continue"===e)&&u.tryLoc<=t&&t<=u.finallyLoc&&(u=null);var i=u?u.completion:{};return i.type=e,i.arg=t,u?(this.method="next",this.next=u.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;I(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:D(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},n}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(t,n,r){return(n=function(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,n||"default");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function l(e,t,n,r,a,u,i){try{var o=e[u](i),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(r,a)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var u=e.apply(t,n);function i(e){l(u,r,a,i,o,"next",e)}function o(e){l(u,r,a,i,o,"throw",e)}i(void 0)}))}}System.register(["./utils-lib-legacy.js?v=1734676359","./base-lib-legacy.js?v=1734676359","./index-legacy91.js?v=1734676359","./column-legacy.js?v=1734676359"],(function(e,r){"use strict";var a,u,o,s,l,f,v,d,m,h,g,y,b,x,w,k,_,P,j,S,L,T,C,E,I,O,D,N,V,A,q,F,H,M,G,R,z,U,B,J,$,Y,Q,K,W,Z,X,ee,te,ne,re,ae,ue,ie,oe,ce,se,le,pe,fe,ve,de,me,he,ge,ye,be,xe,we,ke,_e,Pe,je,Se,Le,Te,Ce,Ee,Ie;return{setters:[function(e){a=e.n,u=e.d,o=e.ap,s=e.R,l=e.o,f=e.M,v=e.aq,d=e.S,m=e.H,h=e.u,g=e.l,y=e.ar,b=e.as,x=e.ah,w=e.at,k=e.a6,_=e.au,P=e.r,j=e.av,S=e.J,L=e.aw,T=e.ax,C=e.ay,E=e.az,I=e.I,O=e.af,D=e.p,N=e.aA,V=e.aB,A=e.t,q=e.aC,F=e.aD,H=e.aE,M=e.aF,G=e.aG,R=e.aH,z=e.z,U=e.aI,B=e.aJ,J=e.a4,$=e.b,Y=e.aK,Q=e.aL,K=e.aM,W=e.aN,Z=e.aO,X=e.aP,ee=e.aQ},function(e){te=e.e,ne=e.y,re=e.aw,ae=e.aj,ue=e.b4,ie=e.g,oe=e.s,ce=e.r,se=e.R,le=e.h,pe=e.b8,fe=e.i,ve=e.I,de=e.b,me=e.b9,he=e.a_,ge=e.aJ,ye=e.c,be=e.T,xe=e.U,we=e.o,ke=e.B,_e=e.C,Pe=e.p,je=e.k,Se=e.J,Le=e.w,Te=e.m},function(e){Ce=e._},function(e){Ee=e.o,Ie=e.c}],execute:function(){var Oe=function(e){return a.post("plugin/get_soft_list",{data:e,customType:"default"})},De=function(e){return a.post("plugin/remove_index",{data:e,customType:"default",check:"msg"})},Ne=function(e){return a.post("deployment/GetList",{data:e,customType:"default",check:"object"})},Ve=function(e){return a.post("deployment/DelPackage",{data:e,customType:"default",check:"msg"})},Ae=(e("aq",(function(){return a.post("site/GetPHPVersion",{customType:"default",check:"array"})})),e("au",(function(e){return a.post("site/AddSite",{data:e,customType:"default",check:"object"})})),e("ar",(function(e){return a.post("deployment/SetupPackage",{data:e,customType:"default",check:"msg"})})),function(e){return a.post("auth/create_plugin_other_order",{data:e,loading:"正在获取支付信息，请稍候...",customType:"default",check:"object"})}),qe=(e("Q",(function(e){return a.post("files/GetFileBody",{data:e})})),e("P",(function(e){return a.post("plugin/install_plugin",{data:e,check:"object"})}))),Fe=(e("R",(function(e){return a.post("ajax/GetOpeLogs",{data:e,check:"msg"})})),e("z",(function(e){return a.post("ftp/set_ftp_logs",{data:e,check:"msg"})})),e("U",(function(){return a.post("ajax/GetMemcachedStatus",{})})),e("T",(function(e){return a.post("ajax/SetMemcachedCache",{data:e,check:"msg"})})),e("X",(function(){return a.post("ajax/GetNginxStatus",{check:"object"})})),e("W",(function(){return a.post("config/GetNginxValue",{check:"array"})})),e("V",(function(e){return a.post("config/SetNginxValue",{data:e,check:"msg"})})),e("Y",(function(){return a.post("config/get_ols_value",{})})),e("Z",(function(e){return a.post("config/set_ols_value",{data:e,check:"msg"})})),e("N",(function(){return a.post("database/GetRunStatus",{check:"object"})})),e("D",(function(e){return a.post("database/GetErrorLog",{data:e,check:"string"})})),e("C",(function(e){return a.post("database/GetErrorLog",{data:e,check:"msg"})})),e("E",(function(e){return a.post("database/GetSlowLogs",{data:e,check:"msg"})})),e("G",(function(){return a.post("database/GetMySQLBinlogs",{check:"msg"})})),e("F",(function(e){return a.post("database/BinLog",{data:e,check:"msg"})})),e("A",(function(e){return a.post("database/ClearMySQLBinlog",{data:e,check:"msg"})})),e("M",(function(){return a.post("database/GetMySQLInfo",{check:"object"})})),e("L",(function(e){return a.post("database/SetDataDir",{data:e,check:"msg"})})),e("K",(function(e){return a.post("database/SetMySQLPort",{data:e,check:"msg"})})),e("J",(function(e){return a.post("database/mysql_oom_adj",{data:e,check:"msg"})})),e("O",(function(){return a.post("database/GetDbStatus",{check:"object"})})),e("B",(function(e){return a.post("database/SetDbConf",{data:e,check:"msg"})})),e("a3",(function(e){return a.post("ajax/GetPHPConfig",{data:e,check:"object"})})),e("a1",(function(e){return a.post("files/UninstallSoft",{data:e,check:"msg"})})),e("a2",(function(e){return a.post("files/InstallSoft",{data:e,check:"msg"})})),e("a5",(function(e){return a.post("config/GetPHPConf",{data:e})})),e("a4",(function(e){return a.post("config/SetPHPConf",{data:e,check:"msg"})})),e("ag",(function(e){return a.post("config/setPHPDisable",{data:e,check:"msg"})})),e("ah",(function(e){return a.post("config/getFpmConfig",{data:e,check:"object"})})),e("a6",(function(e){return a.post("config/setFpmConfig",{data:e,check:"msg"})})),e("af",(function(e){return a.post("ajax/GetPHPStatus",{data:e,check:"object"})})),e("$",(function(e){return a.post("ajax/GetFpmSlowLogs",{data:e,check:"object"})})),e("a0",(function(e){return a.post("ajax/GetFpmLogs",{data:e,check:"msg"})})),e("ai",(function(e){return a.post("config/GetSessionConf",{data:e,check:"object"})})),e("a9",(function(e){return a.post("config/GetSessionCount",{data:e,check:"object"})})),e("a7",(function(e){return a.post("config/SetSessionConf",{data:e,check:"msg"})})),e("a8",(function(){return a.post("config/DelOldSession",{check:"msg"})})),e("aa",(function(e){return a.post("ajax/GetPHPInfo",{data:e,check:"string"})})),e("aj",(function(e){return a.post("ajax/php_info",{data:e,check:"object"})})),e("ac",(function(e){return a.post("config/get_php_config",{data:e,check:"object"})})),e("ae",(function(e){return a.post("config/setPHPMaxSize",{data:e,check:"msg"})})),e("ad",(function(e){return a.post("config/setPHPMaxTime",{data:e,check:"msg"})})),e("ao",(function(){return a.post("ajax/GetApacheStatus",{check:"object"})})),e("ak",(function(e){return a.post("site/set_restart_task",{data:e,check:"msg"})})),e("am",(function(){return a.post("site/get_restart_task",{check:"msg"})})),e("an",(function(){return a.post("config/GetApacheValue",{check:"array"})})),e("al",(function(e){return a.post("config/SetApacheValue",{data:e,check:"msg"})})),function(e){return a.post("auth/get_order_stat",{data:e,check:"number"})}),He=(e("H",(function(e){return a.post("files/DeleteFile",{data:e,check:"msg"})})),e("ax",(function(){return a.post("deployment/check_project_env",{check:"object"})})),e("at",(function(e){return a.post("deployment/GetJarPath",{data:e,check:"object"})})),e("aw",(function(e){return a.post("/mod/java/project/create_project",{data:e,check:"msg",customType:"model"})})),e("av",(function(e){return a.post("/mod/php/php_async/create_project",{data:e,customType:"model",check:"msg"})})),e("ap",(function(){return a.post("/mod/java/project/get_system_info",{check:"msg",customType:"model"})})),e("as",(function(){return a.post("deployment/GetInLog",{check:"msg"})})),e("aF",(function(){return a.post("database/GetmvDataDirSpeed",{check:"object"})})),e("ab",(function(){return a.post("plugin/RegetCloudPHPExt",{check:"object"})})),function(e){var t=e.type;return{label:"app"===t?"软件名称":"名称",prop:"title",width:250,sortable:e.sortable,showOverflowTooltip:!1,render:function(n){var r,a="soft_ico/ico-"+((null===(r=n.name)||void 0===r?void 0:r.indexOf("php-"))>-1?"php":n.name)+".png",i="/dep_ico/".concat(n.name,".png"),o=n.title.indexOf("PHP-")>-1?"PHP":n.title;return te("div",{class:"whitespace-normal inline-flex items-center p-[2px] ".concat(n.setup?"cursor-pointer":""),title:n.setup?"打开插件":"".concat(o," ").concat(n.version),onClick:function(){return e.onClick(n)}},[te(u,{src:"app"===t?a:i,class:"".concat(10===n.type?"!h-[20px] !w-[22px]":""," soft-ico-img"),type:"img"},{error:function(){return te("img",{src:"/static/images/soft_ico/icon_plug.svg",alt:""},null)}}),te("span",null,["".concat(n.setup?o:n.title," ").concat(n.version||"")]),te("span",{class:"text-[#FC6D26] ".concat(n.is_beta?"":"hidden")},[ne("[测试版]")])])}}}),Me=function(){return{label:"开发商",width:80,render:function(e){return te("span",{class:"truncate inline-block w-[8rem]"},[ne(" "),e.author||"官方"])}}},Ge=function(e){return{label:"app"===e?"说明":"介绍",showOverflowTooltip:!1,render:function(e){return te("div",{class:"leading-[16px]",innerHTML:e.ps},null)}}},Re=function(e){var t=e.onClick;return{label:"评分",prop:"score",width:80,sortable:e.sortable,render:function(e){return e.hasOwnProperty("score")?te("span",{class:"bt-link inline-block w-[4rem]",onClick:function(){return t(e)}},[e.score?e.score:"无评分"]):te("span",null,[ne("--")])}}},ze=function(){return{label:"价格/天",width:70,render:function(e){return e.price>0?te("span",{class:"text-[#fc6d26]"},["≈".concat((e.price/("btiplibrary"===e.name?365:30)).toFixed(2),"元"),ne(" ")]):te("span",{class:"text-[#666]"},[ne("免费")])}}},Ue=function(e){return{label:"到期时间",width:130,showOverflowTooltip:!1,render:function(t){var n=t.endtime?s(t.endtime,"yyyy-MM-dd"):"--",r=te("span",{class:"bt-link",onClick:function(){return e.onClick(t)}},[ne("(续费)")]);return t.price>0?[0,-1].includes(t.endtime)?(r=te("i",null,null),n=0===t.endtime?"永久":"未开通"):[1,-2].includes(t.endtime)&&(n=t.endtime>1?n:"已到期"):(n="--",r=te("i",null,null)),te("span",null,[n,r])}}},Be=function(){return{label:"位置",width:50,render:function(e){return e.setup?te("span",{class:"flex"},[te("i",{title:"打开插件文件目录",class:"text-[#efc566] cursor-pointer svgtofont-folder-open !text-[1.8rem]",onClick:function(){return Ee({path:e.install_checks})}},null)]):te("span",null,[ne("--")])}}},Je=function(e){return{label:"首页显示",prop:"labels",width:80,render:function(t){return t.setup?te(ae,{size:"small",modelValue:t.index_display,"onUpdate:modelValue":function(e){return t.index_display=e},onChange:function(n){return e.onChange(t,n)}},null):te("span",null,[ne("--")])}}},$e=function(e){return{label:"操作",align:"right",width:175,showOverflowTooltip:!1,render:function(t,n){var r,a="soft_ico/ico-".concat(null!=t&&null!==(r=t.name)&&void 0!==r&&r.includes("php-")?"php":t.name,".png"),i=e,c="/dep_ico/".concat(t.name,".png");o(e)&&(i=e(t));var s=![5,6,13,7,8,12,10,11].includes(t.type);return te(re,{popperClass:"el-popover-shadow el-light-popover !py-[6px]",trigger:"hover",placement:"top-start",enterable:!1,"show-after":200,"hide-after":0,width:"auto"},{default:function(){return[te("div",{class:"flex items-center p-[2px] whitespace-nowrap"},[te(u,{src:s?c:a,class:"".concat(s?"":"!h-[20px] !w-[22px]"," soft-ico-img")},{error:function(){return te("img",{src:"/static/images/soft_ico/icon_plug.svg",alt:""},null)}}),te("span",null,["".concat(t.title," ").concat(t.version)]),te("span",{class:"text-[#FC6D26] ".concat(t.is_beta?"":"hidden")},[ne("[测试版]")])])]},reference:function(){return te("div",{class:"text-right w-full"},[i.map((function(e,n){if(!(e.isHide&&e.isHide(t)||"更新"===e.title&&"tomcat"===t.name))return te("span",{class:"soft-link"},[te("span",{class:"bt-link",title:e.title,onClick:function(n){return"pay"==e.type&&10===t.type?(0,rt().buyThirdPluginView)(t):(e.onClick(t,e.type,e.sourceId),!1)}},[e.title]),n!==i.length-1?te(Ce,null,null):""])}))])}})}}},Ye=function(){var e=p(i().mark((function e(t,n){var r,a,u,o,s,p,v;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r="i",e.t0=n,e.next="install"===e.t0?4:"update"===e.t0?6:"repair"===e.t0?8:10;break;case 4:return r="i",e.abrupt("break",10);case 6:return r="u",e.abrupt("break",10);case 8:return r="r",e.abrupt("break",10);case 10:if(10===t.type){e.next=16;break}return a=c(c({},t),{},{callback:function(){(0,ct().refreshRouteData)("1")}}),e.next=14,Vt({name:t.name,type:r,pluginInfo:a});case 14:e.next=33;break;case 16:return e.next=18,l({title:"安装第三方插件",content:"您真的要安装[".concat(t.title,"]插件吗？"),icon:"question-filled"});case 18:return u=f.load("正在获取插件信息，请稍后..."),e.next=21,Xe(t);case 21:if((o=e.sent).status){e.next=24;break}return e.abrupt("return",f.error(o.msg));case 24:return e.next=26,qe({sName:t.name,version:t.versions[0].m_version,min_version:t.versions[0].version});case 26:if(s=e.sent,p=s.data,u.close(),!p.hasOwnProperty("status")||p.status){e.next=31;break}return e.abrupt("return",f.error(p.msg));case 31:v=rt(),(0,v.installOtherEvent)(p);case 33:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Qe=function(){var e=p(i().mark((function e(t,n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return e.next=3,u={sName:t.name},a.post("plugin/add_index",{data:u,customType:"default",check:"msg"});case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,De({sName:t.name});case 8:e.t0=e.sent;case 9:return r=e.t0,f.request(r),e.abrupt("return",r);case 12:case"end":return e.stop()}var u}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ke=(e("u",(function(e){window.open(e)})),function(){var e=p(i().mark((function e(t){var a,u,o,s,l,p,f,h,g,y,b,x,w;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new v(t,{"list.data":[Array,"softList"],"list.page":d(),ltd:Number,pro:Number,search_history:[Array,"historyList"],m_list:Array,type:[Array,"typeList"],is_force:[Number,function(e){return{isForce:Boolean(e)}}]}).exportData(),u=a.softList,o=a.total,s=a.historyList,l=a.ltd,p=a.pro,f=a.m_list,h=a.typeList,g=a.isForce,e.next=3,m((function(){return r.import("./utils-lib-legacy.js?v=1734676359").then((function(e){return e.dF}))}),void 0,r.meta.url);case 3:return y=e.sent,b=y.useGlobalStore,x=b(),(0,x.setAuthState)([0,p,l]),w=[].concat(n(u),n(n(f).map((function(e){return c(c({},e),{},{is_docker:1})})))),e.abrupt("return",{softList:w,total:o,historyList:s,typeList:h,isForce:g});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),We=function(e){f.msg({dangerouslyUseHTMLString:!e,message:e?"软件列表，更新成功":"云端连接失败，暂时无法获取最新的软件列表，请检查网络情况或等待5-10分钟后重试",type:e?"success":"warning",duration:2e3})},Ze=function(e){window.open(e.preview_url)},Xe=function(){var e=p(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ae({pid:t.pid,cycle:"1",type:0});case 3:return n=e.sent,r=n.data,n.msg,n.status,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),et=function(){var e=p(i().mark((function e(t,n,r){var a,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h(),u=a.authExpirationTime,-2===Number(u.value)&&(r=32),e.next=4,Nt({disablePro:8!==t.type,compulsionLtd:8!==t.type,sourceId:r,plugin:!0,pluginInfo:t});case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),tt=function(e){ue().push({path:e.route})},nt=function(){var e=p(i().mark((function e(t){var n,r,a,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.setup){e.next=2;break}return e.abrupt("return");case 2:if(!([8,12].includes(t.type)&&t.endtime<0)){e.next=4;break}return e.abrupt("return",f.error("加载失败：该插件未购买或已到期"));case 4:if(n=["mysql","pureftpd","nginx","apache","tomcat","memcached","openlitespeed","phpmyadmin"].includes(t.name),r=-1!==t.name.indexOf("php-"),!n&&!r){e.next=9;break}return e.abrupt("return",At({pluginInfo:t}));case 9:return e.next=11,tn(t.name);case 11:if(e.sent){e.next=15;break}return e.abrupt("return",!1);case 15:sessionStorage.setItem("pluginViewInfo",JSON.stringify(c(c({},t),{},{built:t.built?"1":"0"}))),a=h(),(u=a.pluginInfo).value.visible=!0,u.value.id=t.name,u.value.name=t.title,u.value.callback=(null==t?void 0:t.callback)||null;case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),rt=e("t",ie("SOFT-OTHER-STORE",(function(){h();var e=oe(ct()),t=e.searchVal,n=e.historyList,a=e.showNpsCollect,u=e.isLoading,o=e.inputZipFlag,c=e.speedInstallView,s=ct(),l=s.scoreEvent,v=s.unInstallPlugin,d=ce(),k=ce(null),_=se([]),P=ce({total:0,page:1,row:12}),j=function(e){d.value=e,g({title:"安装第三方插件包",area:50,btn:["确定安装","取消"],component:function(){return m((function(){return r.import("./index-legacy132.js?v=1734676359")}),void 0,r.meta.url)}})},S=function(){var e=p(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d.value=t,k.value=g({title:"".concat(t.title,"购买"),area:50,component:function(){return m((function(){return r.import("./index-legacy133.js?v=1734676359")}),void 0,r.meta.url)}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){return se([He({type:"app",onClick:function(e){return nt(e)}}),Me(),Ge("app"),ze(),Ue({onClick:S}),Be(),Re({onClick:l}),Je({onChange:(e=p(i().mark((function e(t,n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe(t,n);case 2:e.sent.status||E("0");case 4:case"end":return e.stop()}}),e)}))),function(t,n){return e.apply(this,arguments)})}),$e((function(e){var t=[],n=!function(e){return e.endtime<0}(e);if(t.push({onClick:S,title:-1!==e.endtime?"立即续费":"立即购买",isHide:function(){return n}}),e.setup&&!n&&t.push({onClick:v,title:"卸载"}),!n)return t;if(e.setup){var r=rn(e);t.push({onClick:function(e){return Ye(e,"update")},title:"更新",isHide:function(){return!r}}),t.push({onClick:nt,title:"设置"}),t.push({onClick:v,title:"卸载"})}else t.push({onClick:Ye,title:"安装"});return t}))]);var e},T=function(){var e=p(i().mark((function e(){var r,o,c,s,l,p,f,v,d=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>0&&void 0!==d[0]?d[0]:{type:10,query:t.value,p:P.value.page,row:P.value.row,force:"0"},e.prev=1,r.query=t.value||"",e.next=5,Oe(r);case 5:return o=e.sent,c=o.data,e.next=9,Ke(c);case 9:s=e.sent,l=s.softList,p=s.total,f=s.historyList,(v=s.isForce)&&We(v),a.value=!l.length,_.value=l,n.value=f,P.value.total=p,e.next=24;break;case 21:e.prev=21,e.t0=e.catch(1),x(e.t0,"getSoftListData");case 24:return e.prev=24,u.value=!1,e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[1,21,24,27]])})));return function(){return e.apply(this,arguments)}}(),C=L(),E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0";C=L(),T({type:10,query:t.value,p:P.value.page,row:P.value.row,force:e})},I=le({bugTime:"1",qrcode:"https://www.bt.cn",qrcodeSize:160}),O=ce(0),D=ce("0"),N=ce(0),V=function(){var e=p(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return clearTimeout(N.value),D.value=(d.value.price*Number(I.bugTime)).toFixed(2),e.next=4,Ae({pid:d.value.pid,cycle:I.bugTime,type:-1===d.value.endtime?0:1});case 4:if(t=e.sent,null!=(n=t.data)&&n.msg.code){e.next=13;break}return f.request(n),e.next=10,k.value;case 10:return e.sent.unmount(),e.abrupt("return");case 13:I.qrcode=n.msg.code,O.value=n.msg.oid,A();case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=p(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:clearTimeout(N.value),N.value=setTimeout(p(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe({oid:O.value,type:-1===d.value.endtime?0:1});case 2:if(t=e.sent,0===t.data){e.next=13;break}return E("1"),e.next=8,k.value;case 8:return e.sent.unmount(),e.abrupt("return",f.success(-1!==d.value.endtime?"续费成功":"购买成功"));case 13:A();case 14:case"end":return e.stop()}}),e)}))),1e3);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=ce(!1),F=function(){var e=p(i().mark((function e(t){var n,r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,q.value=!0,e.next=4,w({plugin_name:d.value.name,tmp_path:d.value.tmp_path});case 4:n=e.sent,r=n.status,a=n.msg,o.value=!1,f.request({status:r,msg:null==a?void 0:a.replace(/<br>/g,"\n")}),c.value=!1,q.value=!1,E("0"),t(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}();return{searchVal:t,softTableList:_,tablePageConfig:P,TableColumn:C,importOtherEvent:function(){var e=document.createElement("input");e.type="file",e.style.display="none",e.accept=".zip,.tar.gz",e.id="update_zip",e.multiple=!0,e.addEventListener("change",p(i().mark((function t(){var n,r,a,u;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==(n=e.files||[]).length){t.next=3;break}return t.abrupt("return");case 3:return(r=new FormData).append("plugin_zip",n[0]),a={headers:{"Content-Type":"multipart/form-data","x-http-token":window.vite_public_request_token}},t.next=8,y.post("/plugin?action=update_zip",r,a);case 8:if(u=t.sent,!b("status",u.data)||!b("msg",u.data)||u.data.status){t.next=11;break}return t.abrupt("return",f.error(u.data.msg));case 11:j(u.data);case 12:case"end":return t.stop()}}),t)})))),e.click()},pageChangeEvent:function(e,t){P.value.page=e,P.value.row=t,E("0")},getSoftListData:T,refreshList:E,buyThirdPluginView:S,$reset:function(){t.value="",_.value=[],P.value.page=1},plugin:I,oid:O,price:D,buyPopup:k,getRenewOrder:V,getOrderStatus:A,$reset_buy:function(){clearTimeout(N.value),O.value=0},rowData:d,isShowSpeedVisible:q,installThirdPlugin:F,cancelInstall:function(){q.value=!1,f.error("已取消安装!")},installOtherEvent:j,$reset_install:function(){d.value={}}}}))),at=e("r",ie("SOFT-PLUGIN-STORE",(function(){var e=le({total:0,page:1,row:10}),t=pe("softTypeList",[]),a=ce([]),u=oe(ct()),o=u.isSpecial,l=u.searchVal,v=u.isLoading,d=u.tabTypeActive,y=u.showNpsCollect,b=u.historyList,w=ct().unInstallPlugin,j=h().payment,S=se(j.value.authType),L=se(j.value.authExpirationTime),T=le({upgrades:[],version:"",options:[],info:{}}),C=ce(),E=ce(),I=[{title:"5分钟极速响应",icon:"free-time-icon"},{title:"15天无理由退款",icon:"free-refund-icon"},{title:"30+款付费插件",icon:"free-plunge-icon"},{title:"20+企业版专享功能",icon:"free-function-icon"},{title:"1000条免费短信（年付）",icon:"free-message-icon"},{title:"2张SSL商用证书（年付）",icon:"free-certificate-icon"}],O=[{title:"更换授权IP",icon:"free-ip-icon"},{title:"客服优先响应",icon:"contact-customer"},{title:"15+款付费插件",icon:"free-fifteen-icon"},{title:"商用防火墙授权",icon:"icon-file-lock"}],D=fe((function(){return L.value>=0&&"free"!==S.value})),N=fe((function(){return 12===d.value})),V=fe((function(){return 8===d.value})),A=fe((function(){return D.value&&!(N.value&&"pro"===S.value)})),q=fe((function(){return!!(N.value||D.value&&"ltd"===S.value)||!(!V.value&&D.value&&"pro"===S.value)&&!V.value})),F=fe((function(){return s(L.value,"yyyy-MM-dd")})),H=fe((function(){var e=(new Date).getTime()/1e3,t=L.value-e;return Math.ceil(t/86400)})),M=fe((function(){return q.value?"#966000":"#f1ad29"})),G=fe((function(){return N.value||q.value?I:O})),R=fe((function(){return[{title:"全部",id:0},{title:"已安装",id:-1}].concat(n(t.value)).filter((function(e){return 11!=e.id&&10!=e.id}))})),z=function(){var e=p(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:-2===L.value&&(t=32),Nt({sourceId:t,disablePro:q.value,compulsionLtd:q.value});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var n=p(i().mark((function n(){var r,u,o,c,s,p,f,m,h,g=arguments;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=g.length>0&&void 0!==g[0]?g[0]:{type:d.value,query:l.value,p:e.page,row:e.row,force:"0"},n.prev=1,v.value=!0,r.query=l.value||"",n.next=6,Oe(r);case 6:return u=n.sent,o=u.data,n.next=10,Ke(o);case 10:c=n.sent,s=c.softList,p=c.total,f=c.historyList,m=c.typeList,h=c.isForce,"1"==r.force&&We(h),y.value=!p,a.value=s,b.value=f,t.value=m,e.total=p,n.next=28;break;case 25:n.prev=25,n.t0=n.catch(1),x(n.t0,"getSoftListData");case 28:return n.prev=28,v.value=!1,n.finish(28);case 31:case"end":return n.stop()}}),n,null,[[1,25,28,31]])})));return function(){return n.apply(this,arguments)}}(),B=function(){return se([He({type:"app",onClick:function(e){return nt(e)}}),Me(),Ge("app"),ze(),Ue({onClick:function(e){10!=e.type&&et(e,"",34)}}),Be(),{label:"状态",prop:"gateway",width:50,render:function(e){if(5!==e.type)return te("span",null,[ne("--")]);var t="phpmyadmin"===e.name||e.status?"svgtofont-icon-start text-[#20a53a]":"svgtofont-icon-stop text-danger";return e.setup?te("span",{class:"flex"},[te("i",{class:t},null)]):te("span",null,[ne("--")])}},Je({onChange:(e=p(i().mark((function e(t,n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe(t,n);case 2:e.sent.status||K("0");case 4:case"end":return e.stop()}}),e)}))),function(t,n){return e.apply(this,arguments)})}),$e((function(e){var t=[],n=k(an(e.task)),r=nn(e,S.value),a=k(null==e?void 0:e.preview_url)&&""!=e.preview_url&&!r,u=!!e.route,i=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!1};return t.push({title:e,onClick:n,isHide:r})};if(!r)return i("立即跳转",tt,(function(){return!u})),i(an(e.task),It,(function(){return!n})),i("预览",Ze,(function(){return!a})),i(-1!==e.endtime?"立即续费":"立即购买",et,(function(){return r})),i("卸载",w,(function(){return!(!r&&e.setup)})),t;var o=rn(e),c=5!==e.type;return e.setup?(i("更新",(function(e){return Ye(e,"update")}),(function(){return!o})),i("设置",nt),i("修复",W,(function(){return!c})),i("卸载",w)):e.is_docker?i("立即前往",(function(){P.push({name:"docker"})})):i("安装",Ye),t}))]);var e},J=function(){var e=p(i().mark((function e(){var t,n,r,a,u,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_({plugin_name:C.value.name,show:1});case 2:(t=e.sent).status?(T.upgrades=t.data,n=T.upgrades.at(-1)||{beta:!1},r=n.beta?n:{},a=T.upgrades.at(0),T.info=C.value.is_beta?r:a,T.info||(u=C.value.version,T.info={beta:2,m_version:u.split[0],update_msg:0,update_time:0,version:u.split[1]}),o&&(T.options=T.upgrades.map((function(e){return{label:e.m_version+"."+e.version+(e.beta?"bate":"Stable"),value:e.m_version+"."+e.version}})),T.version="".concat((null===(c=T.options.at(0))||void 0===c?void 0:c.value)||""))):f.error(t.msg);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=p(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.value;case 2:e.sent.unmount(),Ye(C.value,"repair");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=p(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ye(c(c({},C.value),{version:T.version}),"repair");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=B(),K=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0";Q=B(),U({type:d.value,query:l.value,p:e.page,row:e.row,force:t})},W=function(e){C.value=e,E.value=g({title:"".concat(e.title,"v").concat(e.version,"-修复插件"),area:50,component:function(){return m((function(){return r.import("./index-legacy134.js?v=1734676359")}),void 0,r.meta.url)}})};return{TableColumn:Q,searchVal:l,tablePage:e,softTableList:a,typeList:R,refreshPluginList:K,getSoftListData:U,openNpsEvent:function(){return Ot({type:16,id:993,isNoRate:!0})},toggleClassEvent:function(t){d.value=t,sessionStorage.setItem("SOFT-PLUGIN-TYPE",String(t)),e.page=1,K("0")},isPay:D,isActiveLtd:N,isActivePro:V,isActivePay:A,isShowType:q,isExpTime:F,isDistanceDays:H,isShowColor:M,recomList:G,pluginPayEvent:z,plugin:T,helpList:[{content:"无法修复？请尝试切换下版本。"}],getPluginInfo:J,cutVersionEvent:Y,repairPluginEvent:$,softData:C,$reset:function(){l.value="",a.value=[],t.value=[],e.page=1,C.value={},T.options=[],T.version="",T.upgrades=[],Q.value=[]}}}))),ut=e("v",ie("SOFT-DEPLOY-STORE",(function(){var e,t=oe(ct()),a=t.tabDeployActive,u=t.isLoading,o=t.searchVal,c=ct().scoreEvent,s=ce(null),v=ce(),d=ce(),h=ce({total:0,page:1,row:10}),b=pe("deployTypeList",[]),w=se([]),k=se([]),_=ce("all"),P=fe((function(){return[{title:"全部",tid:0}].concat(n(b.value))})),T=function(e){s.value=e||null,g({title:"".concat(e?"更新":"导入","一键部署项目包").concat(e?"【".concat(e.title,"】"):""),area:60,btn:["提交","取消"],component:function(){return m((function(){return r.import("./import-legacy.js?v=1734676359")}),void 0,r.meta.url)},showClose:!0})},C=function(){var e=p(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.official?window.open(t.official):location.reload();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e;k.value=(e={list:w.value,limit:h.value.row,p:h.value.page},L(e.limit,e.list)[e.p-1]||[])},I=function(){var e=p(i().mark((function e(t){var n,r,a,o,c,s,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.search||delete t.search,u.value=!0,e.next=5,Ne(t);case 5:n=e.sent,r=n.data,a=n.status,o=j(r),c=r.list,s=r.dep_type,1===Number(t.force)&&We(a),l="all"===_.value?"":_.value,o("list")&&S(c)&&(w.value=l?c.filter((function(e){switch(l){case"php":return null===e.project_type||e.project_type===l||0===e.project_type&&0===e.install_type;case"php_async":return e.project_type===l||0===e.project_type&&1===e.install_type;case"java":return e.project_type===l||1===e.project_type;default:return e.project_type===l}})):c,h.value.total=w.value.length,E()),o("dep_type")&&S(s)&&(b.value=s,b.value.push({tid:100,title:"其他"})),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),x(e.t0);case 19:return e.prev=19,u.value=!1,e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[0,16,19,22]])})));return function(t){return e.apply(this,arguments)}}(),O=se([{type:"selection",width:36,isHide:100!=a.value},He({type:"deploy",sortable:!0,onClick:function(e){return en({pluginInfo:e})}}),{label:"版本",prop:"version"},Ge("deploy"),{label:"项目类型",width:90,render:function(e){var t={php_async:"异步项目",java:"Java项目",default:"PHP项目"};return t[e.project_type]||t.default}},{label:"支持版本",render:function(e){var t=e.php,n=e.java;return t?te("span",{title:"支持的PHP版本：".concat(t)},[ne("PHP版本："),t]):te("span",{title:"支持的JDK版本：".concat(n)},[ne("JDK版本："),n])}},{label:"提供者",prop:"author",render:function(e){var t="--";if("宝塔"===e.author)t=e.title;else t=e.author;return te("span",{class:"bt-link",onClick:function(){return C(e)}},[t])}},Re({onClick:function(e){return c(e)},sortable:!0}),$e((function(e){var t=[{onClick:D,title:"一键部署"}];return 0===e.id&&(t.push({onClick:T,title:"更新"}),t.push({onClick:A,title:"删除"})),t}))]),D=function(){var e=p(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.value=t,v.value=g({title:"【".concat(t.title,"】一键部署"),area:60,btn:["提交","取消"],component:function(){return m((function(){return r.import("./index-legacy135.js?v=1734676359").then((function(e){return e.i}))}),void 0,r.meta.url)},showClose:!0}),e.abrupt("return",v.value);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=[{label:"删除自定义项目",value:"delete",event:(e=p(i().mark((function e(t,n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(){var e=p(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve({dname:t.name});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=3,t({title:"批量删除",content:"即将删除所选中的项目，是否继续操作?",column:[{prop:"name",label:"项目名称"},Ie()],onConfirm:function(){var e=p(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(r);case 2:return I({type:a.value,search:o.value}),e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});case 3:case"end":return e.stop()}}),e)}))),function(t,n){return e.apply(this,arguments)})}],V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0";I({type:a.value,search:o.value,force:e})},A=function(){var e=p(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l({title:"删除自定义项目",type:"calc",icon:"warning-filled",content:"您真的要删除【".concat(t.name,"】吗？")});case 3:return e.next=5,Ve({dname:t.name});case 5:(n=e.sent).status?(f.success(n.msg),V()):f.error(n.msg),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),q=le({name:"",title:"",php:"",enable_functions:"",version:"",ps:"",file:null,project_type:"php",mysql_version:"",java_version:""}),F=ce("未选择任何文件"),H=ce(),M=[{content:function(){return te(ve,null,[te("span",{class:"text-danger"},[ne("请上传zip格式的项目包")]),ne(",里面必需包含auto_install.json配置文件")])}}],G=function(){var e=p(i().mark((function e(t){var n,r,u,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.value.validate();case 3:if(q.file){e.next=6;break}return f.error("请上传项目包"),e.abrupt("return");case 6:if(q.file.name.endsWith(".zip")){e.next=9;break}return f.error("请上传zip格式的项目包"),e.abrupt("return");case 9:return(n=new FormData).append("name",q.name),n.append("title",q.title),"php"===q.project_type?(n.append("php",q.php),n.append("enable_functions",q.enable_functions)):(n.append("mysql_version",q.mysql_version),n.append("java_version",q.java_version),n.append("project_type",q.project_type)),n.append("version",q.version),n.append("ps",q.ps),n.append("dep_zip",q.file),r={headers:{"Content-Type":"multipart/form-data","x-http-token":window.vite_public_request_token}},u=f.load("正在导入项目，请稍后..."),e.next=20,y.post("/deployment?action=AddPackage",n,r);case 20:o=e.sent,u.close(),o.data.status?(h.value.page=1,a.value=100,V(),t(),f.success(o.data.msg)):f.error(o.data.msg),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(0);case 28:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(t){return e.apply(this,arguments)}}();return{searchVal:o,typeList:P,projectType:_,projectTypeOptions:[{label:"全部项目",value:"all"},{label:"PHP项目",value:"php"},{label:"异步项目",value:"php_async"},{label:"Java项目",value:"java"}],TableColumn:O,deployShowTableList:k,deployTableListRef:d,TableBatchOptions:N,tablePageConfig:h,getDeployListData:I,pageChangeEvent:function(e,t){h.value.page=e,h.value.row=t,E()},importProjectEvent:T,toggleClassEvent:function(e){a.value=e,sessionStorage.setItem("SOFT-DEPLOY-TYPE",String(e)),h.value.page=1,h.value.total=0,I({type:e,search:o.value}),O.value[0].isHide=100!=a.value},onChangeProjectType:function(e){h.value.page=1,I({type:a.value,search:o.value,force:"0"})},refreshDeployList:V,fileName:F,helpList:M,cmdForm:q,cmdRules:{name:[{required:!0,message:"请输入项目英文名称",trigger:["blur"]}],title:[{required:!0,message:"请输入项目中文名称",trigger:["blur"]}],php:[{required:!0,message:"请输入项目PHP版本",trigger:["blur"]}],version:[{required:!0,message:"请输入项目版本",trigger:["blur"]}],ps:[{required:!0,message:"请输入项目简介",trigger:["blur"]}],java_version:[{required:!0,message:"请输入JDK版本",trigger:["blur"]}],mysql_version:[{required:!0,message:"请输入Mysql版本",trigger:["blur"]}]},cmdFormRef:H,projectTypeRadio:[{label:"PHP",value:"php"},{label:"Java",value:"java"}],changeProjectType:function(e){H.value.resetFields(),q.project_type=e},importPlugin:function(){var e=document.createElement("input");e.type="file",e.style.display="none",e.accept=".zip",e.id="update_zip",e.multiple=!0,e.addEventListener("change",p(i().mark((function t(){var n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==(n=e.files||[]).length){t.next=3;break}return t.abrupt("return");case 3:F.value=n[0].name,q.file=n[0];case 5:case"end":return t.stop()}}),t)})))),e.click()},onConfirm:G,initImportForm:function(){if(s.value){var e=s.value,t=e.name,n=e.title,r=e.php,a=e.enable_functions,u=e.version,i=e.ps,o=e.project_type,c=e.java,l=e.mysql;Object.assign(q,{name:t,title:n,php:r||"",enable_functions:a||"",version:u,ps:i,project_type:"java"===o?"java":"php",mysql_version:l||"",java_version:c||""})}},oneDeploy:v,rowData:s,$reset:function(){o.value="",_.value="all",w.value=[],k.value=[],h.value={total:0,page:1,row:10}},$reset_import_form:function(){s.value=null,F.value="未选择任何文件",Object.assign(q,{name:"",title:"",php:"",enable_functions:"",version:"",ps:"",file:null,project_type:"php",mysql_version:"",java_version:""})}}}))),it=ue(),ot=de(),ct=e("S",ie("SOFT-STORE",(function(){var e=h().mainWidth,t=fe((function(){var e;return(null===(e=de())||void 0===e?void 0:e.name)||"plugin"})),u=sessionStorage.getItem("SOFT-PLUGIN-TYPE"),o=ce(u?Number(u):0),s=sessionStorage.getItem("SOFT-DEPLOY-TYPE"),v=ce(s?Number(s):0),d=ce(!1),y=ce(!1),b=ce(!1),x=ce(!1),w=ce(!1),k=ce([]),_=se([]),P=se([]),j=ce(),L={name:"get_soft_list",key:"get_soft_list"},O=ce(),D=fe((function(){return"deployment"!==t.value})),N=fe((function(){return"plugin"===t.value})),V=ce(),A=ce(),q=ce(),F=fe((function(){var e,t=null===(e=V.value)||void 0===e?void 0:e.name;return"total"===t||"rsync"===t||"syssafe"===t||"tamper_proof"===t})),H=ce(!1),M=function(){var e=p(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.value;case 2:(n=e.sent)&&n.unmount();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e,t;null!==(e=j.value)&&void 0!==e&&e.blur&&j.value.blur(),null!==(t=j.value)&&void 0!==t&&t.hidePopover&&j.value.hidePopover()},R=function(){var e;null!==(e=j.value)&&void 0!==e&&e.showPopover&&j.value.showPopover()},z=function(){var e=p(i().mark((function e(){var n,r,a,u,o,c,s,l,p,f,v,d=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=d.length>0&&void 0!==d[0]?d[0]:"0",r=d.length>1?d[1]:void 0,"other"===t.value?(a=rt(),u=oe(a),o=u.tablePageConfig,r&&(o.value.page=1),a.refreshList(n)):"plugin"===t.value?(c=at(),s=oe(c),l=s.tablePage,r&&(l.value.page=1),c.refreshPluginList(n)):"deployment"===t.value&&(p=ut(),f=oe(p),v=f.tablePageConfig,r&&(v.value.page=1),p.refreshDeployList(n));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=p(i().mark((function e(t){var n,r=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.length>1&&void 0!==r[1]?r[1]:22,G(),en({pluginName:t,source:n});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=p(i().mark((function e(){var t,n,r,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.post("plugin/push_plugin",{customType:"default",check:"array"});case 2:t=e.sent,n=t.data,S(n)&&2===n.length&&(_.value=(null===(r=n[0])||void 0===r?void 0:r.plugin)||[],P.value=(null===(u=n[1])||void 0===u?void 0:u.plugin)||[]);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=p(i().mark((function e(t,n){var r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l({icon:"warning-filled",title:"删除搜索历史记录",content:"删除该条搜索历史【"+t+"】，是否继续？"});case 2:return r=T("正在删除指定搜索历史记录，请稍后..."),e.prev=3,e.next=6,C(c(c({},{val:t}),L));case 6:(a=e.sent).status&&k.value.splice(n,1),f.request(a),R(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3);case 15:return e.prev=15,r.close(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[3,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}(),$=function(){var e=p(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l({icon:"warning-filled",title:"清空搜索历史",content:"清空所有搜索历史记录，是否继续？"});case 2:return t=T("正在清空搜索历史记录，请稍后..."),e.prev=3,e.next=6,E(L);case 6:(n=e.sent).status&&(k.value=[]),f.request(n),R(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3);case 15:return e.prev=15,t.close(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[3,12,15,18]])})));return function(){return e.apply(this,arguments)}}(),Y=pe("softList",[]),Q=fe((function(){return e.value<=400?1:Math.floor((e.value-200)/120)})),K=function(){var e=p(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.post("plugin/get_usually_plugin",{customType:"default",check:"array"});case 2:t=e.sent,n=t.data,Y.value=n;case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=ce(!1),Z=ce(5),X=se([{score:5,name:"力荐"},{score:4,name:"好"},{score:3,name:"一般"},{score:2,name:"差"},{score:1,name:"非常差"}]),ee=le({count:0,total:0,avg:0,rate:0,starList:[]}),te=function(){var e=p(i().mark((function e(){var t,n,r,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,W.value=!0,e.next=4,i={pid:V.value.id,p:1},a.post("plugin/get_score",{data:i,customType:"default",check:"array"});case 4:if((t=e.sent).status){for(n=t.data.split.reverse(),r=t.data.total,ee.avg=Number(((1*n[4]+2*n[3]+3*n[2]+4*n[1]+5*n[0])/r).toFixed(1)),ee.count=V.value.count,ee.total=r,ee.rate=0!==r?Number((100*Number(((n[0]+n[1])/r).toFixed(2))).toFixed(0)):0,u=0;u<5;u++)ee.starList.push(Number((100*Number((n[u]/r).toFixed(2))).toFixed(0)));W.value=!1}e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0);case 11:case"end":return e.stop()}var i}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=p(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n={pid:V.value.id,num:Z.value,ps:"用户未做任何评价"},a.post("plugin/set_score",{data:n,customType:"default",check:"msg"});case 3:(t=e.sent).status?(z(),M(A),f.success(t.msg)):f.error(t.msg),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0);case 10:case"end":return e.stop()}var n}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=p(i().mark((function e(){var t,n,r,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=V.value.version,n=0;case 2:if(!(n<V.value.versions.length)){e.next=10;break}if(!V.value.versions[n].setup||!V.value.version.includes(V.value.versions[n].m_version)){e.next=7;break}return(t=V.value.versions[n].m_version).indexOf(".")<0&&(t+="."+V.value.versions[n].version),e.abrupt("break",10);case 7:n++,e.next=2;break;case 10:if(r=V.value.name,!F){e.next=27;break}if(!H.value){e.next=24;break}return e.next=15,i={soft_name:r},a.post("plugin/save_plugin_settings",{data:i,customType:"default",check:"msg"});case 15:if(!(u=e.sent).status){e.next=20;break}return e.abrupt("return",ae(r,t));case 20:f.error(u.msg);case 21:return e.abrupt("return",u.status);case 24:return e.abrupt("return",ae(r,t));case 25:e.next=28;break;case 27:return e.abrupt("return",ae(r,t));case 28:case"end":return e.stop()}var i}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=p(i().mark((function e(t,n){var r,u,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i={sName:t,version:n},a.post("plugin/uninstall_plugin",{data:i,loading:"正在卸载，请稍候...",customType:"default",check:"msg"});case 2:return(o=e.sent).status?(f.success(o.msg),z()):f.msg({dangerouslyUseHTMLString:!0,message:o.msg,type:"error",duration:0,showClose:!0}),null!==(r=V.value)&&void 0!==r&&r.callBack&&(null===(u=V.value)||void 0===u||u.callBack(o.status)),e.abrupt("return",o.status);case 6:case"end":return e.stop()}var i}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ue=function(){var e=p(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ot.name!==t.value){e.next=2;break}return e.abrupt("return");case 2:it.push({name:t.value});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(e){"refreshSoftTable"===e.data&&z()};return{tabActive:t,historyList:k,tabTypeActive:o,tabDeployActive:v,showNpsCollect:d,isLoading:y,inputZipFlag:b,speedInstallView:x,isResetDeployPage:w,isPluginView:N,redirectRouter:ue,cutTabsEvent:function(e){t.value=e,I("/soft/"+e)},initSoftView:function(){window.addEventListener("message",ie)},$reset:function(){window.removeEventListener("message",ie)},refreshRouteData:z,searchRef:j,softSearchList:_,softRecommendList:P,handleOpenPluginEvent:U,getHotSoft:B,clearSoftHistory:function(e){k.value.splice(e,1),k.value=n(k.value)},clearFindHistoryEvent:J,inputHistoryEvent:function(e){O.value=e,G(),z("0")},clearAllHistoryEvent:$,initHistory:function(){0===k.value.length&&G(),Kt({promises:[B],delay:100})},$reset_history:function(){O.value="",k.value=[],_.value=[],P.value=[],d.value=!1},showRefresh:D,triggerHideEvent:G,triggerShowEvent:R,openNPS:function(){Ot({type:16,id:993,isNoRate:!0})},searchVal:O,initRecently:function(){Kt({promises:[K],delay:500})},handleOpenRecentEvent:function(e){en({pluginName:e.name,type:"default"})},getHistoryInfo:K,softNum:Q,softList:Y,$reset_recently:function(){Y.value=[]},scoreEvent:function(e){V.value=e,A.value=g({title:"【".concat(e.title,"】评分"),area:55,component:function(){return m((function(){return r.import("./index-legacy136.js?v=1734676359")}),void 0,r.meta.url)}})},loading:W,pluginData:V,pluginScore:ee,score:Z,getComment:function(e){return X.value.filter((function(t){return t.score===e}))[0].name},getDetail:te,onSubmitScore:ne,$reset_score:function(){V.value={},ee.starList=[]},unInstallPlugin:function(e){V.value=e,q.value=g({showFooter:!0,title:"卸载",area:45,component:function(){return m((function(){return r.import("./index-legacy137.js?v=1734676359")}),void 0,r.meta.url)}})},onUnInstall:re,unInstall:ae,isSpecial:F,checked:H}}))),st=Object.freeze(Object.defineProperty({__proto__:null,SOFT_STORE:ct,useSoftStore:function(){var e=ct();return c(c({},e),oe(e))}},Symbol.toStringTag,{value:"Module"}));e("aG",st);var lt=function(e,t){return new Promise((function(e,n){g({title:"编译安装",area:45,btn:["提交并".concat(t),"取消"],component:function(){return m((function(){return r.import("./compile-install-legacy.js?v=1734676359")}),void 0,r.meta.url)},onConfirm:function(){return e(!0)},onCancel:function(){return e(!1)}})}))},pt=(e("y",(function(e){return g({title:"".concat(e.title,"- 更新日志"),area:52,component:function(){return m((function(){return r.import("./history-version-legacy.js?v=1734676359")}),void 0,r.meta.url)},compData:{name:e.name,title:e.title}})})),h()),ft=pt.isRefreshSoftList,vt=(pt.isUpdatePayment,function(e,t,n){var r,a,u,i=e.title,o=e.name,c=e.ps,s=e.type,l=e.dependnet,p=e.other_php,f=e.versions,v=e.version,d=o.split("-")[0];n.title=i,n.name=o,n.isBeta=!!e.is_beta,n.ps=c,n.type=s,n.call=t,n.isInstall="i"===t,n.isUpdate="u"===t,n.isRepair="r"===t,n.isPHPInstall="php"===d&&"i"===t,n.isBeta=!!e.is_beta,n.isSystem=5===s,n.isPHPInstall="php"===d,n.isMysqlUpdate="mysql"===d&&("r"===t||"u"===t),n.isSpecialPlugins=["apache","nginx","mysql"].includes(o),n.introduction=(u=e.introduction)?u.split(";").map((function(e){return e.split("|")})):[],n.compile=["nginx","apache","mysql","php"].includes(d),n.currentVersion=v||"",n.otherPHP=p||[],n.versions=f||[],n.dependnet=l,n.isDependnet=!(null!=l&&null!==(r=l.need)&&void 0!==r&&r.length||null!=l&&null!==(a=l.selected)&&void 0!==a&&a.length)}),dt=function(){var e=p(i().mark((function e(t,n,r){var a,u,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!me(t)||!b("name",t)){e.next=3;break}return vt(t,n,r),e.abrupt("return");case 3:return a=f.load("正在获取插件信息，请稍候..."),e.next=6,O({sName:t});case 6:u=e.sent,o=u.data,a.close(),vt(o,n,r);case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),mt=function(){var e=p(i().mark((function e(t,n,r){var a,u,o,c,l,p,v,d,m;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=D(r),u=t.versions[r||0],a&&t.isSystem&&(o=t.versions.findIndex((function(e){return t.currentVersion.indexOf(e.m_version)>-1})))>=0&&(u=t.versions[o]),!t.isPHPInstall){e.next=17;break}if(a&&(r=t.otherPHP.findIndex((function(e){return e.name===t.name}))),u=t.otherPHP[r||0],t.name===u.name){e.next=16;break}return c=f.load("正在获取PHP版本信息，请稍候..."),e.next=10,O({sName:u.name});case 10:l=e.sent,p=l.data,u=p.versions[0],c.close(),e.next=17;break;case 16:u=t.versions[0];case 17:if(t.isSystem||(n.updateTime=u.update_time?s(u.update_time,"yyyy/MM/dd"):"无",n.isBeta=!!u.beta,n.updateMsg=u.update_msg||"暂无内容"),n.mVersion=u.m_version,!t.isSystem||!t.isUpdate||t.isPHPInstall){e.next=30;break}return e.next=22,Tt(t);case 22:if((m=e.sent).length){e.next=26;break}return n.fullVersion="版本错误",e.abrupt("return");case 26:n.version=null===(v=m[0])||void 0===v?void 0:v.version,n.fullVersion="".concat(null===(d=m[0])||void 0===d?void 0:d.m_version,".").concat(m[0].version),e.next=32;break;case 30:n.version=u.version,n.fullVersion="".concat(u.m_version).concat(u.version?"."+u.version:"");case 32:return e.abrupt("return",n);case 33:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),ht=function(e,t){var n=[],r=e.versions,a=e.isPHPInstall,u=e.otherPHP;a?(u.map((function(e,t){n.push({title:e.name,key:t,disabled:e.status,data:e})})),t.value=u.findIndex((function(t){return t.name===e.name})),t.version=n):(r.map((function(t,r){var a=D(t.beta)?" Beta":" Stable",u=e.name+" ";e.isSystem?a="":u="",n.push({title:"".concat(u).concat(t.m_version).concat(""===t.version?"":".".concat(t.version)).concat(a),key:r,data:t})})),t.value=0,t.version=n)},gt=function(e,t){return{sName:e.name,version:t.mVersion,min_version:t.version}},yt=function(){var e=p(i().mark((function e(t){var n,r,a,u,o,s=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:1,r=s.length>2?s[2]:void 0,e.next=4,Ct(t);case 4:if(!e.sent){e.next=7;break}return e.abrupt("return");case 7:if(0!==n){e.next=14;break}return e.next=10,bt(t,t.upgrade?"更新":"安装");case 10:if(e.sent){e.next=13;break}return e.abrupt("return");case 13:r();case 14:return a=f.load("正在添加安装任务，请稍候..."),e.prev=15,e.next=18,qe(c(c({},t),{},{type:n}));case 18:if(u=e.sent,o=u.data,!b("status",o)||!b("msg",o)||o.status){e.next=23;break}return f.msg({dangerouslyUseHTMLString:!0,message:'<div style="line-height:22px;">'.concat(o.msg,"</div>"),type:"error",duration:2e3}),e.abrupt("return");case 23:ft.value=!0,It(),setTimeout((function(){f.request(o)}),1e3),e.next=31;break;case 28:e.prev=28,e.t0=e.catch(15);case 31:return e.prev=31,a.close(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[15,28,31,34]])})));return function(t){return e.apply(this,arguments)}}(),bt=function(){var e=p(i().mark((function e(t,n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lt(t.sName,n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),xt=function(){var e=p(i().mark((function e(t,n){var r,a,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,jt({pluginTitle:n.title,pluginName:t.sName,fullVersion:n.fullVersion});case 3:return r=e.sent,e.next=6,qe(c({},t));case 6:if(a=e.sent,u=a.data,r.unmount(),!b("status",u)||!b("msg",u)||u.status){e.next=12;break}return f.msg({message:'<div style="line-height:22px;">'.concat(u.msg,"</div>"),type:"error",duration:0,showClose:!0,dangerouslyUseHTMLString:!0}),e.abrupt("return",!1);case 12:return e.abrupt("return",u);case 15:e.prev=15,e.t0=e.catch(0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,n){return e.apply(this,arguments)}}(),wt=function(){var e=p(i().mark((function e(t,n,r){var a,u,o,c,s,l=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>3&&void 0!==l[3]?l[3]:"",u={i:"安装",r:"修复",u:"更新"},e.next=4,St({title:"正在".concat(u[r],"插件：").concat(a,",请稍候..."),msg:"正在安装插件，请稍候..."});case 4:return o=e.sent,e.next=7,V({plugin_name:t,tmp_path:n,install_opt:r});case 7:c=e.sent,f.request(c),s=oe(ct()),s.inputZipFlag.value=!0,o.unmount(),"/soft/plugin"!==location.pathname?window.location.reload():ft.value=!0;case 13:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),kt=function(){var e=p(i().mark((function e(t,n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xt(t,n);case 2:(r=e.sent)&&wt(t.sName,r.tmp_path,"i",n.title);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_t=function(){var e=p(i().mark((function e(t,n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xt(t,n);case 2:(r=e.sent)&&wt(t.sName,r.tmp_path,"u",n.title);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Pt=function(){var e=p(i().mark((function e(t,n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xt(t,n);case 2:(r=e.sent)&&wt(t.sName,r.tmp_path,"r",n.title);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),jt=function(e){return function(e){var t=e.pluginTitle,n=e.pluginName,a=e.fullVersion;return oe(Et()).downLoadPopup.value=g({area:45,component:function(){return m((function(){return r.import("./download-speed-legacy.js?v=1734676359")}),void 0,r.meta.url)},compData:{pluginTitle:t,pluginName:n,fullVersion:a}})}({pluginTitle:e.pluginTitle,pluginName:e.pluginName,fullVersion:e.fullVersion})},St=function(e){return function(e){return oe(Et()).compData.value={speedConfig:e},g({title:e.title||"正在执行安装脚本，请稍候...",area:[50,26.4],component:function(){return m((function(){return r.import("./speed-install-legacy.js?v=1734676359")}),void 0,r.meta.url)},compData:e})}(e)},Lt=function(){var e=p(i().mark((function e(t,n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isMysqlUpdate){e.next=3;break}return e.next=3,l({title:"更新[MySQL]",isHtml:!0,content:'<div class="!text-[#666]">更新过程可能会导致服务中断,您真的现在就将[MySQL]更新到['.concat(n,']吗?</div>\n\t\t\t\t<div class="text-danger">更新数据库有风险,建议在更新前,先备份您的数据库</div>\n\t\t\t\t<div class="text-danger">若您的是云服务器,强烈建议您在更新前做一个快照</div>\n\t\t\t\t<div class="text-danger">建议您在服务器负载闲时进行软件更新</div>'),type:"calc"});case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Tt=function(){var e=p(i().mark((function e(t){var n,r,a,u,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],a=null===(n=t.currentVersion)||void 0===n||null===(n=n.match(/(\d+\.\d+)/))||void 0===n?void 0:n.at(1),t.isMysqlUpdate?(o=null===(u=t.currentVersion.match(/(greatsql_\d+\.\d+|mariadb_\d+\.\d+|AliSQL)/))||void 0===u?void 0:u.at(1),r=t.versions.filter((function(e){return e.m_version===o||e.m_version===a}))):r=t.versions.filter((function(e){return e.m_version===a})),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ct=function(){var e=p(i().mark((function e(t){var n,r,a,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:if(n=e.sent,r=n.data,b("task",r)){e.next=6;break}return e.abrupt("return",!1);case 6:if(a=r.task,!(t.sName.indexOf("php-")>-1)){e.next=12;break}if(!a.some((function(e){var n=e.name.match(/-(.*?)\]/)&&e.name.match(/-(.*?)\]/)[1]===t.version,r=e.name.indexOf("php-")>-1;return n&&r}))){e.next=12;break}return f.error("正在安装相同版本的php插件，不可重复安装!"),e.abrupt("return",!0);case 12:if(!(u=["nginx","apache","openlitespeed"]).includes(t.sName)){e.next=18;break}if(!a.some((function(e){return e.name.match(/\[(.*?)-/)&&u.includes(e.name.match(/\[(.*?)-/)[1])}))){e.next=18;break}return f.error("正在安装同类型软件nginx,apache或openLiteSpeed，不可重复安装!"),e.abrupt("return",!0);case 18:return e.abrupt("return",!1);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Et=e("I",ie("INSTALL-STORE",(function(){var e,t=h().installInfo,n=ce(),r=ce(),a=[[7,"免","border-[#E1E1E1] text-[#9a9a9a]"],[8,"专","border-[#F9EE9E] text-[#FFC82F]"],[12,"企","border-[#E8D6B3] text-[#A3782F]"]],u=he({title:"",name:"",ps:"",type:0,call:"i",isBeta:!1,isSystem:!1,isInstall:!1,isUpdate:!1,isRepair:!1,isSpecialPlugins:!1,isPHPInstall:!1,isMysqlUpdate:!1,otherPHP:[],compile:!1,currentVersion:"",versions:[],label:[],introduction:[],isDependnet:!1,dependnet:{need:[],selected:[]}}),o=le({fullVersion:"",mVersion:"",version:"",isBeta:!1,status:!1,updateTime:"",updateMsg:""}),s=he({value:0,version:[]}),v=ce(!1),d=ce([]),m=ce(!0),g=le({progress:0,done:0,total:0,estimated:0,speed:0}),y=["安装完成","Successify","complete"],x=ce(null===(e=n.value)||void 0===e||null===(e=e.speedConfig)||void 0===e?void 0:e.msg),w=ce(null),k=ce({args_name:"",ps:"",args:"",init:"#在编译前执行的shell脚本内容，通常为第三方模块的依赖安装和源码下载等前置准备"}),P=ce(null),j=ce(!1),S=fe((function(){return u.title.indexOf("PHP-")>-1?"PHP":u.title})),L=fe((function(){return a.find((function(e){return e[0]===u.type}))||[]})),T=fe((function(){var e;return"soft_ico/ico-"+((null===(e=u.name)||void 0===e?void 0:e.indexOf("php-"))>-1?"php":u.name)+".png"})),C=fe((function(){return A(g.done)})),E=fe((function(){return A(g.total)})),I=fe((function(){return A(g.speed)})),O=ce([{label:"模块名称",prop:"name"},{label:"模块描述",prop:"ps"},{label:"是否启用",render:function(e){return te(ge("el-switch"),{modelValue:e.checked,"onUpdate:modelValue":function(t){return e.checked=t},onChange:function(){B()}},null)}},{label:"操作",align:"right",render:function(e){return[te("div",{class:"flex items-center justify-end"},[te("span",{class:"bt-link",onClick:function(){return U(e)}},[ne("删除")])])]}}]),D=ce([{name:"模块名称",ps:"模块描述"}]),N=se({args_name:[{required:!0,message:"请输入模块名称",trigger:"blur"}],args:[{required:!0,message:"请输入模块参数",trigger:"blur"}]}),V=function(){var e=p(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{P.value.validate(function(){var e=p(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=9;break}return j.value=!1,e.next=4,H(c({name:u.name},k.value));case 4:n=e.sent,f.request(n),z(),e.next=10;break;case 9:return e.abrupt("return",f.error("请填写表单必填项"));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(t){}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=p(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M({name:u.name});case 3:t=e.sent,D.value=t.data.args,n=t.data.config.split("\n"),D.value.forEach((function(e){n.includes(e.name)?e.checked=!0:e.checked=!1})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=p(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l({content:"确认删除模块【 ".concat(t.name,"】 吗？"),title:"提示",icon:"warning-filled"});case 3:return e.next=5,q({name:u.name,args_name:t.name});case 5:n=e.sent,z(),f.request(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=p(i().mark((function e(){var t,n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.load("正在设置模块，请稍后..."),e.prev=1,n=D.value.filter((function(e){return e.checked})).map((function(e){return e.name})).join("\n"),e.next=5,F({name:u.name,args_names:n});case 5:r=e.sent,t.close(),f.request(r),z(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1);case 14:return e.prev=14,t.close(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=p(i().mark((function e(){var t,n,r,a,u,o,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=oe(ct()),n=t.inputZipFlag,r=t.speedInstallView,e.prev=1,e.next=4,R({num:10,filename:"/tmp/panelShell.pl"});case 4:if(u=e.sent,o=u.msg.trim().split("\n"),c=y.some((function(e){return o[o.length-1].includes(e)})),"Successify"!==o[o.length-1]&&!0!==n.value&&!c){e.next=12;break}return n.value=!1,r.value=!1,pe(),e.abrupt("return",!1);case 12:x.value=u.msg,null!==(a=w.value)&&void 0!==a&&a.scrollHeight&&(w.value.scrollTop=w.value.scrollHeight),setTimeout((function(){J()}),1e3),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=p(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G({plugin_name:u.name});case 3:t=e.sent,(n=t.data).status&&(g.done=n.down_size,g.total=n.total_size,g.progress=n.down_pre,g.estimated=n.need_time,g.speed=n.sec_speed),m.value&&setTimeout((function(){m.value&&$()}),400),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),Y=function(e){s.value=e,mt(u,o,s.value)},Q=function(){var e=p(i().mark((function e(){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v.value=!0,e.next=4,_({plugin_name:n.value.name});case 4:t=e.sent,r=t.data,d.value=r,v.value=!1,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=p(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.value;case 2:null==(n=e.sent)||n.unmount();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=p(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=gt(u,o),0!==t&&K(),!u.isSystem){e.next=7;break}return e.next=6,yt(n,t,(function(){return K()}));case 6:return e.abrupt("return",e.sent);case 7:return e.next=9,kt(n,{title:u.title,fullVersion:o.fullVersion});case 9:Z(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),Z=function(){n.value.softData&&n.value.softData.callBack&&n.value.softData.callBack()},X=function(){var e=p(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t=gt(u,o),K(),Pt(t,{title:u.title,fullVersion:o.fullVersion})}catch(n){}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=p(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(t=gt(u,o)).upgrade=t.version,!u.isSystem&&K(),!u.isSystem){e.next=10;break}return e.next=7,Lt(u,o.fullVersion);case 7:return e.next=9,yt(t,0,(function(){return K()}));case 9:return e.abrupt("return",e.sent);case 10:_t(t,{title:u.title,fullVersion:o.fullVersion}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=p(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.value.name){e.next=2;break}return e.abrupt("return");case 2:return t=b("name",n.value.pluginInfo)?n.value.pluginInfo:n.value.name,e.next=5,dt(t,n.value.type,u);case 5:return e.next=7,ht(u,s);case 7:return e.next=9,mt(u,o);case 9:n.value.name&&"mysql"===n.value.name&&u.isInstall&&s.version.forEach((function(e,t){/^5\.7\.\d+/.test(e.title.replace("mysql","").trim())&&(s.value=t,Y(t))}));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=ce(),ue=function(){var e=p(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.value=!1,e.next=3,r.value;case 3:e.sent.unmount();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=ce(),pe=function(){ae.value&&clearTimeout(ae.value),ie.value&&clearTimeout(ie.value)};return{compData:n,init:re,pluginModuleInfo:u,pluginActiveInfo:o,versionModel:s,cutPluginActiveInfo:Y,install:W,repair:X,update:ee,clearTimeoutAll:pe,pluginImgSrc:T,pluginTitle:S,pluginLabel:L,pluginPictureSrc:function(e){var t=u.name.includes("php-")?"php":u.name,n=u.introduction[e];return"https://www.bt.cn/Public/new/plugin/".concat(t,"/").concat(n[1])},getHistoryVersion:Q,historyLoad:v,historyData:d,getSoftDownloadSpeed:$,downloadSpeed:g,doneSize:C,totalSize:E,speedSize:I,closeInstall:Z,initDownLoad:function(){ae.value=setTimeout((function(){$()}),100)},downLoadPopup:r,closeDownLoad:ue,initSpeed:function(){var e=oe(ct()).speedInstallView;ie.value=setTimeout((function(){J(),e.value=!0}),100)},speedMsg:x,getCustomModuleData:z,config:{mode:"ace/mode/nginx",theme:"ace/theme/chrome",wrap:!0,showInvisibles:!1,showFoldWidgets:!1,useSoftTabs:!0,tabSize:2,showPrintMargin:!1,readOnly:!1,fontSize:"12px"},customForm:k,customVisible:j,clearAddForm:function(){k.value={args_name:"",ps:"",args:"",init:"#在编译前执行的shell脚本内容，通常为第三方模块的依赖安装和源码下载等前置准备"}},rules:N,setCustomModuleData:B,tableColumn:O,handleAddCustomModule:function(){j.value=!0},customData:D,submitCustomModule:V}})));e("x",(function(){return oe(Et())}))();var It=e("m",(function(){return g({title:"消息盒子",area:[72,56],component:function(){return m((function(){return r.import("./index-legacy138.js?v=1734676359")}),void 0,r.meta.url)}})})),Ot=(e("w",p(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g({title:"重启服务器或者面板",area:[33,11],component:function(){return m((function(){return r.import("./index-legacy139.js?v=1734676359")}),void 0,r.meta.url)}}));case 1:case"end":return e.stop()}}),e)})))),e("a",(function(){return g({title:"设置菜单显示隐藏",area:[35,40],component:function(){return m((function(){return r.import("./index-legacy140.js?v=1734676359")}),void 0,r.meta.url)}})})),e("q",(function(){return g({title:!1,area:20,component:function(){return m((function(){return r.import("./index-legacy141.js?v=1734676359")}),void 0,r.meta.url)}})})),e("n",(function(){return g({area:60,component:function(){return m((function(){return r.import("./index-legacy142.js?v=1734676359")}),void 0,r.meta.url)}})})),e("e",(function(e){return g({area:52,compData:e,component:function(){return m((function(){return r.import("./index-legacy143.js?v=1734676359")}),void 0,r.meta.url)}})}))),Dt=(e("aA",(function(){return g({area:60,component:function(){return m((function(){return r.import("./index-legacy144.js?v=1734676359")}),void 0,r.meta.url)},cancel:function(){return p(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U({questions:JSON.stringify({25:"用户未填写任何信息"}),product_type:19,software_name:"Enterprise-Edition-Survey",rate:0});case 2:case"end":return e.stop()}}),e)})))()}})})),e("s",(function(e){return g({title:e.title+"配置",area:50,compData:e,component:function(){return m((function(){return r.import("./index-legacy145.js?v=1734676359")}),void 0,r.meta.url)}})}))),Nt=(e("f",(function(e){return g({area:[75,66.4],compData:e,component:function(){return m((function(){return r.import("./index-legacy146.js?v=1734676359")}),void 0,r.meta.url)}})})),e("b",p(i().mark((function e(){var t,n,a,u,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){return m((function(){return r.import("./index-legacy92.js?v=1734676359")}),void 0,r.meta.url)},e.prev=1,n=ce({client:0,login:0}),e.next=5,z();case 5:if(!(a=e.sent).status){e.next=17;break}if(0===(null===(u=a.data)||void 0===u?void 0:u.login)){e.next=17;break}n.value.client=a.data.client,n.value.login=a.data.login,e.t0=null===(o=a.data)||void 0===o?void 0:o.client,e.next=1===e.t0?13:2===e.t0?15:17;break;case 13:return t=function(){return m((function(){return r.import("./tencent-bind-user-legacy.js?v=1734676359")}),void 0,r.meta.url)},e.abrupt("break",17);case 15:return t=function(){return m((function(){return r.import("./ali-bind-user-legacy.js?v=1734676359")}),void 0,r.meta.url)},e.abrupt("break",17);case 17:return e.abrupt("return",g({area:40,component:t,compData:{authData:n.value}}));case 21:return e.prev=21,e.t1=e.catch(1),e.abrupt("return",g({area:40,component:function(){return m((function(){return r.import("./index-legacy92.js?v=1734676359")}),void 0,r.meta.url)}}));case 24:case"end":return e.stop()}}),e,null,[[1,21]])})))),e("o",(function(){return g({area:20,component:function(){return m((function(){return r.import("./index-legacy147.js?v=1734676359")}),void 0,r.meta.url)}})})),e("l",(function(){return g({area:20,component:function(){return m((function(){return r.import("./index-legacy148.js?v=1734676359")}),void 0,r.meta.url)}})})),e("p",(function(e){return g({area:[100,72],compData:c(c({},e),{},{disablePro:!!D(e.disablePro)||e.disablePro}),component:function(){return m((function(){return r.import("./index-legacy149.js?v=1734676359")}),void 0,r.meta.url)}})}))),Vt=e("h",function(){var e=p(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=h(),n.installInfo.value=g({area:63,compData:t,component:function(){return m((function(){return r.import("./index-legacy150.js?v=1734676359")}),void 0,r.meta.url)}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),At=(e("j",(function(e){var t=e.title,n=e.type,a=e.callback;return g({title:t,area:50,compData:{type:n,callback:a},component:function(){return m((function(){return r.import("./index-legacy151.js?v=1734676359")}),void 0,r.meta.url)}})})),e("d",function(){var e=p(i().mark((function e(t){var n,r,a,u,o,c,s,l,p,f,v,d,m,h;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=void 0===n?999:n,a=t.type,u=t.name,o=t.softName,c=void 0===o?"panel":o,s=t.description,l=t.isNoRate,p=void 0!==l&&l,f=t.title,v=t.isCard,d=void 0===v||v,m=t.isShowPhone,h=void 0===m||m,e.abrupt("return",Ot({id:r,type:a,name:u,softName:c,description:s,isNoRate:p,title:f,isCard:d,isShowPhone:h}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),function(){var e=p(i().mark((function e(t){var n,r,a,u,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.pluginInfo){e.next=7;break}return e.next=4,O({sName:t.name});case 4:a=e.sent,u=a.data,t.pluginInfo=u;case 7:if(o={phpmyadmin:function(){return qt()},tomcat:function(){return Mt(r)},pureftpd:function(){return Ft(r)},memcached:function(){return Gt(r)},nginx:function(){return Rt(r)},mysql:function(){return Ht(r)},openlitespeed:function(){return zt(r)},php:function(){return Ut(r)},apache:function(){return Bt(r)}},!(null!==(n=r.name)&&void 0!==n&&n.includes("php-")||o[r.name])){e.next=13;break}if(!r.name.includes("php-")){e.next=11;break}return e.abrupt("return",o.php());case 11:if(!o[r.name]){e.next=13;break}return e.abrupt("return",o[r.name]());case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),qt=function(){return g({isAsync:!0,title:"phpMyAdmin",area:74,component:function(){return m((function(){return r.import("./index-legacy152.js?v=1734676359")}),void 0,r.meta.url)}})},Ft=function(e){return g({isAsync:!0,title:"Ftp管理",area:[100,56],component:function(){return m((function(){return r.import("./index-legacy153.js?v=1734676359")}),void 0,r.meta.url)},compData:e,showClose:!0})},Ht=function(e){return g({isAsync:!0,title:"Mysql",area:[80,65],component:function(){return m((function(){return r.import("./index-legacy154.js?v=1734676359")}),void 0,r.meta.url)},compData:e,showClose:!0})},Mt=function(e){return g({isAsync:!0,title:"Tomcat管理",area:[64,54],component:function(){return m((function(){return r.import("./index-legacy155.js?v=1734676359")}),void 0,r.meta.url)},compData:e,showClose:!0})},Gt=function(e){return g({isAsync:!0,title:"Memcached管理",area:[64,54],component:function(){return m((function(){return r.import("./index-legacy156.js?v=1734676359")}),void 0,r.meta.url)},compData:e,showClose:!0})},Rt=function(e){return g({isAsync:!0,title:"Nginx",area:[68,58],component:function(){return m((function(){return r.import("./index-legacy157.js?v=1734676359")}),void 0,r.meta.url)},compData:e,showClose:!0})},zt=function(e){return g({isAsync:!0,title:"OpenLiteSpeed",area:[64,54],component:function(){return m((function(){return r.import("./index-legacy158.js?v=1734676359")}),void 0,r.meta.url)},compData:e,showClose:!0})},Ut=function(e){return g({isAsync:!0,title:"PHP-".concat(e.version,"管理"),area:[80,64],component:function(){return m((function(){return r.import("./index-legacy159.js?v=1734676359")}),void 0,r.meta.url)},compData:e,showClose:!0})},Bt=function(e){return g({isAsync:!0,title:"Apache",area:[68,58],component:function(){return m((function(){return r.import("./index-legacy160.js?v=1734676359")}),void 0,r.meta.url)},compData:e,showClose:!0})},Jt=(e("c",function(){var e=p(i().mark((function e(t){var n,a,u,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,a=t.options,u=t.request,o=t.selectList,e.next=3,g({title:"批量设置".concat(n),area:"40",compData:{name:n,options:a,selectList:o,request:u},showFooter:!0,component:function(){return m((function(){return r.import("./index-legacy161.js?v=1734676359")}),void 0,r.meta.url)}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e("aD",(function(){g({area:35,component:function(){return m((function(){return r.import("./index-legacy162.js?v=1734676359")}),void 0,r.meta.url)}})})),e("k",function(){var e=p(i().mark((function e(t){var n,a,u,o,c,s,l,p,f=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.length>1&&void 0!==f[1]?f[1]:"editor",a=f.length>2&&void 0!==f[2]?f[2]:"",e.next=4,m((function(){return r.import("./store-legacy.js?v=1734676359").then((function(e){return e.aS}))}),void 0,r.meta.url);case 4:return u=e.sent,e.next=7,m((function(){return r.import("./store-legacy.js?v=1734676359").then((function(e){return e.aR}))}),void 0,r.meta.url);case 7:if(o=e.sent,c=o.useCreateEditorTabs,s=o.editorExample,l=u.FilesAceEditor,p={path:t,title:t.split("/").pop(),type:n,mode:a},!s.value){e.next=15;break}return c(p),e.abrupt("return");case 15:l(p);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e("ay",ye({__name:"index",props:be({version:{},allAlarm:{type:Boolean,default:!1},multiple:{type:Boolean,default:function(){return!0}},limit:{default:function(){return[]}},options:{},isDefault:{type:Boolean,default:!1}},{modelValue:{},modelModifiers:{}}),emits:be(["change"],["update:modelValue"]),setup:function(e,t){var r=t.expose,a=t.emit,u=h(),o=u.getOldSenderAlarmListInfo,s=u.push,l=e,f=$(),v=f.load,d=(f.error,ce(!1)),m=xe(e,"modelValue"),g=a,y=se([]),b=function(e){g("change",e)},x=function(){var e=p(i().mark((function e(){var t,r,a,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d.value=!0,e.next=4,o();case 4:t=[],r=i().mark((function e(){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object.prototype.hasOwnProperty.call(s.value.old,a)&&(n=s.value.old[a]).setup&&!l.limit.includes(n.name)&&(r=!("{}"===JSON.stringify(n.data)),n.isSetAlarm=r,t.push({label:n.title,value:n.name,disabled:!n.setup||!r,isSetAlarm:!r,render:function(){var e=!n.setup||!r;return te("div",{class:"flex justify-between"},[te("span",null,[n.title]),te("span",{class:"".concat(e?"text-danger":"hover:text-primary"," cursor-pointer mr-[4px]")},[te("span",{onClick:function(e){e.stopPropagation(),w(n)}},[e?"[未配置]":"[已配置]"])])])}}));case 1:case"end":return e.stop()}}),e)})),e.t0=i().keys(s.value.old);case 7:if((e.t1=e.t0()).done){e.next=12;break}return a=e.t1.value,e.delegateYield(r(),"t2",10);case 10:e.next=7;break;case 12:y.value=t,l.options&&(y.value=[].concat(n(l.options),t)),l.allAlarm&&y.value.unshift({label:"全部",value:"all",disabled:!1,isSetAlarm:!1,render:function(){return te("div",{class:"flex justify-between"},[ne("全部"),te("span",null,null)])}}),Array.isArray(m.value)&&m.value.length?m.value.forEach((function(e){y.value.find((function(t){return t.value===e}))||(m.value=m.value.filter((function(t){return t!==e})))})):k(m.value)&&m.value&&(y.value.find((function(e){return e.value===m.value}))||(m.value="")),l.isDefault&&!m.value&&(u=t.filter((function(e){return!e.disabled}))).length&&(m.value=l.multiple?[u[0].value]:u[0].value),e.next=22;break;case 19:e.prev=19,e.t3=e.catch(0);case 22:return e.prev=22,d.value=!1,e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[0,19,22,25]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=p(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[{title:"钉钉机器人配置",type:"dingding"},{title:"飞书机器人配置",type:"feishu"},{title:"发送者配置",type:"mail"},{title:"企业微信机器人配置",type:"weixin"},{title:"微信公众号",type:"wx_account"}].find((function(e){return e.type===t.name}))||{title:"",type:"",data:{}},"wx_account"!==t.name||t.setup){e.next=5;break}return e.next=5,_(t.name);case 5:Dt(c(c({},n),{},{callback:x}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=p(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v("正在安装模块，请稍后..."),e.prev=1,e.next=4,B({name:t});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1);case 9:return e.prev=9,n.close(),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[1,6,9,12]])})));return function(t){return e.apply(this,arguments)}}();return we(x),r({refresh:x}),function(e,t){var n=J,r=ke("bt-loading");return _e((je(),Se(n,{modelValue:m.value,"onUpdate:modelValue":t[0]||(t[0]=function(e){return m.value=e}),multiple:e.multiple,options:Pe(y),placeholder:"请选择告警方式",onChange:b},null,8,["modelValue","multiple","options"])),[[r,Pe(d)]])}}}))),$t=e("_",ye({__name:"index",props:be({multiple:{type:Boolean,default:function(){return!0}},limit:{default:function(){return[]}}},{modelValue:{},modelModifiers:{}}),emits:be(["change"],["update:modelValue"]),setup:function(e,t){var n=t.expose,r=t.emit,a=h(),u=a.getSenderAlarmListInfo,o=a.push,s=e,l=ce(!1),f=xe(e,"modelValue"),v=r,d=se([]),m=function(e){v("change",e)},g=[{title:"钉钉",type:"dingding"},{title:"飞书",type:"feishu"},{title:"邮箱",type:"mail"},{title:"企业微信",type:"weixin"},{title:"微信公众号",type:"wx_account"},{title:"短信通知",type:"sms"},{title:"自定义消息通道",type:"webhook"}],y=function(){var e=p(i().mark((function e(){var t,n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=[].concat(g),l.value=!0,e.next=5,u(!1);case 5:d.value=[],n=o.value.config.filter((function(e){return!s.limit.includes(e.sender_type)})),r=t.filter((function(e){return!n.some((function(t){return t.sender_type===e.type}))&&!s.limit.includes(e.type)})),n.forEach((function(e){var t,n=g.find((function(t){return t.type===e.sender_type})),r=null!==(t=e.data)&&void 0!==t&&t.title?e.data.title+(e.data.title?" (".concat((null==n?void 0:n.title)||"",")"):""):n.title;if("sms"===e.sender_type){if(!e.data.total)return!1;r="短信通知 (".concat(e.data.count,"条)")}d.value.push({label:r||n.title,value:e.id,disabled:!1,render:function(){return te("div",{class:"flex justify-between"},[te("span",{class:"mr-[10px]"},[r]),te("span",{class:"hover:text-primary cursor-pointer mr-[4px]"},[te("span",{onClick:function(t){t.stopPropagation(),b(c(c({},n),{},{data:e,name:e.sender_type,setup:!0,isSetAlarm:!0}))}},["sms"!==e.sender_type?"[已配置]":""])])])}})})),r.forEach((function(e){d.value.push({label:e.title,value:"",disabled:!0,render:function(){return te("div",{class:"flex justify-between"},[te("span",null,[e.title]),te("span",{class:"text-danger cursor-pointer mr-[4px]",onClick:function(t){t.stopPropagation(),b(c(c({},e),{},{setup:!1,name:e.type,data:{},isSetAlarm:!1}))}},["sms"!==e.type?"[未配置]":""])])}})})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0);case 15:return e.prev=15,l.value=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,12,15,18]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=p(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[{title:"钉钉机器人配置",type:"dingding"},{title:"飞书机器人配置",type:"feishu"},{title:"邮箱配置",type:"mail"},{title:"企业微信机器人配置",type:"weixin"},{title:"微信公众号",type:"wx_account"},{title:"自定义消息通道",type:"webhook"},{title:"短信通知",type:"sms"}].find((function(e){return e.type===t.name}))||{title:"",type:"",data:{}},Dt(c(c({},n),{},{data:t}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();n({refresh:y}),we(y);var x=fe((function(){var e;return null!==(e=s.limit)&&void 0!==e&&e.length?d.value.filter((function(e){var t,n=null===(t=g.find((function(t){var n;return(null===(n=e.label)||void 0===n?void 0:n.includes(t.title))||"function"==typeof e.render&&e.render().toString().includes(t.title)})))||void 0===t?void 0:t.type;return!s.limit.includes(n)})):d.value}));return Le((function(){return s.limit}),(function(e){if(null!=e&&e.length&&f.value)if(Array.isArray(f.value)){var t=x.value.map((function(e){return e.value}));f.value=f.value.filter((function(e){return t.includes(e)}))}else x.value.some((function(e){return e.value===f.value}))||(f.value=void 0)}),{deep:!0}),function(e,t){var n=J,r=ke("bt-loading");return _e((je(),Se(n,{modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=function(e){return f.value=e}),multiple:e.multiple,options:Pe(x),onChange:m,placeholder:"请选择告警方式"},null,8,["modelValue","multiple","options"])),[[r,Pe(l)]])}}})),Yt=$(),Qt=function(){var e=p(i().mark((function e(n,r){var a,u,o,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n.length){e.next=2;break}return e.abrupt("return",r&&r(!0));case 2:return a=t(n),u=a[0],o=a.slice(1),e.prev=3,e.next=6,u();case 6:c=e.sent,r&&r(c),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3);case 13:return e.abrupt("return",Qt(o,r));case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,n){return e.apply(this,arguments)}}(),Kt=e("g",function(){var e=p(i().mark((function e(t){var n,r,a,u,o,c,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.promises,r=t.callback,a=t.delay,u=t.isRouter,o=t.check,c=window.location.pathname,s=function(){return new Promise((function(e){setTimeout((function(){u||(u=window.location.pathname),u&&!o?e(Q(u,c)):o&&o()?e(!0):e(!1)}),a||0)}))},e.next=5,s();case 5:if(e.sent){e.next=8;break}return e.abrupt("return",r&&r(!0));case 8:return e.abrupt("return",Qt(n,r));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Wt=function(){var e=p(i().mark((function e(t){var n,r,a,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=t.pluginName,r=t.pluginInfo,!D(n)||!D(r)){e.next=5;break}return Yt.error("缺少参数: options.name 或 options.pluginInfo"),e.abrupt("return",Promise.reject(new Error("缺少参数: options.name 或 options.pluginInfo")));case 5:if(!K(r)){e.next=7;break}return e.abrupt("return",r);case 7:return k(r)&&(n=r),e.next=10,O({sName:n});case 10:return a=e.sent,u=a.data,r=u,e.abrupt("return",r);case 16:return e.prev=16,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}(),Zt=function(){var e=p(i().mark((function e(t){var n,r,a,u,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=h(),!("ltd"===(r=n.payment).value.authType&&r.value.authExpirationTime>0)){e.next=3;break}return e.abrupt("return",{isPay:!0,type:"ltd",pluginInfo:K(t.pluginInfo)?t.pluginInfo:t.pluginName});case 3:return e.next=5,Wt(t);case 5:if(a=e.sent,u=a.endtime,o=a.type,!("pro"===r.value.authType&&r.value.authExpirationTime>0&&8===o)){e.next=9;break}return e.abrupt("return",{isPay:!0,type:"pro",pluginInfo:a});case 9:if(!(u>=0)){e.next=11;break}return e.abrupt("return",{isPay:!0,type:"plugin",pluginInfo:a});case 11:return e.abrupt("return",{isPay:!1,type:"free",pluginInfo:a});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Xt=function(){var e=p(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Vt(c(c({},t),{},{name:t.name||t.pluginInfo.name,type:"i"}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),en=e("i",function(){var e=p(i().mark((function e(t){var n,r,a,u,o,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t.name||t.softData)&&(t.pluginName=(null==t?void 0:t.name)||"",t.pluginInfo=(null==t?void 0:t.softData)||t.pluginInfo),e.next=3,Wt(t);case 3:return n=e.sent,e.next=7,Zt({pluginInfo:n});case 7:if(r=e.sent,r.isPay||![8,12].includes(n.type)){e.next=12;break}return e.abrupt("return",Nt(c({disablePro:8!==n.type,compulsionLtd:8!==n.type,sourceId:t.source},null!=t&&t.plugin?{pluginInfo:n}:{})));case 12:if(n.setup){e.next=15;break}return e.abrupt("return",Xt({pluginInfo:n}));case 15:if(a=["mysql","pureftpd","nginx","apache","tomcat","memcached","openlitespeed","phpmyadmin"].includes(n.name),u=-1!==n.name.indexOf("php-"),!a&&!u){e.next=22;break}return e.abrupt("return",At({pluginInfo:n}));case 22:return e.next=24,tn(n.name);case 24:if(e.sent){e.next=28;break}return e.abrupt("return",!1);case 28:sessionStorage.setItem("pluginViewInfo",JSON.stringify(c(c({},n),{},{built:t.pluginInfo?"1":"0"}))),o=h(),(s=o.pluginInfo).value.visible=!0,s.value.id=n.name,s.value.name=n.title,s.value.callback=(null==t?void 0:t.callback)||null;case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),tn=function(){var e=p(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y(t);case 3:if(n=e.sent,!(r=n.data).msg||-1===r.msg.indexOf("您无操作此插件的权限")){e.next=9;break}return Yt.request(r),e.abrupt("return",Promise.resolve(!1));case 9:return e.abrupt("return",Promise.resolve(!0));case 12:e.prev=12,e.t0=e.catch(0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),nn=(e("az",p(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l({icon:"warning-filled",title:"解绑宝塔账号",width:"35rem",content:"解绑宝塔账号后，将无法正常使用面板功能，是否继续操作？"});case 3:return e.next=5,X();case 5:t=e.sent,Yt.request(t),t.status&&setTimeout((function(){return P.push({name:"bind-user"})}),2e3),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))),e("aE",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{readonly:!1,theme:"chrome"};return{mode:"ace/mode/nginx",theme:"ace/theme/".concat(e.theme||"chrome"),wrap:!0,showInvisibles:!1,showFoldWidgets:!1,useSoftTabs:!0,tabSize:2,showPrintMargin:!1,readOnly:e.readonly,fontSize:"12px"}})),e("aB",(function(e,t,n,r){return{type:"custom",key:t,rules:(null==n?void 0:n.rules)||{},render:function(a){var u=W({key:t},a);return te(Z,{label:e,prop:u},{default:function(){return[te(Jt,Te({modelValue:a.value[u],"onUpdate:modelValue":function(e){return a.value[u]=e}},(null==n?void 0:n.attrs)||{},{onChange:r}),null)]}})}}})),e("aC",(function(e,t,n,r){return{type:"custom",key:t,rules:(null==n?void 0:n.rules)||{},render:function(a){var u=W({key:t},a);return te(Z,{label:e,prop:u},{default:function(){return[te($t,Te({modelValue:a.value[u],"onUpdate:modelValue":function(e){return a.value[u]=e}},(null==n?void 0:n.attrs)||{},{onChange:r}),null)]}})}}})),function(e,t){var n=e.endtime,r=e.type;return n>=0||"ltd"===t||("pro"===t&&12!==r||"free"===t&&12!==r&&8!==r)}),rn=function(e){var t;if("phpmyadmin"===e.name)return!1;if(!e.versions)return!1;if((null===(t=e.versions)||void 0===t?void 0:t.length)>1){if(e.admin&&!["Redis"].includes(e.title)){var n=e.versions[0],r="".concat(n.m_version,".").concat(n.version),a=e.version!==r;if(e.is_beta){var u=e.versions[e.versions.length-1];if(1===u.beta){var i="".concat(u.m_version,".").concat(u.version);a=e.version!==i&&e.version<i}}if(a&&"mongodb"!==e.name)return!0}else for(var o=0;o<e.versions.length;o++){var c=e.versions[o];if(2===ee(e.version,"".concat(c.m_version,".").concat(c.version)))return!0}}else{var s=e.versions[0],l=!!s.beta;void 0===l&&(l=!1),void 0===e.is_beta&&(e.is_beta=!1);var p="".concat(s.m_version,".").concat(s.version);if(e.version!==p&&l===e.is_beta&&e.version<p)return!0}return!1},an=function(e){var t=!1;switch(e){case"-1":t="正在安装";break;case"0":t="等待安装";break;case"-2":t="正在更新"}return t}}}}))}();
