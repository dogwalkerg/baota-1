import{c as a,h as e,R as s,o as l,k as o,l as t,e as r,x as u,p as i,I as n,aX as p,q as d,y as m,ah as c,a7 as v,Q as f,a4 as _,J as b,ag as V}from"./base-lib.js?v=1734676359";import{g as k,ac as y,ad as j}from"./useStore3.js?v=1734676359";import{G as x}from"./utils-lib.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";const g={class:"p-2rem"},h={class:"flex flex-col ml-2rem"},q=a({__name:"app-update",props:{compData:{default:""}},setup(a,{expose:q}){const w=a,{refs:{isRefreshInstallList:U}}=k(),D=w.compData.id,I=e({version:"",backup:!1,pull:!1}),R=s([]);return l((async()=>{await x({request:y({id:D}),data:{data:[Array,R]},success:a=>{I.version=a.data[0].version}})})),q({onConfirm:async a=>{let e={id:D,m_version:I.version.split(".")[0],s_version:"".concat(I.version.split(".")[1],".").concat(I.version.split(".")[2]),backup:I.backup,pull:I.pull};await x({request:j(e),loading:"正在更新,请稍后...",message:!0}),U.value=!0,a()}}),(a,e)=>{const s=V,l=c,k=v,y=f,j=_;return o(),t("div",g,[r(j,{model:i(I)},{default:u((()=>[r(k,{label:"可更新版本"},{default:u((()=>[r(l,{modelValue:i(I).version,"onUpdate:modelValue":e[0]||(e[0]=a=>i(I).version=a),filterable:"",class:"!w-[12rem]"},{default:u((()=>[(o(!0),t(n,null,p(i(R),(a=>(o(),b(s,{key:a.version,label:a.version,value:a.version},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),d("div",h,[r(y,{modelValue:i(I).backup,"onUpdate:modelValue":e[1]||(e[1]=a=>i(I).backup=a),class:"my-1.6rem"},{default:u((()=>e[3]||(e[3]=[m("更新前备份应用数据")]))),_:1},8,["modelValue"]),r(y,{modelValue:i(I).pull,"onUpdate:modelValue":e[2]||(e[2]=a=>i(I).pull=a)},{default:u((()=>e[4]||(e[4]=[m("强制拉取镜像")]))),_:1},8,["modelValue"])])])),_:1},8,["model"])])}}});export{q as default};
