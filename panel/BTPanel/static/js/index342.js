import{s,c as a,o as e,k as t,l,e as i,x as o,q as n,p as r,J as u,z as d,y as c,aT as m,aY as f,A as p}from"./base-lib.js?v=1734676359";import{u as y}from"./useStore9.js?v=1734676359";import{u as v,aM as g,o as x}from"./utils-lib.js?v=1734676359";import{N as _,O as j}from"./useMethod5.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./validator.js?v=1734676359";import"./index91.js?v=1734676359";import"./column.js?v=1734676359";v();const{verifyingData:b,localRow:k}=s(y()),{setVerifyingLoading:L,setReinstallLoading:P}=y(),W=async()=>{var s;b.value.text="",L(!0);try{const{data:s}=await _({s_id:k.value.id});b.value.status=!0,g(s)&&(b.value.text=s.msg)}catch(a){b.value.status=!1,b.value.text=(null==(s=null==a?void 0:a.message)?void 0:s.result)||""}finally{L(!1)}},w=async()=>{await x({title:"重新安装WP",content:"这将重新安装WordPress核心文件而不会丢失站点内容。建议您在重新安装之前备份网站。",onConfirm:async()=>{b.value.text="",P(!0);const s=await j({s_id:k.value.id});g(s)&&(b.value.text=s.msg,b.value.status=!0,P(!1))}})},C={class:"p-[2rem]"},M=["innerHTML"],h={class:"flex justify-center"},D=a({__name:"index",setup(a){const{verifyingData:v,verifyingLoading:g,reinstallLoading:x}=s(y()),{resetVerifyingData:_}=y();return e((()=>{_()})),(s,a)=>{const e=m,y=f,_=p;return t(),l("div",C,[i(e,{type:"info",closable:!1,style:{"margin-bottom":"1.6rem"}},{default:o((()=>a[0]||(a[0]=[n("div",{class:"flex flex-col"},[n("span",null,"如果您怀疑此站点是由恶意软件感染的，请通过从WordPress.org验证其参考校验和来检查WordPress核心文件的完整性。"),n("span",null,"如果校验和不匹配，则可以快速重新安装WordPress核心文件而不影响您的网站内容。")],-1)]))),_:1}),r(v).text?(t(),u(e,{key:0,type:r(v).status?"success":"error","show-icon":"",closable:!1},{default:o((()=>[n("span",{innerHTML:r(v).text},null,8,M)])),_:1},8,["type"])):d("",!0),i(y,{class:"my-[16px]"}),n("div",h,[i(_,{type:"primary",onClick:r(W),loading:r(g)},{default:o((()=>a[1]||(a[1]=[c("验证校验")]))),_:1},8,["onClick","loading"]),i(_,{style:{"margin-left":"7rem"},type:"info",onClick:r(w),loading:r(x)},{default:o((()=>a[2]||(a[2]=[c("重新安装WP")]))),_:1},8,["onClick","loading"])])])}}});export{D as default};
