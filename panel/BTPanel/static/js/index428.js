import{u as t,l as e,H as a,o as l,G as o,k as n,j as i,h as s,b as r}from"./utils-lib.js?v=1734676359";import{_ as c}from"./index100.js?v=1734676359";import{_ as p}from"./index90.js?v=1734676359";import{c as d,r as u,h as m,e as _,y as f,o as w,B as h,k as y,l as b,p as g,J as v,x as j,C as k,q as V,M as x,A as C,a7 as P,a4 as E}from"./base-lib.js?v=1734676359";import{_ as S}from"./index99.js?v=1734676359";import{h as A,u as D}from"./column.js?v=1734676359";import{getSingleSiteContentMonitorList as O,delContentMonitorInfo as R,searchFiles as T,scanning as I}from"./site.js?v=1734676359";import{u as L}from"./useStore7.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./validator.js?v=1734676359";import"./index91.js?v=1734676359";const U={class:"p-[20px]"},F={class:"p-[20px]"},J=d({__name:"index",props:{compData:{default:{}}},setup(d){const{siteInfo:J}=L(),q=r(),{payment:H}=t(),N=u([]),B=u(!1),G=m({word:""}),M=u([A(),{label:"违规词",prop:"key"}]),z=u([]),K=u(!1),Q=u(!1),W=u(!1),X=u(),Y=m({title:"违规词检测-功能介绍",ps:"违规词检测能帮助检测网站内容中的合法及非法字段，并输出对应的检测结果，利用图表充分展示各个域名的风险历史、检测情况、敏感词排行等，并实时输出风险动态。",source:111,desc:["违规词内容检测","网页内容修改检测","输出检测报告"],tabImgs:[{title:"概览",imgSrc:"https://www.bt.cn/Public/new/plugin/introduce/firewall/content_detect_detail_1.png"},{title:"监控列表",imgSrc:"https://www.bt.cn/Public/new/plugin/introduce/firewall/content_detect_detail_2.png"},{title:"检测历史",imgSrc:"https://www.bt.cn/Public/new/plugin/introduce/firewall/content_detect_detail_3.png"},{title:"风险列表",imgSrc:"https://www.bt.cn/Public/new/plugin/introduce/firewall/content_detect_detail_4.png"},{title:"检测报告",imgSrc:"https://www.bt.cn/Public/new/plugin/introduce/firewall/content_detect_detail_5.png"}]}),Z=async()=>{B.value=!0;try{const t=await O({site_name:J.value.name});N.value=t.data}catch(t){}finally{B.value=!1}},$=async()=>{tt({...J.value,id:!1})},tt=t=>{e({title:"".concat(t.id?"编辑":"添加","监控").concat(t.id?"【".concat(t.name,"】"):""),area:68,showFooter:!0,compData:{...t,refreshEvent:Z,isSite:!0},component:()=>a((()=>import("./add-monitor2.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)})},et=()=>{e({isAsync:!0,title:"自定义词库",area:[44,39],component:()=>a((()=>import("./own-thesaurus2.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)})},at=()=>{e({isAsync:!0,title:"检测历史",area:80,component:()=>a((()=>import("./detect-history.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),compData:{isPopup:!0,...J.value}})},lt=()=>{e({isAsync:!0,title:"风险列表",area:80,component:()=>a((()=>import("./risk-list.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),compData:{isPopup:!0}})},ot=()=>{var t;null==(t=X.value)||t.resetFields(),Q.value=!1},nt=async()=>{let t=q.load("正在扫描，请稍后...");try{const t=await T({search:G.word,path:J.value.path});z.value=t.data.result.map((t=>({path:t.name,key:G.word}))),ot(),W.value=!0}catch(e){}finally{Q.value=!1,t.close()}},it=u([{label:"监控名称",prop:"name",showOverflowTooltip:!0},{label:"网站/URL",prop:"url"},{label:"状态",prop:"content",render:t=>{if(1===t.crontab_status)return"正常"}},{label:"发送告警",prop:"send_msg",render:t=>1===t.send_msg?_("span",{class:"text-primary"},[f("已开启")]):"未开启"},{label:"检测频率",prop:"crontab_info.cycle",showOverflowTooltip:!0},D([{onClick:async t=>{try{const e=q.load("正在检测，请稍后..."),a=await I({data:JSON.stringify({id:t.id})});t.name,t.id,a.path_info;e.close()}catch(e){}},title:"检测"},{onClick:t=>{tt(t)},title:"编辑"},{onClick:async t=>{await l({title:"删除违规词检测",content:"删除后无法继续监控该网站，是否继续？"}),o({loading:"正在删除，请稍后...",request:R({data:JSON.stringify({id:t.id})}),message:!0,success:t=>{t.status&&Z()}})},title:"删除"}])]);return w((()=>{Z()})),(t,e)=>{const a=C,l=S,o=n,r=i,d=P,u=E,m=s,w=p,A=c,D=h("bt-loading");return y(),b("div",null,["ltd"===g(H).authType?(y(),v(w,{key:0},{"header-left":j((()=>[_(a,{type:"primary",onClick:$},{default:j((()=>e[4]||(e[4]=[f("添加监控")]))),_:1}),_(a,{type:"default",onClick:e[0]||(e[0]=t=>Q.value=!0)},{default:j((()=>e[5]||(e[5]=[f(" 自定义扫描 ")]))),_:1}),_(a,{type:"default",onClick:et},{default:j((()=>e[6]||(e[6]=[f(" 自定义词库 ")]))),_:1}),_(a,{type:"default",onClick:at},{default:j((()=>e[7]||(e[7]=[f(" 检测历史 ")]))),_:1}),_(a,{type:"default",onClick:lt},{default:j((()=>e[8]||(e[8]=[f("风险列表")]))),_:1})])),"header-right":j((()=>[_(l,{onRefresh:Z})])),content:j((()=>[k(_(o,{column:g(it),data:g(N)},null,8,["column","data"]),[[D,g(B)]])])),popup:j((()=>[_(m,{title:"自定义扫描",modelValue:g(Q),"onUpdate:modelValue":e[2]||(e[2]=t=>x(Q)?Q.value=t:null),area:42,onConfirm:nt,onCancel:ot,showFooter:""},{default:j((()=>[V("div",U,[_(u,{"label-position":"right",model:g(G),ref_key:"scanRef",ref:X},{default:j((()=>[_(d,{label:"扫描违规词",prop:"word"},{default:j((()=>[_(r,{modelValue:g(G).word,"onUpdate:modelValue":e[1]||(e[1]=t=>g(G).word=t),placeholder:"请输入要扫描的词汇",width:"24rem"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])])),_:1},8,["modelValue"]),_(m,{title:"扫描结果",modelValue:g(W),"onUpdate:modelValue":e[3]||(e[3]=t=>x(W)?W.value=t:null),area:52},{default:j((()=>[V("div",F,[_(w,null,{content:j((()=>[k(_(o,{column:g(M),data:g(z),"max-height":400},null,8,["column","data"]),[[D,g(K)]])])),_:1})])])),_:1},8,["modelValue"])])),_:1})):(y(),v(A,{key:1,data:g(Y),class:""},null,8,["data"]))])}}});export{J as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
