import{c as a,r as e,h as s,o as t,B as l,C as o,p as i,k as c,l as u,e as n,x as r,y as d,Q as p,aa as m,a7 as f,A as L,a4 as v}from"./base-lib.js?v=1734676359";import{ah as _,G as h,O as S}from"./utils-lib.js?v=1734676359";import{getSslProtocol as T,setSslProtocol as k}from"./site.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";const y={class:"p-[20px]"},g=a({__name:"tls-setting",setup(a){const g=e(),b=s({checkList:["选中且禁用"]}),j=e(!1),x=e([{content:"请注意，TLS 1.0和1.1版本存在安全风险。如果您的应用程序不会出现兼容性问题，请不要勾选此选项。"},{content:"修改后只会对后续部署证书的站点进行设置，已部署证书的站点不会因此改变"},{content:"仅支持PHP项目"}]),w={checkList:[{required:!0,message:"请选择TLS设置",trigger:"change"}]},V=async()=>{j.value=!0;try{const{data:a}=await T();let e=[];for(let s in a)a[s]&&e.push(s);b.checkList=e}catch(a){_(a)}finally{j.value=!1}},q=async()=>{await g.value.validate();(await h({loading:"正在设置，请稍后...",request:k({use_protocols:b.checkList.join(",")}),message:!0})).status&&V()};return t((()=>{V()})),(a,e)=>{const s=p,t=m,_=f,h=L,T=S,k=v,V=l("bt-loading");return o((c(),u("div",y,[n(k,{ref_key:"formRef",ref:g,model:i(b),rules:w,"label-position":"left"},{default:r((()=>[n(_,{label:"TLS设置",prop:"checkList"},{default:r((()=>[n(t,{modelValue:i(b).checkList,"onUpdate:modelValue":e[0]||(e[0]=a=>i(b).checkList=a)},{default:r((()=>[n(s,{value:"TLSv1"},{default:r((()=>e[1]||(e[1]=[d("TLSv1")]))),_:1}),n(s,{value:"TLSv1.1"},{default:r((()=>e[2]||(e[2]=[d("TLSv1.1")]))),_:1}),n(s,{value:"TLSv1.2"},{default:r((()=>e[3]||(e[3]=[d("TLSv1.2")]))),_:1}),n(s,{value:"TLSv1.3"},{default:r((()=>e[4]||(e[4]=[d("TLSv1.3")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),n(_,{label:" "},{default:r((()=>[n(h,{type:"primary",onClick:q},{default:r((()=>e[5]||(e[5]=[d("保存")]))),_:1})])),_:1}),n(T,{class:"ml-[20px] my-[20px]",options:i(x)},null,8,["options"])])),_:1},8,["model"])])),[[V,i(j)]])}}});export{g as default};
