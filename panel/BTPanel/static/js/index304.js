import{c as e,r as l,i as a,o as s,a1 as o,k as t,J as d,x as m,e as r,q as n,p as u,C as i,D as p,F as c,l as f,aX as _,I as V,z as b,y as h,v as y,X as v,a7 as g,ag as x,ah as w,af as k,ad as j,ae as U,Q as C,aj as z,A as F}from"./base-lib.js?v=1734676359";import{_ as P}from"./index88.js?v=1734676359";import{D as E,bR as T,j as I,_ as M,E as q,c as A}from"./utils-lib.js?v=1734676359";import{l as D}from"./useController3.js?v=1734676359";import{p as H,s as J,i as X,$,a as B,v as O,g as Q,o as R,b as S,c as G,d as K,e as L,u as N}from"./index57.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./site.js?v=1734676359";import"./column.js?v=1734676359";import"./index91.js?v=1734676359";import"./validator.js?v=1734676359";import"./useStore7.js?v=1734676359";import"./index90.js?v=1734676359";import"./index116.js?v=1734676359";import"./index.vue_vue_type_style_index_0_scoped_03ce946a_lang.js?v=1734676359";import"./index124.js?v=1734676359";import"./index107.js?v=1734676359";const W={class:"flex items-center"},Y={class:"flex items-center"},Z={key:0,class:"el-input-group__append !h-3rem !flex items-center"},ee={class:"text-[12px] ml-8px"},le={key:0,class:"ml-[4.2rem] mt-[-4rem] text-[1.2rem] text-[red]"},ae={class:"mt-[1.6rem]"},se={class:"mt-[1.6rem]"},oe={class:"flex"},te={key:2,class:"my-[20px]"},de={class:"flex items-center"},me={class:"ml-[1rem] text-[#20a53a] w-[16rem] select-none"},re={class:"pt-[0]"},ne=e({__name:"index",setup(e,{expose:ne}){const ue=l(!1),{BtForm:ie,submit:pe}=E({data:H.value,options:e=>a((()=>[{type:"slots",key:"custom",rules:{pjname:[T({message:"请输入项目名称"})],port:[{validator:(e,l,a)=>{"command"!==H.value.stype&&(!/^\d+$/.test(l)||l<0||l>65535)?H.value.listenMsg?a(new Error(" ")):a(new Error("端口号范围为0-65535")):a()},tirgger:["blur","change"]}],path:[T({message:"请选择路径"})],processes:[T({message:"请输入进程数"})],threads:[T({message:"请输入线程数"})],parm:[{validator:(e,l,a)=>{"command"===H.value.stype&&""===l?a(new Error("请输入启动命令")):a()},tirgger:["blur","change"]}]}}])),submit:async(e,l)=>(await l(),await J(e.value))});return s((()=>{X()})),o($),ne({onConfirm:pe}),(e,l)=>{const a=I,s=g,o=x,E=w,T=M,J=q,X=A,$=k,ne=j,ce=P,fe=U,_e=C,Ve=z,be=F;return t(),d(u(ie),{"label-width":"100px",class:"p-2rem"},{custom:m((()=>[r(s,{label:"项目名称",prop:"pjname"},{default:m((()=>[n("div",W,[r(a,{disabled:u(B),width:"22rem",modelValue:u(H).pjname,"onUpdate:modelValue":l[0]||(l[0]=e=>u(H).pjname=e),placeholder:"请输入Python项目名称"},null,8,["disabled","modelValue"]),i(r(s,{label:"项目端口",prop:"port","label-width":"7rem"},{default:m((()=>[r(a,{width:"18rem",type:"number",modelValue:u(H).port,"onUpdate:modelValue":l[1]||(l[1]=e=>u(H).port=e),placeholder:"项目的真实端口"},null,8,["modelValue"])])),_:1},512),[[p,"command"!==u(H).stype]])])])),_:1}),r(s,{label:"Python版本"},{default:m((()=>[n("div",Y,[n("div",{class:c(["flex items-center",u(B)?"":"custom-refresh-select"])},[r(E,{modelValue:u(H).version,"onUpdate:modelValue":l[2]||(l[2]=e=>u(H).version=e),class:"!w-[16rem]",disabled:u(B)},{default:m((()=>[(t(!0),f(V,null,_(u(O),(e=>(t(),d(o,{key:e,value:e,label:e},null,8,["value","label"])))),128))])),_:1},8,["modelValue","disabled"]),u(B)?b("",!0):(t(),f("div",Z,[r(J,{title:"刷新Python版本",class:"!flex",onClick:l[3]||(l[3]=e=>u(Q)(!0))},{default:m((()=>[r(T,{icon:"el-refresh",class:"!text-[14px]"})])),_:1})]))],2),n("span",ee,[l[25]||(l[25]=h(" * 如需安装Python版本，请点击")),r(X,{onClick:l[4]||(l[4]=e=>u(D)("py",u(Q)))},{default:m((()=>l[24]||(l[24]=[h("版本管理")]))),_:1})]),u(H).listenMsg&&"command"!==u(H).stype?(t(),f("div",le,y(u(H).listenMsg),1)):b("",!0)])])),_:1}),r(s,{label:"启动方式"},{default:m((()=>[r(ne,{modelValue:u(H).stype,"onUpdate:modelValue":l[5]||(l[5]=e=>u(H).stype=e)},{default:m((()=>[r($,{label:"command"},{default:m((()=>l[26]||(l[26]=[h("命令行启动")]))),_:1}),r($,{label:"uwsgi"},{default:m((()=>l[27]||(l[27]=[h("uwsgi")]))),_:1}),r($,{label:"gunicorn"},{default:m((()=>l[28]||(l[28]=[h("gunicorn")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),r(s,{label:"项目路径",prop:"path"},{default:m((()=>[r(a,{width:"42rem","icon-type":!u(B)&&"folder",disabled:u(B),placeholder:"项目的根路径",onFolder:u(R),onChange:u(S),modelValue:u(H).path,"onUpdate:modelValue":l[6]||(l[6]=e=>u(H).path=e)},v({_:2},[u(B)?void 0:{name:"append",fn:m((()=>[r(J,{onClick:u(R)},{default:m((()=>[r(T,{icon:"el-folder-opened",class:"cursor-pointer"})])),_:1},8,["onClick"])])),key:"0"}]),1032,["icon-type","disabled","onFolder","onChange","modelValue"])])),_:1}),i(n("div",{class:"mt-[1rem] ml-[12rem]"},"当前框架："+y(u(H).framework),513),[[p,u(H).framework]]),i(n("div",ae,[r(s,{label:"启动命令",prop:"parm"},{default:m((()=>[r(a,{modelValue:u(H).parm,"onUpdate:modelValue":l[7]||(l[7]=e=>u(H).parm=e),placeholder:"请输入启动命令",width:"42rem"},null,8,["modelValue"])])),_:1})],512),[[p,"command"===u(H).stype]]),i(n("div",se,[r(s,{label:"入口文件"},{default:m((()=>[r(ce,{placeholder:"项目的入口文件",modelValue:u(H).rfile,"onUpdate:modelValue":l[8]||(l[8]=e=>u(H).rfile=e),icon:"el-folder-opened",onIconClick:l[9]||(l[9]=e=>u(G)(u(H))),onChange:l[10]||(l[10]=e=>u(K)(u(H))),width:"42rem"},null,8,["modelValue"])])),_:1}),r(s,{label:"通讯协议"},{default:m((()=>[n("div",oe,[r(E,{modelValue:u(H).xsgi,"onUpdate:modelValue":l[11]||(l[11]=e=>u(H).xsgi=e),class:"!w-[15rem]"},{default:m((()=>[r(o,{label:"wsgi",value:"wsgi"}),r(o,{label:"asgi",value:"asgi"})])),_:1},8,["modelValue"]),r(s,{label:"应用名称"},{default:m((()=>[r(a,{modelValue:u(H).app,"onUpdate:modelValue":l[12]||(l[12]=e=>u(H).app=e),placeholder:"请输入应用名称",width:"22rem"},null,8,["modelValue"])])),_:1})])])),_:1})],512),[[p,"command"!==u(H).stype]]),r(s,{label:"环境变量",class:"mt-[1.6rem]"},{default:m((()=>[r(ne,{modelValue:u(H).envType,"onUpdate:modelValue":l[13]||(l[13]=e=>u(H).envType=e)},{default:m((()=>[r(fe,{label:0},{default:m((()=>l[29]||(l[29]=[h("无")]))),_:1}),r(fe,{label:1},{default:m((()=>l[30]||(l[30]=[h("指定变量")]))),_:1}),r(fe,{label:2},{default:m((()=>l[31]||(l[31]=[h("从文件加载")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),i(r(s,{label:" "},{default:m((()=>[i(r(a,{width:"40rem",type:"textarea",rows:4,resize:"none",modelValue:u(H).env,"onUpdate:modelValue":l[14]||(l[14]=e=>u(H).env=e),placeholder:"环境变量，1行1个，例如： JAVA_HOME=/usr/local/btjdk/jdk8"},null,8,["modelValue"]),[[p,1===u(H).envType]]),i(r(ce,{modelValue:u(H).envPath,"onUpdate:modelValue":l[15]||(l[15]=e=>u(H).envPath=e),placeholder:"请选择环境变量文件",icon:"el-folder-opened",onIconClick:u(L),width:"42rem"},null,8,["modelValue","onIconClick"]),[[p,2===u(H).envType]])])),_:1},512),[[p,0!==u(H).envType]]),r(s,{label:"启动用户"},{default:m((()=>[r(E,{modelValue:u(H).user,"onUpdate:modelValue":l[16]||(l[16]=e=>u(H).user=e),class:"!w-[16rem]"},{default:m((()=>[(t(!0),f(V,null,_(u(N),(e=>(t(),d(o,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),u(B)?(t(),d(s,{key:0,label:"开机启动"},{default:m((()=>[r(_e,{modelValue:u(H).auto_run,"onUpdate:modelValue":l[17]||(l[17]=e=>u(H).auto_run=e)},{default:m((()=>l[32]||(l[32]=[h(" 是否设置开机自动启动（默认自带守护进程每120秒检测一次） ")]))),_:1},8,["modelValue"])])),_:1})):b("",!0),u(B)?b("",!0):(t(),d(s,{key:1,label:"安装依赖包"},{default:m((()=>[r(Ve,{modelValue:u(H).requirement_path,"onUpdate:modelValue":l[18]||(l[18]=e=>u(H).requirement_path=e)},null,8,["modelValue"])])),_:1})),u(B)?(t(),f("div",te,["command"!=u(H).stype?(t(),d(s,{key:0,label:"进程数",prop:"processes"},{default:m((()=>[n("div",de,[r(a,{width:"16rem",modelValue:u(H).processes,"onUpdate:modelValue":l[19]||(l[19]=e=>u(H).processes=e)},null,8,["modelValue"]),r(s,{label:"线程数",prop:"threads"},{default:m((()=>[r(a,{width:"16rem",modelValue:u(H).threads,"onUpdate:modelValue":l[20]||(l[20]=e=>u(H).threads=e)},null,8,["modelValue"])])),_:1})])])),_:1})):b("",!0),u(B)&&"uwsgi"===u(H).stype?(t(),d(s,{key:1,label:"通信方式"},{default:m((()=>[r(E,{modelValue:u(H).is_http,"onUpdate:modelValue":l[21]||(l[21]=e=>u(H).is_http=e),class:"w-[16rem]"},{default:m((()=>[r(o,{label:"http",value:!0}),r(o,{label:"socket",value:!1})])),_:1},8,["modelValue"])])),_:1})):b("",!0)])):b("",!0),u(B)?b("",!0):(t(),f(V,{key:3},[n("div",{class:"more flex items-center cursor-pointer pl-[10rem] my-[2rem] px-[2rem]",onClick:l[22]||(l[22]=e=>ue.value=!u(ue))},[n("i",{class:c(u(ue)?"svgtofont-el-arrow-down":"svgtofont-el-arrow-right")},null,2),n("div",me,y("更多设置，".concat(u(ue)?"点击收回":"点击查看")),1)]),i(n("div",re,[r(s,{label:"项目初始化命令",prop:"initialize"},{default:m((()=>[r(a,{rows:3,modelValue:u(H).initialize,"onUpdate:modelValue":l[23]||(l[23]=e=>u(H).initialize=e),type:"textarea",name:"initialize",width:"42rem",placeholder:"此处填写用于初始化项目的命令或脚本，常见的有项目数据库初始化操作等。例如：django常使用python manage.py makemigrations 和 python manage.py migrate 初始化数据库"},null,8,["modelValue"])])),_:1})],512),[[p,u(ue)]]),l[33]||(l[33]=n("ul",{class:"mt-[20px] leading-8 text-[1.2rem] list-disc ml-48px"},[n("li",null,"执行命令：请输入项目需要携带的参数，默认请输入执行文件名"),n("li",null,[h(" 通讯协议：wsgi：同步通讯，一次处理一个请求， asgi：异步处理，并发处理请求 "),n("br"),h(" 根据项目情况具体选择，例如: 传统Flask就是wsgi, Fastap框架就是asgi, Django两者都可以支持 ")]),n("li",null,"项目初始化命令：初始化脚本会在创建虚拟环境，安装依赖库之后执行")],-1))],64)),u(B)?(t(),d(s,{key:4,label:" "},{default:m((()=>[r(be,{type:"primary",onClick:u(pe)},{default:m((()=>l[34]||(l[34]=[h("保存配置")]))),_:1},8,["onClick"])])),_:1})):b("",!0)])),_:1})}}});export{ne as default};
