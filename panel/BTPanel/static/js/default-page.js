import{c as e,r as a,o as l,B as t,k as s,l as o,e as u,x as n,p as r,M as d,q as i,y as m,z as p,I as c,aX as v,J as f,C as y,ay as _,aw as b,Q as x,ag as g,ah as h,A as j}from"./base-lib.js?v=1734676359";import{B as V}from"./index185.js?v=1734676359";import{G as w,aa as C,b as B}from"./utils-lib.js?v=1734676359";import{bF as k,bG as q,bH as G}from"./useStore3.js?v=1734676359";import{p as z}from"./useController.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./ace.js?v=1734676359";import"./validator.js?v=1734676359";import"./index91.js?v=1734676359";import"./column.js?v=1734676359";const U={class:"flex flex-col"},H={class:"flex items-center justify-between mb-[8px]"},E={key:0},F={class:"h-[44rem] w-full"},I=e({__name:"default-page",setup(e,{expose:I}){const O=B(),S=a("index"),A=a(""),J=a(),K=a("utf-8"),M=a(["utf-8","GBK","GB2312","BIG5"]),Q=a(!1),R=a(!1),X=async()=>{try{R.value=!0;const{data:e}=await k({default_type:S.value});A.value=e.data[S.value].data,K.value=e.data[S.value].encoding||"utf-8","404"===S.value&&(Q.value=Boolean(e.data.auto_create_404)),R.value=!1}catch(e){}},D=async e=>{R.value=!0,S.value=e,await X(),R.value=!1},L=e=>{w({loading:"正在设置，请稍后...",request:q({auto_create:e?"1":"0"}),message:!0})},N=async()=>{const e=await G({default_type:S.value,default_body:A.value,encoding:K.value});O.request(e)};return l((()=>{X()})),I({onRefresh:()=>{S.value="index",X()}}),(e,a)=>{const l=_,w=C,B=b,k=x,q=g,G=h,I=V,O=j,X=t("bt-loading");return s(),o("div",U,[u(w,{type:"card",modelValue:r(S),"onUpdate:modelValue":a[0]||(a[0]=e=>d(S)?S.value=e:null),onChange:D},{default:n((()=>[u(l,{label:"新建网站默认页面",name:"index"}),u(l,{label:"404错误页",name:"404",lazy:!0}),u(l,{label:"网站不存在页",name:"not_found",lazy:!0}),u(l,{label:"网站停用后的提示页",name:"stop",lazy:!0})])),_:1},8,["modelValue"]),u(B,{placement:"top",width:"320","popper-class":"white-popover",trigger:"hover",content:"创建网站时会使用页面模板，不会影响已经存在的网站"},{reference:n((()=>a[4]||(a[4]=[i("i",{class:"absolute right-[2rem] top-[2.4rem] svgtofont-el-question-filled text-warning !text-[16px]"},null,-1)]))),_:1}),i("div",H,["404"===r(S)?(s(),o("div",E,[u(k,{modelValue:r(Q),"onUpdate:modelValue":a[1]||(a[1]=e=>d(Q)?Q.value=e:null),onChange:L},{default:n((()=>a[5]||(a[5]=[m("创建网站时自动创建404.html页面")]))),_:1},8,["modelValue"])])):p("",!0),a[6]||(a[6]=m(" 提示：Ctrl+F 搜索关键字，Ctrl+S 保存，Ctrl+H 查找替换 ")),u(G,{class:"!w-[16rem]",modelValue:r(K),"onUpdate:modelValue":a[2]||(a[2]=e=>d(K)?K.value=e:null),onChange:N},{default:n((()=>[(s(!0),o(c,null,v(r(M),(e=>(s(),f(q,{key:e,value:e,label:e},null,8,["value","label"])))),128))])),_:1},8,["modelValue"])]),y((s(),o("div",F,[u(I,{ref_key:"aceEditor",ref:J,"is-request":!1,modelValue:r(A),"onUpdate:modelValue":a[3]||(a[3]=e=>d(A)?A.value=e:null),editorOption:r(z)(),saveEvent:N,class:"h-[40rem] w-full"},null,8,["modelValue","editorOption"]),u(O,{class:"flex !mt-[12px]",type:"primary",onClick:N},{default:n((()=>a[7]||(a[7]=[m("保存")]))),_:1})])),[[X,r(R)]])])}}});export{I as default};
