import{n as e,d as t,ap as a,R as s,o as n,M as i,aq as l,S as o,H as r,u as c,l as u,ar as p,as as m,ah as d,at as v,a6 as g,au as y,r as h,av as f,J as _,aw as w,ax as b,ay as P,az as k,I as T,af as E,p as x,aA as L,aB as S,t as j,aC as I,aD as D,aE as V,aF as O,aG as C,aH as A,z as R,aI as N,aJ as q,a4 as H,b as F,aK as M,aL as G,aM as z,aN as B,aO as U,aP as J,aQ as $}from"./utils-lib.js?v=1734676359";import{e as Q,y as Y,aw as K,aj as W,b4 as Z,g as X,s as ee,r as te,R as ae,h as se,b8 as ne,i as ie,I as le,b as oe,b9 as re,a_ as ce,aJ as ue,c as pe,T as me,U as de,o as ve,B as ge,C as ye,p as he,k as fe,J as _e,w as we,m as be}from"./base-lib.js?v=1734676359";import{_ as Pe}from"./index91.js?v=1734676359";import{o as ke,c as Te}from"./column.js?v=1734676359";const Ee=t=>e.post("plugin/get_soft_list",{data:t,customType:"default"}),xe=t=>e.post("deployment/DelPackage",{data:t,customType:"default",check:"msg"}),Le=()=>e.post("site/GetPHPVersion",{customType:"default",check:"array"}),Se=t=>e.post("site/AddSite",{data:t,customType:"default",check:"object"}),je=t=>e.post("deployment/SetupPackage",{data:t,customType:"default",check:"msg"}),Ie=t=>e.post("auth/create_plugin_other_order",{data:t,loading:"正在获取支付信息，请稍候...",customType:"default",check:"object"}),De=t=>e.post("files/GetFileBody",{data:t}),Ve=t=>e.post("plugin/install_plugin",{data:t,check:"object"}),Oe=t=>e.post("ajax/GetOpeLogs",{data:t,check:"msg"}),Ce=t=>e.post("ftp/set_ftp_logs",{data:t,check:"msg"}),Ae=()=>e.post("ajax/GetMemcachedStatus",{}),Re=t=>e.post("ajax/SetMemcachedCache",{data:t,check:"msg"}),Ne=()=>e.post("ajax/GetNginxStatus",{check:"object"}),qe=()=>e.post("config/GetNginxValue",{check:"array"}),He=t=>e.post("config/SetNginxValue",{data:t,check:"msg"}),Fe=()=>e.post("config/get_ols_value",{}),Me=t=>e.post("config/set_ols_value",{data:t,check:"msg"}),Ge=()=>e.post("database/GetRunStatus",{check:"object"}),ze=t=>e.post("database/GetErrorLog",{data:t,check:"string"}),Be=t=>e.post("database/GetErrorLog",{data:t,check:"msg"}),Ue=t=>e.post("database/GetSlowLogs",{data:t,check:"msg"}),Je=()=>e.post("database/GetMySQLBinlogs",{check:"msg"}),$e=t=>e.post("database/BinLog",{data:t,check:"msg"}),Qe=t=>e.post("database/ClearMySQLBinlog",{data:t,check:"msg"}),Ye=()=>e.post("database/GetMySQLInfo",{check:"object"}),Ke=t=>e.post("database/SetDataDir",{data:t,check:"msg"}),We=t=>e.post("database/SetMySQLPort",{data:t,check:"msg"}),Ze=t=>e.post("database/mysql_oom_adj",{data:t,check:"msg"}),Xe=()=>e.post("database/GetDbStatus",{check:"object"}),et=t=>e.post("database/SetDbConf",{data:t,check:"msg"}),tt=t=>e.post("ajax/GetPHPConfig",{data:t,check:"object"}),at=t=>e.post("files/UninstallSoft",{data:t,check:"msg"}),st=t=>e.post("files/InstallSoft",{data:t,check:"msg"}),nt=t=>e.post("config/GetPHPConf",{data:t}),it=t=>e.post("config/SetPHPConf",{data:t,check:"msg"}),lt=t=>e.post("config/setPHPDisable",{data:t,check:"msg"}),ot=t=>e.post("config/getFpmConfig",{data:t,check:"object"}),rt=t=>e.post("config/setFpmConfig",{data:t,check:"msg"}),ct=t=>e.post("ajax/GetPHPStatus",{data:t,check:"object"}),ut=t=>e.post("ajax/GetFpmSlowLogs",{data:t,check:"object"}),pt=t=>e.post("ajax/GetFpmLogs",{data:t,check:"msg"}),mt=t=>e.post("config/GetSessionConf",{data:t,check:"object"}),dt=t=>e.post("config/GetSessionCount",{data:t,check:"object"}),vt=t=>e.post("config/SetSessionConf",{data:t,check:"msg"}),gt=()=>e.post("config/DelOldSession",{check:"msg"}),yt=t=>e.post("ajax/GetPHPInfo",{data:t,check:"string"}),ht=t=>e.post("ajax/php_info",{data:t,check:"object"}),ft=t=>e.post("config/get_php_config",{data:t,check:"object"}),_t=t=>e.post("config/setPHPMaxSize",{data:t,check:"msg"}),wt=t=>e.post("config/setPHPMaxTime",{data:t,check:"msg"}),bt=()=>e.post("ajax/GetApacheStatus",{check:"object"}),Pt=t=>e.post("site/set_restart_task",{data:t,check:"msg"}),kt=()=>e.post("site/get_restart_task",{check:"msg"}),Tt=()=>e.post("config/GetApacheValue",{check:"array"}),Et=t=>e.post("config/SetApacheValue",{data:t,check:"msg"}),xt=t=>e.post("files/DeleteFile",{data:t,check:"msg"}),Lt=()=>e.post("deployment/check_project_env",{check:"object"}),St=t=>e.post("deployment/GetJarPath",{data:t,check:"object"}),jt=t=>e.post("/mod/java/project/create_project",{data:t,check:"msg",customType:"model"}),It=t=>e.post("/mod/php/php_async/create_project",{data:t,customType:"model",check:"msg"}),Dt=()=>e.post("/mod/java/project/get_system_info",{check:"msg",customType:"model"}),Vt=()=>e.post("deployment/GetInLog",{check:"msg"}),Ot=()=>e.post("database/GetmvDataDirSpeed",{check:"object"}),Ct=()=>e.post("plugin/RegetCloudPHPExt",{check:"object"}),At=e=>{const{type:a}=e;return{label:"app"===a?"软件名称":"名称",prop:"title",width:250,sortable:e.sortable,showOverflowTooltip:!1,render:s=>{var n;const i="soft_ico/ico-"+((null==(n=s.name)?void 0:n.indexOf("php-"))>-1?"php":s.name)+".png",l="/dep_ico/".concat(s.name,".png"),o=s.title.indexOf("PHP-")>-1?"PHP":s.title;return Q("div",{class:"whitespace-normal inline-flex items-center p-[2px] ".concat(s.setup?"cursor-pointer":""),title:s.setup?"打开插件":"".concat(o," ").concat(s.version),onClick:()=>e.onClick(s)},[Q(t,{src:"app"===a?i:l,class:"".concat(10===s.type?"!h-[20px] !w-[22px]":""," soft-ico-img"),type:"img"},{error:()=>Q("img",{src:"/static/images/soft_ico/icon_plug.svg",alt:""},null)}),Q("span",null,["".concat(s.setup?o:s.title," ").concat(s.version||"")]),Q("span",{class:"text-[#FC6D26] ".concat(s.is_beta?"":"hidden")},[Y("[测试版]")])])}}},Rt=()=>({label:"开发商",width:80,render:e=>Q("span",{class:"truncate inline-block w-[8rem]"},[Y(" "),e.author||"官方"])}),Nt=e=>({label:"app"===e?"说明":"介绍",showOverflowTooltip:!1,render:e=>Q("div",{class:"leading-[16px]",innerHTML:e.ps},null)}),qt=e=>{const{onClick:t,sortable:a}=e;return{label:"评分",prop:"score",width:80,sortable:a,render:e=>e.hasOwnProperty("score")?Q("span",{class:"bt-link inline-block w-[4rem]",onClick:()=>t(e)},[e.score?e.score:"无评分"]):Q("span",null,[Y("--")])}},Ht=()=>({label:"价格/天",width:70,render:e=>e.price>0?Q("span",{class:"text-[#fc6d26]"},["≈".concat((e.price/("btiplibrary"===e.name?365:30)).toFixed(2),"元"),Y(" ")]):Q("span",{class:"text-[#666]"},[Y("免费")])}),Ft=e=>({label:"到期时间",width:130,showOverflowTooltip:!1,render:t=>{let a=t.endtime?s(t.endtime,"yyyy-MM-dd"):"--",n=Q("span",{class:"bt-link",onClick:()=>e.onClick(t)},[Y("(续费)")]);return t.price>0?[0,-1].includes(t.endtime)?(n=Q("i",null,null),a=0===t.endtime?"永久":"未开通"):[1,-2].includes(t.endtime)&&(a=t.endtime>1?a:"已到期"):(a="--",n=Q("i",null,null)),Q("span",null,[a,n])}}),Mt=()=>({label:"位置",width:50,render:e=>e.setup?Q("span",{class:"flex"},[Q("i",{title:"打开插件文件目录",class:"text-[#efc566] cursor-pointer svgtofont-folder-open !text-[1.8rem]",onClick:()=>ke({path:e.install_checks})},null)]):Q("span",null,[Y("--")])}),Gt=e=>({label:"首页显示",prop:"labels",width:80,render:t=>t.setup?Q(W,{size:"small",modelValue:t.index_display,"onUpdate:modelValue":e=>t.index_display=e,onChange:a=>e.onChange(t,a)},null):Q("span",null,[Y("--")])}),zt=e=>({label:"操作",align:"right",width:175,showOverflowTooltip:!1,render:(s,n)=>{var i;const l="soft_ico/ico-".concat((null==(i=null==s?void 0:s.name)?void 0:i.includes("php-"))?"php":s.name,".png");let o=e;const r="/dep_ico/".concat(s.name,".png");a(e)&&(o=e(s));const c=![5,6,13,7,8,12,10,11].includes(s.type);return Q(K,{popperClass:"el-popover-shadow el-light-popover !py-[6px]",trigger:"hover",placement:"top-start",enterable:!1,"show-after":200,"hide-after":0,width:"auto"},{default:()=>[Q("div",{class:"flex items-center p-[2px] whitespace-nowrap"},[Q(t,{src:c?r:l,class:"".concat(c?"":"!h-[20px] !w-[22px]"," soft-ico-img")},{error:()=>Q("img",{src:"/static/images/soft_ico/icon_plug.svg",alt:""},null)}),Q("span",null,["".concat(s.title," ").concat(s.version)]),Q("span",{class:"text-[#FC6D26] ".concat(s.is_beta?"":"hidden")},[Y("[测试版]")])])],reference:()=>Q("div",{class:"text-right w-full"},[o.map(((e,t)=>{if(!(e.isHide&&e.isHide(s)||"更新"===e.title&&"tomcat"===s.name))return Q("span",{class:"soft-link"},[Q("span",{class:"bt-link",title:e.title,onClick:t=>{if("pay"==e.type&&10===s.type){const{buyThirdPluginView:e}=ea();return e(s)}return e.onClick(s,e.type,e.sourceId),!1}},[e.title]),t!==o.length-1?Q(Pe,null,null):""])}))])})}}),Bt=async(e,t)=>{let a="i";switch(t){case"install":a="i";break;case"update":a="u";break;case"repair":a="r"}if(10!==e.type){const t={...e,callback:()=>{const{refreshRouteData:e}=ia();e("1")}};await Ra({name:e.name,type:a,pluginInfo:t})}else{await n({title:"安装第三方插件",content:"您真的要安装[".concat(e.title,"]插件吗？"),icon:"question-filled"});let t=i.load("正在获取插件信息，请稍后...");const a=await Kt(e);if(!a.status)return i.error(a.msg);const{data:s}=await Ve({sName:e.name,version:e.versions[0].m_version,min_version:e.versions[0].version});if(t.close(),s.hasOwnProperty("status")&&!s.status)return i.error(s.msg);const{installOtherEvent:l}=ea();l(s)}},Ut=async(t,a)=>{const s=a?await(n={sName:t.name},e.post("plugin/add_index",{data:n,customType:"default",check:"msg"})):await(t=>e.post("plugin/remove_index",{data:t,customType:"default",check:"msg"}))({sName:t.name});var n;return i.request(s),s},Jt=e=>{window.open(e)},$t=async e=>{const{softList:t,total:a,historyList:s,ltd:n,pro:i,m_list:c,typeList:u,isForce:p}=new l(e,{"list.data":[Array,"softList"],"list.page":o(),ltd:Number,pro:Number,search_history:[Array,"historyList"],m_list:Array,type:[Array,"typeList"],is_force:[Number,e=>({isForce:Boolean(e)})]}).exportData(),{useGlobalStore:m}=await r((()=>import("./utils-lib.js?v=1734676359").then((e=>e.dF))),__vite__mapDeps([]),import.meta.url),{setAuthState:d}=m();d([0,i,n]);return{softList:[...t,...[...c].map((e=>({...e,is_docker:1})))],total:a,historyList:s,typeList:u,isForce:p}},Qt=e=>{i.msg({dangerouslyUseHTMLString:!e,message:e?"软件列表，更新成功":"云端连接失败，暂时无法获取最新的软件列表，请检查网络情况或等待5-10分钟后重试",type:e?"success":"warning",duration:2e3})},Yt=e=>{window.open(e.preview_url)},Kt=async e=>{try{const{data:t,msg:a,status:s}=await Ie({pid:e.pid,cycle:"1",type:0});return t}catch(t){}},Wt=async(e,t,a)=>{const{authExpirationTime:s}=c();-2===Number(s.value)&&(a=32),await Aa({disablePro:8!==e.type,compulsionLtd:8!==e.type,sourceId:a,plugin:!0,pluginInfo:e})},Zt=e=>{Z().push({path:e.route})},Xt=async e=>{if(!e.setup)return;if([8,12].includes(e.type)&&e.endtime<0)return i.error("加载失败：该插件未购买或已到期");const t=["mysql","pureftpd","nginx","apache","tomcat","memcached","openlitespeed","phpmyadmin"].includes(e.name),a=-1!==e.name.indexOf("php-");if(t||a)return Ha({pluginInfo:e});if(!(await is(e.name)))return!1;sessionStorage.setItem("pluginViewInfo",JSON.stringify({...e,built:e.built?"1":"0"}));const{pluginInfo:s}=c();s.value.visible=!0,s.value.id=e.name,s.value.name=e.title,s.value.callback=(null==e?void 0:e.callback)||null},ea=X("SOFT-OTHER-STORE",(()=>{c();const{searchVal:t,historyList:a,showNpsCollect:s,isLoading:n,inputZipFlag:l,speedInstallView:o}=ee(ia()),{scoreEvent:g,unInstallPlugin:y}=ia(),h=te(),f=te(null),_=ae([]),w=te({total:0,page:1,row:12}),b=e=>{h.value=e,u({title:"安装第三方插件包",area:50,btn:["确定安装","取消"],component:()=>r((()=>import("./index132.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)})},P=async e=>{h.value=e,f.value=u({title:"".concat(e.title,"购买"),area:50,component:()=>r((()=>import("./index133.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)})},k=()=>ae([At({type:"app",onClick:e=>Xt(e)}),Rt(),Nt("app"),Ht(),Ft({onClick:P}),Mt(),qt({onClick:g}),Gt({onChange:async(e,t)=>{(await Ut(e,t)).status||x("0")}}),zt((e=>{let t=[];const a=!(e=>e.endtime<0)(e);if(t.push({onClick:P,title:-1!==e.endtime?"立即续费":"立即购买",isHide:()=>a}),e.setup&&!a&&t.push({onClick:y,title:"卸载"}),!a)return t;if(e.setup){const a=ps(e);t.push({onClick:e=>Bt(e,"update"),title:"更新",isHide:()=>!a}),t.push({onClick:Xt,title:"设置"}),t.push({onClick:y,title:"卸载"})}else t.push({onClick:Bt,title:"安装"});return t}))]),T=async(e={type:10,query:t.value,p:w.value.page,row:w.value.row,force:"0"})=>{try{e.query=t.value||"";const{data:n}=await Ee(e),{softList:i,total:l,historyList:o,isForce:r}=await $t(n);r&&Qt(r),s.value=!i.length,_.value=i,a.value=o,w.value.total=l}catch(i){d(i,"getSoftListData")}finally{n.value=!1}};let E=k();const x=(e="0")=>{E=k(),T({type:10,query:t.value,p:w.value.page,row:w.value.row,force:e})},L=se({bugTime:"1",qrcode:"https://www.bt.cn",qrcodeSize:160}),S=te(0),j=te("0"),I=te(0),D=async()=>{clearTimeout(I.value),I.value=setTimeout((async()=>{const{data:t}=await(t=>e.post("auth/get_order_stat",{data:t,check:"number"}))({oid:S.value,type:-1===h.value.endtime?0:1});if(0!==t){x("1");return(await f.value).unmount(),i.success(-1!==h.value.endtime?"续费成功":"购买成功")}D()}),1e3)},V=te(!1);return{searchVal:t,softTableList:_,tablePageConfig:w,TableColumn:E,importOtherEvent:()=>{const e=document.createElement("input");e.type="file",e.style.display="none",e.accept=".zip,.tar.gz",e.id="update_zip",e.multiple=!0,e.addEventListener("change",(async()=>{const t=e.files||[];if(0===t.length)return;const a=new FormData;a.append("plugin_zip",t[0]);let s={headers:{"Content-Type":"multipart/form-data","x-http-token":window.vite_public_request_token}};const n=await p.post("/plugin?action=update_zip",a,s);if(m("status",n.data)&&m("msg",n.data)&&!n.data.status)return i.error(n.data.msg);b(n.data)})),e.click()},pageChangeEvent:(e,t)=>{w.value.page=e,w.value.row=t,x("0")},getSoftListData:T,refreshList:x,buyThirdPluginView:P,$reset:()=>{t.value="",_.value=[],w.value.page=1},plugin:L,oid:S,price:j,buyPopup:f,getRenewOrder:async()=>{clearTimeout(I.value),j.value=(h.value.price*Number(L.bugTime)).toFixed(2);const{data:e}=await Ie({pid:h.value.pid,cycle:L.bugTime,type:-1===h.value.endtime?0:1});if(null==e?void 0:e.msg.code)L.qrcode=e.msg.code,S.value=e.msg.oid,D();else{i.request(e);(await f.value).unmount()}},getOrderStatus:D,$reset_buy:()=>{clearTimeout(I.value),S.value=0},rowData:h,isShowSpeedVisible:V,installThirdPlugin:async e=>{try{V.value=!0;const{status:t,msg:a}=await v({plugin_name:h.value.name,tmp_path:h.value.tmp_path});l.value=!1,i.request({status:t,msg:null==a?void 0:a.replace(/<br>/g,"\n")}),o.value=!1,V.value=!1,x("0"),e()}catch(t){}},cancelInstall:()=>{V.value=!1,i.error("已取消安装!")},installOtherEvent:b,$reset_install:()=>{h.value={}}}})),ta=X("SOFT-PLUGIN-STORE",(()=>{const e=se({total:0,page:1,row:10}),t=ne("softTypeList",[]),a=te([]),{isSpecial:n,searchVal:l,isLoading:o,tabTypeActive:p,showNpsCollect:m,historyList:v}=ee(ia()),{unInstallPlugin:f}=ia(),{payment:_}=c(),w=ae(_.value.authType),b=ae(_.value.authExpirationTime),P=se({upgrades:[],version:"",options:[],info:{}}),k=te(),T=te(),E=[{title:"5分钟极速响应",icon:"free-time-icon"},{title:"15天无理由退款",icon:"free-refund-icon"},{title:"30+款付费插件",icon:"free-plunge-icon"},{title:"20+企业版专享功能",icon:"free-function-icon"},{title:"1000条免费短信（年付）",icon:"free-message-icon"},{title:"2张SSL商用证书（年付）",icon:"free-certificate-icon"}],x=[{title:"更换授权IP",icon:"free-ip-icon"},{title:"客服优先响应",icon:"contact-customer"},{title:"15+款付费插件",icon:"free-fifteen-icon"},{title:"商用防火墙授权",icon:"icon-file-lock"}],L=ie((()=>b.value>=0&&"free"!==w.value)),S=ie((()=>12===p.value)),j=ie((()=>8===p.value)),I=ie((()=>L.value&&!(S.value&&"pro"===w.value))),D=ie((()=>!!(S.value||L.value&&"ltd"===w.value)||!(!j.value&&L.value&&"pro"===w.value)&&!j.value)),V=ie((()=>s(b.value,"yyyy-MM-dd"))),O=ie((()=>{const e=(new Date).getTime()/1e3,t=b.value-e;return Math.ceil(t/86400)})),C=ie((()=>D.value?"#966000":"#f1ad29")),A=ie((()=>S.value||D.value?E:x)),R=ie((()=>[{title:"全部",id:0},{title:"已安装",id:-1},...t.value].filter((e=>11!=e.id&&10!=e.id)))),N=async(s={type:p.value,query:l.value,p:e.page,row:e.row,force:"0"})=>{try{o.value=!0,s.query=l.value||"";const{data:n}=await Ee(s),{softList:i,total:r,historyList:c,typeList:u,isForce:p}=await $t(n);"1"==s.force&&Qt(p),m.value=!r,a.value=i,v.value=c,t.value=u,e.total=r}catch(n){d(n,"getSoftListData")}finally{o.value=!1}},q=()=>ae([At({type:"app",onClick:e=>Xt(e)}),Rt(),Nt("app"),Ht(),Ft({onClick:e=>{10!=e.type&&Wt(e,0,34)}}),Mt(),{label:"状态",prop:"gateway",width:50,render:e=>{if(5!==e.type)return Q("span",null,[Y("--")]);const t="phpmyadmin"===e.name||e.status?"svgtofont-icon-start text-[#20a53a]":"svgtofont-icon-stop text-danger";return e.setup?Q("span",{class:"flex"},[Q("i",{class:t},null)]):Q("span",null,[Y("--")])}},Gt({onChange:async(e,t)=>{(await Ut(e,t)).status||F("0")}}),zt((e=>{let t=[];const a=g(ms(e.task)),s=us(e,w.value),n=g(null==e?void 0:e.preview_url)&&""!=e.preview_url&&!s,i=!!e.route,l=(e,a,s=()=>!1)=>t.push({title:e,onClick:a,isHide:s});if(!s)return l("立即跳转",Zt,(()=>!i)),l(ms(e.task),ka,(()=>!a)),l("预览",Yt,(()=>!n)),l(-1!==e.endtime?"立即续费":"立即购买",Wt,(()=>s)),l("卸载",f,(()=>!(!s&&e.setup))),t;const o=ps(e),r=5!==e.type;return e.setup?(l("更新",(e=>Bt(e,"update")),(()=>!o)),l("设置",Xt),l("修复",M,(()=>!r)),l("卸载",f)):e.is_docker?l("立即前往",(()=>{h.push({name:"docker"})})):l("安装",Bt),t}))]);let H=q();const F=(t="0")=>{H=q(),N({type:p.value,query:l.value,p:e.page,row:e.row,force:t})},M=e=>{k.value=e,T.value=u({title:"".concat(e.title,"v").concat(e.version,"-修复插件"),area:50,component:()=>r((()=>import("./index134.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)})};return{TableColumn:H,searchVal:l,tablePage:e,softTableList:a,typeList:R,refreshPluginList:F,getSoftListData:N,openNpsEvent:()=>Sa({type:16,id:993,isNoRate:!0}),toggleClassEvent:t=>{p.value=t,sessionStorage.setItem("SOFT-PLUGIN-TYPE",String(t)),e.page=1,F("0")},isPay:L,isActiveLtd:S,isActivePro:j,isActivePay:I,isShowType:D,isExpTime:V,isDistanceDays:O,isShowColor:C,recomList:A,pluginPayEvent:async e=>{-2===b.value&&(e=32),Aa({sourceId:e,disablePro:D.value,compulsionLtd:D.value})},plugin:P,helpList:[{content:"无法修复？请尝试切换下版本。"}],getPluginInfo:async()=>{var e;const t=await y({plugin_name:k.value.name,show:1});if(t.status){P.upgrades=t.data;const a=P.upgrades.at(-1)||{beta:!1},s=a.beta?a:{},i=P.upgrades.at(0);if(P.info=k.value.is_beta?s:i,!P.info){const e=k.value.version;P.info={beta:2,m_version:e.split[0],update_msg:0,update_time:0,version:e.split[1]}}n&&(P.options=P.upgrades.map((e=>({label:e.m_version+"."+e.version+(e.beta?"bate":"Stable"),value:e.m_version+"."+e.version}))),P.version="".concat((null==(e=P.options.at(0))?void 0:e.value)||""))}else i.error(t.msg)},cutVersionEvent:async()=>{Bt({...k.value,version:P.version},"repair")},repairPluginEvent:async()=>{(await T.value).unmount(),Bt(k.value,"repair")},softData:k,$reset:()=>{l.value="",a.value=[],t.value=[],e.page=1,k.value={},P.options=[],P.version="",P.upgrades=[],H.value=[]}}})),aa=X("SOFT-DEPLOY-STORE",(()=>{const{tabDeployActive:t,isLoading:a,searchVal:s}=ee(ia()),{scoreEvent:l}=ia(),o=te(null),c=te(),m=te(),v=te({total:0,page:1,row:10}),g=ne("deployTypeList",[]),y=ae([]),h=ae([]),b=te("all"),P=ie((()=>[{title:"全部",tid:0},...g.value])),k=e=>{o.value=e||null,u({title:"".concat(e?"更新":"导入","一键部署项目包").concat(e?"【".concat(e.title,"】"):""),area:60,btn:["提交","取消"],component:()=>r((()=>import("./import.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),showClose:!0})},T=()=>{var e;h.value=(e={list:y.value,limit:v.value.row,p:v.value.page},w(e.limit,e.list)[e.p-1]||[])},E=async t=>{try{t.search||delete t.search,a.value=!0;const{data:s,status:n}=await(t=>e.post("deployment/GetList",{data:t,customType:"default",check:"object"}))(t),i=f(s),{list:l,dep_type:o}=s;1===Number(t.force)&&Qt(n);const r="all"===b.value?"":b.value;i("list")&&_(l)&&(y.value=r?l.filter((e=>{switch(r){case"php":return null===e.project_type||e.project_type===r||0===e.project_type&&0===e.install_type;case"php_async":return e.project_type===r||0===e.project_type&&1===e.install_type;case"java":return e.project_type===r||1===e.project_type;default:return e.project_type===r}})):l,v.value.total=y.value.length,T()),i("dep_type")&&_(o)&&(g.value=o,g.value.push({tid:100,title:"其他"}))}catch(s){d(s)}finally{a.value=!1}};let x=ae([{type:"selection",width:36,isHide:100!=t.value},At({type:"deploy",sortable:!0,onClick:e=>ns({pluginInfo:e})}),{label:"版本",prop:"version"},Nt("deploy"),{label:"项目类型",width:90,render:e=>{const t={php_async:"异步项目",java:"Java项目",default:"PHP项目"};return t[e.project_type]||t.default}},{label:"支持版本",render:e=>{const{php:t,java:a}=e;return t?Q("span",{title:"支持的PHP版本：".concat(t)},[Y("PHP版本："),t]):Q("span",{title:"支持的JDK版本：".concat(a)},[Y("JDK版本："),a])}},{label:"提供者",prop:"author",render:e=>{let t="--";if("宝塔"===e.author)t=e.title;else t=e.author;return Q("span",{class:"bt-link",onClick:()=>(async e=>{e.official?window.open(e.official):location.reload()})(e)},[t])}},qt({onClick:e=>l(e),sortable:!0}),zt((e=>{let t=[{onClick:L,title:"一键部署"}];return 0===e.id&&(t.push({onClick:k,title:"更新"}),t.push({onClick:I,title:"删除"})),t}))]);const L=async e=>(o.value=e,c.value=u({title:"【".concat(e.title,"】一键部署"),area:60,btn:["提交","取消"],component:()=>r((()=>import("./index135.js?v=1734676359").then((e=>e.i))),__vite__mapDeps([]),import.meta.url),showClose:!0}),c.value),S=[{label:"删除自定义项目",value:"delete",event:async(e,a)=>{const n=async e=>await xe({dname:e.name});await e({title:"批量删除",content:"即将删除所选中的项目，是否继续操作?",column:[{prop:"name",label:"项目名称"},Te()],onConfirm:async()=>(await a(n),E({type:t.value,search:s.value}),!1)})}}],j=(e="0")=>{E({type:t.value,search:s.value,force:e})},I=async e=>{try{await n({title:"删除自定义项目",type:"calc",icon:"warning-filled",content:"您真的要删除【".concat(e.name,"】吗？")});const t=await xe({dname:e.name});t.status?(i.success(t.msg),j()):i.error(t.msg)}catch(t){}},D=se({name:"",title:"",php:"",enable_functions:"",version:"",ps:"",file:null,project_type:"php",mysql_version:"",java_version:""}),V=te("未选择任何文件"),O=te();return{searchVal:s,typeList:P,projectType:b,projectTypeOptions:[{label:"全部项目",value:"all"},{label:"PHP项目",value:"php"},{label:"异步项目",value:"php_async"},{label:"Java项目",value:"java"}],TableColumn:x,deployShowTableList:h,deployTableListRef:m,TableBatchOptions:S,tablePageConfig:v,getDeployListData:E,pageChangeEvent:(e,t)=>{v.value.page=e,v.value.row=t,T()},importProjectEvent:k,toggleClassEvent:e=>{t.value=e,sessionStorage.setItem("SOFT-DEPLOY-TYPE",String(e)),v.value.page=1,v.value.total=0,E({type:e,search:s.value}),x.value[0].isHide=100!=t.value},onChangeProjectType:e=>{v.value.page=1,E({type:t.value,search:s.value,force:"0"})},refreshDeployList:j,fileName:V,helpList:[{content:()=>Q(le,null,[Q("span",{class:"text-danger"},[Y("请上传zip格式的项目包")]),Y(",里面必需包含auto_install.json配置文件")])}],cmdForm:D,cmdRules:{name:[{required:!0,message:"请输入项目英文名称",trigger:["blur"]}],title:[{required:!0,message:"请输入项目中文名称",trigger:["blur"]}],php:[{required:!0,message:"请输入项目PHP版本",trigger:["blur"]}],version:[{required:!0,message:"请输入项目版本",trigger:["blur"]}],ps:[{required:!0,message:"请输入项目简介",trigger:["blur"]}],java_version:[{required:!0,message:"请输入JDK版本",trigger:["blur"]}],mysql_version:[{required:!0,message:"请输入Mysql版本",trigger:["blur"]}]},cmdFormRef:O,projectTypeRadio:[{label:"PHP",value:"php"},{label:"Java",value:"java"}],changeProjectType:e=>{O.value.resetFields(),D.project_type=e},importPlugin:()=>{const e=document.createElement("input");e.type="file",e.style.display="none",e.accept=".zip",e.id="update_zip",e.multiple=!0,e.addEventListener("change",(async()=>{const t=e.files||[];0!==t.length&&(V.value=t[0].name,D.file=t[0])})),e.click()},onConfirm:async e=>{try{if(await O.value.validate(),!D.file)return void i.error("请上传项目包");if(!D.file.name.endsWith(".zip"))return void i.error("请上传zip格式的项目包");const a=new FormData;a.append("name",D.name),a.append("title",D.title),"php"===D.project_type?(a.append("php",D.php),a.append("enable_functions",D.enable_functions)):(a.append("mysql_version",D.mysql_version),a.append("java_version",D.java_version),a.append("project_type",D.project_type)),a.append("version",D.version),a.append("ps",D.ps),a.append("dep_zip",D.file);let s={headers:{"Content-Type":"multipart/form-data","x-http-token":window.vite_public_request_token}};const n=i.load("正在导入项目，请稍后..."),l=await p.post("/deployment?action=AddPackage",a,s);n.close(),l.data.status?(v.value.page=1,t.value=100,j(),e(),i.success(l.data.msg)):i.error(l.data.msg)}catch(a){}},initImportForm:()=>{if(o.value){const{name:e,title:t,php:a,enable_functions:s,version:n,ps:i,project_type:l,java:r,mysql:c}=o.value;Object.assign(D,{name:e,title:t,php:a||"",enable_functions:s||"",version:n,ps:i,project_type:"java"===l?"java":"php",mysql_version:c||"",java_version:r||""})}},oneDeploy:c,rowData:o,$reset:()=>{s.value="",b.value="all",y.value=[],h.value=[],v.value={total:0,page:1,row:10}},$reset_import_form:()=>{o.value=null,V.value="未选择任何文件",Object.assign(D,{name:"",title:"",php:"",enable_functions:"",version:"",ps:"",file:null,project_type:"php",mysql_version:"",java_version:""})}}})),sa=Z(),na=oe(),ia=X("SOFT-STORE",(()=>{const{mainWidth:t}=c(),a=ie((()=>{var e;return(null==(e=oe())?void 0:e.name)||"plugin"})),s=sessionStorage.getItem("SOFT-PLUGIN-TYPE"),l=te(s?Number(s):0),o=sessionStorage.getItem("SOFT-DEPLOY-TYPE"),p=te(o?Number(o):0),m=te(!1),d=te(!1),v=te(!1),g=te(!1),y=te(!1),h=te([]),f=ae([]),w=ae([]),E=te(),x={name:"get_soft_list",key:"get_soft_list"},L=te(),S=ie((()=>"deployment"!==a.value)),j=ie((()=>"plugin"===a.value)),I=te(),D=te(),V=te(),O=ie((()=>{var e;const t=null==(e=I.value)?void 0:e.name;return"total"===t||"rsync"===t||"syssafe"===t||"tamper_proof"===t})),C=te(!1),A=()=>{var e,t;(null==(e=E.value)?void 0:e.blur)&&E.value.blur(),(null==(t=E.value)?void 0:t.hidePopover)&&E.value.hidePopover()},R=()=>{var e;(null==(e=E.value)?void 0:e.showPopover)&&E.value.showPopover()},N=async(e="0",t)=>{if("other"===a.value){const a=ea(),{tablePageConfig:s}=ee(a);t&&(s.value.page=1),a.refreshList(e)}else if("plugin"===a.value){const a=ta(),{tablePage:s}=ee(a);t&&(s.value.page=1),a.refreshPluginList(e)}else if("deployment"===a.value){const a=aa(),{tablePageConfig:s}=ee(a);t&&(s.value.page=1),a.refreshDeployList(e)}},q=async()=>{var t,a;const{data:s}=await e.post("plugin/push_plugin",{customType:"default",check:"array"});_(s)&&2===s.length&&(f.value=(null==(t=s[0])?void 0:t.plugin)||[],w.value=(null==(a=s[1])?void 0:a.plugin)||[])},H=ne("softList",[]),F=ie((()=>t.value<=400?1:Math.floor((t.value-200)/120))),M=async()=>{const{data:t}=await e.post("plugin/get_usually_plugin",{customType:"default",check:"array"});H.value=t},G=te(!1),z=te(5),B=ae([{score:5,name:"力荐"},{score:4,name:"好"},{score:3,name:"一般"},{score:2,name:"差"},{score:1,name:"非常差"}]),U=se({count:0,total:0,avg:0,rate:0,starList:[]}),J=async(t,a)=>{var s,n;const l=await(o={sName:t,version:a},e.post("plugin/uninstall_plugin",{data:o,loading:"正在卸载，请稍候...",customType:"default",check:"msg"}));var o;return l.status?(i.success(l.msg),N()):i.msg({dangerouslyUseHTMLString:!0,message:l.msg,type:"error",duration:0,showClose:!0}),(null==(s=I.value)?void 0:s.callBack)&&(null==(n=I.value)||n.callBack(l.status)),l.status},$=e=>{"refreshSoftTable"===e.data&&N()};return{tabActive:a,historyList:h,tabTypeActive:l,tabDeployActive:p,showNpsCollect:m,isLoading:d,inputZipFlag:v,speedInstallView:g,isResetDeployPage:y,isPluginView:j,redirectRouter:async()=>{na.name!==a.value&&sa.push({name:a.value})},cutTabsEvent:e=>{a.value=e,T("/soft/"+e)},initSoftView:()=>{window.addEventListener("message",$)},$reset:()=>{window.removeEventListener("message",$)},refreshRouteData:N,searchRef:E,softSearchList:f,softRecommendList:w,handleOpenPluginEvent:async(e,t=22)=>{A(),ns({pluginName:e,source:t})},getHotSoft:q,clearSoftHistory:e=>{h.value.splice(e,1),h.value=[...h.value]},clearFindHistoryEvent:async(e,t)=>{await n({icon:"warning-filled",title:"删除搜索历史记录",content:"删除该条搜索历史【"+e+"】，是否继续？"});const a=b("正在删除指定搜索历史记录，请稍后...");try{const a=await P({val:e,...x});a.status&&h.value.splice(t,1),i.request(a),R()}catch(s){}finally{a.close()}},inputHistoryEvent:e=>{L.value=e,A(),N("0")},clearAllHistoryEvent:async()=>{await n({icon:"warning-filled",title:"清空搜索历史",content:"清空所有搜索历史记录，是否继续？"});const e=b("正在清空搜索历史记录，请稍后...");try{const e=await k(x);e.status&&(h.value=[]),i.request(e),R()}catch(t){}finally{e.close()}},initHistory:()=>{0===h.value.length&&A(),as({promises:[q],delay:100})},$reset_history:()=>{L.value="",h.value=[],f.value=[],w.value=[],m.value=!1},showRefresh:S,triggerHideEvent:A,triggerShowEvent:R,openNPS:()=>{Sa({type:16,id:993,isNoRate:!0})},searchVal:L,initRecently:()=>{as({promises:[M],delay:500})},handleOpenRecentEvent:e=>{ns({pluginName:e.name,type:"default"})},getHistoryInfo:M,softNum:F,softList:H,$reset_recently:()=>{H.value=[]},scoreEvent:e=>{I.value=e,D.value=u({title:"【".concat(e.title,"】评分"),area:55,component:()=>r((()=>import("./index136.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)})},loading:G,pluginData:I,pluginScore:U,score:z,getComment:e=>B.value.filter((t=>t.score===e))[0].name,getDetail:async()=>{try{G.value=!0;const a=await(t={pid:I.value.id,p:1},e.post("plugin/get_score",{data:t,customType:"default",check:"array"}));if(a.status){const e=a.data.split.reverse(),t=a.data.total;U.avg=Number(((1*e[4]+2*e[3]+3*e[2]+4*e[1]+5*e[0])/t).toFixed(1)),U.count=I.value.count,U.total=t,U.rate=0!==t?Number((100*Number(((e[0]+e[1])/t).toFixed(2))).toFixed(0)):0;for(let a=0;a<5;a++)U.starList.push(Number((100*Number((e[a]/t).toFixed(2))).toFixed(0)));G.value=!1}}catch(a){}var t},onSubmitScore:async()=>{try{const a=await(t={pid:I.value.id,num:z.value,ps:"用户未做任何评价"},e.post("plugin/set_score",{data:t,customType:"default",check:"msg"}));a.status?(N(),(async e=>{const t=await e.value;t&&t.unmount()})(D),i.success(a.msg)):i.error(a.msg)}catch(a){}var t},$reset_score:()=>{I.value={},U.starList=[]},unInstallPlugin:e=>{I.value=e,V.value=u({showFooter:!0,title:"卸载",area:45,component:()=>r((()=>import("./index137.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)})},onUnInstall:async()=>{let t=I.value.version;for(var a=0;a<I.value.versions.length;a++)if(I.value.versions[a].setup&&I.value.version.includes(I.value.versions[a].m_version)){t=I.value.versions[a].m_version,t.indexOf(".")<0&&(t+="."+I.value.versions[a].version);break}const s=I.value.name;if(O){if(C.value){const a=await(n={soft_name:s},e.post("plugin/save_plugin_settings",{data:n,customType:"default",check:"msg"}));return a.status?J(s,t):(i.error(a.msg),a.status)}return J(s,t)}return J(s,t);var n},unInstall:J,isSpecial:O,checked:C}})),la=Object.freeze(Object.defineProperty({__proto__:null,SOFT_STORE:ia,useSoftStore:()=>{const e=ia();return{...e,...ee(e)}}},Symbol.toStringTag,{value:"Module"})),oa=e=>u({title:"".concat(e.title,"- 更新日志"),area:52,component:()=>r((()=>import("./history-version.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),compData:{name:e.name,title:e.title}}),{isRefreshSoftList:ra,isUpdatePayment:ca}=c(),ua=(e,t,a)=>{var s,n;const{title:i,name:l,ps:o,type:r,dependnet:c,other_php:u,versions:p,version:m}=e,d=l.split("-")[0];var v;a.title=i,a.name=l,a.isBeta=!!e.is_beta,a.ps=o,a.type=r,a.call=t,a.isInstall="i"===t,a.isUpdate="u"===t,a.isRepair="r"===t,a.isPHPInstall="php"===d&&"i"===t,a.isBeta=!!e.is_beta,a.isSystem=5===r,a.isPHPInstall="php"===d,a.isMysqlUpdate="mysql"===d&&("r"===t||"u"===t),a.isSpecialPlugins=["apache","nginx","mysql"].includes(l),a.introduction=(v=e.introduction)?v.split(";").map((e=>e.split("|"))):[],a.compile=["nginx","apache","mysql","php"].includes(d),a.currentVersion=m||"",a.otherPHP=u||[],a.versions=p||[],a.dependnet=c,a.isDependnet=!((null==(s=null==c?void 0:c.need)?void 0:s.length)||(null==(n=null==c?void 0:c.selected)?void 0:n.length))},pa=async(e,t,a)=>{var n,l;const o=x(a);let r=e.versions[a||0];if(o&&e.isSystem){const t=e.versions.findIndex((t=>e.currentVersion.indexOf(t.m_version)>-1));t>=0&&(r=e.versions[t])}if(e.isPHPInstall)if(o&&(a=e.otherPHP.findIndex((t=>t.name===e.name))),r=e.otherPHP[a||0],e.name!==r.name){const e=i.load("正在获取PHP版本信息，请稍候..."),{data:t}=await E({sName:r.name});r=t.versions[0],e.close()}else r=e.versions[0];if(e.isSystem||(t.updateTime=r.update_time?s(r.update_time,"yyyy/MM/dd"):"无",t.isBeta=!!r.beta,t.updateMsg=r.update_msg||"暂无内容"),t.mVersion=r.m_version,e.isSystem&&e.isUpdate&&!e.isPHPInstall){const a=await _a(e);if(!a.length)return void(t.fullVersion="版本错误");t.version=null==(n=a[0])?void 0:n.version,t.fullVersion="".concat(null==(l=a[0])?void 0:l.m_version,".").concat(a[0].version)}else t.version=r.version,t.fullVersion="".concat(r.m_version).concat(r.version?"."+r.version:"");return t},ma=(e,t)=>({sName:e.name,version:t.mVersion,min_version:t.version}),da=async(e,t=1,a)=>{if(await wa(e))return;if(0===t){if(!(await va(e,e.upgrade?"更新":"安装")))return;a()}const s=i.load("正在添加安装任务，请稍候...");try{const{data:a}=await Ve({...e,type:t});if(m("status",a)&&m("msg",a)&&!a.status)return void i.msg({dangerouslyUseHTMLString:!0,message:'<div style="line-height:22px;">'.concat(a.msg,"</div>"),type:"error",duration:2e3});ra.value=!0,ka(),setTimeout((()=>{i.request(a)}),1e3)}catch(n){}finally{s.close()}},va=async(e,t)=>{return e.sName,a=t,new Promise(((e,t)=>{u({title:"编译安装",area:45,btn:["提交并".concat(a),"取消"],component:()=>r((()=>import("./compile-install.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),onConfirm:()=>e(!0),onCancel:()=>e(!1)})}));var a},ga=async(e,t)=>{try{const a=await ha({pluginTitle:t.title,pluginName:e.sName,fullVersion:t.fullVersion}),{data:s}=await Ve({...e});return a.unmount(),m("status",s)&&m("msg",s)&&!s.status?(i.msg({message:'<div style="line-height:22px;">'.concat(s.msg,"</div>"),type:"error",duration:0,showClose:!0,dangerouslyUseHTMLString:!0}),!1):s}catch(a){}},ya=async(e,t,a,s="")=>{const n=await fa({title:"正在".concat({i:"安装",r:"修复",u:"更新"}[a],"插件：").concat(s,",请稍候..."),msg:"正在安装插件，请稍候..."}),l=await S({plugin_name:e,tmp_path:t,install_opt:a});i.request(l);const{inputZipFlag:o}=ee(ia());o.value=!0,n.unmount(),"/soft/plugin"!==location.pathname?window.location.reload():ra.value=!0},ha=({pluginTitle:e,pluginName:t,fullVersion:a})=>(({pluginTitle:e,pluginName:t,fullVersion:a})=>{const{downLoadPopup:s}=ee(ba());return s.value=u({area:45,component:()=>r((()=>import("./download-speed.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),compData:{pluginTitle:e,pluginName:t,fullVersion:a}})})({pluginTitle:e,pluginName:t,fullVersion:a}),fa=e=>(e=>{const{compData:t}=ee(ba());return t.value={speedConfig:e},u({title:e.title||"正在执行安装脚本，请稍候...",area:[50,26.4],component:()=>r((()=>import("./speed-install.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),compData:e})})(e),_a=async e=>{var t,a,s;let n=[];const i=null==(a=null==(t=e.currentVersion)?void 0:t.match(/(\d+\.\d+)/))?void 0:a.at(1);if(e.isMysqlUpdate){const t=null==(s=e.currentVersion.match(/(greatsql_\d+\.\d+|mariadb_\d+\.\d+|AliSQL)/))?void 0:s.at(1);n=e.versions.filter((e=>e.m_version===t||e.m_version===i))}else n=e.versions.filter((e=>e.m_version===i));return n},wa=async e=>{const{data:t}=await L();if(!m("task",t))return!1;const{task:a}=t;if(e.sName.indexOf("php-")>-1){if(a.some((t=>{let a=t.name.match(/-(.*?)\]/)&&t.name.match(/-(.*?)\]/)[1]===e.version,s=t.name.indexOf("php-")>-1;return a&&s})))return i.error("正在安装相同版本的php插件，不可重复安装!"),!0}let s=["nginx","apache","openlitespeed"];if(s.includes(e.sName)){if(a.some((e=>e.name.match(/\[(.*?)-/)&&s.includes(e.name.match(/\[(.*?)-/)[1]))))return i.error("正在安装同类型软件nginx,apache或openLiteSpeed，不可重复安装!"),!0}return!1},ba=X("INSTALL-STORE",(()=>{var e,t;const{installInfo:a}=c(),s=te(),l=te(),o=[[7,"免","border-[#E1E1E1] text-[#9a9a9a]"],[8,"专","border-[#F9EE9E] text-[#FFC82F]"],[12,"企","border-[#E8D6B3] text-[#A3782F]"]],r=ce({title:"",name:"",ps:"",type:0,call:"i",isBeta:!1,isSystem:!1,isInstall:!1,isUpdate:!1,isRepair:!1,isSpecialPlugins:!1,isPHPInstall:!1,isMysqlUpdate:!1,otherPHP:[],compile:!1,currentVersion:"",versions:[],label:[],introduction:[],isDependnet:!1,dependnet:{need:[],selected:[]}}),u=se({fullVersion:"",mVersion:"",version:"",isBeta:!1,status:!1,updateTime:"",updateMsg:""}),p=ce({value:0,version:[]}),d=te(!1),v=te([]),g=te(!0),h=se({progress:0,done:0,total:0,estimated:0,speed:0}),f=["安装完成","Successify","complete"],_=te(null==(t=null==(e=s.value)?void 0:e.speedConfig)?void 0:t.msg),w=te(null),b=te({args_name:"",ps:"",args:"",init:"#在编译前执行的shell脚本内容，通常为第三方模块的依赖安装和源码下载等前置准备"}),P=te(null),k=te(!1),T=ie((()=>r.title.indexOf("PHP-")>-1?"PHP":r.title)),L=ie((()=>o.find((e=>e[0]===r.type))||[])),S=ie((()=>{var e;return"soft_ico/ico-"+((null==(e=r.name)?void 0:e.indexOf("php-"))>-1?"php":r.name)+".png"})),R=ie((()=>j(h.done))),N=ie((()=>j(h.total))),q=ie((()=>j(h.speed))),H=te([{label:"模块名称",prop:"name"},{label:"模块描述",prop:"ps"},{label:"是否启用",render:e=>Q(ue("el-switch"),{modelValue:e.checked,"onUpdate:modelValue":t=>e.checked=t,onChange:()=>{B()}},null)},{label:"操作",align:"right",render:e=>[Q("div",{class:"flex items-center justify-end"},[Q("span",{class:"bt-link",onClick:()=>z(e)},[Y("删除")])])]}]),F=te([{name:"模块名称",ps:"模块描述"}]),M=ae({args_name:[{required:!0,message:"请输入模块名称",trigger:"blur"}],args:[{required:!0,message:"请输入模块参数",trigger:"blur"}]}),G=async()=>{try{const e=await O({name:r.name});F.value=e.data.args;let t=e.data.config.split("\n");F.value.forEach((e=>{t.includes(e.name)?e.checked=!0:e.checked=!1}))}catch(e){}},z=async e=>{try{await n({content:"确认删除模块【 ".concat(e.name,"】 吗？"),title:"提示",icon:"warning-filled"});const t=await I({name:r.name,args_name:e.name});G(),i.request(t)}catch(t){}},B=async()=>{const e=i.load("正在设置模块，请稍后...");try{const t=F.value.filter((e=>e.checked)).map((e=>e.name)).join("\n"),a=await D({name:r.name,args_names:t});e.close(),i.request(a),G()}catch(t){}finally{e.close()}},U=async()=>{var e;const{inputZipFlag:t,speedInstallView:a}=ee(ia());try{const s=await A({num:10,filename:"/tmp/panelShell.pl"}),n=s.msg.trim().split("\n"),i=f.some((e=>n[n.length-1].includes(e)));if("Successify"===n[n.length-1]||!0===t.value||i)return t.value=!1,a.value=!1,ne(),!1;_.value=s.msg,(null==(e=w.value)?void 0:e.scrollHeight)&&(w.value.scrollTop=w.value.scrollHeight),setTimeout((()=>{U()}),1e3)}catch(s){}},J=async()=>{try{const{data:e}=await C({plugin_name:r.name});e.status&&(h.done=e.down_size,h.total=e.total_size,h.progress=e.down_pre,h.estimated=e.need_time,h.speed=e.sec_speed),g.value&&setTimeout((()=>{g.value&&J()}),400)}catch(e){}},$=e=>{p.value=e,pa(r,u,p.value)},K=async()=>{const e=await a.value;null==e||e.unmount()},W=()=>{s.value.softData&&s.value.softData.callBack&&s.value.softData.callBack()},Z=te(),X=te(),ne=()=>{Z.value&&clearTimeout(Z.value),X.value&&clearTimeout(X.value)};return{compData:s,init:async()=>{if(!s.value.name)return;const e=m("name",s.value.pluginInfo)?s.value.pluginInfo:s.value.name;await(async(e,t,a)=>{if(re(e)&&m("name",e))return void ua(e,t,a);const s=i.load("正在获取插件信息，请稍候..."),{data:n}=await E({sName:e});s.close(),ua(n,t,a)})(e,s.value.type,r),await((e,t)=>{const a=[],{versions:s,isPHPInstall:n,otherPHP:i}=e;n?(i.map(((e,t)=>{a.push({title:e.name,key:t,disabled:e.status,data:e})})),t.value=i.findIndex((t=>t.name===e.name)),t.version=a):(s.map(((t,s)=>{let n=x(t.beta)?" Beta":" Stable",i=e.name+" ";e.isSystem?n="":i="",a.push({title:"".concat(i).concat(t.m_version).concat(""===t.version?"":".".concat(t.version)).concat(n),key:s,data:t})})),t.value=0,t.version=a)})(r,p),await pa(r,u),s.value.name&&"mysql"===s.value.name&&r.isInstall&&p.version.forEach(((e,t)=>{/^5\.7\.\d+/.test(e.title.replace("mysql","").trim())&&(p.value=t,$(t))}))},pluginModuleInfo:r,pluginActiveInfo:u,versionModel:p,cutPluginActiveInfo:$,install:async e=>{try{const t=ma(r,u);if(0!==e&&K(),r.isSystem)return await da(t,e,(()=>K()));await(async(e,t)=>{const a=await ga(e,t);a&&ya(e.sName,a.tmp_path,"i",t.title)})(t,{title:r.title,fullVersion:u.fullVersion}),W()}catch(t){}},repair:async()=>{try{const e=ma(r,u);K(),(async(e,t)=>{const a=await ga(e,t);a&&ya(e.sName,a.tmp_path,"r",t.title)})(e,{title:r.title,fullVersion:u.fullVersion})}catch(e){}},update:async()=>{try{const e=ma(r,u);if(e.upgrade=e.version,!r.isSystem&&K(),r.isSystem)return await(async(e,t)=>{e.isMysqlUpdate&&await n({title:"更新[MySQL]",isHtml:!0,content:'<div class="!text-[#666]">更新过程可能会导致服务中断,您真的现在就将[MySQL]更新到['.concat(t,']吗?</div>\n\t\t\t\t<div class="text-danger">更新数据库有风险,建议在更新前,先备份您的数据库</div>\n\t\t\t\t<div class="text-danger">若您的是云服务器,强烈建议您在更新前做一个快照</div>\n\t\t\t\t<div class="text-danger">建议您在服务器负载闲时进行软件更新</div>'),type:"calc"})})(r,u.fullVersion),await da(e,0,(()=>K()));(async(e,t)=>{const a=await ga(e,t);a&&ya(e.sName,a.tmp_path,"u",t.title)})(e,{title:r.title,fullVersion:u.fullVersion})}catch(e){}},clearTimeoutAll:ne,pluginImgSrc:S,pluginTitle:T,pluginLabel:L,pluginPictureSrc:e=>{const t=r.name.includes("php-")?"php":r.name,a=r.introduction[e];return"https://www.bt.cn/Public/new/plugin/".concat(t,"/").concat(a[1])},getHistoryVersion:async()=>{try{d.value=!0;const{data:e}=await y({plugin_name:s.value.name});v.value=e,d.value=!1}catch(e){}},historyLoad:d,historyData:v,getSoftDownloadSpeed:J,downloadSpeed:h,doneSize:R,totalSize:N,speedSize:q,closeInstall:W,initDownLoad:()=>{Z.value=setTimeout((()=>{J()}),100)},downLoadPopup:l,closeDownLoad:async()=>{g.value=!1;(await l.value).unmount()},initSpeed:()=>{const{speedInstallView:e}=ee(ia());X.value=setTimeout((()=>{U(),e.value=!0}),100)},speedMsg:_,getCustomModuleData:G,config:{mode:"ace/mode/nginx",theme:"ace/theme/chrome",wrap:!0,showInvisibles:!1,showFoldWidgets:!1,useSoftTabs:!0,tabSize:2,showPrintMargin:!1,readOnly:!1,fontSize:"12px"},customForm:b,customVisible:k,clearAddForm:()=>{b.value={args_name:"",ps:"",args:"",init:"#在编译前执行的shell脚本内容，通常为第三方模块的依赖安装和源码下载等前置准备"}},rules:M,setCustomModuleData:B,tableColumn:H,handleAddCustomModule:()=>{k.value=!0},customData:F,submitCustomModule:async()=>{try{P.value.validate((async e=>{if(!e)return i.error("请填写表单必填项");{k.value=!1;const e=await V({name:r.name,...b.value});i.request(e),G()}}))}catch(e){}}}})),Pa=()=>ee(ba());Pa();const ka=()=>u({title:"消息盒子",area:[72,56],component:()=>r((()=>import("./index138.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)}),Ta=async()=>u({title:"重启服务器或者面板",area:[33,11],component:()=>r((()=>import("./index139.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)}),Ea=()=>u({title:"设置菜单显示隐藏",area:[35,40],component:()=>r((()=>import("./index140.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)}),xa=()=>u({title:!1,area:20,component:()=>r((()=>import("./index141.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)}),La=()=>u({area:60,component:()=>r((()=>import("./index142.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)}),Sa=e=>u({area:52,compData:e,component:()=>r((()=>import("./index143.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)}),ja=()=>u({area:60,component:()=>r((()=>import("./index144.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),async cancel(){await N({questions:JSON.stringify({25:"用户未填写任何信息"}),product_type:19,software_name:"Enterprise-Edition-Survey",rate:0})}}),Ia=e=>u({title:e.title+"配置",area:50,compData:e,component:()=>r((()=>import("./index145.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)}),Da=e=>u({area:[75,66.4],compData:e,component:()=>r((()=>import("./index146.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)}),Va=async()=>{var e,t;let a=()=>r((()=>import("./index92.js?v=1734676359")),__vite__mapDeps([]),import.meta.url);try{const s=te({client:0,login:0}),n=await R();if(n.status&&0!==(null==(e=n.data)?void 0:e.login))switch(s.value.client=n.data.client,s.value.login=n.data.login,null==(t=n.data)?void 0:t.client){case 1:a=()=>r((()=>import("./tencent-bind-user.js?v=1734676359")),__vite__mapDeps([]),import.meta.url);break;case 2:a=()=>r((()=>import("./ali-bind-user.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)}return u({area:40,component:a,compData:{authData:s.value}})}catch(s){return u({area:40,component:()=>r((()=>import("./index92.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)})}},Oa=()=>u({area:20,component:()=>r((()=>import("./index147.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)}),Ca=()=>u({area:20,component:()=>r((()=>import("./index148.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)}),Aa=e=>u({area:[100,72],compData:{...e,disablePro:!!x(e.disablePro)||e.disablePro},component:()=>r((()=>import("./index149.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)}),Ra=async e=>{const{installInfo:t}=c();t.value=u({area:63,compData:e,component:()=>r((()=>import("./index150.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)})},Na=e=>{const{title:t,type:a,callback:s}=e;return u({title:t,area:50,compData:{type:a,callback:s},component:()=>r((()=>import("./index151.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)})},qa=async({id:e=999,type:t,name:a,softName:s="panel",description:n,isNoRate:i=!1,title:l,isCard:o=!0,isShowPhone:r=!0})=>Sa({id:e,type:t,name:a,softName:s,description:n,isNoRate:i,title:l,isCard:o,isShowPhone:r}),Ha=async e=>{var t;const a=e.pluginInfo;if(!a){const{data:t}=await E({sName:e.name});e.pluginInfo=t}const s={phpmyadmin:()=>Fa(),tomcat:()=>za(a),pureftpd:()=>Ma(a),memcached:()=>Ba(a),nginx:()=>Ua(a),mysql:()=>Ga(a),openlitespeed:()=>Ja(a),php:()=>$a(a),apache:()=>Qa(a)};if((null==(t=a.name)?void 0:t.includes("php-"))||s[a.name]){if(a.name.includes("php-"))return s.php();if(s[a.name])return s[a.name]()}},Fa=()=>u({isAsync:!0,title:"phpMyAdmin",area:74,component:()=>r((()=>import("./index152.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)}),Ma=e=>u({isAsync:!0,title:"Ftp管理",area:[100,56],component:()=>r((()=>import("./index153.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),compData:e,showClose:!0}),Ga=e=>u({isAsync:!0,title:"Mysql",area:[80,65],component:()=>r((()=>import("./index154.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),compData:e,showClose:!0}),za=e=>u({isAsync:!0,title:"Tomcat管理",area:[64,54],component:()=>r((()=>import("./index155.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),compData:e,showClose:!0}),Ba=e=>u({isAsync:!0,title:"Memcached管理",area:[64,54],component:()=>r((()=>import("./index156.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),compData:e,showClose:!0}),Ua=e=>u({isAsync:!0,title:"Nginx",area:[68,58],component:()=>r((()=>import("./index157.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),compData:e,showClose:!0}),Ja=e=>u({isAsync:!0,title:"OpenLiteSpeed",area:[64,54],component:()=>r((()=>import("./index158.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),compData:e,showClose:!0}),$a=e=>u({isAsync:!0,title:"PHP-".concat(e.version,"管理"),area:[80,64],component:()=>r((()=>import("./index159.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),compData:e,showClose:!0}),Qa=e=>u({isAsync:!0,title:"Apache",area:[68,58],component:()=>r((()=>import("./index160.js?v=1734676359")),__vite__mapDeps([]),import.meta.url),compData:e,showClose:!0}),Ya=async({name:e,options:t,request:a,selectList:s})=>{await u({title:"批量设置".concat(e),area:"40",compData:{name:e,options:t,selectList:s,request:a},showFooter:!0,component:()=>r((()=>import("./index161.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)})},Ka=()=>{u({area:35,component:()=>r((()=>import("./index162.js?v=1734676359")),__vite__mapDeps([]),import.meta.url)})},Wa=async(e,t="editor",a="")=>{const s=await r((()=>import("./store.js?v=1734676359").then((e=>e.aS))),__vite__mapDeps([]),import.meta.url),{useCreateEditorTabs:n,editorExample:i}=await r((()=>import("./store.js?v=1734676359").then((e=>e.aR))),__vite__mapDeps([]),import.meta.url),{FilesAceEditor:l}=s,o={path:e,title:e.split("/").pop(),type:t,mode:a};i.value?n(o):l(o)},Za=pe({__name:"index",props:me({version:{},allAlarm:{type:Boolean,default:!1},multiple:{type:Boolean,default:()=>!0},limit:{default:()=>[]},options:{},isDefault:{type:Boolean,default:!1}},{modelValue:{},modelModifiers:{}}),emits:me(["change"],["update:modelValue"]),setup(e,{expose:t,emit:a}){const{getOldSenderAlarmListInfo:s,push:n}=c(),i=e,{load:l,error:o}=F(),r=te(!1),u=de(e,"modelValue"),p=a,m=ae([]),d=e=>{p("change",e)},v=async()=>{try{r.value=!0,await s();const e=[];for(const t in n.value.old)if(Object.prototype.hasOwnProperty.call(n.value.old,t)){const a=n.value.old[t];if(a.setup&&!i.limit.includes(a.name)){const t=!("{}"===JSON.stringify(a.data));a.isSetAlarm=t,e.push({label:a.title,value:a.name,disabled:!a.setup||!t,isSetAlarm:!t,render:()=>{const e=!a.setup||!t;return Q("div",{class:"flex justify-between"},[Q("span",null,[a.title]),Q("span",{class:"".concat(e?"text-danger":"hover:text-primary"," cursor-pointer mr-[4px]")},[Q("span",{onClick:e=>{e.stopPropagation(),y(a)}},[e?"[未配置]":"[已配置]"])])])}})}}if(m.value=e,i.options&&(m.value=[...i.options,...e]),i.allAlarm&&m.value.unshift({label:"全部",value:"all",disabled:!1,isSetAlarm:!1,render:()=>Q("div",{class:"flex justify-between"},[Y("全部"),Q("span",null,null)])}),Array.isArray(u.value)&&u.value.length?u.value.forEach((e=>{m.value.find((t=>t.value===e))||(u.value=u.value.filter((t=>t!==e)))})):g(u.value)&&u.value&&(m.value.find((e=>e.value===u.value))||(u.value="")),i.isDefault&&!u.value){const t=e.filter((e=>!e.disabled));t.length&&(u.value=i.multiple?[t[0].value]:t[0].value)}}catch(e){}finally{r.value=!1}},y=async e=>{const t=[{title:"钉钉机器人配置",type:"dingding"},{title:"飞书机器人配置",type:"feishu"},{title:"发送者配置",type:"mail"},{title:"企业微信机器人配置",type:"weixin"},{title:"微信公众号",type:"wx_account"}].find((t=>t.type===e.name))||{title:"",type:"",data:{}};"wx_account"!==e.name||e.setup||await h(e.name),Ia({...t,callback:v})},h=async e=>{const t=l("正在安装模块，请稍后...");try{await q({name:e})}catch(a){}finally{t.close()}};return ve(v),t({refresh:v}),(e,t)=>{const a=H,s=ge("bt-loading");return ye((fe(),_e(a,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e),multiple:e.multiple,options:he(m),placeholder:"请选择告警方式",onChange:d},null,8,["modelValue","multiple","options"])),[[s,he(r)]])}}}),Xa=pe({__name:"index",props:me({multiple:{type:Boolean,default:()=>!0},limit:{default:()=>[]}},{modelValue:{},modelModifiers:{}}),emits:me(["change"],["update:modelValue"]),setup(e,{expose:t,emit:a}){const{getSenderAlarmListInfo:s,push:n}=c(),i=e,l=te(!1),o=de(e,"modelValue"),r=a,u=ae([]),p=e=>{r("change",e)},m=[{title:"钉钉",type:"dingding"},{title:"飞书",type:"feishu"},{title:"邮箱",type:"mail"},{title:"企业微信",type:"weixin"},{title:"微信公众号",type:"wx_account"},{title:"短信通知",type:"sms"},{title:"自定义消息通道",type:"webhook"}],d=async()=>{try{const e=[...m];l.value=!0,await s(!1),u.value=[];const t=n.value.config.filter((e=>!i.limit.includes(e.sender_type))),a=e.filter((e=>!t.some((t=>t.sender_type===e.type))&&!i.limit.includes(e.type)));t.forEach((e=>{var t;const a=m.find((t=>t.type===e.sender_type));let s=(null==(t=e.data)?void 0:t.title)?e.data.title+(e.data.title?" (".concat((null==a?void 0:a.title)||"",")"):""):a.title;if("sms"===e.sender_type){if(!e.data.total)return!1;s="短信通知 (".concat(e.data.count,"条)")}u.value.push({label:s||a.title,value:e.id,disabled:!1,render:()=>Q("div",{class:"flex justify-between"},[Q("span",{class:"mr-[10px]"},[s]),Q("span",{class:"hover:text-primary cursor-pointer mr-[4px]"},[Q("span",{onClick:t=>{t.stopPropagation(),v({...a,data:e,name:e.sender_type,setup:!0,isSetAlarm:!0})}},["sms"!==e.sender_type?"[已配置]":""])])])})})),a.forEach((e=>{u.value.push({label:e.title,value:"",disabled:!0,render:()=>Q("div",{class:"flex justify-between"},[Q("span",null,[e.title]),Q("span",{class:"text-danger cursor-pointer mr-[4px]",onClick:t=>{t.stopPropagation(),v({...e,setup:!1,name:e.type,data:{},isSetAlarm:!1})}},["sms"!==e.type?"[未配置]":""])])})}))}catch(e){}finally{l.value=!1}},v=async e=>{const t=[{title:"钉钉机器人配置",type:"dingding"},{title:"飞书机器人配置",type:"feishu"},{title:"邮箱配置",type:"mail"},{title:"企业微信机器人配置",type:"weixin"},{title:"微信公众号",type:"wx_account"},{title:"自定义消息通道",type:"webhook"},{title:"短信通知",type:"sms"}].find((t=>t.type===e.name))||{title:"",type:"",data:{}};Ia({...t,data:e})};t({refresh:d}),ve(d);const g=ie((()=>{var e;return(null==(e=i.limit)?void 0:e.length)?u.value.filter((e=>{var t;const a=null==(t=m.find((t=>{var a;return(null==(a=e.label)?void 0:a.includes(t.title))||"function"==typeof e.render&&e.render().toString().includes(t.title)})))?void 0:t.type;return!i.limit.includes(a)})):u.value}));return we((()=>i.limit),(e=>{if((null==e?void 0:e.length)&&o.value)if(Array.isArray(o.value)){const e=g.value.map((e=>e.value));o.value=o.value.filter((t=>e.includes(t)))}else g.value.some((e=>e.value===o.value))||(o.value=void 0)}),{deep:!0}),(e,t)=>{const a=H,s=ge("bt-loading");return ye((fe(),_e(a,{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),multiple:e.multiple,options:he(g),onChange:p,placeholder:"请选择告警方式"},null,8,["modelValue","multiple","options"])),[[s,he(l)]])}}}),es=F(),ts=async(e,t)=>{if(0===e.length)return t&&t(!0);const[a,...s]=e;try{const e=await a();t&&t(e)}catch(n){}return ts(s,t)},as=async({promises:e,callback:t,delay:a,isRouter:s,check:n})=>{const i=window.location.pathname;return await new Promise((e=>{setTimeout((()=>{s||(s=window.location.pathname),s&&!n?e(G(s,i)):n&&n()?e(!0):e(!1)}),a||0)}))?ts(e,t):t&&t(!0)},ss=async e=>{try{let{pluginName:t,pluginInfo:a}=e;if(x(t)&&x(a))return es.error("缺少参数: options.name 或 options.pluginInfo"),Promise.reject(new Error("缺少参数: options.name 或 options.pluginInfo"));if(z(a))return a;g(a)&&(t=a);const{data:s}=await E({sName:t});return a=s,a}catch(t){return Promise.reject(t)}},ns=async e=>{(e.name||e.softData)&&(e.pluginName=(null==e?void 0:e.name)||"",e.pluginInfo=(null==e?void 0:e.softData)||e.pluginInfo);const t=await ss(e),{isPay:a}=await(async e=>{const{payment:t}=c();if("ltd"===t.value.authType&&t.value.authExpirationTime>0)return{isPay:!0,type:"ltd",pluginInfo:z(e.pluginInfo)?e.pluginInfo:e.pluginName};const a=await ss(e),{endtime:s,type:n}=a;return"pro"===t.value.authType&&t.value.authExpirationTime>0&&8===n?{isPay:!0,type:"pro",pluginInfo:a}:s>=0?{isPay:!0,type:"plugin",pluginInfo:a}:{isPay:!1,type:"free",pluginInfo:a}})({pluginInfo:t});if(!a&&[8,12].includes(t.type))return Aa({disablePro:8!==t.type,compulsionLtd:8!==t.type,sourceId:e.source,...(null==e?void 0:e.plugin)?{pluginInfo:t}:{}});if(!t.setup)return(async e=>{await Ra({...e,name:e.name||e.pluginInfo.name,type:"i"})})({pluginInfo:t});const s=["mysql","pureftpd","nginx","apache","tomcat","memcached","openlitespeed","phpmyadmin"].includes(t.name),n=-1!==t.name.indexOf("php-");if(s||n)return Ha({pluginInfo:t});if(!(await is(t.name)))return!1;sessionStorage.setItem("pluginViewInfo",JSON.stringify({...t,built:e.pluginInfo?"1":"0"}));const{pluginInfo:i}=c();i.value.visible=!0,i.value.id=t.name,i.value.name=t.title,i.value.callback=(null==e?void 0:e.callback)||null},is=async e=>{try{const{data:t}=await M(e);return t.msg&&-1!==t.msg.indexOf("您无操作此插件的权限")?(es.request(t),Promise.resolve(!1)):Promise.resolve(!0)}catch(t){}},ls=async()=>{try{await n({icon:"warning-filled",title:"解绑宝塔账号",width:"35rem",content:"解绑宝塔账号后，将无法正常使用面板功能，是否继续操作？"});const e=await J();es.request(e),e.status&&setTimeout((()=>h.push({name:"bind-user"})),2e3)}catch(e){}},os=(e={readonly:!1,theme:"chrome"})=>({mode:"ace/mode/nginx",theme:"ace/theme/".concat(e.theme||"chrome"),wrap:!0,showInvisibles:!1,showFoldWidgets:!1,useSoftTabs:!0,tabSize:2,showPrintMargin:!1,readOnly:e.readonly,fontSize:"12px"}),rs=(e,t,a,s)=>({type:"custom",key:t,rules:(null==a?void 0:a.rules)||{},render:n=>{const i=B({key:t},n);return Q(U,{label:e,prop:i},{default:()=>[Q(Za,be({modelValue:n.value[i],"onUpdate:modelValue":e=>n.value[i]=e},(null==a?void 0:a.attrs)||{},{onChange:s}),null)]})}}),cs=(e,t,a,s)=>({type:"custom",key:t,rules:(null==a?void 0:a.rules)||{},render:n=>{const i=B({key:t},n);return Q(U,{label:e,prop:i},{default:()=>[Q(Xa,be({modelValue:n.value[i],"onUpdate:modelValue":e=>n.value[i]=e},(null==a?void 0:a.attrs)||{},{onChange:s}),null)]})}}),us=({endtime:e,type:t},a)=>e>=0||"ltd"===a||("pro"===a&&12!==t||"free"===a&&12!==t&&8!==t),ps=e=>{var t;if("phpmyadmin"===e.name)return!1;if(!e.versions)return!1;if((null==(t=e.versions)?void 0:t.length)>1){const t=["Redis"];if(e.admin&&!t.includes(e.title)){const t=e.versions[0],a="".concat(t.m_version,".").concat(t.version);let s=e.version!==a;if(e.is_beta){const t=e.versions[e.versions.length-1];if(1===t.beta){const a="".concat(t.m_version,".").concat(t.version);s=e.version!==a&&e.version<a}}if(s&&"mongodb"!==e.name)return!0}else for(let a=0;a<e.versions.length;a++){const t=e.versions[a];if(2===$(e.version,"".concat(t.m_version,".").concat(t.version)))return!0}}else{const t=e.versions[0];let a=!!t.beta;void 0===a&&(a=!1),void 0===e.is_beta&&(e.is_beta=!1);const s="".concat(t.m_version,".").concat(t.version);if(e.version!==s&&a===e.is_beta&&e.version<s)return!0}return!1},ms=e=>{let t=!1;switch(e){case"-1":t="正在安装";break;case"0":t="等待安装";break;case"-2":t="正在更新"}return t};export{ut as $,Qe as A,et as B,Be as C,ze as D,Ue as E,$e as F,Je as G,xt as H,ba as I,Ze as J,We as K,Ke as L,Ye as M,Ge as N,Xe as O,Ve as P,De as Q,Oe as R,ia as S,Re as T,Ae as U,He as V,qe as W,Ne as X,Fe as Y,Me as Z,Xa as _,Ea as a,pt as a0,at as a1,st as a2,tt as a3,it as a4,nt as a5,rt as a6,vt as a7,gt as a8,dt as a9,ja as aA,rs as aB,cs as aC,Ka as aD,os as aE,Ot as aF,la as aG,yt as aa,Ct as ab,ft as ac,wt as ad,_t as ae,ct as af,lt as ag,ot as ah,mt as ai,ht as aj,Pt as ak,Et as al,kt as am,Tt as an,bt as ao,Dt as ap,Le as aq,je as ar,Vt as as,St as at,Se as au,It as av,jt as aw,Lt as ax,Za as ay,ls as az,Va as b,Ya as c,qa as d,Sa as e,Da as f,as as g,Ra as h,ns as i,Na as j,Wa as k,Ca as l,ka as m,La as n,Oa as o,Aa as p,xa as q,ta as r,Ia as s,ea as t,Jt as u,aa as v,Ta as w,Pa as x,oa as y,Ce as z};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
