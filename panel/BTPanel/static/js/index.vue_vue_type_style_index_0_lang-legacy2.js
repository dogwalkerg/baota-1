!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,u,i=[],c=!0,s=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);c=!0);}catch(t){s=!0,a=t}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function n(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */n=function(){return r};var e,r={},a=Object.prototype,o=a.hasOwnProperty,u=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function p(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{p({},"")}catch(e){p=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var a=e&&e.prototype instanceof b?e:b,o=Object.create(a.prototype),i=new T(n||[]);return u(o,"_invoke",{value:P(t,r,i)}),o}function v(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}r.wrap=f;var d="suspendedStart",m="suspendedYield",h="executing",y="completed",g={};function b(){}function x(){}function w(){}var j={};p(j,c,(function(){return this}));var k=Object.getPrototypeOf,O=k&&k(k(J([])));O&&O!==a&&o.call(O,c)&&(j=O);var S=w.prototype=b.prototype=Object.create(j);function _(t){["next","throw","return"].forEach((function(e){p(t,e,(function(t){return this._invoke(e,t)}))}))}function E(e,r){function n(a,u,i,c){var s=v(e[a],e,u);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"==t(p)&&o.call(p,"__await")?r.resolve(p.__await).then((function(t){n("next",t,i,c)}),(function(t){n("throw",t,i,c)})):r.resolve(p).then((function(t){l.value=t,i(l)}),(function(t){return n("throw",t,i,c)}))}c(s.arg)}var a;u(this,"_invoke",{value:function(t,e){function o(){return new r((function(r,a){n(t,e,r,a)}))}return a=a?a.then(o,o):o()}})}function P(t,r,n){var a=d;return function(o,u){if(a===h)throw Error("Generator is already running");if(a===y){if("throw"===o)throw u;return{value:e,done:!0}}for(n.method=o,n.arg=u;;){var i=n.delegate;if(i){var c=L(i,n);if(c){if(c===g)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===d)throw a=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=h;var s=v(t,r,n);if("normal"===s.type){if(a=n.done?y:m,s.arg===g)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a=y,n.method="throw",n.arg=s.arg)}}}function L(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,L(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var o=v(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var u=o.arg;return u?u.done?(r[t.resultName]=u.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):u:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function N(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(N,this),this.reset(!0)}function J(r){if(r||""===r){var n=r[c];if(n)return n.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var a=-1,u=function t(){for(;++a<r.length;)if(o.call(r,a))return t.value=r[a],t.done=!1,t;return t.value=e,t.done=!0,t};return u.next=u}}throw new TypeError(t(r)+" is not iterable")}return x.prototype=w,u(S,"constructor",{value:w,configurable:!0}),u(w,"constructor",{value:x,configurable:!0}),x.displayName=p(w,l,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,p(t,l,"GeneratorFunction")),t.prototype=Object.create(S),t},r.awrap=function(t){return{__await:t}},_(E.prototype),p(E.prototype,s,(function(){return this})),r.AsyncIterator=E,r.async=function(t,e,n,a,o){void 0===o&&(o=Promise);var u=new E(f(t,e,n,a),o);return r.isGeneratorFunction(e)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},_(S),p(S,l,"Generator"),p(S,c,(function(){return this})),p(S,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=J,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,a){return i.type="throw",i.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var u=this.tryEntries[a],i=u.completion;if("root"===u.tryLoc)return n("end");if(u.tryLoc<=this.prev){var c=o.call(u,"catchLoc"),s=o.call(u,"finallyLoc");if(c&&s){if(this.prev<u.catchLoc)return n(u.catchLoc,!0);if(this.prev<u.finallyLoc)return n(u.finallyLoc)}else if(c){if(this.prev<u.catchLoc)return n(u.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return n(u.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=t,u.arg=e,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(u)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),D(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;D(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:J(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},r}function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function u(e,r,n){return(r=function(e){var r=function(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,r||"default");if("object"!=t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==t(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function i(t,e,r,n,a,o,u){try{var i=t[o](u),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(n,a)}function c(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function u(t){i(o,n,a,u,c,"next",t)}function c(t){i(o,n,a,u,c,"throw",t)}u(void 0)}))}}System.register(["./index-legacy90.js?v=1734676359","./base-lib-legacy.js?v=1734676359","./utils-lib-legacy.js?v=1734676359","./index-legacy353.js?v=1734676359","./form-item-legacy.js?v=1734676359","./useStore-legacy7.js?v=1734676359","./useController-legacy3.js?v=1734676359","./site-legacy.js?v=1734676359","./useStore-legacy11.js?v=1734676359"],(function(t,r){"use strict";var a,u,i,s,l,p,f,v,d,m,h,y,g,b,x,w,j,k,O,S,_,E,P,L,N,D,T,J,I,A,C,G,F,H,B,M,q,R,V,U,z,Y,X,$,K,Q,W,Z,tt,et,rt;return{setters:[function(t){a=t._},function(t){u=t.s,i=t.g,s=t.r,l=t.e,p=t.c,f=t.k,v=t.l,d=t.q,m=t.x,h=t.y,y=t.p,g=t.M,b=t.v,x=t.C,w=t.D,j=t.z,k=t.i,O=t.aw,S=t.A},function(t){_=t.G,E=t.bb,P=t.M,L=t.J,N=t.bU,D=t.bV,T=t.o,J=t.ah,I=t.bX,A=t.an,C=t.D,G=t.bR,F=t.bS,H=t.l,B=t.j,M=t.ao},function(t){q=t.B},function(t){R=t.h},function(t){V=t.u,U=t.S},function(t){z=t.c},function(t){Y=t.getOtherDomainList,X=t.getHttpsPort,$=t.setProxyHttpsPort,K=t.setHttpsPort,Q=t.addDomain,W=t.addProjectDomain,Z=t.removeDomain,tt=t.removeProjectDomain,et=t.multiRemoveProjectDomain},function(t){rt=t.u}],execute:function(){var r=i("SITE-DOMAIN-STORE",(function(){var t=V(),r=t.siteType,a=t.siteInfo,u=s(),i=s(!1),l=function(){var t=c(n().mark((function t(e,a){var u;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,t.t0=_,t.t1=o,!a.isSpecial){t.next=9;break}return t.next=6,E(e);case 6:t.t2=t.sent,t.next=12;break;case 9:return t.next=11,Y(e,r.value);case 11:t.t2=t.sent;case 12:return t.t3=t.t2,t.t4={request:t.t3},t.t5=a.isPort?{}:{data:Array},t.t6=(0,t.t1)(t.t4,t.t5),t.next=18,(0,t.t0)(t.t6);case 18:return u=t.sent,t.abrupt("return",{data:a.isPort?u.data.data:u,status:!0});case 22:return t.prev=22,t.t7=t.catch(0),t.abrupt("return",{status:!1,msg:"获取域名信息失败"});case 26:case"end":return t.stop()}}),t,null,[[0,22]])})));return function(e,r){return t.apply(this,arguments)}}(),p=function(){var t=c(n().mark((function t(){var e;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,X({siteName:a.value.name});case 3:return e=t.sent,u.value=e.data||"未开启",t.abrupt("return",{data:e.data,status:e.status});case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return",{status:!1,msg:"获取https端口失败"});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),f=function(){var t=c(n().mark((function t(e){var a,u,i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a="proxy"===r.value,u=a?$:K,t.next=5,_({loading:"正在设置HTTPS端口，请稍候...",request:u(e),message:!0});case 5:return i=t.sent,t.abrupt("return",o({},i));case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",{status:!1,msg:"设置https端口失败"});case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),v=function(){var t=c(n().mark((function t(e){var a;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_({loading:"正在添加域名，请稍后...",request:"php"===r.value?Q(e):W(e,r.value)});case 3:return a=t.sent,t.abrupt("return",{status:a.status,msg:a.msg,data:a.data});case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{status:!1,msg:"添加域名失败"});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=c(n().mark((function t(e){var a,o,u,i,c;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=P.load("正在删除域名，请稍后..."),t.prev=1,"php"!==(u=r.value)){t.next=9;break}return t.next=6,Z(e);case 6:t.t0=t.sent,t.next=12;break;case 9:return t.next=11,tt(e,u);case 11:t.t0=t.sent;case 12:if(i=t.t0,c=null!==(o=i.data)&&void 0!==o&&o.hasOwnProperty("status")?i.data:i,!L(c.data)){t.next=16;break}return t.abrupt("return",{status:c.status,msg:c.data[0].msg});case 16:return t.abrupt("return",{status:c.status,msg:(null==c?void 0:c.data)||(null==c?void 0:c.error_msg)||c.msg});case 19:return t.prev=19,t.t1=t.catch(1),t.abrupt("return",{status:!1,msg:"删除域名失败"});case 23:return t.prev=23,a.close(),t.finish(23);case 26:case"end":return t.stop()}}),t,null,[[1,19,23,26]])})));return function(e){return t.apply(this,arguments)}}(),m=function(){var t=c(n().mark((function t(a){var o,u,i,c,s;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=P.load("正在删除域名，请稍后..."),t.prev=1,u=[],t.next=5,et(a,r.value);case 5:return i=t.sent,null!=(c=i.data)&&c.success&&(u=c.success.map((function(t){return{name:t,status:!0}})),s=Object.entries(c.error).map((function(t){var r=e(t,2);return{name:r[0],msg:r[1],status:!1}})),u=u.concat(s)),Array.isArray(c.data)&&(u=c.data.map((function(t){return{name:(null==t?void 0:t.name)||(null==t?void 0:t.domain),msg:t.msg,status:t.status}}))),t.abrupt("return",{data:u,status:!0});case 12:return t.prev=12,t.t0=t.catch(1),t.abrupt("return",{status:!1,msg:"删除域名失败"});case 16:return t.prev=16,o.close(),t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[1,12,16,19]])})));return function(e){return t.apply(this,arguments)}}();return{isRefreshDomain:i,port:u,delMultDomainEvent:m,getDomainListEvent:l,getPortEvent:p,addDomainEvent:v,setPortEvent:f,delDomainEvent:d}})),nt=function(){return u(r())},at=V(),ot=at.isBindExtranet,ut=at.siteType,it=at.siteInfo,ct=U().getProjectConfig,st=nt(),lt=st.port,pt=st.isRefreshDomain,ft=r(),vt=ft.getDomainListEvent,dt=ft.getPortEvent,mt=ft.setPortEvent,ht=ft.addDomainEvent,yt=ft.delDomainEvent,gt=ft.delMultDomainEvent,bt=s(!1),xt=s(""),wt=["php","html"],jt=[{label:"域名",prop:"name"},{label:"结果",align:"right",render:function(t){var e=t;return l("span",{class:"".concat(e.status?"text-primary":"text-danger"),innerHTML:e.status?(null==e?void 0:e.msg)||"操作成功":(null==e?void 0:e.msg)||"操作失败"},null)}}],kt=function(){var t=c(n().mark((function t(){var e,r,a,o,u,i,c,s,l;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a=xt.value,o=["21","25","443","888","8888","8443"],""!==a){t.next=6;break}return P.error("域名不能为空"),t.abrupt("return",!1);case 6:if(u=String(a.match(/:(\d+)/g)).replace(/:/g,""),!o.includes(u)){t.next=10;break}return P.error("端口不能为常用端口21、25、443、888、8888、8443"),t.abrupt("return",!1);case 10:return t.next=12,Et();case 12:if(t.sent){t.next=15;break}return t.abrupt("return",!1);case 15:return n=a,p=void 0,f=void 0,v=void 0,d=void 0,m=void 0,h=void 0,y=void 0,p=it.value,f=p.name,v=p.id,d=ut.value,m=n.split("\n"),h=JSON.stringify(m),y={php:{domain:n.replace(/\n/g,","),webname:f,id:v},python:{data:JSON.stringify({name:f,domains:m})},phpasync:{sitename:f,domains:h},proxy:{id:v,site_name:f,domains:n},java:{project_name:f,domains:h},default:{data:JSON.stringify({project_name:f,domains:m})}},i=y[d]||y.default,t.next=18,ht(i);case 18:return(c=t.sent).status&&(null!=c&&null!==(e=c.data)&&void 0!==e&&null!==(e=e.domains)&&void 0!==e&&e.length||null!=c&&null!==(r=c.data)&&void 0!==r&&null!==(r=r.data)&&void 0!==r&&r.length)&&z({title:"域名添加结果",resultData:(null==c||null===(s=c.data)||void 0===s?void 0:s.domains)||(null==c||null===(l=c.data)||void 0===l?void 0:l.data)||[],autoTitle:"添加域名完成",resultColumn:jt}),pt.value=!0,xt.value="",t.abrupt("return",c.status);case 25:t.prev=25,t.t0=t.catch(0);case 28:case"end":return t.stop()}var n,p,f,v,d,m,h,y}),t,null,[[0,25]])})));return function(){return t.apply(this,arguments)}}(),Ot=function(){var t=c(n().mark((function t(){var e,r,a,o;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=it.value,r=e.project_type,a=e.name,o="python"===r?{name:a}:{project_name:a},t.next=5,ct(o);case 5:t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{status:!1,msg:"获取域名信息失败"});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),St=function(){var t=ut.value,e=it.value,r={name:e.name,id:e.id};if(wt.includes(t))return{table:"domain",list:"True",search:r.id};var n={python:{data:JSON.stringify({name:r.name})},phpasync:{sitename:r.name},proxy:{site_name:r.name,id:r.id},default:{data:JSON.stringify({project_name:r.name})}};return n[t]||n.default},_t=function(){var t=c(n().mark((function t(){var e,r,a,u,i,c;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e=ut.value,r=St(),a=wt.includes(e),u=["proxy"].includes(e),i=null,!["phpasync","php"].includes(e)){t.next=10;break}return t.next=9,dt();case 9:i=t.sent;case 10:return t.next=12,vt(r,{isSpecial:a,isPort:u});case 12:if(c=t.sent,i&&(lt.value=Number(i.data)||"未开启"),!u){t.next=19;break}return lt.value=Number(c.data.https_port)||"未开启",t.abrupt("return",{data:c.data.domain_list,total:c.data.domain_list.length,other:{port:c.data.https_port}});case 19:return t.abrupt("return",{data:c.data,total:c.data.length,other:o({},i?{port:Number(i.data)}:{})});case 20:t.next=26;break;case 22:return t.prev=22,t.t0=t.catch(0),t.abrupt("return",{data:[],total:0,other:{}});case 26:case"end":return t.stop()}}),t,null,[[0,22]])})));return function(){return t.apply(this,arguments)}}(),Et=function(){var t=c(n().mark((function t(){var e,r,a,o,u,i,c=arguments;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=c.length>0&&void 0!==c[0]?c[0]:xt.value,r=e.trim().replace(" ","").split("\n"),a=r.findIndex((function(t){return t.split(":")[0].length<3})),o=0;case 4:if(!(o<r.length)){t.next=16;break}if(u=r[o],!(i=u.includes(":"))||N(u)){t.next=10;break}return P.error("第"+(o+1)+"行【"+u+"】域名格式错误"),t.abrupt("return",!1);case 10:if(i||D(u)){t.next=13;break}return P.error("第"+(o+1)+"行【"+u+"】域名格式错误"),t.abrupt("return",!1);case 13:o++,t.next=4;break;case 16:if(-1===a){t.next=19;break}return P.error("第 ".concat(a+1," 个域名长度不符合要求（必须大于3个字符）")),t.abrupt("return",!1);case 19:return t.abrupt("return",r);case 20:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Pt=function(){var t=c(n().mark((function t(e){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,mt(o(o({},e.value),{},{siteName:it.value.name}));case 3:null!=(r=t.sent)&&r.status&&(lt.value=Number(e.value.port)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),Lt=function(t){var e=ut.value,r=it.value,n=r.id,a=r.name,o={php:{webname:a,id:t.pid,domain:t.name,port:t.port},phpasync:{sitename:a,domain:JSON.stringify([t.name])},python:{data:JSON.stringify({name:a,domain:t.name})},proxy:{id:n,site_name:a,domain:t.name,port:t.port},java:{data:JSON.stringify({project_name:a,domains:[t.id]})},html:{data:JSON.stringify({project_name:a,domain:"".concat(t.name,":").concat(t.port)})},default:{data:JSON.stringify({project_name:a,domain:t.name})}};return o[e]||o.default},Nt=function(){var t=c(n().mark((function t(e){var r,a;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,T({icon:"warning-filled",title:"删除【".concat(e.name,"】"),content:"删除".concat(e.name,"后，将无法使用该域名访问网站，是否继续操作？")});case 3:return r=Lt(e),t.next=6,yt(r);case 6:return a=t.sent,P.request(a),pt.value=!0,t.abrupt("return",a);case 12:t.prev=12,t.t0=t.catch(0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}(),Dt=function(t){var e=it.value,r=e.id,n=e.name,a=ut.value,o=t.map((function(t){return t.id})),u=t.map((function(t){return t.name})).join("\n"),i={php:{domains_id:o.join(","),id:r},java:{data:JSON.stringify({project_name:n,domains:o})},python:{name:n,domain_ids:JSON.stringify(o)},phpasync:{sitename:n,domain:JSON.stringify(o)},proxy:{id:r,site_name:n,domains:u}};return i[a]||i.default},Tt=function(){var t=c(n().mark((function t(e){var r,a,o,u;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,T({icon:"warning-filled",title:"批量删除",content:"同时删除选中的域名，是否继续？",type:"calc"});case 3:if(r=ut.value,a=[],!["php","python","java","phpasync","proxy"].includes(r)){t.next=13;break}return o=Dt(e),t.next=9,gt(o);case 9:u=t.sent,a=u.data,t.next=15;break;case 13:return t.next=15,Promise.all(e.map(function(){var t=c(n().mark((function t(e){var r,o;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={data:JSON.stringify({project_name:it.value.name,domain:e.name})},t.prev=1,t.next=4,yt(r);case 4:o=t.sent,a.push({name:(null==e?void 0:e.name)||(null==e?void 0:e.domain),msg:o.msg,status:o.status}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),J(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()));case 15:return t.next=17,z({resultData:a,autoTitle:"删除域名完成",resultColumn:jt});case 17:return pt.value=!0,t.abrupt("return",{status:!0,msg:"删除域名成功"});case 21:return t.prev=21,t.t0=t.catch(0),t.abrupt("return",{status:!1,msg:"删除域名失败"});case 25:case"end":return t.stop()}}),t,null,[[0,21]])})));return function(e){return t.apply(this,arguments)}}(),Jt=function(){var t=c(n().mark((function t(){var e;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e=ut.value,!["php","proxy","html","phpasync"].includes(e)){t.next=6;break}ot.value=!0,t.next=8;break;case 6:return t.next=8,Ot();case 8:return t.next=10,_t();case 10:return t.abrupt("return",t.sent);case 13:return t.prev=13,t.t0=t.catch(0),t.abrupt("return",{data:[],total:0,other:{}});case 17:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),It={class:""},At={class:"flex items-end mb-[12px]"},Ct={key:0},Gt={key:0,class:"mt-[.8rem] leading-8 text-[1.2rem] list-disc ml-2rem"},Ft={key:0,class:"text-danger"};t("_",p({__name:"index",setup:function(t,e){var r,o=e.expose,u=V(),i=u.isBindExtranet,s=u.siteType,p=nt(),_=p.isRefreshDomain,E=p.port,P=rt().sslInfo,L=M([{label:"删除",value:"delete",event:(r=c(n().mark((function t(e,r,a,o){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Tt(a.value);case 1:case"end":return t.stop()}}),t)}))),function(t,e,n,a){return r.apply(this,arguments)})}]),N=I({request:Jt,columns:[{type:"selection",width:40},{label:"域名",prop:"name",width:400,render:function(t){return l("div",{class:""},[l("a",{class:"inline-block bt-link !w-[38rem] truncate",href:"http".concat(P.value.https?"s":"","://").concat(t.name).concat(P.value.https?"":":".concat(t.port)),title:t.name,target:"_blank"},[t.name]),"php"===s.value&&null!=t&&t.cn_name&&t.name!==(null==t?void 0:t.cn_name)?l("span",null,[h("（"),t.cn_name,h("）")]):""])}},{label:"端口",prop:"port"},{label:"操作",align:"right",render:function(t){return 1===J.data.length&&i.value?l("span",null,[h("不可操作")]):l("span",{class:"bt-link",onClick:function(){Nt(t)}},[h("删除")])}}],extension:[L,A(_)]}),D=N.BtTable,T=N.BtBatch,J=N.config,U=N.refresh,z=function(){var t=C({data:{port:J.other.port},options:function(t){return k((function(){return[R("HTTPS端口",(function(){return l(q,{modelValue:t.value.port,"onUpdate:modelValue":function(e){return t.value.port=e}},null)}),"port",{attrs:{min:1,max:65535},rules:[G({message:"请输入端口号",trigger:"blur"}),F()]})]}))},submit:Pt}),e=t.BtForm,r=t.submit;H({title:"更换端口",area:42,showFooter:!0,component:function(){return l(e,{class:"p-2rem"},null)},onConfirm:r})};return o({init:U}),function(t,e){var r=B,n=O,o=S,u=a;return f(),v("div",It,[d("div",At,[l(n,{ref:"popover",placement:"top-start",width:"34rem","popper-class":"green-tips-popover !p-0 !border-none",visible:y(bt),"onUpdate:visible":e[2]||(e[2]=function(t){return g(bt)?bt.value=t:null}),"trigger-keys":[],trigger:"focus"},{default:m((function(){return e[3]||(e[3]=[d("div",{class:"!p-[12px] bg-[#20a53a] text-white leading-[2.4rem]"},[h(" 如需绑定外网，请换行填写，每行一个域名，默认为80端口 "),d("br"),h(" IP地址格式：192.168.1.199 "),d("br"),h(" 泛解析添加方法 *.domain.com "),d("br"),h(" 如另加端口格式为 www.domain.com:88 ")],-1)])})),reference:m((function(){return[l(r,{modelValue:y(xt),"onUpdate:modelValue":e[0]||(e[0]=function(t){return g(xt)?xt.value=t:null}),type:"textarea",resize:"none",rows:4,width:"42rem",onFocus:e[1]||(e[1]=function(t){return bt.value=!0}),placeholder:"如需绑定外网，请换行填写，每行一个域名，默认为80端口\nIP地址格式：192.168.1.199\n泛解析添加方法 *.domain.com\n如另加端口格式为 www.domain.com:88",class:"domain-textarea"},null,8,["modelValue"])]})),_:1},8,["visible"]),l(o,{type:"primary",class:"absolute",style:{right:"4rem",top:"5rem"},onClick:y(kt)},{default:m((function(){return e[4]||(e[4]=[h("添加")])})),_:1},8,["onClick"])]),l(u,null,{"header-right":m((function(){return[["php","proxy","phpasync"].includes(y(s))?(f(),v("div",Ct,[h(" HTTPS端口："+b(y(E))+" ",1),x(d("span",{class:"bt-link cursor-pointer",onClick:z},"更换",512),[[w,"number"==typeof y(E)]])])):j("",!0)]})),content:m((function(){return[l(y(D),{"max-height":440})]})),"footer-left":m((function(){return[l(y(T))]})),_:1}),["php","java"].includes(y(s))?j("",!0):(f(),v("ul",Gt,[e[5]||(e[5]=d("li",null,"如果您的是HTTP项目，且需要映射到外网，请至少绑定一个域名",-1)),e[6]||(e[6]=d("li",null,"建议所有域名都使用默认的80端口",-1)),"phpasync"===y(s)?(f(),v("li",Ft,"只有部署前端或反向代理域名后此域名才可用")):j("",!0)]))])}}}))}}}))}();
