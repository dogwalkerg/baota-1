import{_ as a}from"./index101.js?v=1734676359";import{ba as s}from"./firewall.js?v=1734676359";import{aH as e,M as t,o,G as l}from"./utils-lib.js?v=1734676359";import{c as n,ax as i,r as u,w as r,o as c,aB as m,k as p,l as f,e as d,p as v}from"./base-lib.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";const w={class:"flex-wrap h-full"},_=n({__name:"scan-details",props:{compData:{default:()=>({})}},setup(n,{expose:_}){const x=i("popupSetFooter"),g=n,j=u("获取中..."),h=u(!0),b=u(),{path_info:D}=g.compData,y=async()=>{var a,s;try{j.value="获取中...";const o=await e({num:20,filename:D});if(j.value=o.msg||"扫描中...",-1!==(null==(a=o.msg)?void 0:a.indexOf("扫描结束")))return h.value=!1,t.success("扫描已结束"),x(!1),void q();-1===(null==(s=o.msg)?void 0:s.indexOf("扫描结束"))&&h.value&&(b.value=setTimeout((function(){y()}),1500)),o.status||(t.request(o),h.value=!1)}catch(o){q()}},q=()=>{b.value&&clearTimeout(b.value)};return r((()=>g.compData),(a=>{h.value=!0,y()})),c((()=>y())),m((()=>q())),_({onConfirm:async a=>{await o({icon:"warning-filled",title:"停止检测网站",width:"40rem",content:"当前正在进行检测网站，确定停止检测网站吗？"}),await l({loading:"正在停止检测，请稍后...",request:s({id:g.compData.id}),message:!0}),h.value=!1,q(),a()},onCancel:q}),(s,e)=>{const t=a;return p(),f("div",w,[d(t,{class:"h-full",title:"全屏查看",content:v(j)},null,8,["content"])])}}});export{_ as default};
