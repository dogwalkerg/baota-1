import{bX as a,R as e,l,aa as s,O as t}from"./utils-lib.js?v=1734676359";import{c as n,o,B as i,k as r,l as u,p,J as d,M as c,z as m,q as x,C as f,e as v,x as y,y as b,A as h,aY as C}from"./base-lib.js?v=1734676359";import{aE as g}from"./validator.js?v=1734676359";import{i as k,c as w,d as j,t as V,a as F,b as _,e as B,s as E,h as S,r as O,v as U,f as q}from"./useController10.js?v=1734676359";import{u as D,S as N}from"./useStore7.js?v=1734676359";import{B as T}from"./index185.js?v=1734676359";const z={class:"h-full"},A={key:0},H={class:"w-full"},J={class:"my-[12px]"},M={key:1,class:"bg-[#7F7F7F] flex items-center justify-center h-full",style:{"min-height":"600px"}},R={class:"bg-white px-[48px] py-[16px] text-[#333] flex"},X=n({__name:"index",setup(n,{expose:X}){const{isBindExtranet:Y}=D(),{jumpTabEvent:G}=N(),I=()=>{let s;const{BtTable:t}=a({request:()=>({data:S.value,total:S.value.length}),columns:[{label:"文件名",render:a=>e(Number(a))},{label:"操作",align:"right",render:a=>{let e=Number(a);return v("div",null,[v("span",{class:"cursor-pointer bt-link",onClick:()=>{K(a)}},[b("查看")]),v(C,{direction:"vertical"},null),v("span",{class:"cursor-pointer bt-link",onClick:async()=>{if(await O(e)){const a=await s;null==a||a.unmount()}}},[b("恢复")])])}}]});s=l({title:"配置文件历史版本",area:42,showFooter:!1,component:()=>v("div",{class:"p-[20px]"},[v(t,{"max-height":400},null)])})},K=async a=>{await U(a);const e=l({title:"查看文件历史版本",area:64,showFooter:!1,component:()=>v("div",{class:"p-[20px]"},[v(h,{type:"primary",onClick:async()=>{if(await O(a)){const a=await e;null==a||a.unmount()}}},{default:()=>[b("恢复文件")]}),v(T,{class:"!h-[50rem] !w-full my-[12px]",modelValue:q.value,"onUpdate:modelValue":a=>q.value=a,editorOption:g({readonly:!0})},null)])})};return o(k),X({init:k}),(a,e)=>{const l=s,n=t,o=i("bt-loading");return r(),u("div",z,[p(Y)?(r(),u("div",A,[p(w)?(r(),d(l,{key:0,type:"card",modelValue:p(j),"onUpdate:modelValue":e[0]||(e[0]=a=>c(j)?j.value=a:null),options:p(V),onChange:p(F)},null,8,["modelValue","options","onChange"])):m("",!0),x("div",H,[e[7]||(e[7]=x("span",{class:"my-[4px] text-[#666]"},"提示：Ctrl+F 搜索关键字，Ctrl+S 保存，Ctrl+H 查找替换",-1)),x("div",J,[f(v(p(T),{class:"!h-[54rem] border border-[#DCDFE6] rounded-[4px]",modelValue:p(B),"onUpdate:modelValue":e[1]||(e[1]=a=>c(B)?B.value=a:null),onSave:e[2]||(e[2]=a=>p(E)()),id:"configContent",editorOption:{mode:"ace/mode/nginx"}},null,8,["modelValue"]),[[o,p(_)]])]),x("div",null,[v(p(h),{type:"primary",onClick:e[3]||(e[3]=a=>p(E)())},{default:y((()=>e[5]||(e[5]=[b("保存")]))),_:1}),v(p(h),{onClick:I,type:"default"},{default:y((()=>e[6]||(e[6]=[b("历史文件")]))),_:1})]),v(n,{options:[{content:"此处为站点主配置文件，若您不了解配置规则，请勿随意修改."}],"list-style":"disc",class:"ml-[20px] mt-[20px]"})])])):(r(),u("div",M,[x("div",R,[e[8]||(e[8]=b(" 请开启 ")),x("span",{class:"mx-[.4rem] bt-link",onClick:e[4]||(e[4]=a=>p(G)("mapping"))},"外网映射"),e[9]||(e[9]=b(" 后查看配置信息 "))])]))])}}});export{X as _};
