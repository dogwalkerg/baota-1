!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?t(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function r(t,n,r){return(n=function(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,n||"default");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function a(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */a=function(){return n};var t,n={},r=Object.prototype,o=r.hasOwnProperty,l=Object.defineProperty||function(e,t,n){e[t]=n.value},u="function"==typeof Symbol?Symbol:{},i=u.iterator||"@@iterator",s=u.asyncIterator||"@@asyncIterator",c=u.toStringTag||"@@toStringTag";function p(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(t){p=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var a=t&&t.prototype instanceof _?t:_,o=Object.create(a.prototype),u=new S(r||[]);return l(o,"_invoke",{value:E(e,n,u)}),o}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=d;var m="suspendedStart",h="suspendedYield",v="executing",g="completed",y={};function _(){}function b(){}function w(){}var x={};p(x,i,(function(){return this}));var k=Object.getPrototypeOf,V=k&&k(k(T([])));V&&V!==r&&o.call(V,i)&&(x=V);var H=w.prototype=_.prototype=Object.create(x);function j(e){["next","throw","return"].forEach((function(t){p(e,t,(function(e){return this._invoke(t,e)}))}))}function C(t,n){function r(a,l,u,i){var s=f(t[a],t,l);if("throw"!==s.type){var c=s.arg,p=c.value;return p&&"object"==e(p)&&o.call(p,"__await")?n.resolve(p.__await).then((function(e){r("next",e,u,i)}),(function(e){r("throw",e,u,i)})):n.resolve(p).then((function(e){c.value=e,u(c)}),(function(e){return r("throw",e,u,i)}))}i(s.arg)}var a;l(this,"_invoke",{value:function(e,t){function o(){return new n((function(n,a){r(e,t,n,a)}))}return a=a?a.then(o,o):o()}})}function E(e,n,r){var a=m;return function(o,l){if(a===v)throw Error("Generator is already running");if(a===g){if("throw"===o)throw l;return{value:t,done:!0}}for(r.method=o,r.arg=l;;){var u=r.delegate;if(u){var i=O(u,r);if(i){if(i===y)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===m)throw a=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=v;var s=f(e,n,r);if("normal"===s.type){if(a=r.done?g:h,s.arg===y)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(a=g,r.method="throw",r.arg=s.arg)}}}function O(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,O(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=f(a,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var l=o.arg;return l?l.done?(n[e.resultName]=l.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):l:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function T(n){if(n||""===n){var r=n[i];if(r)return r.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var a=-1,l=function e(){for(;++a<n.length;)if(o.call(n,a))return e.value=n[a],e.done=!1,e;return e.value=t,e.done=!0,e};return l.next=l}}throw new TypeError(e(n)+" is not iterable")}return b.prototype=w,l(H,"constructor",{value:w,configurable:!0}),l(w,"constructor",{value:b,configurable:!0}),b.displayName=p(w,c,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,p(e,c,"GeneratorFunction")),e.prototype=Object.create(H),e},n.awrap=function(e){return{__await:e}},j(C.prototype),p(C.prototype,s,(function(){return this})),n.AsyncIterator=C,n.async=function(e,t,r,a,o){void 0===o&&(o=Promise);var l=new C(d(e,t,r,a),o);return n.isGeneratorFunction(t)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},j(H),p(H,c,"Generator"),p(H,i,(function(){return this})),p(H,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,a){return u.type="throw",u.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var l=this.tryEntries[a],u=l.completion;if("root"===l.tryLoc)return r("end");if(l.tryLoc<=this.prev){var i=o.call(l,"catchLoc"),s=o.call(l,"finallyLoc");if(i&&s){if(this.prev<l.catchLoc)return r(l.catchLoc,!0);if(this.prev<l.finallyLoc)return r(l.finallyLoc)}else if(i){if(this.prev<l.catchLoc)return r(l.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return r(l.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var l=a?a.completion:{};return l.type=e,l.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;L(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:T(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},n}function o(e,t,n,r,a,o,l){try{var u=e[o](l),i=u.value}catch(e){return void n(e)}u.done?t(i):Promise.resolve(i).then(r,a)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function u(e){o(l,r,a,u,i,"next",e)}function i(e){o(l,r,a,u,i,"throw",e)}u(void 0)}))}}System.register(["./utils-lib-legacy.js?v=1734676359","./base-lib-legacy.js?v=1734676359","./useStore-legacy7.js?v=1734676359","./index-legacy101.js?v=1734676359","./index-legacy88.js?v=1734676359","./index-legacy116.js?v=1734676359","./validator-legacy.js?v=1734676359","./site-legacy.js?v=1734676359","./index.vue_vue_type_script_setup_true_lang-legacy25.js?v=1734676359","./index-legacy90.js?v=1734676359","./column-legacy.js?v=1734676359","./index-legacy397.js?v=1734676359","./useController-legacy3.js?v=1734676359","./__commonjsHelpers__-legacy.js?v=1734676359","./index-legacy91.js?v=1734676359","./index.vue_vue_type_style_index_0_scoped_03ce946a_lang-legacy.js?v=1734676359","./index-legacy97.js?v=1734676359","./index-legacy99.js?v=1734676359"],(function(e,t){"use strict";var r,o,u,i,s,c,p,d,f,m,h,v,g,y,_,b,w,x,k,V,H,j,C,E,O,P,L,S,T,q,A,U,I,z,N,M,D,G,R,F,B,X,J,Y,Q,W,K,Z,$,ee,te,ne,re,ae,oe,le,ue,ie,se,ce,pe,de,fe,me,he,ve,ge,ye,_e,be,we,xe,ke,Ve,He,je,Ce,Ee,Oe,Pe;return{setters:[function(e){r=e.ah,o=e.G,u=e.o,i=e.j,s=e.c,c=e.h,p=e.b,d=e.u,f=e.bQ,m=e.e,h=e.al,v=e.l,g=e.H,y=e.k,_=e.V,b=e.t,w=e.O,x=e.X},function(e){k=e.c,V=e.r,H=e.h,j=e.w,C=e.o,E=e.aB,O=e.k,P=e.l,L=e.p,S=e.J,T=e.x,q=e.y,A=e.z,U=e.q,I=e.e,z=e.I,N=e.aX,M=e.v,D=e.M,G=e.ag,R=e.ah,F=e.a7,B=e.A,X=e.aY,J=e.a4,Y=e.B,Q=e.C,W=e.Q,K=e.aj,Z=e.R},function(e){$=e.u},function(e){ee=e._},function(e){te=e._},function(e){ne=e._},function(e){re=e.f,ae=e.h},function(e){oe=e.getComposerVersion,le=e.deleteComposerFile,ue=e.execComposer,ie=e.getComposerLine,se=e.setTomcatSettings,ce=e.getSitePhpVersion,pe=e.setSecurityHeaders,de=e.getSecurityHeaders,fe=e.updateCorsConfig,me=e.deleteCorsConfig,he=e.getCorsConfig,ve=e.getCrontabList,ge=e.modifyCrontabStatus,ye=e.startTaskCrontab,_e=e.removeCrontab,be=e.setPhpApp,we=e.delPhpApp,xe=e.getPhpAppList},function(e){ke=e._},function(e){Ve=e._},function(e){He=e.a,je=e.b,Ce=e.u,Ee=e.c},function(e){Oe=e.default},function(e){Pe=e.o},null,null,null,null,null],execute:function(){var Le={class:"p-1rem"},Se={class:"flex items-center"},Te={key:0,class:"text-danger"},qe={key:1,class:"text-danger text-[1.2rem]"},Ae={class:"mt-[8px] leading-8 text-[1.2rem] list-disc ml-[20px]"},Ue={key:0},Ie={class:"p-2rem h-50rem flex flex-col"},ze={class:"mb-1rem"},Ne={class:"flex-1 overflow-auto"},Me=k({__name:"index",setup:function(e,t){var n,d=t.expose,f=$().siteInfo,m=null===(n=f.value)||void 0===n?void 0:n.project_type,h=p(),v=V(!1),g=V(!1),y=H({path:f.value.path,user:"phpasync"!==m?"www":"root",php:["静态","其它"].includes(f.value.php_version)?"auto":"PHP-"+f.value.php_version.replace(".",""),otherCommand:"",mirror:"https://mirrors.aliyun.com/composer/",command:"install",composerVersion:"install",version:"2.7.3",help_tips:"",comp_json:"",comp_lock:"",phpVersion:[],commandOptions:[{label:"install",value:"install"},{label:"update",value:"update"},{label:"require",value:"require"},{label:"create-project",value:"create-project"},{label:"自定义",value:""}]}),_=V("正在执行..."),b=V(!1),w=V(),x=V(!1);j((function(){return f.value}),(function(e){y.php=["静态","其它"].includes(e.php_version)?"auto":"PHP-"+e.php_version.replace(".","")}),{immediate:!0});var k=function(){var e=l(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v.value=!0,e.prev=1,e.next=4,oe({path:t||f.value.path});case 4:(n=e.sent).data.status?(g.value=!1,y.phpVersion=n.data.php_versions.filter((function(e){return"00"!==e.version})),y.phpVersion.unshift({name:"自动选择",version:"auto"}),y.comp_json=!1,y.comp_lock=!1,"string"==typeof n.data.comp_json&&(y.comp_json=n.data.comp_json),"string"==typeof n.data.comp_lock&&(y.comp_lock=n.data.comp_lock)):(g.value=!0,h.request(n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),r(e.t0);case 11:return e.prev=11,v.value=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(){re({type:"dir",path:y.path,change:function(e){y.path=e,k(y.path)}})},Q=function(){var e=l(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o({loading:"正在删除，请稍后...",request:le({path:y.path+"/composer.lock"}),message:!0,success:function(e){e.status&&k(y.path)}});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=l(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w.value=setInterval(l(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{Z()}catch(t){clearInterval(w.value)}case 1:case"end":return e.stop()}}),e)}))),2e3);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=l(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={php_version:null===(t=y.php)||void 0===t?void 0:t.replace("PHP-",""),composer_args:y.command,composer_cmd:y.otherCommand,repo:y.mirror,path:y.path,user:y.user,composer_version:y.version},e.next=3,u({title:"执行composer命令",content:"即将执行设定的composer命令，继续吗？",icon:"warning-filled"});case 3:o({loading:"正在执行，请稍后...",request:ue(n),message:!0,success:function(e){e.status&&(b.value=!0,W())}});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=l(a().mark((function e(){var t,n,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]&&o[0],e.prev=1,e.next=4,ie({filename:"/tmp/composer.log",num:100});case 4:n=e.sent,_.value=n.data.msg,t&&h.success("刷新成功"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),r(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),ae=function(){x.value=!0,Z()},se=function(){clearInterval(w.value),b.value=!1,x.value=!1,_.value=""};return C(k),d({init:k}),E((function(){clearInterval(w.value)})),function(e,t){var n=ne,r=G,a=R,o=F,l=i,u=te,p=s,d=B,f=X,h=J,v=ee,w=c;return O(),P("div",null,[L(g)?(O(),S(n,{key:0,width:"28rem"},{default:T((function(){return t[11]||(t[11]=[q(" 没有找到可用的composer版本 ")])})),_:1})):A("",!0),U("div",Le,[I(h,{model:L(y)},{default:T((function(){return[I(o,{label:"Composer版本"},{default:T((function(){return[U("div",Se,[I(a,{modelValue:L(y).version,"onUpdate:modelValue":t[0]||(t[0]=function(e){return L(y).version=e}),class:"!w-[28rem]"},{default:T((function(){return[I(r,{label:"2.7.3",value:"2.7.3"}),I(r,{label:"1.10.27",value:"1.10.27"})]})),_:1},8,["modelValue"])])]})),_:1}),I(o,{label:"PHP版本"},{default:T((function(){return["phpasync"!==L(m)?(O(),S(a,{key:0,class:"!w-[28rem]",modelValue:L(y).php,"onUpdate:modelValue":t[1]||(t[1]=function(e){return L(y).php=e})},{default:T((function(){return[(O(!0),P(z,null,N(L(y).phpVersion,(function(e,t){return O(),S(r,{key:t,label:e.name,value:e.version},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])):(O(),S(l,{key:1,modelValue:L(y).php,"onUpdate:modelValue":t[2]||(t[2]=function(e){return L(y).php=e}),disabled:""},null,8,["modelValue"]))]})),_:1}),I(o,{label:"执行参数"},{default:T((function(){return[I(a,{class:"!w-[28rem]","empty-values":[null,void 0],modelValue:L(y).command,"onUpdate:modelValue":t[3]||(t[3]=function(e){return L(y).command=e})},{default:T((function(){return[(O(!0),P(z,null,N(L(y).commandOptions,(function(e,t){return O(),S(r,{key:t,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),I(o,{label:"补充命令"},{default:T((function(){return[I(l,{modelValue:L(y).otherCommand,"onUpdate:modelValue":t[4]||(t[4]=function(e){return L(y).otherCommand=e}),placeholder:"请输入补充命令",width:"28rem"},null,8,["modelValue"])]})),_:1}),I(o,{label:"镜像源"},{default:T((function(){return[I(a,{modelValue:L(y).mirror,"onUpdate:modelValue":t[5]||(t[5]=function(e){return L(y).mirror=e}),filterable:"","allow-create":"","default-first-option":"",class:"!w-[28rem]"},{default:T((function(){return[I(r,{label:"阿里云(mirrors.aliyun.com)",value:"https://mirrors.aliyun.com/composer/"}),I(r,{label:"官方源(packagist.org)",value:"repos.packagist"}),I(r,{label:"中国全量镜像(packagist.phpcomposer.com)",value:"https://packagist.phpcomposer.com"}),I(r,{label:"Packagist Mirror(packagist.mirrors.sjtug.sjtu.edu.cn)",value:"https://packagist.mirrors.sjtug.sjtu.edu.cn"}),I(r,{label:"腾讯源(mirrors.tencent.com)",value:"https://mirrors.tencent.com/composer/"}),I(r,{label:"华为云(mirrors.huaweicloud.com)",value:"https://mirrors.huaweicloud.com/repository/php/"})]})),_:1},8,["modelValue"])]})),_:1}),"phpasync"!==L(m)?(O(),S(o,{key:0,label:"执行用户",prop:"command"},{default:T((function(){return[I(a,{modelValue:L(y).user,"onUpdate:modelValue":t[6]||(t[6]=function(e){return L(y).user=e}),class:"!w-28rem"},{default:T((function(){return[I(r,{label:"www(推荐)",value:"www"}),I(r,{label:"root(不推荐)",value:"root"})]})),_:1},8,["modelValue"])]})),_:1})):A("",!0),I(o,{label:"执行目录",prop:"composerVersion"},{default:T((function(){return[I(u,{modelValue:L(y).path,"onUpdate:modelValue":t[7]||(t[7]=function(e){return L(y).path=e}),icon:"el-folder-opened",onIconClick:Y,width:"28rem"},null,8,["modelValue"])]})),_:1}),I(o,{label:" ",prop:"composerVersion"},{default:T((function(){return[U("div",null,[L(y).comp_lock?(O(),P("span",Te,[q(M(L(y).comp_lock)+" ",1),I(p,{onClick:Q},{default:T((function(){return t[12]||(t[12]=[q("[点击删除]")])})),_:1})])):A("",!0),L(y).comp_json?(O(),P("span",qe,M(L(y).comp_json),1)):A("",!0)])]})),_:1}),I(o,{label:" "},{default:T((function(){return[I(d,{type:"primary",disabled:!!("boolean"!=typeof L(y).comp_json&&L(y).comp_json||"boolean"!=typeof L(y).comp_lock&&L(y).comp_lock),onClick:K},{default:T((function(){return t[13]||(t[13]=[q(" 执行 ")])})),_:1},8,["disabled"]),I(f,{direction:"vertical",class:"!h-1rem !mx-2rem"}),I(d,{onClick:ae},{default:T((function(){return t[14]||(t[14]=[q("查看日志")])})),_:1})]})),_:1})]})),_:1},8,["model"]),U("ul",Ae,[t[15]||(t[15]=U("li",null,"Composer是PHP主流依赖包管理器，若您的项目使用Composer管理依赖包，可在此处对依赖进行升级或安装",-1)),t[16]||(t[16]=U("li",null,"Composer版本：当前安装的Composer版本，可点击右侧的【升级Composer】将Composer升级到最新稳定版",-1)),t[17]||(t[17]=U("li",null,"PHP版本：用于执行composer的PHP版本，无特殊要求，默认即可，如安装出错，可尝试选择其它PHP版本",-1)),t[18]||(t[18]=U("li",null,"执行参数：按需选择执行参数,可配合补充命令使用",-1)),t[19]||(t[19]=U("li",null,"补充命令：若此处为空，则按composer.json中的配置执行，此处支持填写完整composer命令",-1)),t[20]||(t[20]=U("li",null,"镜像源：提供【阿里源】和【官方源】，建议国内服务器使用【阿里源】，海外服务器使用【官方源】",-1)),"phpasync"!==L(m)?(O(),P("li",Ue,"执行用户：默认为www用户，除非您的网站以root权限运行，否则不建议使用root用户执行composer")):A("",!0),t[21]||(t[21]=U("li",null,"执行目录：默认为当前网站根目录",-1))])]),I(w,{title:"请执行完毕确认结果无误后关闭此窗口",onCancel:se,modelValue:L(b),"onUpdate:modelValue":t[8]||(t[8]=function(e){return D(b)?b.value=e:null}),area:[50,42]},{default:T((function(){return[I(v,{class:"h-full",title:"全屏查看composer执行日志",content:L(_),isHtml:!0,isRefreshBtn:!1,isAuto:!0},null,8,["content"])]})),_:1},8,["modelValue"]),I(w,{title:"composer执行日志",onCancel:se,modelValue:L(x),"onUpdate:modelValue":t[10]||(t[10]=function(e){return D(x)?x.value=e:null}),area:60},{default:T((function(){return[U("div",Ie,[U("div",ze,[I(d,{type:"primary",onClick:t[9]||(t[9]=function(e){return Z(!0)})},{default:T((function(){return t[22]||(t[22]=[q(" 刷新日志 ")])})),_:1})]),U("div",Ne,[I(v,{class:"h-full",title:"全屏查看composer执行日志",content:L(_),isHtml:!0,isRefreshBtn:!1},null,8,["content"])])])]})),_:1},8,["modelValue"])])}}}),De={class:"p-1rem relative"},Ge={class:"mt-[8px] leading-8 text-[1.2rem] list-disc ml-[20px]"},Re={key:0},Fe=k({__name:"index",setup:function(e,t){var n=t.expose,r=$().siteInfo,u=V(!1),i=V(!1),c=H({tomcat:!1}),p=V(""),d=function(){o({loading:"正在设置，请稍后...",request:se({siteName:r.value.name}),message:!0,success:function(e){e.status&&f()}})},f=function(){var e=l(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o({loading:u,request:ce({siteName:r.value.name}),success:function(e){c.tomcat=e.data.tomcat>0,i.value=!e.data.tomcatversion,p.value=e.data.tomcatversion}});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){ae({name:"tomcat",type:"i"})};return C(f),n({init:f}),function(e,t){var n=s,r=ne,a=W,o=Y("bt-loading");return Q((O(),P("div",null,[L(i)?(O(),S(r,{key:0,width:"28rem"},{content:T((function(){return[t[2]||(t[2]=q(" 请先安装tomcat， ")),I(n,{onClick:m,class:"!text-[1.2rem]"},{default:T((function(){return t[1]||(t[1]=[q(" 立即安装 ")])})),_:1})]})),_:1})):A("",!0),U("div",De,[I(a,{modelValue:L(c).tomcat,"onUpdate:modelValue":t[0]||(t[0]=function(e){return L(c).tomcat=e}),onChange:d},{default:T((function(){return t[3]||(t[3]=[q(" 启用Tomcat ")])})),_:1},8,["modelValue"]),U("ul",Ge,[L(p)?(O(),P("li",Re,"当前版本为Tomcat"+M(L(p))+" ,若您需要其它版本,请到软件商店- 所有软件 中切换；",1)):A("",!0),t[4]||(t[4]=U("li",null,"部署顺序: 安装Tomcat >> 创建站点 >> 上传并配置项目 >> 启用Tomcat",-1)),t[5]||(t[5]=U("li",null,"若您的tomcat应用中有php脚本,访问时请添加.php扩展名",-1)),t[6]||(t[6]=U("li",null,"开启成功后,大概需要1-5分钟时间生效!",-1))])])])),[[o,L(u)]])}}}),Be={class:"px-2rem"},Xe={class:"ml-[8px]"},Je=k({__name:"index",setup:function(e,t){var n=t.expose,r=$().siteInfo,a=V(!1),l=V([{help:"阻止浏览器上下文中执行恶意JavaScript代码",value:!1,field:"x_xss_protection"},{help:"阻止浏览器的内容嗅探",value:!1,field:"x_content_type_options"},{help:"让浏览器跳转时不携带referrer",value:!1,field:"referrer_policy"},{help:"让浏览器加载内容时只加载自己网站的内容",value:!1,field:"content_security_policy"},{help:"防止浏览器进行用户行为跟踪",value:!1,field:"permissions_policy"}]),u=function(){var e={};l.value.forEach((function(t){e[t.field]=t.value}));var t={site_name:r.value.name,security_info:JSON.stringify(e)};o({loading:"正在设置，请稍后...",request:pe(t),message:!0,success:function(e){e.status&&i()}})},i=function(){o({loading:a,request:de({site_name:r.value.name}),success:function(e){l.value.forEach((function(t){e.data[t.field]&&(t.value=e.data[t.field])}))}})};return C(i),n({init:i}),function(e,t){var n=K,r=Y("bt-loading");return Q((O(),P("div",Be,[(O(!0),P(z,null,N(L(l),(function(e,t){return O(),P("div",{key:t,class:"flex items-center mb-[12px]"},[I(n,{modelValue:e.value,"onUpdate:modelValue":function(t){return e.value=t},onChange:u},null,8,["modelValue","onUpdate:modelValue"]),U("span",Xe,M(e.help),1)])})),128))])),[[r,L(a)]])}}}),Ye=k({__name:"add-cors",setup:function(e,t){var r=t.expose,u=d().plugin.value.webserver,s=$().siteInfo,c=V(!1),p=V(),m=H({status:!1,allowed_origins:"",allowed_methods:[],allHeaders:[],allowed_headers:"",expHeaders:[],exposed_headers:"",max_age:""}),h=H({allowed_methods:!1,allHeaders:!1,expHeaders:!1}),v=H({allowed_methods:!1,allHeaders:!1,expHeaders:!1}),g=[{label:"GET",value:"GET"},{label:"POST",value:"POST"},{label:"OPTIONS",value:"OPTIONS"},{label:"PATCH",value:"PATCH"},{label:"DELETE",value:"DELETE"},{label:"HEAD",value:"HEAD"}],y=[{label:"Content-Type",value:"Content-Type"},{label:"Authorization",value:"Authorization"},{label:"X-Requested-With",value:"X-Requested-With"},{label:"Range",value:"Range"},{label:"Accept",value:"Accept"},{label:"Cache-Control",value:"Cache-Control"},{label:"If-Modified-Since",value:"If-Modified-Since"},{label:"自定义",value:"custom"}],_=[{label:"X-Custom-Header",value:"X-Custom-Header"},{label:"Content-Length",value:"Content-Length"},{label:"ETag",value:"ETag"},{label:"Cache-Control",value:"Cache-Control"},{label:"Last-Modified",value:"Last-Modified"},{label:"Expires",value:"Expires"},{label:"Vary",value:"Vary"},{label:"自定义",value:"custom"}],b={allowed_methods:g,allHeaders:y,expHeaders:_},w=H({allowed_origins:[{required:!0,message:"请输入来源（Origins）",trigger:"blur"}],allowed_methods:[{required:!0,message:"请选择请求方法（Methods）",trigger:"change"}],allHeaders:[{required:!0,message:"请选择请求头（Headers）",trigger:"change"}],allowed_headers:[{trigger:["blur","change"],validator:function(e,t,n){m.allHeaders.includes("custom")&&!t&&1===m.allHeaders.length?n(new Error("请输入自定义请求头")):n()}}],expHeaders:[{required:!0,message:"请选择响应头（Headers）",trigger:"change"}],exposed_headers:[{trigger:["blur","change"],validator:function(e,t,n){m.expHeaders.includes("custom")&&!t&&1===m.expHeaders.length?n(new Error("请输入自定义响应头")):n()}}],max_age:[{required:!0,message:"请输入缓存时间（Seconds）",trigger:"blur"},{validator:function(e,t,n){""===t||!Number.isInteger(parseFloat(t))||t<0?n(new Error("请输入大于0的整数")):n()},trigger:["blur","change"]}]}),x=function(e,t){m[t]=e?b[t].map((function(e){return e.value})):[],v[t]=!1},k=function(e,t){var n,r=e.length,a=b[t].length;h[t]=r===a,v[t]=r>0&&r<a,null===(n=p.value)||void 0===n||n.clearValidate()},j=function(){var e=l(a().mark((function e(){var t,n,r,l,i,c,d,f,h,v,g,y,_,b,w;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={path:"/www/server/panel/vhost/".concat(u,"/").concat(s.value.name,".conf"),encoding:"utf-8"},!m.status){e.next=9;break}return e.next=4,null===(n=p.value)||void 0===n?void 0:n.validate();case 4:r=m.allowed_origins,l=m.allowed_methods,i=m.allHeaders,c=m.allowed_headers,d=m.expHeaders,f=m.exposed_headers,h=m.max_age,v=i.filter((function(e){return"custom"!==e})),g=d.filter((function(e){return"custom"!==e})),i.includes("custom")&&(null==c||null===(y=c.split("\n"))||void 0===y||y.forEach((function(e){v.includes(e)||v.push(e)}))),d.includes("custom")&&(null==f||null===(_=f.split("\n"))||void 0===_||_.forEach((function(e){g.includes(e)||g.push(e)}))),Object.assign(t,{allowed_origins:r,allowed_methods:l.join(","),allowed_headers:v.join(","),exposed_headers:g.join(","),max_age:h});case 9:return b=m.status?fe:me,e.next=12,o({loading:"正在设置，请稍后...",request:b(t),message:!0,success:function(e){e.status&&E()}});case 12:return w=e.sent,e.abrupt("return",w.status);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){o({loading:c,request:he({path:"/www/server/panel/vhost/".concat(u,"/").concat(s.value.name,".conf")}),success:function(e){var t,r,a,o,l,u,i,s,c;Array.isArray(e.data.msg)&&e.data.msg.length?(t=e.data.msg[0],l=t.allowed_methods,u=t.exposed_headers,i=t.allowed_headers,s=[],c=[],null==i||null===(r=i.replace(/\,/g,"\n"))||void 0===r||r.split("\n").forEach((function(e){y.find((function(t){return t.value===e}))?m.allHeaders.push(e):(m.allHeaders.includes("custom")||m.allHeaders.push("custom"),s.push(e))})),null==u||null===(a=u.replace(/\,/g,"\n"))||void 0===a||a.split("\n").forEach((function(e){_.find((function(t){return t.value===e}))?m.expHeaders.push(e):(m.expHeaders.includes("custom")||m.expHeaders.push("custom"),c.push(e))})),Object.assign(m,n(n({},t),{},{status:!0,allowed_headers:s.join("\n"),exposed_headers:c.join("\n"),allowed_methods:Array.isArray(l)?l:(null==l||null===(o=l.replace(/\s/g,""))||void 0===o?void 0:o.split(","))||[]})),Object.keys(v).forEach((function(e){v[e]=!0}))):N()}})},N=function(){Object.assign(m,{allowed_origins:"",allowed_methods:[],allHeaders:[],allowed_headers:"",expHeaders:[],exposed_headers:"",max_age:""}),Object.keys(v).forEach((function(e){v[e]=!1,h[e]=!1}))};return C(E),r({onConfirm:j,init:E}),function(e,t){var n=K,r=F,a=i,o=W,l=f,u=B,s=J,d=Y("bt-loading");return Q((O(),S(s,{ref_key:"formRef",ref:p,class:"cors-form max-h-[61rem] overflow-auto","label-width":"140px","label-position":"right",model:L(m),rules:L(w)},{default:T((function(){return[I(r,{label:"状态"},{default:T((function(){return[I(n,{class:"mr-[12px]",modelValue:L(m).status,"onUpdate:modelValue":t[0]||(t[0]=function(e){return L(m).status=e})},null,8,["modelValue"])]})),_:1}),L(m).status?(O(),P(z,{key:0},[I(r,{label:"来源（Origins）",prop:"allowed_origins"},{default:T((function(){return[I(a,{modelValue:L(m).allowed_origins,"onUpdate:modelValue":t[1]||(t[1]=function(e){return L(m).allowed_origins=e}),type:"textarea",resize:"none",width:"36rem",rows:3},null,8,["modelValue"])]})),_:1}),I(r,{label:"请求方法（Methods）",prop:"allowed_methods"},{default:T((function(){return[U("div",null,[I(o,{modelValue:L(h).allowed_methods,"onUpdate:modelValue":t[2]||(t[2]=function(e){return L(h).allowed_methods=e}),size:"small",indeterminate:L(v).allowed_methods,onChange:t[3]||(t[3]=function(e){return x(L(h).allowed_methods,"allowed_methods")})},{default:T((function(){return t[18]||(t[18]=[q(" 全选 ")])})),_:1},8,["modelValue","indeterminate"]),I(l,{modelValue:L(m).allowed_methods,"onUpdate:modelValue":t[4]||(t[4]=function(e){return L(m).allowed_methods=e}),options:g,size:"small",onChange:t[5]||(t[5]=function(e){return k(L(m).allowed_methods,"allowed_methods")})},null,8,["modelValue"])])]})),_:1}),I(r,{label:"请求头（Headers）",prop:"allHeaders"},{default:T((function(){return[I(o,{modelValue:L(h).allHeaders,"onUpdate:modelValue":t[6]||(t[6]=function(e){return L(h).allHeaders=e}),size:"small",indeterminate:L(v).allHeaders,onChange:t[7]||(t[7]=function(e){return x(L(h).allHeaders,"allHeaders")})},{default:T((function(){return t[19]||(t[19]=[q("全选")])})),_:1},8,["modelValue","indeterminate"]),I(l,{modelValue:L(m).allHeaders,"onUpdate:modelValue":t[8]||(t[8]=function(e){return L(m).allHeaders=e}),size:"small",options:y,onChange:t[9]||(t[9]=function(e){return k(L(m).allHeaders,"allHeaders")})},null,8,["modelValue"]),I(r,{label:"",prop:"allowed_headers"},{default:T((function(){return[L(m).allHeaders.includes("custom")?(O(),S(a,{key:0,modelValue:L(m).allowed_headers,"onUpdate:modelValue":t[10]||(t[10]=function(e){return L(m).allowed_headers=e}),placeholder:"请输入自定义请求头，一行一个",class:"mt-[4px]",type:"textarea",resize:"none",width:"36rem",rows:3},null,8,["modelValue"])):A("",!0)]})),_:1})]})),_:1}),I(r,{label:"响应头（Headers）",prop:"expHeaders"},{default:T((function(){return[I(o,{modelValue:L(h).expHeaders,"onUpdate:modelValue":t[11]||(t[11]=function(e){return L(h).expHeaders=e}),size:"small",indeterminate:L(v).expHeaders,onChange:t[12]||(t[12]=function(e){return x(L(h).expHeaders,"expHeaders")})},{default:T((function(){return t[20]||(t[20]=[q("全选")])})),_:1},8,["modelValue","indeterminate"]),I(l,{modelValue:L(m).expHeaders,"onUpdate:modelValue":t[13]||(t[13]=function(e){return L(m).expHeaders=e}),size:"small",options:_,onChange:t[14]||(t[14]=function(e){return k(L(m).expHeaders,"expHeaders")})},null,8,["modelValue"]),I(r,{label:"",prop:"exposed_headers"},{default:T((function(){return[L(m).expHeaders.includes("custom")?(O(),S(a,{key:0,modelValue:L(m).exposed_headers,"onUpdate:modelValue":t[15]||(t[15]=function(e){return L(m).exposed_headers=e}),placeholder:"请输入自定义响应头，一行一个",class:"mt-[4px]",type:"textarea",resize:"none",width:"36rem",rows:3},null,8,["modelValue"])):A("",!0)]})),_:1})]})),_:1}),I(r,{label:"缓存时间（Seconds）",prop:"max_age"},{default:T((function(){return[I(a,{modelValue:L(m).max_age,"onUpdate:modelValue":t[16]||(t[16]=function(e){return L(m).max_age=e}),type:"number",width:"36rem","text-type":"秒"},null,8,["modelValue"])]})),_:1})],64)):A("",!0),I(r,{label:" "},{default:T((function(){return[I(u,{type:"primary",onClick:t[17]||(t[17]=function(e){return j()})},{default:T((function(){return t[21]||(t[21]=[q("保存")])})),_:1})]})),_:1})]})),_:1},8,["model","rules"])),[[d,L(c)]])}}}),Qe=m(Ye,[["__scopeId","data-v-83045fcd"]]),We=k({__name:"index",setup:function(e,n){var r=n.expose,i=$().siteInfo,s=V(),c=V([]),p=V(!1),d=h({options:[{label:"添加计划任务",type:"button",active:!0,onClick:function(){return b()}}]}).BtOperation,f=function(){var e=l(a().mark((function e(t,n,r,o){var u,i,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=o.label,i=o.value,s=new Map([["stark","即将批量执行选中的计划任务"],["start","即将批量开启选中任务"],["stop","即将批量停止选中任务"],["delete","即将批量删除选中任务"]]),c=function(){var e=l(a().mark((function e(t,n){var r,o,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new Map([["stark",ye],["start",ge],["stop",ge],["delete",_e]]),o=t.id,l=r.get(i),e.t0=i,e.next="stark"===e.t0?6:"start"===e.t0||"stop"===e.t0?9:"delete"===e.t0?12:15;break;case 6:if(!l){e.next=8;break}return e.abrupt("return",l({id:o}));case 8:case 11:case 14:return e.abrupt("break",15);case 9:if(!l){e.next=11;break}return e.abrupt("return",l({id:o,status:"start"===i?1:0}));case 12:if(!l){e.next=14;break}return e.abrupt("return",l({id:o}));case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.next=5,t({title:"批量".concat(u),content:"".concat(s.get(i),"，是否继续操作？"),column:[{label:"项目名称",prop:"name"},Ee()],onConfirm:function(){var e=l(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(c);case 2:return H(),e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});case 5:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),m=function(){var e=l(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u({title:t.status?"停用计划任务":"启用计划任务",content:t.status?"计划任务暂停后将无法继续运行，您真的要停用这个计划任务吗？":"该计划任务已停用，是否要启用这个计划任务？",icon:"question-filled"});case 2:return e.next=4,o({loading:"正在设置计划任务状态，请稍候...",request:ge({id:t.id}),message:!0,success:H});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(e){v({isAsync:!0,title:"".concat(e?"编辑":"添加","计划任务").concat(e?"【"+e.name+"】":""),area:74,component:function(){return g((function(){return t.import("./add-crontab-legacy.js?v=1734676359")}),void 0,t.meta.url)},compData:{row:e||!1,sitename:i.value.name,refreshEvent:H},showFooter:!0})},w=function(e){v({isAsync:!0,title:"查看【"+(e.rname||e.name)+"】日志",area:80,compData:{id:e.id},component:function(){return g((function(){return t.import("./log-detail-legacy3.js?v=1734676359")}),void 0,t.meta.url)}})},x=function(){var e=l(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o({loading:"正在执行计划任务，请稍后...",request:ye({id:t.id}),message:!0,success:function(){w(t)}});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=l(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.name,e.next=3,u({title:"删除计划任务",content:"您确定要删除计划任务【".concat(r,"】，是否继续？"),icon:"warning-filled"});case 3:o({loading:"正在删除计划任务，请稍后...",request:_e({id:n}),message:!0,success:H});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=l(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o({loading:p,request:ve({sitename:i.value.name}),data:{data:[Array,c]}});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=Z([He(),{label:"计划任务",prop:"rname",render:function(e){return e.rname||e.name}},je({event:function(e){m(e)},data:["停用","正常"]}),{label:"执行周期",prop:"cycle"},{label:"上次执行时间",prop:"addtime"},Ce([{onClick:x,title:"执行"},{onClick:function(e){b(e)},title:"编辑"},{onClick:function(e){w(e)},title:"日志"},{onClick:k,title:"删除"}])]),E=[{label:"执行任务",value:"stark",event:f},{label:"启动任务",value:"start",event:f},{label:"停止任务",value:"stop",event:f},{label:"删除任务",value:"delete",event:f}];return C(H),r({init:H}),function(e,t){var n=y,r=_,a=Ve,o=Y("bt-loading");return O(),S(a,null,{"header-left":T((function(){return[I(L(d))]})),"header-right":T((function(){return t[0]||(t[0]=[])})),content:T((function(){return[Q(I(n,{ref_key:"cronTableRef",ref:s,"max-height":560,column:L(j),data:L(c)},null,8,["column","data"]),[[o,"正在加载计划任务列表，请稍后...","title"],[o,L(p)]])]})),"footer-left":T((function(){return[I(r,{"table-ref":L(s),options:L(E)},null,8,["table-ref","options"])]})),_:1})}}}),Ke={class:"flex items-center"},Ze={class:"flex items-center ml-1rem"},$e={class:"p-2rem"},et=["innerHTML"],tt=k({__name:"index",setup:function(e,n){var r,i=n.expose,s=p(),d=$().siteInfo,f=V(!1),m=V(),h=V([]),x=H({visible:!1,title:"",log:""}),k=[{isHtml:!0,content:'使用教程：<a\n\t\t\thref="https://www.bt.cn/bbs/thread-132632-1-1.html"\n\t\t\ttarget="_blank"\n\t\t\tclass="text-primary"\n\t\t\t>https://www.bt.cn/bbs/thread-132632-1-1.html</a\n\t\t>'}],j=function(){var e=l(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u({title:"应用环境包【".concat(t.app_name,"】"),icon:"warning-filled",content:"您真的要应用环境包【".concat(t.app_name,"】吗？")});case 2:o({loading:"正在应用，请稍后...",request:be({site_name:d.value.name,app_name:t.app_name,app_version:t.app_version}),message:!0});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=l(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u({icon:"warning-filled",title:"删除环境包【".concat(t.app_name,"】"),content:"您真的要删除环境包【".concat(t.app_name,"】吗？")});case 2:o({loading:"正在删除，请稍后...",request:we({site_name:d.value.name,app_name:t.app_name,app_version:t.app_version}),message:!0,success:function(e){e.status&&A()}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){v({isAsync:!0,title:"创建应用环境包",area:70,btn:"确定",component:function(){return g((function(){return t.import("./create-package-legacy.js?v=1734676359")}),void 0,t.meta.url)},compData:{refreshEvent:A}})},A=function(){o({loading:f,request:xe({site_name:d.value.name}),data:{data:[Array,h]}})},z=Z([He(),{label:"名称",prop:"app_name"},{label:"版本",prop:"app_version"},{label:"大小",prop:"size",render:function(e){return b(Number(e.size))||"--"}},{label:"时间",prop:"addtime",width:150},Ce([{title:"应用",onClick:j},{title:"下载",onClick:function(e){window.open("/download?filename="+e.package_path,"_blank")}},{title:"更新日志",onClick:function(e){if(""===e.update_log)return s.error("暂无更新日志");x.title="【".concat(e.app_name," v").concat(e.app_version,"】更新日志"),x.log=e.update_log,x.visible=!0},width:80},{title:"删除",onClick:E}])]),N=[{label:"删除",value:"deleteApp",event:(r=l(a().mark((function e(t,n,r,o){var u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=function(){var e=l(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we({site_name:d.value.name,app_name:t.app_name,app_version:t.app_version});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=3,t({title:"批量删除应用包【".concat(d.value.name,"】"),content:"批量删除选中的应用包，是否继续操作？",column:[{prop:"app_name",label:"名称"},Ee()],onConfirm:function(){var e=l(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(u);case 2:return A(),e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});case 3:case"end":return e.stop()}}),e)}))),function(e,t,n,a){return r.apply(this,arguments)})}];return C(A),i({init:A}),function(e,t){var n=B,r=y,a=_,o=c,l=Ve,u=w,i=Y("bt-loading");return O(),P("div",null,[I(l,null,{"header-left":T((function(){return[U("div",Ke,[I(n,{type:"primary",onClick:S},{default:T((function(){return t[2]||(t[2]=[q("创建")])})),_:1}),U("div",Ze,[t[3]||(t[3]=U("i",{class:"svgtofont-desired text-[1.6rem]"},null,-1)),U("span",{class:"bt-link",onClick:t[0]||(t[0]=function(){return L(Pe)&&L(Pe).apply(void 0,arguments)})},"需求反馈")])])]})),content:T((function(){return[Q(I(r,{ref_key:"appEnvTableRef",ref:m,column:L(z),"min-height":470,data:L(h)},null,8,["column","data"]),[[i,L(f)],[i,"正在获取列表，请稍候...","title"]])]})),"footer-left":T((function(){return[I(a,{"table-ref":L(m),options:L(N)},null,8,["table-ref","options"])]})),popup:T((function(){return[I(o,{title:L(x).title,modelValue:L(x).visible,"onUpdate:modelValue":t[1]||(t[1]=function(e){return L(x).visible=e}),area:60},{default:T((function(){return[U("div",$e,[U("pre",{class:"text-[#555] max-h-[50rem] overflow-y-auto",innerHTML:L(x).log},null,8,et)])]})),_:1},8,["title","modelValue"])]})),_:1}),I(u,{class:"mt-[2rem]",options:k})])}}});e("default",m(k({__name:"index",setup:function(e,t){var n,r,a,o=t.expose,l=$().siteInfo,u=null===(n=l.value)||void 0===n?void 0:n.project_type,i=V(null!==(r=l.value)&&void 0!==r&&r.otherName?null===(a=l.value)||void 0===a?void 0:a.otherName:"phpasync"!==u?"composer":"nginx"),s="phpasync"===u,c=V([{label:"Composer",name:"composer",lazy:!0,isHide:s,render:Me},{label:"Tomcat",name:"tomcat",lazy:!0,isHide:s,render:Fe},{label:"Nginx安全请求头",name:"nginx",lazy:!0,render:Je},{label:"跨域访问CORS配置",name:"cors",isHide:s,lazy:!0,render:Qe},{label:"默认文档",name:"defalut",isHide:!s,lazy:!0,render:ke},{label:"计划任务",name:"crontab",isHide:!s,lazy:!0,render:We},{label:"网站告警",name:"siteAlarm",isHide:!s,lazy:!0,render:Oe},{label:"应用环境包",name:"siteApp",isHide:s,lazy:!0,render:tt}]),p=x({type:"card",value:i,options:c}).BtTabs,d=function(){c.value=c.value.filter((function(e){return!0!==e.isHide}))};return C(d),o({init:d}),function(e,t){return O(),S(L(p))}}}),[["__scopeId","data-v-876ff66f"]]))}}}))}();
