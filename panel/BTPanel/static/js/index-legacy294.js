!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e=function(){return n};var r,n={},a=Object.prototype,o=a.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},s="function"==typeof Symbol?Symbol:{},c=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(r){f=function(t,e,r){return t[e]=r}}function d(t,e,r,n){var a=e&&e.prototype instanceof g?e:g,o=Object.create(a.prototype),s=new F(n||[]);return i(o,"_invoke",{value:P(t,r,s)}),o}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}n.wrap=d;var h="suspendedStart",y="suspendedYield",v="executing",m="completed",b={};function g(){}function x(){}function w(){}var j={};f(j,c,(function(){return this}));var k=Object.getPrototypeOf,O=k&&k(k(V([])));O&&O!==a&&o.call(O,c)&&(j=O);var _=w.prototype=g.prototype=Object.create(j);function S(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function L(e,r){function n(a,i,s,c){var u=p(e[a],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==t(f)&&o.call(f,"__await")?r.resolve(f.__await).then((function(t){n("next",t,s,c)}),(function(t){n("throw",t,s,c)})):r.resolve(f).then((function(t){l.value=t,s(l)}),(function(t){return n("throw",t,s,c)}))}c(u.arg)}var a;i(this,"_invoke",{value:function(t,e){function o(){return new r((function(r,a){n(t,e,r,a)}))}return a=a?a.then(o,o):o()}})}function P(t,e,n){var a=h;return function(o,i){if(a===v)throw Error("Generator is already running");if(a===m){if("throw"===o)throw i;return{value:r,done:!0}}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var c=E(s,n);if(c){if(c===b)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===h)throw a=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=v;var u=p(t,e,n);if("normal"===u.type){if(a=n.done?m:y,u.arg===b)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=m,n.method="throw",n.arg=u.arg)}}}function E(t,e){var n=e.method,a=t.iterator[n];if(a===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=r,E(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var o=p(a,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,b;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,b):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,b)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function V(e){if(e||""===e){var n=e[c];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function t(){for(;++a<e.length;)if(o.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=r,t.done=!0,t};return i.next=i}}throw new TypeError(t(e)+" is not iterable")}return x.prototype=w,i(_,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:x,configurable:!0}),x.displayName=f(w,l,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,f(t,l,"GeneratorFunction")),t.prototype=Object.create(_),t},n.awrap=function(t){return{__await:t}},S(L.prototype),f(L.prototype,u,(function(){return this})),n.AsyncIterator=L,n.async=function(t,e,r,a,o){void 0===o&&(o=Promise);var i=new L(d(t,e,r,a),o);return n.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},S(_),f(_,l,"Generator"),f(_,c,(function(){return this})),f(_,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},n.values=V,F.prototype={constructor:F,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(D),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,a){return s.type="throw",s.arg=t,e.next=n,a&&(e.method="next",e.arg=r),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),D(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;D(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:V(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),b}},n}function r(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function n(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(e,r,n){return(r=function(e){var r=function(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,r||"default");if("object"!=t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==t(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function o(t,e,r,n,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,a)}function i(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var i=t.apply(e,r);function s(t){o(i,n,a,s,c,"next",t)}function c(t){o(i,n,a,s,c,"throw",t)}s(void 0)}))}}System.register(["./base-lib-legacy.js?v=1734676359","./site-legacy.js?v=1734676359","./utils-lib-legacy.js?v=1734676359","./useController-legacy3.js?v=1734676359","./useStore-legacy7.js?v=1734676359","./useStore-legacy9.js?v=1734676359","./__commonjsHelpers__-legacy.js?v=1734676359","./column-legacy.js?v=1734676359","./index-legacy91.js?v=1734676359","./validator-legacy.js?v=1734676359","./useMethod-legacy5.js?v=1734676359"],(function(t,r){"use strict";var a,o,s,c,u,l,f,d,p,h,y,v,m,b,g,x,w,j,k,O,_,S,L,P,E,M,D,F,V,N,z,T,A,G,I,C;return{setters:[function(t){a=t.c,o=t.t,s=t.s,c=t.h,u=t.r,l=t.o,f=t.B,d=t.k,p=t.l,h=t.p,y=t.q,v=t.e,m=t.x,b=t.y,g=t.z,x=t.v,w=t.C,j=t.I,k=t.aX,O=t.J,_=t.Q,S=t.O,L=t.A,P=t.aN},function(t){E=t.checkDelData,M=t.deleteAsync,D=t.deleteSite},function(t){F=t.u,V=t.J,N=t.aj,z=t.M,T=t.ah,A=t.t},function(t){G=t.c},function(t){I=t.u},function(t){C=t.u},null,null,null,null,null],execute:function(){var r={class:""},H={key:0,class:"p-[20px] w-[480px]"},R={class:"flex items-center ml-[48px] mt-[12px]"},U={key:0,class:"!mt-[12px] text-danger ml-[48px]"},J={key:0},q={key:1},Y={key:2},B={class:"p-[20px] bg-#f1f1f1 mt-[12px]"},Q={class:"mx-[1rem]"},X={key:1,class:"p-[20px] w-[610px]"},K={class:"border border-[#d6d7d9] min-h-[12rem] overflow-auto mt-[20px] mb-1rem max-h-[40rem]"},W={class:"inline-flex items-center justify-between px-[12px] py-[8px] w-full"},Z={class:"truncate w-[28%]"},$={class:"inline-flex items-center justify-between flex-1"},tt={class:"flex item-center"},et=["title"],rt={key:0,class:"text-danger flex items-center"},nt={class:"truncate !w-[180px] flex-shrink-0"},at={key:0,class:"flex items-center justify-between px-[12px] py-[8px] w-full border-t-1 border-[#f1f1f1]"},ot={class:"truncate w-[28%]"},it={class:"items-center inline-flex justify-between flex-1"},st={class:"truncate mr-12px"},ct={class:"truncate !w-[180px] flex-shrink-0"},ut={key:0},lt={class:"text-danger bold"},ft={key:1,class:"text-danger"},dt={class:"bg-[#f6f8f8] footer-btn flex items-center justify-end p-[12px] w-full"};t("default",a({__name:"index",props:{compData:{default:function(){}}},emits:["close"],setup:function(t,a){var pt=a.emit,ht=t,yt=F().panel,vt=o(yt.value),mt=vt.isFileRecycle,bt=vt.isDbRecycle,gt=I().isRefreshList,xt=s(C()).isRefreshLocalList,wt=pt,jt=c({addend1:Math.round(9*Math.random()+1),addend2:Math.round(9*Math.random()+1),sum:void 0,steps:1,isFtp:!1,isDatabase:!1,isSite:!1,data:{},isMult:!1,fileSize:0,dbSize:0}),kt=function(){wt("close"),jt.steps=1,jt.addend1=Math.round(9*Math.random()+1),jt.addend2=Math.round(9*Math.random()+1),jt.sum=void 0,jt.isFtp=!1,jt.isDatabase=!1,jt.isSite=!1},Ot=u(!1),_t=u(5),St=function(){Ot.value=!0,_t.value=5;var t=setInterval((function(){_t.value-=1,_t.value<=0&&(clearInterval(t),Ot.value=!1)}),1e3)},Lt=function(){var t=i(e().mark((function t(){var r,a,o,i,s;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(jt.sum!==jt.addend1+jt.addend2){t.next=31;break}if(!(jt.isFtp||jt.isDatabase||jt.isSite)){t.next=22;break}return t.prev=2,jt.data.hasOwnProperty("id")?a=[jt.data.id]:(a=null===(o=jt.data)||void 0===o?void 0:o.map((function(t){return t.id})),jt.isMult=!0),t.next=6,E({ids:JSON.stringify(a)});case 6:i=t.sent,s=null===(r=N(i.data.data,"array",[]))||void 0===r?void 0:r.map((function(t){var e,r;return"PHPMOD"===(Array.isArray(jt.data)?null===(e=jt.data.find((function(e){return e.id===t.id})))||void 0===e||null===(e=e.project_config)||void 0===e?void 0:e.type:(null===(r=jt.data)||void 0===r||null===(r=r.project_config)||void 0===r?void 0:r.type)||jt.data.project_type)?n(n({},t),{},{project_config:{type:"PHPMOD"}}):t})),jt.data=s,jt.fileSize=i.data.file_size,jt.dbSize=i.data.db_size,t.next=16;break;case 13:t.prev=13,t.t0=t.catch(2);case 16:jt.steps=2,jt.addend1=Math.round(9*Math.random()+1),jt.addend2=Math.round(9*Math.random()+1),jt.sum=void 0,t.next=28;break;case 22:return Array.isArray(jt.data)||(jt.data=[jt.data]),t.next=25,Et();case 25:jt.addend1=Math.round(9*Math.random()+1),jt.addend2=Math.round(9*Math.random()+1),jt.sum=void 0;case 28:St(),t.next=32;break;case 31:z.error("计算错误，请重新计算");case 32:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(){return t.apply(this,arguments)}}(),Pt=function(){var t=i(e().mark((function t(r,n,a){var o,i,s,c,u;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=jt.data[n],s=(null===(o=i.project_config)||void 0===o?void 0:o.type)||i.project_type,c={id:i.id,webname:i.name,ftp:jt.isFtp?1:0,database:jt.isDatabase?1:0,path:jt.isSite?1:0},jt.isFtp||delete c.ftp,jt.isDatabase||delete c.database,jt.isSite||delete c.path,"PHPMOD"!==s){t.next=12;break}return t.next=9,M({id:i.id,webname:i.name});case 9:t.t0=t.sent,t.next=15;break;case 12:return t.next=14,D(c);case 14:t.t0=t.sent;case 15:u=t.t0,r.push({name:i.name,status:!0}),n===jt.data.length-1&&(gt.value=!0,xt.value=!0,a?G({resultData:r,resultTitle:"删除结果"}):z.request(u)),n<jt.data.length-1&&Pt(r,n+1,a);case 19:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),Et=function(){var t=i(e().mark((function t(){var r,n;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=z.load("正在删除站点..."),n=[],t.prev=2,t.next=5,Pt(n,0,jt.isMult);case 5:r.close(),wt("close"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),T(t.t0);case 12:return t.prev=12,jt.steps=1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[2,9,12,15]])})));return function(){return t.apply(this,arguments)}}(),Mt=function(){var t=i(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1!==jt.steps){t.next=10;break}if(jt.sum!==jt.addend1+jt.addend2){t.next=7;break}return t.next=4,Et();case 4:wt("close"),t.next=8;break;case 7:z.error("计算错误，请重新计算");case 8:t.next=13;break;case 10:return t.next=12,Et();case 12:wt("close");case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return l((function(){jt.data=ht.compData,V(ht.compData)&&(jt.isMult=!0)})),function(t,e){var n=_,a=S,o=P,i=L,s=f("focus");return d(),p("div",r,[1===h(jt).steps?(d(),p("div",H,[e[11]||(e[11]=y("div",{class:"flex items-center"},[y("i",{class:"text-warning svgtofont-el-warning-filled !text-[4rem]"}),y("span",{class:"text-[1.4rem] ml-[8px] leading-10"},"是否要删除关联的FTP、数据库、站点目录！")],-1)),y("div",R,[v(n,{modelValue:h(jt).isFtp,"onUpdate:modelValue":e[0]||(e[0]=function(t){return h(jt).isFtp=t})},{default:m((function(){return e[4]||(e[4]=[b("FTP")])})),_:1},8,["modelValue"]),v(n,{modelValue:h(jt).isDatabase,"onUpdate:modelValue":e[1]||(e[1]=function(t){return h(jt).isDatabase=t})},{default:m((function(){return e[5]||(e[5]=[b("数据库")])})),_:1},8,["modelValue"]),v(n,{modelValue:h(jt).isSite,"onUpdate:modelValue":e[2]||(e[2]=function(t){return h(jt).isSite=t})},{default:m((function(){return e[6]||(e[6]=[b("站点目录")])})),_:1},8,["modelValue"])]),h(mt)&&h(bt)?g("",!0):(d(),p("div",U,[y("span",null,[e[7]||(e[7]=b(" 当前 ")),h(mt)||h(bt)?g("",!0):(d(),p("span",J,"【文件回收站】【数据库回收站】")),h(mt)&&!h(bt)?(d(),p("span",q,"【数据库回收站】")):g("",!0),!h(mt)&&h(bt)?(d(),p("span",Y,"【文件回收站】")):g("",!0),e[8]||(e[8]=b(" 尚未开启，请谨慎操作！ "))])])),y("div",B,[e[9]||(e[9]=y("span",null,"计算结果：",-1)),y("span",Q,x(h(jt).addend1)+" + "+x(h(jt).addend2),1),e[10]||(e[10]=y("span",{class:"mr-[1rem]"},"=",-1)),w(v(a,{modelValue:h(jt).sum,"onUpdate:modelValue":e[3]||(e[3]=function(t){return h(jt).sum=t}),autofocus:"true","controls-position":"right",size:"small"},null,8,["modelValue"]),[[s]])])])):g("",!0),2===h(jt).steps?(d(),p("div",X,[e[20]||(e[20]=y("div",{class:"flex items-center"},[y("i",{class:"text-warning svgtofont-el-warning !text-[4rem]"}),y("span",{class:"text-[2rem] ml-[8px] leading-10 font-bold"},"堡塔温馨提示您，请冷静几秒钟，确认以下要删除的数据。")],-1)),y("div",K,[(d(!0),p(j,null,k(h(jt).data,(function(t,r){return d(),p("div",{key:r,class:"flex items-center flex-col p-[12px] border-b-1 border-[#f1f1f1] hover:bg-[#f1f1f140] last:border-b-0",style:{gap:"0.4rem"}},[y("div",W,[y("span",Z,"站点名:"+x(t.name),1),y("div",$,[y("div",tt,[y("span",{class:"truncate w-[110px]",title:t.path},"目录:"+x(t.path),9,et),t.total?(d(),p("span",rt,[b(" ("+x(h(A)(t.total))+") ",1),h(jt).fileSize<=t.total?(d(),O(o,{key:0,class:"item",effect:"dark",placement:"top"},{content:m((function(){return[e[12]||(e[12]=b(" 此目录较大，可能为重要数据，请谨慎操作！ ")),e[13]||(e[13]=y("br",null,null,-1)),b(" 目录："+x(t.path),1)]})),default:m((function(){return[e[14]||(e[14]=y("i",{class:"svgtofont-el-warning cursor-pointer ml-4px"},null,-1))]})),_:2},1024)):g("",!0)])):g("",!0)]),y("span",nt,"创建时间:"+x(t.addtime),1)])]),t.database?(d(),p("div",at,[y("span",ot,"数据库:"+x(t.database.name),1),y("div",it,[y("span",st,[b(" 大小:"+x(h(A)(t.database.total))+" ",1),h(jt).dbSize<=t.database.total?(d(),O(o,{key:0,class:"item",effect:"dark",placement:"top"},{content:m((function(){return[e[15]||(e[15]=b(" 此数据库较大，可能为重要数据，请谨慎操作！ ")),e[16]||(e[16]=y("br",null,null,-1)),b(" 数据库："+x(t.database.name),1)]})),default:m((function(){return[e[17]||(e[17]=y("i",{class:"svgtofont-el-warning cursor-pointer ml-4px"},null,-1))]})),_:2},1024)):g("",!0)]),y("span",ct,"创建时间:"+x(t.addtime),1)])])):g("",!0)])})),128))]),h(_t)&&h(Ot)?(d(),p("div",ut,[e[18]||(e[18]=b(" 请仔细阅读以上要删除信息，防止网站数据被误删，确认删除还有 ")),y("span",lt,x(h(_t)),1),e[19]||(e[19]=b(" 秒可以操作。 "))])):(d(),p("div",ft,"注意：请仔细阅读以上要删除信息，防止网站数据被误删"))])):g("",!0),y("div",dt,[v(i,{type:"warning",onClick:kt},{default:m((function(){return e[21]||(e[21]=[b("取消")])})),_:1}),1===h(jt).steps?(d(),O(i,{key:0,type:"danger",onClick:Lt},{default:m((function(){return e[22]||(e[22]=[b("下一步")])})),_:1})):g("",!0),2===h(jt).steps?(d(),O(i,{key:1,type:"danger",disabled:h(Ot),onClick:Mt},{default:m((function(){return[b(x(h(_t)&&h(Ot)?"等待".concat(h(_t),"秒"):"确认删除数据"),1)]})),_:1},8,["disabled"])):g("",!0)])])}}}))}}}))}();
