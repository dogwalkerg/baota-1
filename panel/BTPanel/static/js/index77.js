import{co as e,j as a,o as t,cp as l,l as s,cq as o,cr as c,b as n,_ as r,E as i,aO as u,c as p,aX as d}from"./utils-lib.js?v=1734676359";import{c as f,k as m,l as v,q as x,e as _,p as C,o as y,x as k,y as w,v as P,F as I,M as b}from"./base-lib.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";const V={class:"p-[20px] flex"},g={class:"flex-1 flex flex-col mr-[15px]"},S={class:"flex-1 flex flex-col"},j=f({__name:"index",setup(t){const{certInfo:l}=e();return(e,t)=>{const s=a;return m(),v("div",V,[x("div",g,[t[2]||(t[2]=x("span",{class:"mb-[5px]"},"密钥 (KEY)",-1)),_(s,{type:"textarea",rows:16,modelValue:C(l).private_key,"onUpdate:modelValue":t[0]||(t[0]=e=>C(l).private_key=e),class:"w-full"},null,8,["modelValue"])]),x("div",S,[t[3]||(t[3]=x("span",{class:"mb-[5px]"},"证书 (CRT/PEM)",-1)),_(s,{type:"textarea",rows:16,modelValue:C(l).certificate,"onUpdate:modelValue":t[1]||(t[1]=e=>C(l).certificate=e),class:"w-full"},null,8,["modelValue"])])])}}}),{request:E,error:h}=n(),{getInfo:q,hasCert:M,serverIP:U,serverProtocol:F,serverPort:L,certInfo:O,getCertInfo:R}=e(),H=new Map([["start","启动"],["stop","停止"],["reload","重载"],["restart","重启"]]),K=e=>{const a=H.get(e)||"";t({title:"".concat(a,"服务"),content:"是否".concat(a,"虚拟主机服务，是否继续？"),onConfirm:async()=>{const a=await l(e);await E(a),q()}})},T=async()=>{M.value?s({title:"设置SSL证书",area:70,component:j,showFooter:!0,onOpen:()=>{R()},onConfirm:async()=>{const{certificate:e,private_key:a}=O.value,t=await o(e,a);await E(t)}}):h("请先上传证书")},X=async()=>{if(""===U.value)return void h("Please enter the server IP");const e=await c(U.value);await E(e)},Y=()=>{window.open("".concat(F.value,"://").concat(U.value).concat(L.value,"/account/login"))},z={class:""},A={class:"ml-[100px] mt-[2px]"},B=f({__name:"index",setup(t){const{isServerRunning:l,serverIP:s,serverProtocol:o,serverPort:c,resetServerEvent:n,getServerIP:f,getCertInfo:V}=e();return y((()=>{V(),f()})),(e,t)=>{const f=r,y=i,V=u,g=a,S=p,j=d;return m(),v("div",z,[_(j,{class:"my-[16px]"},{default:k((()=>[_(V,{label:"服务状态"},{default:k((()=>[x("div",{class:I(["mr-[8px] text-[#666] flex items-center",C(l).color])},[w(P(C(l).tips),1),_(f,{icon:"icon-".concat(C(l).icon),class:I(["mr-[4px]",C(l).color])},null,8,["icon","class"])],2),_(y,{onClick:t[0]||(t[0]=e=>C(K)(C(l).type))},{default:k((()=>[w(P(C(l).text),1)])),_:1}),_(y,{onClick:t[1]||(t[1]=e=>C(K)("restart"))},{default:k((()=>t[4]||(t[4]=[w("重启")]))),_:1}),_(y,{onClick:t[2]||(t[2]=e=>C(K)("reload"))},{default:k((()=>t[5]||(t[5]=[w("重载")]))),_:1})])),_:1}),_(V,{label:"证书SSL"},{default:k((()=>[_(y,{type:"primary",onClick:C(T)},{default:k((()=>t[6]||(t[6]=[w("修改")]))),_:1},8,["onClick"])])),_:1}),_(V,{label:"IP地址"},{default:k((()=>[_(g,{modelValue:C(s),"onUpdate:modelValue":t[3]||(t[3]=e=>b(s)?s.value=e:null),class:"mr-[10px] w-[250px]"},null,8,["modelValue"]),_(y,{onClick:C(X),type:"primary"},{default:k((()=>t[7]||(t[7]=[w("修改")]))),_:1},8,["onClick"]),_(y,{onClick:C(n)},{default:k((()=>t[8]||(t[8]=[w("重置")]))),_:1},8,["onClick"])])),_:1}),x("p",A,[t[9]||(t[9]=x("span",{class:"mr-[4px]"},"访问地址:",-1)),_(S,{onClick:C(Y)},{default:k((()=>[w(P("".concat(C(o),"://").concat(C(s)).concat(C(c),"/account/login")),1)])),_:1},8,["onClick"])])])),_:1})])}}});export{B as default};
