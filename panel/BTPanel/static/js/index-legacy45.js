!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}var t=["document"];function n(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return(t=c(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],s=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"==typeof e)return s(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function c(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,n||"default");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}function f(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */f=function(){return n};var t,n={},r=Object.prototype,a=r.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},l=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(t){c=function(e,t,n){return e[t]=n}}function p(e,t,n,r){var a=t&&t.prototype instanceof x?t:x,i=Object.create(a.prototype),l=new E(r||[]);return o(i,"_invoke",{value:T(e,n,l)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=p;var m="suspendedStart",v="suspendedYield",h="executing",y="completed",g={};function x(){}function b(){}function w(){}var k={};c(k,l,(function(){return this}));var _=Object.getPrototypeOf,S=_&&_(_(B([])));S&&S!==r&&a.call(S,l)&&(k=S);var C=w.prototype=x.prototype=Object.create(k);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function I(t,n){function r(o,i,l,s){var u=d(t[o],t,i);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==e(f)&&a.call(f,"__await")?n.resolve(f.__await).then((function(e){r("next",e,l,s)}),(function(e){r("throw",e,l,s)})):n.resolve(f).then((function(e){c.value=e,l(c)}),(function(e){return r("throw",e,l,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(e,t){function a(){return new n((function(n,a){r(e,t,n,a)}))}return i=i?i.then(a,a):a()}})}function T(e,n,r){var a=m;return function(o,i){if(a===h)throw Error("Generator is already running");if(a===y){if("throw"===o)throw i;return{value:t,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var s=L(l,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===m)throw a=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=h;var u=d(e,n,r);if("normal"===u.type){if(a=r.done?y:v,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=y,r.method="throw",r.arg=u.arg)}}}function L(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,L(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(a,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function B(n){if(n||""===n){var r=n[l];if(r)return r.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var o=-1,i=function e(){for(;++o<n.length;)if(a.call(n,o))return e.value=n[o],e.done=!1,e;return e.value=t,e.done=!0,e};return i.next=i}}throw new TypeError(e(n)+" is not iterable")}return b.prototype=w,o(C,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:b,configurable:!0}),b.displayName=c(w,u,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,c(e,u,"GeneratorFunction")),e.prototype=Object.create(C),e},n.awrap=function(e){return{__await:e}},P(I.prototype),c(I.prototype,s,(function(){return this})),n.AsyncIterator=I,n.async=function(e,t,r,a,o){void 0===o&&(o=Promise);var i=new I(p(e,t,r,a),o);return n.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(C),c(C,u,"Generator"),c(C,l,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=B,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,a){return l.type="throw",l.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;O(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:B(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},n}function p(e,t,n,r,a,o,i){try{var l=e[o](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,a)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){p(o,r,a,i,l,"next",e)}function l(e){p(o,r,a,i,l,"throw",e)}i(void 0)}))}}System.register(["./base-lib-legacy.js?v=1734676359","./utils-lib-legacy.js?v=1734676359","./validator-legacy.js?v=1734676359","./index-legacy95.js?v=1734676359","./store-legacy3.js?v=1734676359","./store-legacy4.js?v=1734676359","./column-legacy.js?v=1734676359","./hooks-legacy.js?v=1734676359"],(function(e,r){"use strict";var o,s,c,p,m,v,h,y,g,x,b,w,k,_,S,C,P,I,T,L,j,O,E,B,D,A,F,R,M,V,H,U,N,z,q,G,$,K,W,J,Q,Z,X,Y,ee,te,ne,re,ae,oe,ie,le,se,ue,ce,fe,pe,de,me,ve,he,ye,ge,xe,be,we,ke,_e,Se,Ce,Pe,Ie,Te,Le,je,Oe,Ee,Be,De,Ae,Fe,Re,Me,Ve,He,Ue,Ne,ze,qe,Ge,$e,Ke,We,Je,Qe,Ze,Xe,Ye,et,tt,nt,rt,at,ot,it,lt,st,ut,ct,ft,pt,dt,mt,vt,ht,yt,gt,xt,bt,wt,kt,_t;return{setters:[function(e){o=e.c,s=e.r,c=e.t,p=e.o,m=e.p,v=e.k,h=e.l,y=e.q,g=e.v,x=e.z,b=e.s,w=e.i,k=e.J,_=e.x,S=e.e,C=e.K,P=e.F,I=e.y,T=e.d,L=e.aw,j=e.bq,O=e.aS,E=e.w,B=e.g,D=e.b4,A=e.n,F=e.I,R=e.aX,M=e.br,V=e.bs,H=e.h,U=e.M,N=e.aj,z=e.B,q=e.H,G=e.C,$=e.X,K=e.bt,W=e.bu,J=e.A,Q=e.aT,Z=e.b5,X=e.aN,Y=e.a1,ee=e.G,te=e.D,ne=e.b7,re=e.bv,ae=e.b2,oe=e.b3,ie=e.bw,le=e.aE,se=e.bx,ue=e.by,ce=e.R,fe=e.bn,pe=e.j,de=e.L,me=e.bz,ve=e.P,he=e.at,ye=e.av,ge=e.T,xe=e.U,be=e.ah,we=e.ay,ke=e.aA,_e=e.ag},function(e){Se=e.u,Ce=e.G,Pe=e.bi,Ie=e.l,Te=e.H,Le=e.bj,je=e.e,Oe=e.c,Ee=e.n,Be=e.o,De=e.T,Ae=e.af,Fe=e.K,Re=e.a2,Me=e.bk,Ve=e.bl,He=e.a6,Ue=e.t,Ne=e.ai,ze=e.r,qe=e.bm,Ge=e.p,$e=e.bn,Ke=e.k,We=e.a9,Je=e.ah,Qe=e.bo,Ze=e.b3,Xe=e.bp,Ye=e.M,et=e.bq,tt=e.S,nt=e.br,rt=e.i,at=e.bs,ot=e.a3,it=e.R,lt=e.d,st=e.h,ut=e.g},function(e){ct=e.g,ft=e.e,pt=e.l,dt=e.p,mt=e.i,vt=e.f,ht=e.h},function(e){yt=e._},function(e){gt=e.H},function(e){xt=e.H},function(e){bt=e.b,wt=e.u,kt=e.o},function(e){_t=e.c}],execute:function(){var St={class:"icon-end-time voucher-logo"},Ct={class:"ml-[4px] font-bold text-[#ef9f00]"},Pt=o({__name:"index",setup:function(e){var t=s([]),n=Se().payment,a=c(n.value),o=(a.voucherOpenTime,a.isGetCoupon),i=function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ce({request:Pe(),data:[Array,t]});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){Ie({area:40,component:function(){return Te((function(){return r.import("./index-legacy263.js?v=1734676359")}),void 0,r.meta.url)},customClass:"voucherFetchView",compData:{isCoupon:t.value,isHome:!0}})},u=function(){var e=d(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new Date((new Date).toLocaleDateString()).getTime()+6048e5-1,t=Math.floor(t>0?t/1e3:t),Ce({request:Le({limit_time:t})}),o.value=!0;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return p((function(){var e=Number(sessionStorage.getItem("voucherOpenTime"));if(-100!==e){if(e)e-Math.floor(Date.now()/1e3)<=0&&(o.value=!0,sessionStorage.removeItem("voucherOpenTime"),u());ct({promises:[i],delay:3e3})}})),function(e,n){return m(t).length>0&&!m(o)?(v(),h("div",{key:0,class:"flex items-center px-[1rem] py-[.4rem] mr-[8px] rounded-[2px] recom-bg",onClick:l},[y("span",St,[y("span",Ct,"您有"+g(m(t).length)+"个优惠券待领取",1)])])):x("",!0)}}}),It=je(Pt,[["__scopeId","data-v-af5f04cc"]]),Tt={class:"home-header-box flex-1"},Lt={class:"mr-[16px] flex items-center"},jt={class:"user-phone"},Ot={class:"cursor-pointer flex items-center"},Et={class:"border-dashed border-b-[1px]"},Bt={class:"block"},Dt={class:"home-header-box"},At=o({__name:"index",setup:function(e){var t=T((function(){return Te((function(){return r.import("./index-legacy264.js?v=1734676359")}),void 0,r.meta.url)})),n=gt(),a=b(n),o=a.bindUser,i=a.systemInfo,l=a.panelInfo,s=a.panelVersion,u=w((function(){var e;return i.value.name?null===(e=i.value.name.split(" ")[0])||void 0===e?void 0:e.toLowerCase():""}));return function(e,r){var a=L,c=It,f=yt,p=Oe,d=j,h=O;return v(),k(h,{class:"reset-card-header module-box","body-class":"flex h-[52px] items-center p-0"},{default:_((function(){return[y("div",Tt,[S(a,{width:"328","popper-class":"el-popover-shadow"},{reference:_((function(){return[y("div",Lt,[r[6]||(r[6]=y("i",{class:"svgtofont-icon-user mr-[4px] !text-[16px]"},null,-1)),y("span",jt,g(m(o)||"获取中"),1)])]})),default:_((function(){return[(v(),k(C(m(t))))]})),_:1}),y("div",{class:"mr-[16px] inline-flex items-center",onClick:r[0]||(r[0]=function(e){return m(n).jumpRouter("alarm")})},r[7]||(r[7]=[y("i",{class:"svgtofont-alarm-settings !mr-4px !text-[16px]"},null,-1),y("span",{class:"bt-link"},"告警",-1)])),y("div",{class:"mr-[16px] inline-flex items-center",onClick:r[1]||(r[1]=function(e){return m(ft)({type:7,isNoRate:!0,isCard:!0})})},r[8]||(r[8]=[y("i",{class:"svgtofont-desired !mr-4px !text-[16px]"},null,-1),y("span",{class:"bt-link"},"需求反馈",-1)])),S(a,{width:"250","popper-class":"el-popover-shadow "},{reference:_((function(){return[y("span",Ot,[y("i",{class:P("mr-4px !text-[16px] svgtofont-icon-"+m(u))},null,2),y("span",Et," 系统："+g(m(i).name||"获取中"),1)])]})),default:_((function(){return[y("span",null,[y("span",null,"系统："+g(m(i).simpleName||"获取中"),1),y("span",Bt," 持续运行："+g(m(l).runningDays||"获取中"),1)])]})),_:1})]),y("div",Dt,[S(c),S(f,{"is-home":!0,"disable-pro":!0}),y("span",{class:"versionInfo mr-[16px] bt-hover-link cursor-pointer",onClick:r[2]||(r[2]=function(){var e;return m(n).histVersionInfoDialog&&(e=m(n)).histVersionInfoDialog.apply(e,arguments)})},g((m(l).isBeta?"Beta ":"")+(m(s)||"获取中")),1),m(l).isBeta?(v(),k(p,{key:0,class:"mr-[16px] reset-link bug-feedback",href:"https://www.bt.cn/bbs/forum-39-1.html"},{default:_((function(){return r[9]||(r[9]=[I("[找Bug奖宝塔币]")])})),_:1})):x("",!0),S(d,{class:"mr-[16px]","is-dot":"",hidden:!m(l).isUpgrade},{default:_((function(){return[y("span",{class:"bt-link",title:"点击获取最新版面板程序",onClick:r[3]||(r[3]=function(){var e;return m(n).updateVersionDialog&&(e=m(n)).updateVersionDialog.apply(e,arguments)})},"更新")]})),_:1},8,["hidden"]),y("span",{class:"bt-link mr-[16px]",onClick:r[4]||(r[4]=function(){var e;return m(n).onRepair&&(e=m(n)).onRepair.apply(e,arguments)}),title:"修复面板会获取最新的面板代码程序，包含bug修复"},"修复"),y("span",{class:"bt-link",onClick:r[5]||(r[5]=function(){var e;return m(n).restartSeverDialog&&(e=m(n)).restartSeverDialog.apply(e,arguments)}),title:"点击可选择重启面板或重启服务器"},"重启")])]})),_:1})}}}),Ft=je(At,[["__scopeId","data-v-62953b7b"]]),Rt=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.watchList=new Map;var t=xt();this.refs=b(t),this.useHomeData()},t=[{key:"useRunCallback",value:function(){var e,t=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}(this.watchList.entries());try{for(t.s();!(e=t.n()).done;){var n=i(e.value,2),r=n[0],a=n[1];r in this.refs&&a(this.refs[r].value)}}catch(o){t.e(o)}finally{t.f()}}},{key:"useHomeData",value:(r=d(f().mark((function e(){var t=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.stopWatching=E(this.refs.isRefreshData,(function(e){e&&(t.useRunCallback(),t.refs.isRefreshData.value=!1)}),{immediate:!0});case 1:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"useSetCallback",value:function(e,t){this.watchList.set(e,t)}},{key:"stopUseHomeData",value:function(){this.stopWatching&&this.stopWatching()}},{key:"unload",value:function(){this.watchList.size>0&&this.watchList.clear(),this.stopUseHomeData()}}],t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r}(),Mt=new Rt,Vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ee.post("plugin/get_soft_list",{data:e,check:"object"})},Ht=function(e){return Ee.post("plugin?action=add_index",{data:{sName:e},customType:"model",check:"msg"})},Ut=function(e){return Ee.post("plugin?action=remove_index",{data:{sName:e},customType:"model",check:"msg"})},Nt=(e("c",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ee.post("warning/get_list",{data:e})})),function(){return Ee.post("system/ReMemory")}),zt=(e("a",(function(){return Ee.post("warning/get_scan_bar",{check:"object"})})),e("b",(function(){return Ee.post("safe/security/get_repair_bar",{check:"object",customType:"model"})})),function(e){return Ee.post("panel/overview/AddOverview",{data:e,check:"msg",customType:"model"})}),qt=function(e){return Ee.post("panel/overview/SetOverview",{data:e,check:"msg",customType:"model"})},Gt=function(e){return Ee.post("panel/overview/DelOverview",{data:e,check:"msg",customType:"model"})},$t=(e("g",(function(){return Ee.post("warning/get_tmp_result")})),e("k",(function(){return Ee.post("warning/kill_get_list")})),e("d",(function(){return Ee.post("/safe/exportreport/get_pdf",{check:"object",customType:"model"})})),B("NOTICE-STORE",(function(){var e=Se().panel,t=D(),n=s({memRealUsed:0,memTotal:0,memFree:0,memShared:0,memAvailable:0,memBuffers:0,memCached:0}),r=s([]),a=s(!1),o=s(!1),i=s(!1),l=s(!1),u=s(!1),c=s([]),p=s([]),m=w((function(){return 8888===e.value.port})),v=w((function(){return a.value||o.value||m.value||i.value||l.value||u.value}));Mt.useSetCallback("memory",(function(e){n.value=e;var t=n.value,r=t.memTotal-t.memRealUsed;a.value=r<64})),Mt.useSetCallback("diskUsage",(function(e){p.value=e,y()})),Mt.useSetCallback("disk",(function(e){r.value=e,r.value.some((function(e){return parseInt(e.data.inodes[3])>90}))?(u.value=!0,c.value=[],c.value=r.value.map((function(e){if(parseInt(e.data.inodes[3])>90)return e.data.path}))):u.value=!1}));var h=function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Be({type:"calc",title:"释放内存",content:"若您的站点处于有大量访问的状态，释放内存可能带来无法预测的后果，您确定现在就释放内存吗？"});case 2:Ce({loading:"正在释放内存，请稍后...",request:Nt(),message:!0});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){p.value&&Number(p.value[2])<524288&&(l.value=!0)};return{noticeStatus:v,memoryStatus:a,usernameStatus:o,portStatus:m,httpsStatus:i,diskFullStatus:l,inodeFullStatus:u,inodePath:c,detectingHttps:function(){i.value=!(window.location.protocol.indexOf("https")>=0)},checkFullDisk:y,onClear:h,editPortInfo:function(){window.localStorage.setItem("config-dialog","port"),t.push({path:"/config/whole"})},jumpConfig:function(){window.localStorage.setItem("config-dialog","ssl"),t.push({path:"/config/whole"})},jumpFiles:function(){t.push({path:"/files"})}}}))),Kt={class:"mr-16px"},Wt=["title"],Jt=o({__name:"index",setup:function(e){var t=$t(),n=b(t),r=n.noticeStatus,a=n.memoryStatus,o=n.usernameStatus,i=n.portStatus,l=n.httpsStatus,s=n.diskFullStatus,u=n.inodeFullStatus,c=n.inodePath;return p((function(){t.detectingHttps(),t.checkFullDisk(),A((function(){var e=setInterval(d(f().mark((function t(){var n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.$extension){t.next=6;break}return t.next=3,window.$extension();case 3:n=t.sent,De(n.extensionElement)&&!n.extensionElement&&clearTimeout(e),n.extensionElement&&(n.extensionElement(),clearTimeout(e));case 6:case"end":return t.stop()}}),t)}))),1e3)}))})),function(e,n){var f=Oe,p=M,d=V,b=O;return v(),h("div",null,[m(r)?(v(),k(b,{key:0,shadow:"always","body-style":{padding:"0",display:"flex",minHeight:"5.2rem"},class:"module-box min-h-[5.2rem]"},{default:_((function(){return[S(d,{class:"playTips",height:"5.6rem",direction:"vertical"},{default:_((function(){return[m(a)?(v(),k(p,{key:1},{default:_((function(){return[n[3]||(n[3]=y("i",{class:"svgtofont-el-warning-filled mr-[8px] text-[1.8rem]"},null,-1)),n[4]||(n[4]=y("span",{class:"mr-[16px]"},"当前可用物理内存小于64M，这可能导致MySQL自动停止，站点502等错误，请尝试释放内存！",-1)),S(f,{type:"info",title:"该风险不可忽略，请尽快处理",class:"align-middle mr-[16px]","font-size":"1.4rem",disabled:!0,href:"javascript:;"},{default:_((function(){return n[1]||(n[1]=[I("[ 不可忽略 ]")])})),_:1}),S(f,{onClick:m(t).onClear,class:"align-middle flex items-center","font-size":"1.4rem"},{default:_((function(){return n[2]||(n[2]=[I("[ 立即清理 ]")])})),_:1},8,["onClick"])]})),_:1})):x("",!0),m(o)?(v(),k(p,{key:2},{default:_((function(){return[n[7]||(n[7]=y("i",{class:"svgtofont-el-warning-filled mr-[8px] text-[1.8rem]"},null,-1)),n[8]||(n[8]=y("div",{class:"mr-[16px]"},"当前面板用户为admin,这可能为面板安全带来风险！",-1)),S(f,{type:"info",title:"该风险不可忽略，请尽快处理",class:"align-middle mr-[16px]","font-size":"1.4rem",disabled:!0,href:"javascript:;"},{default:_((function(){return n[5]||(n[5]=[I("[ 不可忽略 ]")])})),_:1}),S(f,{onClick:m(pt),class:"align-middle flex items-center","font-size":"1.4rem"},{default:_((function(){return n[6]||(n[6]=[I("[ 立即修复 ] ")])})),_:1},8,["onClick"])]})),_:1})):x("",!0),m(i)?(v(),k(p,{key:3},{default:_((function(){return[n[11]||(n[11]=y("i",{class:"svgtofont-el-warning-filled mr-[8px] text-[1.8rem]"},null,-1)),n[12]||(n[12]=y("div",{class:"mr-[16px]"},"当前面板使用的是默认端口[8888]，可能存在入侵风险，请到面板设置中修改面板端口！",-1)),S(f,{type:"info",title:"该风险不可忽略，请尽快处理",class:"align-middle mr-[16px]","font-size":"1.4rem",disabled:!0,href:"javascript:;"},{default:_((function(){return n[9]||(n[9]=[I("[ 不可忽略 ]")])})),_:1}),S(f,{onClick:m(t).editPortInfo,target:"_self",class:"align-middle flex items-center","font-size":"1.4rem"},{default:_((function(){return n[10]||(n[10]=[I("[ 立即修复 ] ")])})),_:1},8,["onClick"])]})),_:1})):x("",!0),m(l)?(v(),k(p,{key:4},{default:_((function(){return[n[15]||(n[15]=y("i",{class:"svgtofont-el-warning-filled mr-[8px] text-[1.8rem]"},null,-1)),n[16]||(n[16]=y("div",{class:"mr-[16px]"},"警告！当前面板使用HTTP访问，可能存在被窃取敏感信息风险，请立即开启【面板SSL】。",-1)),S(f,{type:"info",title:"该风险不可忽略，请尽快处理",class:"align-middle mr-[16px]",disabled:!0,"font-size":"1.4rem",href:"javascript:;"},{default:_((function(){return n[13]||(n[13]=[I("[ 不可忽略 ]")])})),_:1}),S(f,{onClick:m(t).jumpConfig,class:"align-middle flex items-center","font-size":"1.4rem"},{default:_((function(){return n[14]||(n[14]=[I("[ 立即处理 ]")])})),_:1},8,["onClick"])]})),_:1})):x("",!0),m(s)?(v(),k(p,{key:5},{default:_((function(){return[n[18]||(n[18]=y("i",{class:"svgtofont-el-warning-filled mr-8px text-[1.8rem]"},null,-1)),n[19]||(n[19]=y("div",{class:"mr-16px"},"警告：检测到磁盘可用空间不足，无法访问面板数据库，请前往文件管理清理",-1)),S(f,{onClick:m(t).jumpFiles,class:"align-middle"},{default:_((function(){return n[17]||(n[17]=[I("[ 立即前往 ]")])})),_:1},8,["onClick"])]})),_:1})):x("",!0),m(u)?(v(),k(p,{key:6},{default:_((function(){return[n[22]||(n[22]=y("i",{class:"svgtofont-el-warning-filled mr-8px text-[1.8rem]"},null,-1)),y("div",Kt,[n[20]||(n[20]=I(" 警告：检测到磁盘【 ")),y("div",{class:"inline-block",title:m(c).join("\n")},[(v(!0),h(F,null,R(m(c),(function(e,t){return v(),h("span",{key:t},g(e),1)})),128))],8,Wt),n[21]||(n[21]=I(" 】Inode使用率超过90%，可用空间不足，请前往文件管理清理 "))]),y("span",{onClick:n[0]||(n[0]=function(){var e;return m(t).jumpFiles&&(e=m(t)).jumpFiles.apply(e,arguments)}),class:"align-middle bt-link"},"[ 立即前往 ]")]})),_:1})):x("",!0)]})),_:1})]})),_:1})):x("",!0),n[23]||(n[23]=y("div",{id:"extension"},null,-1))])}}}),Qt=je(Jt,[["__scopeId","data-v-845ee444"]]),Zt=e("e",B("HOME-STATE-STORE",(function(){var e=xt(),t=Se(),n=t.payment,a=t.push,o=c(n.value).authType,i=s([]),l=s("loadPopover"),u=s(!1),p=s(!0),m=s(null),v=!1,h=s([]),y=s({one:0,max:0,five:0,fifteen:0}),g=s({occupy:"",framework:"",coresOccupy:[0,0,0],cpuNumber:0,logicCores:0,cores:0,process:[0,0]}),x=s({memRealUsed:0,memTotal:0,memFree:0,memShared:0,memAvailable:0,memBuffers:0,memCached:0}),b=s([]),w=H({memory:"success",cpu:"success",load:"success"}),k=s(null),_=s(!1),C=s(null),P=s(null),I=s(null),T=new Re,L=H({title:"负载状态",range:0}),j=H({title:"CPU使用率",range:0,desc:"获取中"}),O=H({title:"内存使用率",range:0,desc:"0 / 0(MB)",disabled:!1});Mt.useSetCallback("cpuTimes",(function(e){b.value=[[{title:"用户级别的 CPU 时间百分比",name:"user",value:e.user},{title:"运行带有 “nice” 优先级的进程时使用的 CPU 时间百分比",name:"nice",value:e.nice}],[{title:"系统级别的 CPU 时间百分比",name:"system",value:e.system},{title:"空闲状态的 CPU 时间百分比",name:"idle",value:e.idle}],[{title:"等待 I/O 操作完成的 CPU 时间百分比",name:"iowait",value:e.iowait},{title:"处理硬件中断的 CPU 时间百分比",name:"irq",value:e.irq}],[{title:"处理软件中断的 CPU 时间百分比",name:"softirq",value:e.softirq},{title:"当前 CPU 被其他虚拟机偷取的CPU时间百分比",name:"steal",value:e.steal}],[{title:"运行虚拟机时使用的 CPU 时间百分比",name:"guest",value:e.guest},{title:"运行带有 “nice” 优先级的虚拟机时使用的CPU时间百分比",name:"guest_nice",value:e.guest_nice}]]})),Mt.useSetCallback("load",(function(e){y.value=e,E()})),Mt.useSetCallback("disk",(function(e){h.value=e}));var E=function(){var e=y.value,t=e.one,n=e.max,r=Math.round(t/n*100),a=r>100?100:r;L.range=a<0?0:a,w.load=a>80?"warning":a>90?"danger":"success"};Mt.useSetCallback("cpu",(function(e){var t,n,r,a;g.value=e,B(),t=g.value,n=t.cpuNumber,r=t.logicCores,a=t.cores,j.desc=n&&r&&a?"".concat(a," 核心"):"获取中",D()}));var B=function(){var e=g.value.occupy;j.range=parseFloat(e)||0,j.range>80?w.cpu="warning":j.range>90?w.cpu="danger":w.cpu="success"},D=function(){for(var e=[],t=0,n="核心 ",r="",a=0;a<g.value.coresOccupy.length;a++)if(t<2){if(t++,a===g.value.coresOccupy.length-1){n+="".concat(a+1," "),r+="".concat(parseFloat(g.value.coresOccupy[a]).toFixed(1),"% "),e.push({name:n,value:r});break}n+="".concat(a+1," / "),r+="".concat(parseFloat(g.value.coresOccupy[a]).toFixed(1),"% / "),g.value.coresOccupy.length%2==1&&a===g.value.coresOccupy.length-1&&e.push({name:n,value:r})}else t=0,n+="".concat(a+1),r+="".concat(parseFloat(g.value.coresOccupy[a]).toFixed(1),"%"),e.push({name:n,value:r}),n="核心 ",r="";i.value=e};Mt.useSetCallback("memory",(function(e){x.value=e,A()}));var A=function(){var e=x.value,t=e.memRealUsed,n=e.memTotal;if(!u.value){var r=Math.round(t/n*1e3)/10;w.memory=r>=80?"warning":r>=90?"danger":"success",O.range=r,O.desc="".concat(t," / ").concat(n,"(MB)")}},F=function(e){m.value&&clearInterval(m.value);var t=e.memRealUsed-e.memRealUsed,n=He(t)?t:Ue(t);O.range=1,O.rangeText="已释放\n ".concat(n),setTimeout((function(){u.value=!1,O.rangeText="",O.disabled=!1,p.value=!0}),1500)},R=function(){var e="";u.value=!0,p.value=!1,O.disabled=!0,m.value=setInterval((function(){var t=O.range;e="..."===e?".":"".concat(e,"."),O.rangeText="释放中".concat(e),t>0&&(t-=.2*t),(t=Number(t.toFixed(2)))<0&&(t=0),O.range=t}),400)},M=function(){var e=d(f().mark((function e(){var t,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,R(),e.next=4,Nt();case 4:t=e.sent,n=t.data,F(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Be({type:"calc",title:"释放内存",content:"若您的站点处于有大量访问的状态，释放内存可能带来无法预测的后果，您确定现在就释放内存吗？"});case 3:M(),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var t=d(f().mark((function t(n,r){var a;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l.value=r,"ltd"===o.value){t.next=3;break}return t.abrupt("return");case 3:return a=function(){var t=d(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v){t.next=5;break}return v=!0,t.next=4,e.getHomeProcessInfo();case 4:v=!1;case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),k.value=setInterval(a,5e3),T.removePending({method:"post",url:"/monitor/process_management/specific_resource_load_type"}),t.next=8,a();case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),N=function(){var e=d(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae({sName:"task_manager"});case 2:t=e.sent,t.data.setup?_.value=!0:_.value=!1;case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=s(),q=H({name:"",path:""}),G=H({loading:!0,list:[],total:0}),$=function(e){Z(!0,e)},K=function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Be({title:"删除告警任务",isHtml:!0,icon:"warning-filled",iconColor:"warning",content:"删除后将不再告警此条任务，是否继续？"});case 2:return e.next=4,Ce({loading:"正在删除告警任务，请稍后...",request:Me({id:t.id,name:t.module_type}),message:!0,success:X});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.status,r=t.title,e.next=4,Be({title:(n?"停用":"启用")+"告警任务【"+r+"】",content:"".concat(n?"停用":"启用","选中的告警任务后，该告警任务将").concat(n?"停止":"开启","告警，是否继续操作？"),icon:"warning-filled"});case 4:return e.next=6,Ce({loading:"正在设置告警状态，请稍后...",request:Ve({name:t.module_type,id:t.id,status:n?0:1}),message:!0});case 6:return e.next=8,X();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=[{title:"钉钉",type:"dingding"},{title:"飞书",type:"feishu"},{title:"邮箱",type:"mail"},{title:"企业微信",type:"weixin"},{title:"微信公众号",type:"wx_account"},{title:"短信通知",type:"sms"},{title:"自定义消息通道",type:"webhook"}],Q=s([{label:"标题",prop:"title"},bt({event:W,width:80,data:["已停用","已启用"]}),{label:"告警方式",width:140,showOverflowTooltip:!0,render:function(e){var t=[];return e.sender.forEach((function(e){var n=a.value.config.find((function(t){return t.id===e}));if(null!=n&&n.sender_type){var r=J.find((function(e){return e.type===n.sender_type}));null!=r&&r.title&&t.push("sms"===n.sender_type?r.title:n.data.title?n.data.title+"(".concat(r.title,")"):r.title)}})),S("span",{class:"truncate"},[t.join("、")])}},{label:"告警条件",render:function(e){var t=e.view_msg.match(/<span>(.*?)<\/span>/);return t?t[1]:""}},wt([{title:"编辑",onClick:$},{title:"删除",onClick:K}])]),Z=function(e,t){Ie({title:"进程告警",area:[80],btn:["保存","取消"],component:function(){return Te((function(){return r.import("./index-legacy98.js?v=1734676359")}),void 0,r.meta.url)},compData:{isEdit:e,row:t||{},diyProcessTemplate:!0,diyProcessTemplateTid:["60","61","62"],onRefresh:X}})},X=function(){var e=d(f().mark((function e(){var t,n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe();case 2:n=e.sent,r=n.data,G.list=(null==r||null===(t=r.data)||void 0===t?void 0:t.filter((function(e){return["60","61","62"].includes(e.template_id)})))||[],G.list.length>0||Z(!1),G.loading=!1;case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{cpuCoreDesc:i,statePopoverTimr:k,loadInfo:L,loadPopover:C,processAlarmShow:_,tagsType:w,load:y,cpu:g,loadInfoList:b,cpuInfo:j,cpuPopover:P,memoryInfo:O,memoryPopover:I,memory:x,disk:h,getProcessAlarm:N,moveStatePopover:U,removeStatePopover:function(){clearInterval(k.value)},onClearMemory:V,$reset:function(){T.reset(),clearInterval(k.value),clearInterval(m.value)},setPsFormRef:z,setPsForm:q,onConfirmPs:function(e){var t;Ce({loading:"正在修改备注，请稍后...",request:(t=q,Ee.post("system/set_rname",{data:t,check:"msg"})),message:!0,success:function(t){t.status&&e()}})},processAlarmTableColumn:Q,processTableData:G,openProcessAlarm:Z,initAlarm:X,hoverType:l}}))),Xt=e("f",B("HOME-STATE-POPOVER-STORE",(function(){var e,t=xt(),n=b(t),o=n.specificResource,i=n.diskQuota,l=Se(),u=l.payment,p=l.push,m=l.getAlarmData,v=c(u.value).authType,h=Zt(),y=b(h).setPsForm,g=s(),x=s(),w=s(),k=null,_=[{desc:"运行堵塞",val:90,color:"#dd2f00"},{desc:"运行缓慢",val:80,color:"#ff9900"},{desc:"运行正常",val:70,color:"#20a53a"},{desc:"运行流畅",val:30,color:"#20a53a"}],C=s("show"),P=s("two"),I=H({loading:!0,list:[]}),T=function(){var e=d(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1===t.important){e.next=6;break}return r=n?"结束进程":"释放内存",e.next=4,Be({type:"calc",title:r,content:"结束".concat(t.proc_name,"进程会导致").concat(t.explain.split("的进程")[0],"无法正常运行，是否结束?")});case 4:return e.next=6,Ce({loading:"正在".concat(r,"，请稍后..."),request:(a={pid:t.pid},Ee.post("monitor/process_management/kill_process_all",{data:a,customType:"model",check:"msg"})),message:!0});case 6:case"end":return e.stop()}var a}),e)})));return function(t,n){return e.apply(this,arguments)}}(),L=s((null===(e=p.value)||void 0===e?void 0:e.alarmPopupData)||[]),j={load:{title:"负载",id:"22"},cpu:{title:"cpu",id:"21"},mem:{title:"内存",id:"23"},disk:{title:"磁盘",id:"20"}},O=s({});s();var E=function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O.value=a(a({},t),{},{id:t.id||j[null===(n=t.type)||void 0===n?void 0:n.split("-")[0]].id}),Ie({title:"告警设置",component:function(){return Te((function(){return r.import("./alarm-config-legacy.js?v=1734676359")}),void 0,r.meta.url)},area:56,btn:"保存",onConfirm:q});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=d(f().mark((function e(t,n){var r,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n.id){e.next=4;break}E(n),e.next=18;break;case 4:if(e.prev=4,r=t?"开启":"关闭",e.t0=!t,!e.t0){e.next=10;break}return e.next=10,Be({title:"".concat(r,"告警"),content:"".concat(r,"告警后，将").concat(t?"":"不再","接收到该项的告警信息，是否继续操作？")});case 10:return a=A(n.type),e.next=13,Ce({loading:"正在".concat(r,"告警，请稍后..."),request:qe({task_id:a.id,status:t?1:0}),message:!0,success:m});case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(4),n.flag=!t;case 18:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(t,n){return e.apply(this,arguments)}}(),D=function(e){var t,n,r;switch(e){case"load":n="平均负载超过";break;case"mem":n="内存超过";break;case"cpu":n="平均CPU超过"}var a=F(e);return t=a.cycle,r=a.count,n||(n=a.text),Ge(t)||Ge(n)?"":"".concat(null!=e&&e.includes("disk")?"":"".concat(t,"分钟内")).concat(n).concat(r,"触发")},A=function(e){var t,n=j[e.split("-")[0]];return!!Array.isArray(L.value)&&(null===(t=L.value)||void 0===t?void 0:t.find((function(t){return null!=e&&e.includes("disk")?t.template_id===n.id&&t.task_data.project===e.split("-")[1]:t.template_id===n.id})))},F=function(e){var t,n,r,a=A(e);if(a){var o=a.task_data;t=o.cycle,r="".concat(o.count,"%"),e.includes("disk")&&o.project===e.split("-")[1]&&(n=2===o.cycle?"该磁盘用量超过":"该磁盘余量不足",r=2===o.cycle?"".concat(o.count,"%"):"".concat(o.count,"GB"))}return{cycle:t,text:n,count:r}},R=s(!1),M=s(),V=H({num:0,usageRate:0,give:[],option:{},type:"",selectOptions:[],typeDetection:"2"}),U=s(100),N=s([]),z=s([]),q=function(){var e=d(f().mark((function e(){var t,n,r,o,i,l,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.value.validate();case 2:return t=O.value,n=t.type,r=t.data,o=t.id,i=a(a({},r||{}),{},{type:n.includes("disk")?n.split("-")[0]:n,count:parseInt("".concat(V.usageRate)),cycle:n.includes("disk")?parseInt(V.typeDetection):5,project:n.split("-")[1]?n.split("-")[1]:""}),l={send_interval:0,time_range:[0,86399]},s={day_num:parseInt("".concat(V.num)),total:0},u={task_data:i,time_rule:l,number_rule:s,sender:V.give},e.next=10,Ce({loading:"正在保存告警配置，请稍后...",request:$e({task_data:JSON.stringify(u),template_id:o}),message:!0,success:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:D(n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=s([{label:"磁盘路径",prop:"filesystem",render:function(e){return S("div",{class:"flex items-center"},[S("span",{class:"svgtofont-file-hdd mr-4px !text-16px align-text-bottom"},null),S("span",null,[e.filesystem])])}},{label:"总大小",prop:"size"}]),$=function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y.value.name=t.ps,y.value.path=t.path,Ie({title:"设置磁盘【"+t.path+"】别名",area:45,component:function(){return Te((function(){return r.import("./index-legacy265.js?v=1734676359")}),void 0,r.meta.url)},btn:!0,onConfirm:h.onConfirmPs});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(e){if("0"===e)return 0;var t=e.match(/^(\d+(?:\.\d+)?)(?: )?([a-zA-Z]+)$/);if(!t)throw new Error("Invalid size format: ".concat(e));var n=parseFloat(t[1]),r=t[2].toUpperCase(),a=["B","KB","MB","G","GB","T","TB"].indexOf(r);if(-1===a)throw new Error("Invalid unit: ".concat(r));return n*Math.pow(1024,a)},W=function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:mt({pluginName:"disk_analysis",source:120,type:"ltd"}),Ne("diskPath",t),Ne("taskStatus","true");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{virtualRef:g,popover:x,popoverContent:w,chartColorActive:function(e,t){for(var n={},r=0;r<_.length;r++){var o=_[r];if(e>=o.val){n=a({},o);break}if(e<30){n=a({},_[_.length-1]);break}}return t&&(n.color="#dd2f00"),n.val=e,n},dirEvent:function(e,t){Ne("Path",e),ze.push({path:"/files"})},init:function(){k=new ResizeObserver((function(){x.value&&x.value.updatePopper()})),w.value&&k.observe(w.value)},$reset:function(){k&&w.value&&k.unobserve(w.value)},authType:v,specificResource:o,tableData:I,foldExpand:C,foldActive:P,useHomeTableColumn:function(e,t,n){return s([{label:"进程名称",minWidth:80,render:function(e){var t="备注：".concat(e.explain,"\n启动路径： ").concat(e.exe_path,"\n运行目录：").concat(e.cwd_path,"\n线程数量：").concat(e.num_threads);return S("span",{title:t},[e.proc_name])}},{label:t,prop:n,minWidth:70},{label:"操作",align:"right",fixed:"right",width:50,render:function(t){return S("span",{class:"cursor-pointer text-[#20a53a]",onClick:function(){T(t,e)}},[1===t.important?"":"cpu_percent"===n?"结束":"释放"])}}])},openProcessAlarmDialog:function(){Ie({title:"进程告警",area:["100","50"],component:function(){return Te((function(){return r.import("./process-alarm-manage-legacy.js?v=1734676359")}),void 0,r.meta.url)}})},openProduct:function(){dt({sourceId:141})},push:p,devTaskList:L,openAlarmPopup:B,setAlarmDialog:E,createPushStatus:D,getCurrentTask:A,onConfirm:q,giveFormDisabled:R,giveFormRef:M,msgForm:V,maxCapacityAndUsageRate:U,nextData:N,options:z,alarmInfo:function(){var e,t=O.value,n=t.type,r=t.data;t.id;r?(V.usageRate=r.count,V.num=r.push_count,N.value=r.next_data||[null===(e=z.value[0])||void 0===e?void 0:e.key],-1!==n.indexOf("disk")&&(V.typeDetection=r.cycle.toString()),V.give=r.module):(V.usageRate=80,V.num=3,-1!==n.indexOf("disk")&&(V.typeDetection="2"))},rowData:O,mountColumn:G,computedSpace:function(e,t){for(var n=["B","KB","MB","GB","TB"],r=K(e)-K(t),a=0;r>=1024&&a<n.length-1;)r/=1024,a++;return r=Math.round(100*r)/100,"".concat(r," ").concat(n[a])},setPsDialog:$,scanRubbishFile:W,switchTypeDetection:function(){var e=O.value,t=e.type,n=e.data;e.id;V.typeDetection!==n.cycle&&("2"===V.typeDetection?V.usageRate=80:i.value.forEach((function(e){e.diskName===t.split("-")[1]&&(U.value=e.diskQuota,V.usageRate=parseInt((.2*e.diskQuota).toString()))})))}}}))),Yt={class:"alarm"},en={class:"w-[21rem] ml-[0.8rem]"},tn=je(o({__name:"alarm",props:{type:{},diskName:{}},setup:function(e){var t=e,n=w((function(){return t.type})),r=Xt(),o=b(r),i=o.push,l=o.devTaskList;E((function(){return i.value.alarmPopupData}),(function(e){l.value=e}),{deep:!0,immediate:!0});var u=s(!1),c=w((function(){var e={type:n.value,data:!1,id:0,status:!1},t=r.getCurrentTask(n.value);if(t){var o,i=t.task_data;null!==(o=n.value)&&void 0!==o&&o.includes("disk")?(2===i.cycle?"".concat(i.count,"%"):"".concat(i.count,"GB"),u.value=!!t.status,e.status=!!t.status,e.data=a(a({},i),{},{module:t.sender,push_count:t.number_rule.day_num}),e.id=t.template_id):(u.value=!!t.status,e.status=!!t.status,e.data=a(a({},i),{},{module:t.sender,push_count:t.number_rule.day_num}),e.id=t.template_id)}return e}));return E((function(){return c.value}),(function(e){u.value=e.status}),{deep:!0,immediate:!0}),p((function(){})),function(e,t){var a=N,o=Oe;return v(),h("div",Yt,[t[4]||(t[4]=y("div",null,[y("span",null,"告警")],-1)),S(a,{size:"small",class:"ml-[0.8rem]",modelValue:m(u),"onUpdate:modelValue":t[0]||(t[0]=function(e){return U(u)?u.value=e:null}),onChange:t[1]||(t[1]=function(e){return m(r).openAlarmPopup(m(u),m(c))})},null,8,["modelValue"]),t[5]||(t[5]=y("div",{class:"switch"},null,-1)),S(o,{onClick:t[2]||(t[2]=function(e){return m(r).setAlarmDialog(m(c))})},{default:_((function(){return t[3]||(t[3]=[I("设置")])})),_:1}),y("span",en,g(m(r).createPushStatus(m(n))),1)])}}}),[["__scopeId","data-v-eddb73f9"]]),nn={class:""},rn={class:"flex justify-between w-full"},an={class:"px-[8px] text-[#666] text-[1.4rem]"},on={class:"mt-[12px] mx-[8px] space-y-[1.2rem] text-[#666] text-[1.3rem]"},ln={class:"flex justify-between items-center w-full"},sn={class:"px-[8px] text-[#666] text-[1.4rem] leading-[3rem] text-center"},un={class:"m-[.4rem] space-y-[1.2rem] text-[#666] text-[1.3rem] leading-[1.4rem]"},cn={class:"flex justify-between w-full"},fn={class:"px-[8px] text-[#666] text-[1.4rem] leading-[3rem] text-center"},pn={class:"mt-[8px] space-y-[1.2rem]"},dn={key:0,class:"mb-1rem"},mn={class:"flex items-center justify-center flex-nowrap w-full"},vn={class:"whitespace-nowrap"},hn=o({__name:"popover-content",props:{loadType:{default:""},type:{default:""},processAlarmShow:{type:Boolean,default:!1}},setup:function(e,t){var n=t.expose,r=e,a=b(Zt()).hoverType,o=Xt(),i=b(o),l=i.specificResource,s=i.authType,u=i.tableData,c=i.foldExpand,f=i.foldActive,p=w((function(){return-1!==r.type.indexOf("未挂载")})),d=w((function(){return"loadPopover"===a.value||"cpuPopover"===a.value})),C=w((function(){return o.useHomeTableColumn(d.value,d.value?"CPU占用率":"内存使用率",d.value?"cpu_percent":"memory_usage").value})),T=w((function(){return"memoryInfo"!==r.loadType})),L=w((function(){return"diskInfo"!==r.loadType})),j=w((function(){var e=r.loadType,t={one:"",two:"",three:""};return t.one="memoryInfo"===e?"内存信息":"基础信息","diskInfo"!==e?d.value?("loadInfo"===e?t.two="更多负载信息":"cpuInfo"===e&&(t.two="核心使用率"),t.three="CPU占用率top5的进程信息"):"memoryInfo"===e&&(t.two="内存信息",t.three="内存使用率top5的进程信息"):t.two="Inode信息",t}));return E((function(){return l.value}),(function(e){"ltd"===s.value?(u.value.loading=!1,d.value?u.value.list=l.value.cpuProcess:u.value.list=l.value.memProcess):(u.value.loading=!1,u.value.list=[])}),{deep:!0,immediate:!0}),E((function(){return s.value}),(function(e){"ltd"!==e&&(u.value.loading=!1,u.value.list=[])})),n({showTwo:T,showThree:L}),function(e,t){var n=K,a=W,i=J,l=Oe,d=Ke,b=O,w=z("bt-loading");return v(),k(b,{shadow:"never",class:"card-popover p-[5px]"},{default:_((function(){return[y("div",nn,[q(e.$slots,"button",{},void 0,!0)]),S(a,{class:"text-[1.2rem]",modelValue:m(c),"onUpdate:modelValue":t[0]||(t[0]=function(e){return U(c)?c.value=e:null}),accordion:!0},{default:_((function(){return[S(n,{ref:"base-info",name:"show"},{title:_((function(){return[y("div",rn,[y("span",an,g(m(j).one),1)])]})),default:_((function(){return[y("div",on,[q(e.$slots,"base-info",{},void 0,!0)]),m(p)?x("",!0):(v(),h(F,{key:0},[t[2]||(t[2]=y("hr",{style:{width:"calc(100% - 16px)",margin:"12px auto","border-top":"1px solid #f0f0f0"}},null,-1)),S(tn,{type:e.type,class:"mx-[8px]"},null,8,["type"])],64))]})),_:3},512)]})),_:3},8,["modelValue"]),m(p)?x("",!0):(v(),k(a,{key:0,class:"text-[1.2rem]",modelValue:m(f),"onUpdate:modelValue":t[1]||(t[1]=function(e){return U(f)?f.value=e:null}),accordion:!0},{default:_((function(){return[m(T)?(v(),k(n,{key:0,name:"two"},{title:_((function(){return[y("div",ln,[y("span",sn,g(m(j).two),1),y("span",null,g("two"===m(f)?"收起":"展开"),1)])]})),default:_((function(){return[y("div",un,[q(e.$slots,"content-info",{},void 0,!0)])]})),_:3})):x("",!0),m(L)?(v(),k(n,{key:1,name:"three",class:P({"!mb-0":!m(T)})},{title:_((function(){return[y("div",cn,[y("span",fn,g(m(j).three),1),y("span",null,g("three"===m(f)?"收起":"展开"),1)])]})),default:_((function(){return[y("div",pn,[y("div",null,[r.processAlarmShow?(v(),h("div",dn,[S(i,{size:"small",onClick:m(o).openProcessAlarmDialog},{default:_((function(){return t[3]||(t[3]=[I("进程告警")])})),_:1},8,["onClick"])])):x("",!0),G((v(),k(d,{column:m(C),data:m(u).list,"max-height":450},$({_:2},["ltd"!==m(s)?{name:"empty",fn:_((function(){return[y("div",mn,[y("span",vn,[t[5]||(t[5]=I("当前为企业版专享功能, ")),S(l,{onClick:m(o).openProduct},{default:_((function(){return t[4]||(t[4]=[I("立即购买")])})),_:1},8,["onClick"])])])]})),key:"0"}:void 0]),1032,["column","data"])),[[w,m(u).loading]])])])]})),_:1},8,["class"])):x("",!0)]})),_:3},8,["modelValue"]))]})),_:3})}}}),yn=je(hn,[["__scopeId","data-v-94f0e556"]]),gn={class:"flex items-center justify-between mb-[1.2rem] leading-[2.8rem]"},xn={class:"flex items-center"},bn={class:"flex align-left flex-col"},wn={class:"m-[4px] flex items-center"},kn=["title"],_n={class:"m-[4px]"},Sn={class:"m-[4px]"},Cn={class:"flex align-left flex-col !mt-[4px]"},Pn={class:"m-[4px]"},In={class:"m-[4px]"},Tn={class:"m-4x flex items-center"},Ln={class:"!ml-[4px] !my-[8px]"},jn={class:"!ml-[4px] !my-[8px]"},On={class:"!ml-[4px] !my-[8px]"},En=o({__name:"disk-popover",props:{custom:{type:Boolean,default:!1},item:{default:[]}},setup:function(e){var t=e,n=Xt(),r=b(n).mountColumn,a=w((function(){return"None"===t.item.data.path})),o=w((function(){var e="string"==typeof t.item.data.size?0:parseFloat(t.item.data.size[3].substring(0,t.item.data.size[3].lastIndexOf("%")));return e>=90?"danger":e>=80?"warning":"success"}));return function(e,i){var l=Q,s=Z,u=J,c=X,f=Ke;return v(),k(yn,{"load-type":"diskInfo",type:"disk-".concat(t.item.info.title)},{button:_((function(){return[m(a)?x("",!0):(v(),h(F,{key:0},[parseInt(t.item.data.inodes[3])>90?(v(),k(l,{key:0,title:"Inode可用不足10%，请前往文件管理清理不必要文件",type:"error",class:"h-[24px] !mb-8px",closable:!1})):x("",!0),y("div",gn,[y("div",xn,[i[2]||(i[2]=y("span",{class:"text-[#666] text-[1.4rem] mr-[4px] ml-[8px]"},"检测到当前磁盘",-1)),S(s,{type:m(o)},{default:_((function(){return[I(g("容量占用".concat(t.item.data.size[3].substring(0,t.item.data.size[3].lastIndexOf("%")),"%")),1)]})),_:1},8,["type"])]),S(u,{type:"primary",onClick:i[0]||(i[0]=function(e){return m(n).scanRubbishFile(t.item.info.title)})},{default:_((function(){return i[3]||(i[3]=[I("立即清理")])})),_:1})])],64))]})),"base-info":_((function(){return[m(a)?(v(),k(f,{key:1,data:e.item.data.list,column:m(r)},null,8,["data","column"])):(v(),h(F,{key:0},[y("div",bn,[y("div",wn,[y("div",{class:"block truncate max-w-[30rem]",title:"挂载点：".concat(e.item.info.title,"\n备注：").concat(e.item.data.rname)},"挂载点： "+g(e.item.info.title+(e.item.data.rname?" (".concat(e.item.data.rname,")"):"")),9,kn),S(c,{placement:"right",content:"点击设置备注"},{default:_((function(){return[y("i",{class:"svgtofont-el-edit text-primary ml-[8px] cursor-pointer",onClick:i[1]||(i[1]=function(t){return m(n).setPsDialog({ps:e.item.data.rname||e.item.info.title,path:e.item.info.title})})})]})),_:1})]),y("span",_n,g("共：".concat(e.item.data.size[0])+"，可用：".concat(e.item.data.size[2])+"，\t已用：".concat(e.item.data.size[1])),1),y("span",Sn,g("未分配：".concat(m(n).computedSpace(e.item.data.size[0],e.item.data.size[1]))),1)]),y("div",Cn,[y("span",Pn," 文件系统："+g(e.item.data.filesystem),1),y("span",In," 类型："+g(e.item.data.type+"，系统占用：".concat(e.item.data.size[3])),1)]),y("div",Tn,[y("span",null," 磁盘大小："+g(e.item.data.d_size),1),S(c,{class:"item",effect:"dark",content:"根据系统设置的不同，如分区/SWAP/LVM/扩容，可能显示大小不一致，点击查看详情",placement:"top-start"},{default:_((function(){return i[4]||(i[4]=[y("a",{class:"bt-ico-ask ml-3",href:"https://www.bt.cn/bbs/thread-136532-1-1.html",target:"_blank"},"?",-1)])})),_:1})])],64))]})),"content-info":_((function(){return[y("p",Ln,"总数："+g(e.item.data.inodes[0]),1),y("p",jn,"已用："+g(e.item.data.inodes[1]),1),y("p",On,"可用："+g(e.item.data.inodes[2]),1),y("p",{class:P(["!ml-[4px] !my-[8px]",{"text-warning":parseInt(t.item.data.inodes[3])>90&&parseInt(t.item.data.inodes[3])<100,"text-danger":100===parseInt(t.item.data.inodes[3])}])}," 使用率："+g(e.item.data.inodes[3]+(e.item.data.inodes[3].includes("%")?"":"%")),3)]})),_:1},8,["type"])}}}),Bn=je(En,[["__scopeId","data-v-a8a86d42"]]),Dn={class:"state-data py-[24px]"},An={class:"state-header"},Fn={key:1},Rn={key:1},Mn=["href"],Vn=["title"],Hn=o({__name:"main",props:{visible:{type:Boolean,default:!1},custom:{type:Boolean,default:!1},showDesc:{type:Boolean,default:!0},href:{default:""},info:{default:function(){return{title:"",range:0}}},disk:{type:Boolean,default:!1},data:{default:function(){return{}}},type:{default:""},alert:{type:Boolean,default:!1}},emits:["update:visible","openPopover","show","hide"],setup:function(e,t){t.emit;var n=e,r=Xt(),a=b(r),o=a.virtualRef,i=(a.popover,a.popoverContent),l=w((function(){var e=n.info,t=n.alert,a=e.desc,o=e.title,i=e.range,l=e.rangeText,s=e.disabled,u=r.chartColorActive(i,t);return{title:o,color:u.color,range:i,disabled:!!s,desc:a||u.desc,rangeText:l||"",position:"bottom-start"}})),s=function(e){var t=l.value.rangeText;return t||"".concat(e,"%")};return p((function(){r.init()})),Y(r.$reset),function(e,t){var n=X,a=ne,u=L,c=re;return v(),h("div",Dn,[S(u,{trigger:"hover","virtual-ref":m(o),width:e.custom?"auto":e.disk?300:400,offset:e.custom?1:0,placement:m(l).position,teleported:!1,"show-after":100,"auto-close":0,"popper-class":"el-popover-shadow",onShow:t[1]||(t[1]=function(t){return e.$emit("show")}),onHide:t[2]||(t[2]=function(t){return e.$emit("hide")})},{reference:_((function(){return[y("div",{ref_key:"popoverContent",ref:i,class:"w-full flex flex-col items-center"},[y("div",An,["disk"===e.type?(v(),k(n,{key:0,effect:"dark",placement:"top"},{content:_((function(){return[y("p",null,["None"!==e.data.path?(v(),h(F,{key:0},[y("div",null,"别名："+g(e.data.rname),1),t[3]||(t[3]=y("div",null,"点击跳转目录",-1))],64)):(v(),h("div",Fn,"点击打开磁盘挂载插件"))])]})),default:_((function(){return[y("span",{class:"bt-link",onClick:t[0]||(t[0]=function(t){return m(r).dirEvent(m(l).title,e.data.path)})},g(m(l).title),1)]})),_:1})):(v(),h("span",Rn,g(m(l).title),1)),e.href?(v(),k(n,{key:2,class:"item",effect:"dark",content:"点击跳转".concat(m(l).title,"教程"),placement:"top-start"},{default:_((function(){return[y("a",{class:"bt-ico-ask ml-3",href:e.href,target:"_blank"},"?",8,Mn)]})),_:1},8,["content"])):x("",!0)]),G(S(a,{class:P(["cursor-pointer",{"mount-progress":"None"===e.data.path}]),type:"circle",width:105,"stroke-width":7,color:m(l).color,percentage:m(l).range||0,format:s,style:ee("color:"+m(l).color)},null,8,["class","color","percentage","style"]),[[c,void 0,"popover"]]),G(y("div",{class:"state-bottom",title:m(l).desc},g(m(l).desc),9,Vn),[[te,e.showDesc]])],512)]})),default:_((function(){return[q(e.$slots,"default",{},void 0,!0)]})),_:3},8,["virtual-ref","width","offset","placement"])])}}}),Un=je(Hn,[["__scopeId","data-v-0029e796"]]),Nn={class:"flex items-center justify-between mb-[1.2rem] leading-[2.8rem]"},zn={class:"flex items-center"},qn={class:"disk-body-list flex justify-between !m-[4px]"},Gn={id:"load_one"},$n={class:"disk-body-list flex justify-between !m-[4px]"},Kn={id:"load_cpu_times_num"},Wn={class:"disk-item-body",id:"other_info_html"},Jn={class:"table table-fixed whitespace-nowrap"},Qn=["title"],Zn=["title"],Xn={class:"flex items-center justify-between mb-[1.2rem] leading-[2.8rem]"},Yn={class:"flex items-center"},er={class:"max-h-[5.8rem] overflow-y-auto"},tr={class:"!m-[4px]"},nr={class:"!m-[4px]"},rr={class:"flex items-center justify-between mb-[1.2rem] leading-[2.8rem]"},ar={class:"flex items-center"},or={class:"flex align-left flex-col"},ir={class:"flex justify-between mb-[4px]"},lr={class:"w-[50%]"},sr={class:"inline-flex justify-start"},ur={class:"w-[50%]"},cr={class:"inline-flex justify-start"},fr={class:"flex justify-between mb-[4px]"},pr={class:"w-[50%]"},dr={class:"inline-flex justify-start"},mr={class:"w-[50%]"},vr={class:"inline-flex justify-start"},hr={class:"flex justify-between mb-[4px]"},yr={class:"w-[50%]"},gr={class:"w-[50%]"},xr={class:"inline-flex justify-start"},br=o({__name:"index",setup:function(e){var t=Zt(),n=b(t),r=n.cpuCoreDesc,a=n.statePopoverTimr,o=n.loadInfo,i=n.loadPopover,l=n.processAlarmShow,s=n.tagsType,u=n.load,c=n.cpu,x=n.loadInfoList,C=n.cpuInfo,P=n.cpuPopover,T=n.memoryInfo,L=n.memoryPopover,j=n.memory,B=n.disk,D=w((function(){return"".concat(u.value.one.toFixed(2)," / ").concat(u.value.five.toFixed(2)," / ").concat(u.value.fifteen.toFixed(2))})),A=w((function(){var e=c.value.process;return Array.isArray(e)?"".concat(e[0]," / ").concat(e[1]):"获取中"}));return E((function(){return a.value}),(function(e,t){clearInterval(e)}),{immediate:!0}),p(d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ct({promises:[t.getProcessAlarm],delay:1e3});case 1:case"end":return e.stop()}}),e)})))),Y(t.$reset),function(e,n){var a=Z,u=ae,f=J,p=oe,d=O;return v(),k(d,{class:"module-box w-full","body-style":{padding:0,display:"flex"}},{header:_((function(){return n[3]||(n[3]=[y("div",{class:"text-1.6rem text-desc text-auto-ellipsis"},"状态",-1)])})),default:_((function(){return[S(p,{span:24,class:"w-full"},{default:_((function(){return[S(u,{span:4,xs:12,sm:6,md:6,lg:4},{default:_((function(){return[S(Un,{info:m(o),onShow:n[0]||(n[0]=function(e){return m(t).moveStatePopover(m(i),"loadPopover")}),onHide:m(t).removeStatePopover,href:"https://www.bt.cn/bbs/thread-11402-1-1.html"},{default:_((function(){return[S(yn,{"load-type":"loadInfo",ref_key:"loadPopover",ref:i,type:"load","process-alarm-show":m(l)},{button:_((function(){return[y("div",Nn,[y("div",zn,[n[4]||(n[4]=y("span",{class:"text-[#666] text-[1.4rem] mr-[4px] ml-[8px]"},"检测到当前负载",-1)),S(a,{type:m(s).load},{default:_((function(){return[I(g("运行达到".concat(m(o).range,"%")),1)]})),_:1},8,["type"])])])]})),"base-info":_((function(){return[y("div",qn,[n[5]||(n[5]=y("div",null,"最近1/5/15分钟平均负载：",-1)),y("div",Gn,g(m(D)),1)]),y("div",$n,[n[6]||(n[6]=y("div",null,"活动进程数 / 总进程数:",-1)),y("div",Kn,g(m(A)),1)])]})),"content-info":_((function(){return[y("div",Wn,[y("table",Jn,[y("tbody",null,[(v(!0),h(F,null,R(m(x),(function(e,t){return v(),h("tr",{key:t},[(v(!0),h(F,null,R(e,(function(e,t){return v(),h(F,{key:t},[y("td",{title:e.title,class:"break-all text-ellipsis p-[.4rem]"},[y("span",null,g(e.name),1)],8,Qn),y("td",{title:e.title,class:"break-all text-ellipsis"},[y("span",null,g(e.value),1)],8,Zn)],64)})),128))])})),128))])])])]})),_:1},8,["process-alarm-show"])]})),_:1},8,["info","onHide"])]})),_:1}),S(u,{span:4,xs:12,sm:6,md:6,lg:4},{default:_((function(){return[S(Un,{info:m(C),type:"cpu",onShow:n[1]||(n[1]=function(e){return m(t).moveStatePopover(m(P),"cpuPopover")}),onHide:m(t).removeStatePopover},{default:_((function(){return[S(yn,{"load-type":"cpuInfo",type:"cpu",ref_key:"cpuPopover",ref:P,"process-alarm-show":m(l)},{button:_((function(){return[y("div",Xn,[y("div",Yn,[n[7]||(n[7]=y("span",{class:"text-[#666] text-[1.4rem] mr-[4px] ml-[8px]"},"检测到当前CPU使用率",-1)),S(a,{type:m(s).cpu},{default:_((function(){return[I(g("占用".concat(m(C).range,"%")),1)]})),_:1},8,["type"])])])]})),"content-info":_((function(){return[y("div",er,[(v(!0),h(F,null,R(m(r),(function(e,t){return v(),h("div",{key:t,class:"flex direction-row items-center justify-between mb-[4px]"},[y("span",null,g(e.name),1),y("span",null,g(e.value),1)])})),128))])]})),"base-info":_((function(){return[y("p",tr,g(m(c).framework),1),y("p",nr,g("".concat(m(c).cpuNumber,"个物理CPU，").concat(m(c).logicCores,"个物理核心，").concat(m(c).cores,"个逻辑核心")),1)]})),_:1},8,["process-alarm-show"])]})),_:1},8,["info","onHide"])]})),_:1}),S(u,{span:4,xs:12,sm:6,md:6,lg:4},{default:_((function(){return[S(Un,{type:"mem",info:m(T),onShow:n[2]||(n[2]=function(e){return m(t).moveStatePopover(m(L),"memoryPopover")}),onHide:m(t).removeStatePopover},{default:_((function(){return[S(yn,{"load-type":"memoryInfo",type:"mem",ref_key:"memoryPopover",ref:L,"process-alarm-show":m(l)},{button:_((function(){return[y("div",rr,[y("div",ar,[n[8]||(n[8]=y("span",{class:"text-[#666] text-[1.4rem] mr-[4px] ml-[8px]"},"检测到当前内存",-1)),S(a,{type:m(s).memory},{default:_((function(){return[I(g("占用".concat(m(T).range,"%")),1)]})),_:1},8,["type"])]),S(f,{type:"primary",onClick:m(t).onClearMemory},{default:_((function(){return n[9]||(n[9]=[I("立即清理")])})),_:1},8,["onClick"])])]})),"base-info":_((function(){return[y("div",or,[y("div",ir,[y("div",lr,[n[10]||(n[10]=y("span",{class:"w-[81px] inline-flex justify-end"},"空闲内存：",-1)),y("span",sr,g(m(j).memFree+" MB"),1)]),y("div",ur,[n[11]||(n[11]=y("span",{class:"w-[81px] inline-flex justify-end"},"已用：",-1)),y("span",cr,g(m(j).memRealUsed+" MB"),1)])]),y("div",fr,[y("div",pr,[n[12]||(n[12]=y("span",{class:"w-[81px] inline-flex justify-end"},"总内存：",-1)),y("span",dr,g(m(j).memTotal+" MB"),1)]),y("div",mr,[n[13]||(n[13]=y("span",{class:"w-[81px] inline-flex justify-end"},"共享：",-1)),y("span",vr,g(m(j).memShared+" MB"),1)])]),y("div",hr,[y("div",yr,[n[14]||(n[14]=y("span",{class:"w-[81px] inline-flex justify-end"},"可分配内存：",-1)),y("span",null,g(m(j).memAvailable+"MB"),1)]),y("div",gr,[n[15]||(n[15]=y("span",{class:"w-[81px] inline-flex justify-end"},"buff/cache：",-1)),y("span",xr,g(m(j).memCached+"/"+m(j).memBuffers+" MB"),1)])])])]})),_:1},8,["process-alarm-show"])]})),_:1},8,["info","onHide"])]})),_:1}),(v(!0),h(F,null,R(m(B),(function(e,n){return v(),k(u,{key:n,span:4,xs:12,sm:6,md:6,lg:4},{default:_((function(){return[S(Un,{type:"disk",info:e.info,onHide:m(t).removeStatePopover,data:e.data,alert:"None"!==e.data.path&&100===parseInt(e.data.inodes[3])},{default:_((function(){return[S(Bn,{item:e},null,8,["item"])]})),_:2},1032,["info","onHide","data","alert"])]})),_:2},1024)})),128))]})),_:1})]})),_:1})}}}),wr=je(br,[["__scopeId","data-v-3d181c45"]]);function kr(e,r){var o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=i.document,s=void 0===l?se:l,u=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(i,t),c={onUpdate:function(e){!function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;null!=a&&((o=a.item).parentNode&&o.parentNode.removeChild(o),function(e,t,n){var r=e.children[n];e.insertBefore(t,r)}(a.from,a.item,t));var o;var i=U(e),l=i?n(ue(e)):ue(e);if(r>=0&&r<l.length){var s=l.splice(t,1)[0];A((function(){l.splice(r,0,s),i&&(e.value=l)}))}}(r,e.oldIndex,e.newIndex,e)}},f=function(){var t=null==s?void 0:s.querySelector(e);t&&void 0===o&&(o=new We(t,a(a({},c),u)))},p=function(){null==o||o.destroy(),o=void 0};return ie(f),le(p),{stop:p,start:f,option:function(e,t){if(void 0===t)return null==o?void 0:o.option(e);null==o||o.option(e,t)}}}var _r=e("H",B("HOME-OVERVIEW-STORE",(function(){var e=D(),t=Se(),n=t.mainWidth,o=t.payment,i=c(o.value).authType,l=s([]),u=s(!1),p=s(!1),m=function(){var e=d(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ce({loading:u,request:Ee.post("panel/overview/GetOverview",{check:"array",customType:"model"}),data:{data:[Array,l]}});case 3:return t=e.sent,v(),e.abrupt("return",Promise.resolve(t.data));case 8:e.prev=8,e.t0=e.catch(0),Je(e.t0);case 11:return e.prev=11,u.value=!1,A((function(){_()})),e.finish(11);case 15:case"end":return e.stop()}}),e,null,[[0,8,11,15]])})));return function(){return e.apply(this,arguments)}}(),v=function(){var e,t=l.value.findIndex((function(e){return"ssh_log"===e.name}));-1!==t&&Ce({loading:p,request:(e={log_type:l.value[t].params[0].source},Ee.post("/logs/panel/index_ssh_info",{data:e,check:"array",customType:"model"})),success:function(e){Array.isArray(e.data)&&(l.value[t].value=e.data)}})},h=function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ie({title:"自定义概览模块",area:100,compData:t,component:function(){return Te((function(){return r.import("./index-legacy266.js?v=1734676359")}),void 0,r.meta.url)}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var t=d(f().mark((function t(n){var a,o,i,l,s;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=n.type,t.next="base"===t.t0?3:"model"===t.t0?7:"plugin"===t.t0?20:21;break;case 3:return a=n.params[0].source,o="/"+(["ftps","sites","databases"].includes(n.name)&&"all"===a?"":a).replace("proxy","nginx"),t.abrupt("return",e.push({path:n.source.href+o}));case 7:if("memo"!==n.name){t.next=9;break}return t.abrupt("return",x());case 9:if("safety_risk"!==n.name){t.next=11;break}return t.abrupt("return",b());case 11:if("ssh_log"!==n.name){t.next=20;break}return t.next=14,Te((function(){return r.import("./useStore-legacy4.js?v=1734676359")}),void 0,r.meta.url);case 14:return i=t.sent,l=i.getFirewallStore,s=l(),s.refs.sshTabActive.value="login",Qe("Router-Key",{path:"ssh",children:"loginLog"}),t.abrupt("return",e.push({path:"/firewall/ssh-manger"}));case 20:return t.abrupt("return",k(n));case 21:if("search_file"!==n.name){t.next=23;break}return t.abrupt("return",S());case 23:if("open_dir"!==n.name){t.next=25;break}return t.abrupt("return",kt({path:n.params[0].name}));case 25:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),g=function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce({request:qt({overview:JSON.stringify(l.value)}),message:!0,success:function(e){e.status||m()}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ie({title:"备忘录",area:[70,60],component:function(){return Te((function(){return r.import("./index-legacy267.js?v=1734676359")}),void 0,r.meta.url)}}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ie({area:[76,70],component:function(){return Te((function(){return r.import("./index-legacy268.js?v=1734676359")}),void 0,r.meta.url)}}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(e){var t=e.plugin_info.type;return"free"===i.value&&(8===t||12===t)||"ltd"!==i.value&&12===t},k=function(e){var t=e.plugin_info,n=t.type,r=t.endtime,a=(t.setup,"total"===e.name?41:"btwaf"===e.name?40:42);if(w(e)&&r<0)return dt({disablePro:8!==n,sourceId:a});mt({name:e.name})},_=function(){var e;kr(".overview-wrapper",l,{animation:500,handle:".move-icon",chosenClass:"ghost",onEnd:(e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g();case 1:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})})},S=function(){Ne("searchFile","true"),e.push({path:"/files"})},C=s(""),P=s("/www/server/panel/data/memo.txt"),I=function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ce({loading:"正在保存备忘录，请稍后...",request:Ze({path:P.value,data:C.value,encoding:"utf-8"}),message:!0,success:function(e){e.status&&m()}});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ce({loading:"正在获取备忘录数据，请稍后...",request:Xe(),data:[String,C]});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=ce([]),j=s([]),O=ce(!1),E=ce(0),B=s({val0:0,val1:0,val2:0,val3:0}),F=s(["sites","databases","total","ssh_log"]),R=s(["open_dir"]),M=function(){var e={};j.value=[],l.value.forEach((function(t){e[t.name]=t})),L.value.forEach((function(t){var n=t.template;t.option.forEach((function(t){var r=e[t.name]||!1;j.value.push(a(a({},t),{isShow:Boolean(r),showItem:r,template:n,overviewPopover:!1}))}))}))},V=function(){var e=d(f().mark((function e(t){var n,r,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.isShow||6!==l.value.length){e.next=4;break}return A((function(){return t.isShow=!1})),e.abrupt("return",Ye.warn("最多只能显示6个模块"));case 4:if(n=H(t),t.isShow||!Ge(t.showItem.id)){e.next=10;break}return e.next=8,z();case 8:(t=j.value.find((function(e){return e.name===t.name}))).isShow=!t.isShow;case 10:r=t.isShow?zt:Gt,a=t.isShow?{overview:JSON.stringify(n)}:{overview_id:t.showItem.id},Ce({loading:"正在".concat(t.isShow?"删除":"添加","模块，请稍后..."),request:r(a),message:!0,data:{data:Array,msg:String,status:Boolean},success:function(){var e=d(f().mark((function e(n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.status){e.next=5;break}return t.isShow&&(t.showItem=n.data.length?n.data[n.data.length-1]:t.showItem),e.next=4,m();case 4:M();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),Je(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),H=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=a({},e),r=[],o=[];for(var i in B.value)e.params.length&&o.push(B.value[i]);if(0===o.length&&(o=[0]),"open_dir"===e.name){var l=B.value.val0||e.params[0].option[0].source;r=[{name:l,source:l}]}else r=n.params.map((function(t,n){return"select"===t.type?t.option[o[n]]:e.params?e.params[n]:void 0}));return delete n.overviewPopover,t?(e.showItem.params=r,n=a({},e.showItem)):(delete n.showItem,n.params=r),n},U=function(){var e=d(f().mark((function e(t){var n,r,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=Boolean(t.showItem))||6!==l.value.length){e.next=5;break}return t.overviewPopover=!1,A((function(){return t.isShow=!1})),e.abrupt("return",Ye.warn("最多只能显示6个模块"));case 5:r={overview:JSON.stringify(H(t,n))},a=n&&t.isShow?qt:zt,Ce({loading:"正在".concat(n?"修改":"添加","模块，请稍后..."),request:a(r),message:!0,success:function(){var e=d(f().mark((function e(n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.overviewPopover=!1,t.isShow=!0,N(),!n.status){e.next=7;break}return e.next=6,m();case 6:M();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){B.value={val0:0,val1:0,val2:0,val3:0}},z=function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce({loading:O,request:et(),data:{data:[Array,L]}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{mainWidth:n,loading:u,isSshLoading:p,overviewShowList:l,getOverviewData:m,openOverviewTemplate:function(){h({getOverviewData:m})},openModelDialog:y,getModelTitle:function(e){var t=e.title,n=0,r=e.params.length||0,a=["ssh_log"];if(!e.status)return t;if("open_dir"===e.name)return t;r>=2&&(t="");for(var o=r-1;o>=0;o--){var i=e.params[o];(t===i.name||a.indexOf(e.name)>-1)&&(t=""),2!==n&&(1===r&&""!=t&&(t+=" - "),t+="".concat(i.name)+(o===r-1&&r>1?" - ":""),n++),n=0}return t},getPayStatus:w,getModelTips:function(e){switch(e.template){case"base":return"memo"===e.name||"safety_risk"===e.name?"打开".concat(e.title,"模块"):"跳转至".concat(e.title,"页面");case"browse":return"plugin"===e.type?"打开".concat(e.title,"插件"):"打开".concat(e.title,"模块");case"open_dir":return"打开".concat(e.title)}},content:C,path:P,saveFileEvent:I,getMemoData:T,isLoading:O,overviewModelList:j,supportConfig:F,supportPath:R,form:B,onPathChange:function(e){vt({type:"dir",change:function(t){B.value.val0=t,U(e)}})},getOverviewTemplateData:z,dataAlignment:M,setOverviewTemplateShow:V,addOverviewFun:U,setPopoverShow:function(e,t){j.value[t].overviewPopover=!0,E.value=t;for(var n=e.showItem.params,r=Object.entries(B.value),a=function(t){if(!(t<e.params.length))return 1;var r=e.params[t];if("select"===r.type){var a=r.option.findIndex((function(e){return!n||(!n[t]||e.source===n[t].source)}));B.value["val"+t]=a}else B.value["val"+t]=n?n[t].source:r.option[t].source},o=0;o<r.length&&!a(o);o++);}}}))),Sr={class:"text-[1.6rem] text-#666 flex justify-between flex-1 items-center"},Cr={class:"overview-wrapper draggable-group"},Pr=["onClick"],Ir={class:"content"},Tr={class:"title"},Lr={key:0,class:"risk not-install bt-blink"},jr={key:1,class:"model"},Or={class:"to-day"},Er={class:"yester-day"},Br={key:2,class:"path-info bt-link"},Dr={key:3,class:"path-info bt-link"},Ar={class:"bottom-menu"},Fr=je(o({__name:"index",setup:function(e){var t=_r(),n=b(t),r=n.mainWidth,a=n.loading,o=n.isSshLoading,i=n.overviewShowList,l=w((function(){var e,t=r.value<1100?r.value<800?2:4:r.value>1800?8:6,n=Math.floor((r.value-16*t-50)/t);return e=Math.min(Math.max(n,170),260),{width:"".concat(e,"px")}}));return p(d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ct({promises:[t.getOverviewData],delay:100});case 1:case"end":return e.stop()}}),e)})))),function(e,n){var r=J,s=oe,u=O,c=fe,f=z("bt-loading");return G((v(),k(u,{class:"relative module-box",shadow:"always","body-style":{padding:"0",display:"flex"}},{header:_((function(){return[y("div",Sr,[n[2]||(n[2]=y("span",null,"概览",-1)),S(r,{title:"自定义概览模块",class:"!ml-[1rem]",onClick:n[0]||(n[0]=function(e){return m(t).openOverviewTemplate()})},{default:_((function(){return n[1]||(n[1]=[y("i",{class:"svgtofont-el-setting text-[1.4rem]"},null,-1)])})),_:1})])]})),default:_((function(){return[S(s,{class:"w-full px-2.4rem pb-2.4rem pt-[0.8rem] min-h-[15.2rem]",gutter:15},{default:_((function(){return[y("div",Cr,[(v(!0),h(F,null,R(m(i),(function(e){return v(),h("div",{class:"overview-box",style:ee(m(l)),key:e.id,onClick:function(n){return m(t).openModelDialog(e)}},[n[5]||(n[5]=y("i",{class:"svgtofont-icon-drag text-[1.6rem] move-icon",title:"可拖拽"},null,-1)),y("div",Ir,[y("span",Tr,g(m(t).getModelTitle(e)),1),"base"===e.template?(v(),h("span",{key:0,class:P(["bt-link",{href:"base"===e.template,memo:"memo"===e.name,risk:"safety_risk"===e.name&&e.value[0]>0,"!text-[#CBCBCB]":"memo"===e.name&&!e.value[0]}])},g(e.value[0]||("memo"===e.name?"当前内容为空，点击编辑":e.value[0])),3)):"browse"===e.template?(v(),h(F,{key:1},["plugin"!==e.type||e.plugin_info.setup?"plugin"===e.type||"model"===e.type?G((v(),h("div",jr,[y("div",Or,[n[3]||(n[3]=y("span",{class:""},"今日",-1)),y("span",null,g(e.value[0]),1)]),y("div",Er,[n[4]||(n[4]=y("span",null,"昨日",-1)),y("span",null,g(e.value[1]),1)])])),[[c,m(o)&&"ssh_log"===e.name]]):x("",!0):(v(),h("span",Lr,g(m(t).getPayStatus(e)?"未购买":"未安装"),1))],64)):"open_dir"===e.template?(v(),h("span",Br,g(e.params[0].name),1)):"search_file"===e.template?(v(),h("span",Dr," 点击搜索内容 ")):x("",!0)]),y("div",Ar,g(m(t).getModelTips(e)),1)],12,Pr)})),128))])]})),_:1})]})),_:1})),[[f,m(a)],[f,"正在获取概览数据，请稍候...","title"]])}}}),[["__scopeId","data-v-65b6e5d2"]]),Rr=B("SOFTWARE-STORE",(function(){var e=D(),t=s(""),r=s(!1),a=s([]),o=s(),i=s([]),l=s([]),u=s(!1),c=s(!1),p=s(0),m=s(!1),v=s([]),h=[],y=function(){var e=d(f().mark((function e(){var t,n,r=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:"",!m.value){e.next=3;break}return e.abrupt("return");case 3:if(!He(t)||""===t){e.next=9;break}return m.value=!0,n=w((function(){if(!t)return v.value;var e=t.toLowerCase();return h.filter((function(t){return t.name.toLowerCase().includes(e)||t.ps.toLowerCase().includes(e)||t.title.toLowerCase().includes(e)}))})),v.value=n.value,m.value=!1,e.abrupt("return");case 9:g(t);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=pe(function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce({loading:m,request:Vt({p:1,type:-1,tojs:"soft.get_list",query:t,force:0,row:100}),data:{"list.data":[Array,v],"list.page":tt(p)},success:function(e){v.value=e["list.data"].filter((function(e){return e.index_display})).concat(e["list.data"].filter((function(e){return!e.index_display}))),h=v.value}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),5e3),x=function(){var e=d(f().mark((function e(t,n){var r,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=h.filter((function(e){return e.index_display})).length,h.length,v.value.length,!(r>12&&t.index_display)){e.next=7;break}return t.index_display=!t.index_display,e.abrupt("return",Ye.error("首页最多只能显示12个软件!"));case 7:return e.prev=7,a=t.index_display?Ht:Ut,e.next=11,Ce({loading:"正在处理，请稍后...",request:a(t.name),message:!0,success:function(e){e.status&&(v.value=v.value.map((function(e){return e.name==e.name&&(e.index_display=e.index_display),e})),h=h.map((function(e){return e.name==e.name&&(e.index_display=e.index_display),e})),i.value=h.filter((function(e){return e.index_display}))),_()}});case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(7),t.index_display=!t.index_display;case 17:case"end":return e.stop()}}),e,null,[[7,13]])})));return function(t,n){return e.apply(this,arguments)}}(),b=function(e){var t=e?h.filter((function(t){if(t.title.toLowerCase().includes(e.trim().toLowerCase()))return{value:t.title}})):h,n=[];return t.forEach((function(e,t,r){n.push({value:e.title})})),n},k=function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce({loading:u,request:Ee.post("plugin/get_index_list"),success:function(e){var t=e.data.filter((function(e){return e.setup}));l.value=t,i.value=t,_(),P()}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){if(i.value.length<=12&&(a.value.length>0?l.value=[].concat(n(i.value),n(a.value)).slice(0,12):l.value=n(i.value).slice(0,12)),l.value.length<12)for(;l.value.length<12;)l.value.push({})},S=function(){var e=d(f().mark((function e(){var t,n,r,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Math.ceil(p.value/12),!((n=Math.ceil(v.value.length/12))>=t)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Vt({p:n+1,type:-1,tojs:"soft.get_list",force:0,row:12});case 6:r=e.sent,a=r.data,v.value=v.value.concat(a.list.data);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(e){dt({disablePro:!(8===e.type),sourceId:{total:41,btwaf:40,tamper_core:42,bt_security:43,oneav:44,security_notice:56}[e.name]||175})},P=function(){var e,t=document.querySelector(".soft-wrapper");We.create(t,{animation:500,handle:".soft-move",chosenClass:"ghost",onEnd:(e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=l.value.splice(t.oldIndex,1)[0],l.value.splice(t.newIndex,0,n),I();case 3:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})})},I=function(){var e,t=l.value.filter((function(e){return void 0!==e.id&&e.name})).map((function(e){return e.name})).join("|");Ce({request:(e={ssort:t},Ee.post("plugin/sort_index",{data:e}))})},T=function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.endtime>=0||0===t.price)){e.next=4;break}mt({name:t.name,pluginInfo:t}),e.next=7;break;case 4:return e.next=6,Be({title:"购买插件",content:"插件已过期，是否前往购买？"});case 6:C(t);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae({sName:t.name});case 2:if(n=e.sent,"-1"!==(r=n.data).task){e.next=6;break}return e.abrupt("return",Ye.error("当前插件正在安装，不可重复安装"));case 6:ht({name:r.name,type:"i",pluginInfo:r});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce({request:nt(),success:function(e){var t;Array.isArray(e.data)&&e.data.length>0&&(a.value=(null===(t=e.data[1])||void 0===t?void 0:t.list)||[])}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{popShow:c,isGetSoft:u,pluginKeyword:t,recommendList:a,containerRef:o,mySoftList:v,tableLoading:m,softShowList:l,load:S,createSoftList:_,getHomeInstallSoftData:k,getRecommendInfo:j,goSoft:function(){e.push({path:"/soft"})},showPopoverHandle:y,leave:function(e){var n=e.offsetX,r=e.offsetY,a=o.value.offsetWidth,i=o.value.offsetHeight;if(n<0||r<0||n>=a||r>=i){var l=document.querySelector(".soft-search-popover");l&&"none"!=(null==l?void 0:l.style.display)?c.value=!0:(c.value=!1,t.value="")}},querySearch:function(e,t){t(b(e))},searchPluginHandle:function(){""==t.value?(r.value=!1,y()):(r.value=!0,y(t.value))},renderSoftImages:function(e){return"/static/img/soft_ico".concat("/ico-",e.replace(/-+[{0-9},\.,]+$/,""),".png")},changeSwitchHandle:x,openSoftView:T,softStatusColor:function(e){return e.status||"phpmyadmin"===e.name?"#20A53A":"#FF4949"},softStatus:function(e){return e.status||"phpmyadmin"===e.name?"start":"stop"},openRecommendSoftView:function(e){if(e.name&&!e.install&&!De(e.isBuy))return mt({name:e.name,pluginInfo:e}),!1},openSoftPreLink:function(e){window.open(e.preview)},openLtdPayView:C,openInstall:L}})),Mr={class:"w-full flex justify-between items-center"},Vr={class:"plugin-search"},Hr={class:"pluginInfo"},Ur=["src"],Nr={class:"plugin-desc"},zr={class:"wrapper soft-wrapper"},qr=["onClick"],Gr={key:0,id:"freeTagCon"},$r={class:"h-38 pt-5 w-full text-center flex justify-center items-center"},Kr=["src","custom"],Wr={class:"text-[#999] h-9 leading-9 flex items-center justify-center"},Jr={class:"mr-[2px]"},Qr=["onClick"],Zr={class:"h-28 pt-5 w-full text-center flex justify-center items-center"},Xr=["src"],Yr={class:"flex justify-center items-center"},ea={class:"text-[#999] h-9 leading-9 mr-2"},ta={class:"flex justify-center align-middle mt-2 opacity-70"},na=o({__name:"index",setup:function(e){var t=Rr(),n=b(t),r=n.popShow,a=n.pluginKeyword,o=n.recommendList,i=n.containerRef,l=n.mySoftList,s=n.tableLoading,u=n.isGetSoft,c=n.softShowList;return E(o,(function(e){e.length>0&&t.createSoftList()}),{immediate:!0}),p(d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ct({promises:[t.getHomeInstallSoftData,t.getRecommendInfo],delay:100});case 2:A((function(){if(_t().type.includes("aliyun"))var e=setInterval(d(f().mark((function t(){var n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.$extension){t.next=6;break}return t.next=3,window.$extension();case 3:n=t.sent,De(n.extensionElement)&&!n.extensionElement&&clearTimeout(e),n.extensionElement&&(n.extensionElement(),clearTimeout(e));case 6:case"end":return t.stop()}}),t)}))),1e3)}));case 3:case"end":return e.stop()}}),e)})))),function(e,n){var o=J,f=ve,p=he,d=N,b=ye,w=L,C=ae,T=oe,j=O,E=z("table-scroll-load"),B=z("bt-loading");return v(),k(j,{class:"module-box !mb-[0px]",shadow:"always","body-style":{padding:0,display:"flex",height:"calc( 100% - 50px )"}},{header:_((function(){return[y("div",Mr,[y("div",{class:"text-[1.6rem] text-#666 cursor-pointer",onClick:n[0]||(n[0]=function(){var e;return m(t).goSoft&&(e=m(t)).goSoft.apply(e,arguments)})},"软件"),S(w,{"popper-class":"myPopover",placement:"right-start",visible:m(r),width:"400",onShow:n[7]||(n[7]=function(e){return m(t).showPopoverHandle("")})},{reference:_((function(){return[S(o,{ref:"softButton",type:"default",title:"软件自定义编辑",onClick:n[6]||(n[6]=function(e){return r.value=!m(r)})},{default:_((function(){return n[9]||(n[9]=[y("i",{class:"svgtofont-el-setting text-[1.4rem]"},null,-1)])})),_:1},512)]})),default:_((function(){return[y("div",{ref_key:"containerRef",ref:i,class:"plugin-box p-[.8rem]",onMouseleave:n[5]||(n[5]=function(){var e;return m(t).leave&&(e=m(t)).leave.apply(e,arguments)})},[y("div",Vr,[S(f,{placeholder:"请输入要搜索的应用",modelValue:m(a),"onUpdate:modelValue":n[2]||(n[2]=function(e){return U(a)?a.value=e:null}),"fetch-suggestions":m(t).querySearch,"trigger-on-focus":!1,class:"search-input w-full","popper-class":"soft-search-popover",onKeyup:n[3]||(n[3]=de((function(e){return m(t).searchPluginHandle("select")}),["enter","native"])),onSelect:n[4]||(n[4]=function(e){return m(t).searchPluginHandle()})},{append:_((function(){return[S(o,{onClick:n[1]||(n[1]=function(e){return m(t).searchPluginHandle("select")})},{default:_((function(){return n[8]||(n[8]=[y("i",{class:"svgtofont-el-search"},null,-1)])})),_:1})]})),_:1},8,["modelValue","fetch-suggestions"])]),G((v(),k(b,{data:m(l),height:"400"},{default:_((function(){return[S(p,{width:"260",property:"date",label:"软件名称"},{default:_((function(e){return[y("div",Hr,[y("img",{class:"plugin-img",src:m(t).renderSoftImages(e.row.name)},null,8,Ur),y("span",Nr,g(e.row.title)+" "+g(e.row.version),1)])]})),_:1}),S(p,{property:"setup",sortable:"",label:"首页显示",prop:"index_display"},{default:_((function(e){return[S(d,{modelValue:e.row.index_display,"onUpdate:modelValue":function(t){return e.row.index_display=t},"active-color":"#20A53A","inactive-color":"#CDCDCD",width:32,size:"small",onChange:function(n){return m(t).changeSwitchHandle(e.row,e.$index)}},null,8,["modelValue","onUpdate:modelValue","onChange"])]})),_:1})]})),_:1},8,["data"])),[[E,m(t).load],[B,m(s)]])],544)]})),_:1},8,["visible"])])]})),default:_((function(){return[G((v(),k(T,{span:24,class:"w-full h-full"},{default:_((function(){return[y("div",zr,[S(me,null,{default:_((function(){return[(v(!0),h(F,null,R(m(c),(function(e,r){return v(),k(C,{key:e.name+"_id",span:6,class:"wrapper-item"},{default:_((function(){return[r<12?(v(),h("div",{key:0,class:P(["text-center h-full",e.title?"box-wrapper cursor-pointer relative":""])},[e.id&&e.setup?(v(),h("div",{key:0,onClick:function(n){return m(t).openSoftView(e)}},[n[10]||(n[10]=y("i",{class:"svgtofont-icon-drag text-[1.6em] text-[#999] !hidden absolute right-6 top-6 cursor-move mover soft-move"},null,-1)),e.tag?(v(),h("span",Gr)):x("",!0),y("div",$r,[y("img",{src:m(t).renderSoftImages(e.name),class:"w-[4rem]",custom:!m(rt)},null,8,Kr)]),y("div",Wr,[y("span",Jr,g(e.title.replace(/PHP-[{0-9},\.]+/,"PHP-")+" "+e.version),1),G(y("i",{style:ee("color:".concat(m(t).softStatusColor(e))),class:P("svgtofont-icon-".concat(m(t).softStatus(e)))},null,6),[[te,5===e.type]])])],8,qr)):m(at)(e)?x("",!0):(v(),h(F,{key:1},[y("div",{onClick:function(n){return m(t).openRecommendSoftView(e)},class:"absolute -left-1.5 -top-1 py-.5 px-2 transform scale-75 bg-[#efefef] text-[#999] opacity-80"},"推荐",8,Qr),y("div",Zr,[y("img",{src:"".concat(m(rt)?"/static/images":"/static/img","/soft_ico/ico-").concat(e.name,".png"),class:"w-[4rem]"},null,8,Xr)]),y("div",Yr,[y("div",ea,[I(g(e.title)+" "+g(e.version),1),n[11]||(n[11]=y("span",{class:"text-btColor"},null,-1))])]),y("div",ta,[e.preview?(v(),k(o,{key:0,type:"default",size:"small",onClick:function(n){return m(t).openSoftPreLink(e)},plain:""},{default:_((function(){return n[12]||(n[12]=[I("预览")])})),_:2},1032,["onClick"])):x("",!0),e.isBuy?x("",!0):(v(),k(o,{key:1,type:"success",size:"small",plain:"",onClick:function(n){return m(t).openLtdPayView(e)}},{default:_((function(){return n[13]||(n[13]=[I("购买")])})),_:2},1032,["onClick"])),e.isBuy&&!e.install?(v(),k(o,{key:2,type:"success",size:"small",plain:"",onClick:function(n){return m(t).openInstall(e)}},{default:_((function(){return n[14]||(n[14]=[I("安装")])})),_:2},1032,["onClick"])):x("",!0)])],64))],2)):x("",!0)]})),_:2},1024)})),128))]})),_:1})])]})),_:1})),[[B,m(u)],[B,"正在获取软件列表，请稍后...","title"]])]})),_:1})}}}),ra=je(na,[["__scopeId","data-v-421d94cf"]]),aa={class:"monitor"},oa={class:"label mb-[.7rem]"},ia={class:"w-full h-[34rem]"},la=o({__name:"main",props:ge({info:{default:function(){return{info:[],option:{}}}}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup:function(e,t){var n=t.expose,r=xe(e,"modelValue"),a=s();E(r,(function(e){e&&c(e)}));var o=ot({options:{xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{boundaryGap:[0,"50%"],type:"value"},series:[{name:"成交",type:"line",smooth:!0,symbol:"none",stack:"a",areaStyle:{},data:[]}]}}),i=o.BtECharts,l=o.getEChart,u=o.setOption,c=(o.setQuickOption,function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(p(t)),e.next=3,l();case 3:a.value=e.sent,null===(n=a.value)||void 0===n||n.resize();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={tooltip:{trigger:"axis",axisPointer:{type:"cross"},formatter:e.formatter},xAxis:{type:"category",boundaryGap:!1,data:e.tData,axisLine:{lineStyle:{color:"#666"}}},yAxis:{type:"value",name:e.unit,boundaryGap:[0,"100%"],splitNumber:e.splitNumber,min:0,splitLine:{lineStyle:{color:"#ddd"}},axisLine:{lineStyle:{color:"#666"}}},series:[]},n=e.legend,r=e.dataZoom,a=e.list;return n&&(t.legend=n),r&&(t.dataZoom=r),a.forEach((function(e){var n={name:e.name,data:e.data,symbolSize:6,type:e.type||"line",smooth:e.smooth||!0,symbol:e.symbol||"circle",showSymbol:!Ge(e.showSymbol)&&e.showSymbol,sampling:e.sampling||"average",areaStyle:e.areaStyle||{},lineStyle:e.lineStyle||{},itemStyle:e.itemStyle||{color:"rgb(0, 153, 238)"}};t.series.push(n)})),t};return n({echartRef:a,setConfig:c}),function(e,t){var n=ae,r=oe;return v(),h("div",aa,[S(r,{span:24,class:"w-full"},{default:_((function(){return[(v(!0),h(F,null,R(e.info,(function(e){return v(),k(n,{class:"text-center pt-[3.5rem] px-[1.5rem]",key:e.label,span:6,xs:12,sm:6,md:6,lg:6},{default:_((function(){return[y("div",oa,[G(y("i",{class:"spot rounded-[.5rem] inline-block w-[1rem] h-[1rem] mr-[.3rem]",style:ee({"background-color":e.bgColor})},null,4),[[te,e.bgColor]]),y("span",null,g(e.label),1)]),y("div",{class:"text-[1.4rem] text-[#777]",style:ee({color:e.color})},g(e.value),5)]})),_:2},1024)})),128))]})),_:1}),y("div",ia,[q(e.$slots,"default",{},void 0,!0),S(m(i),{class:"!h-[34rem]"})])])}}}),sa=je(la,[["__scopeId","data-v-1f6d0cab"]]),ua=B("HOME-MONITOR-STORE",(function(){var e,t,n=xt(),r=b(n).isRefreshData,a=s(!0),o=s(!1),i=s(),l=s(),u=s("net"),c=s(localStorage.getItem("netUnit")||"KB"),p=ce({}),m=ce({}),v=s([]),h=s([]),y=H({net:{selectVal:"ALL",selectList:[],data:{timeList:[],upList:[],downList:[]},info:{up:{label:"上行",value:"0 B",bgColor:"#F7B851"},down:{label:"下行",value:"0 B",bgColor:"#52A9FF"},upTotal:{label:"总发送",value:"0 B"},downTotal:{label:"总接收",value:"0 B"}}},iostat:{selectVal:"ALL",selectList:[],data:{timeList:[],readList:[],writeList:[],tipsList:[]},info:{read:{label:"读取",value:"0 B",bgColor:"#FF4683"},write:{label:"写入",value:"0 B",bgColor:"#6CC0CF"},second:{label:"每秒读写",value:"0次"},io:{label:"IO延迟",value:"0 ms",color:"#20a53a"}}}}),g=s([{label:"KB/s",value:"KB",disable:!1},{label:"MB/s",value:"MB",disable:!1},{label:"GB/s",value:"GB",disable:!1},{label:"TB/s",value:"TB",disable:!1}]);(t=e||(e={})).Net="net",t.Iostat="iostat",Mt.useSetCallback("network",(function(e){var t;if(e){v.value=e,"net"===u.value&&S(e,c.value);var n=j("net","data");p.value=C(n),null!==(t=L(u.value))&&void 0!==t&&null!==(t=t.echartRef)&&void 0!==t&&t.id&&(o.value=!1),k()}})),Mt.useSetCallback("diskIo",function(){var e=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:h.value=t,"iostat"===u.value&&P(t),r=j("iostat","data"),m.value=I(r),null!==(n=L(u.value))&&void 0!==n&&null!==(n=n.echartRef)&&void 0!==n&&n.id&&(o.value=!1),k();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var x=w((function(){return y[u.value].selectVal})),k=function(){var e=function(){var e=O(t),n=y[t],r=n.selectList;r.length=0,Object.keys(e).forEach((function(e){if("ALL"===e)return n.selectVal||(n.selectVal=e),void r.unshift({label:"所有",value:"ALL"});r.push({label:e,value:e})}))};for(var t in y)e()},_=function(e,t){var n=e.up,r=e.down,a=e.upTotal,o=e.downTotal;return{up:Ue(1024*n,!1,2,t),down:Ue(1024*r,!1,2,t),upTotal:Ue(1024*a,!1,2,t),downTotal:Ue(1024*o,!1,2,t)}},S=function(e,t){var n=j("net").info,r=e[x.value||"ALL"];if(r){var a=n.up,o=n.down,i=n.upTotal,l=n.downTotal,s=_(r,t),u=_(r,"MB");if(a.value=Ue(1024*r.up,!0,2,t),o.value=Ue(1024*r.down,!0,2,t),i.value=Ue(r.upTotal),l.value=Ue(r.downTotal),100*parseFloat(u.down)==0||100*parseFloat(u.down)==0)g.value=[{label:"KB/s",value:"KB",disable:!1},{label:"MB/s",value:"MB",disable:!0},{label:"GB/s",value:"GB",disable:!0},{label:"TB/s",value:"TB",disable:!0}];else{var c=_(r,"GB");if(100*parseFloat(c.down)==0||100*parseFloat(c.down)==0)g.value=[{label:"KB/s",value:"KB",disable:!1},{label:"MB/s",value:"MB",disable:!1},{label:"GB/s",value:"GB",disable:!0},{label:"TB/s",value:"TB",disable:!0}];else{var f=_(r,"TB");100*parseFloat(f.down)!=0&&100*parseFloat(f.down)!=0||(g.value=[{label:"KB/s",value:"KB",disable:!1},{label:"MB/s",value:"MB",disable:!1},{label:"GB/s",value:"GB",disable:!1},{label:"TB/s",value:"TB",disable:!0}])}}T("net",[{key:"timeList"},{key:"upList",value:s.up},{key:"downList",value:s.down}])}},C=function(e){return{dataZoom:[],tData:e.timeList,list:[{name:"上行",data:e.upList,circle:"circle",itemStyle:{color:"#f7b851"},lineStyle:{width:1,color:"#f7b851"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,global:!1,colorStops:[{offset:0,color:"rgba(255, 140, 0, 1)"},{offset:.8,color:"rgba(255, 140, 0, .4)"}]}}},{name:"下行",data:e.downList,circle:"circle",itemStyle:{color:"#52a9ff"},lineStyle:{width:1,color:"#52a9ff"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,global:!1,colorStops:[{offset:0,color:"rgba(30, 144, 255, 1)"},{offset:.8,color:"rgba(30, 144, 255, .4)"}]}}}],formatter:function(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(Ge(r.data))return!1;t+='<span class="inline-block w-[1rem] h-[1rem] mr-[1rem]" style="border-radius: 50%; background: '.concat(r.color,';"></span>').concat(r.seriesName,"：").concat(parseFloat(r.data).toFixed(2)," ").concat(c.value,"/s ").concat(e.length-1!==n?"<br />":"")}return"时间：".concat(e[0].axisValue,"<br />").concat(t)}}},P=function(e){var t=1048576,n=j("iostat").info,r=e[y.iostat.selectVal||"ALL"],a=n.read,o=n.write,i=n.second,l=n.io;if(r){var s=r.read_bytes,u=r.write_bytes,c=r.read_count,f=r.write_count,p=r.read_time,d=r.write_time;a.value=Ue(s),o.value=Ue(u),i.value="".concat(c+f," 次"),l.value="".concat(d>p?d:p," ms");var m=parseInt(l.value);l.color=m>=1e3?"#ff0000":m>100&&m<1e3?"#ff9900":"#20a53a",T("iostat",[{key:"timeList"},{key:"readList",value:(s/t).toFixed(2)},{key:"writeList",value:(u/t).toFixed(2)},{key:"tipsList",value:r}])}},I=function(e){return{dataZoom:[],unit:"单位：MB/s",tData:e.timeList,list:[{name:"读取字节数",data:e.readList,circle:"circle",itemStyle:{color:"#FF4683"},lineStyle:{width:1,color:"#FF4683"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,global:!1,colorStops:[{offset:0,color:"rgba(255, 70, 131, 1)"},{offset:.8,color:"rgba(255, 70, 131, .4)"}]}}},{name:"写入字节数",data:e.writeList,circle:"circle",itemStyle:{color:"#6CC0CF"},lineStyle:{width:1,color:"#6CC0CF"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,global:!1,colorStops:[{offset:0,color:"rgba(108, 192, 207, 1)"},{offset:.8,color:"rgba(108, 192, 207, .4)"}]}}}],formatter:function(t){for(var n="时间：".concat(t[0].axisValue,"<br />"),r={read_bytes:"读取字节数",read_count:"读取字节数",read_merged_count:"合并读取次数",read_time:"读取延迟",write_bytes:"写入字节数",write_count:"写入次数",write_merged_count:"合并写入次数",write_time:"写入延迟"},a=e.tipsList[t[0].dataIndex],o=0;o<t.length;o++){var i=t[o];if(Ge(i.data))return!1;n+='<span class="inline-block w-[1rem] h-[1rem] mr-[.1rem]" style="border-radius: 50%; background: '.concat(i.color,';"></span>&nbsp;&nbsp;<span>').concat(i.seriesName,"：").concat(parseFloat(i.data).toFixed(2)," MB/s</span><br />")}return["read_count","write_count","read_merged_count","write_merged_count","read_time","write_time"].forEach((function(e){var t=a[e],o=t>100&&t<1e3?"#ff9900":t>=1e3?"red":"#20a53a",i=e.indexOf("time")>-1?"color: ".concat(o):"",l=e.indexOf("time")>-1?" ms":" 次/秒";n+='<span class="inline-block w-[1rem] h-[1rem]"></span>&nbsp;&nbsp;<span style="'.concat(i,'">').concat(r[e],"：").concat(t+l,"</span><br />")})),n}}},T=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=j(e,"data");t.forEach((function(e){var t=e.key,a=e.value,o=r[t];o.length>=n&&o.splice(0,1),"timeList"==t?o.push(it((new Date).getTime(),"hh:mm:ss",!0)):o.push(a)}))},L=function(e){return"net"==e?i.value:"iostat"==e?l.value:void 0},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"net",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t?y[e][t]:y[e]},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"net";return"net"==e?v.value:"iostat"==e?h.value:{}};return{netRefs:i,iostatRefs:l,loading:o,iostatConfig:m,resource:y,unitList:g,activeName:u,netConfig:p,netUnit:c,initChart:function(){o.value=!0;var e=localStorage.getItem("home-model-active"),t=localStorage.getItem("home-".concat(e,"-active"));e&&(u.value=e,y[e].selectVal=t||"ALL"),A((function(){r.value=!0}));var n=j("net","data");p.value=C(n);var a=j("iostat","data");m.value=I(a)},onSelectChange:function(){localStorage.setItem("home-model-active",u.value),localStorage.setItem("home-".concat(u.value,"-active"),x.value),"net"===u.value?S(v.value,c.value):P(h.value)},onNetUnitChange:function(){y.net.data.timeList=[],y.net.data.upList=[],y.net.data.downList=[],localStorage.setItem("netUnit",c.value),S(v.value,c.value)},onTabsChange:function(){A((function(){var e=u.value,t=L(e);if(y[e].selectVal="ALL",localStorage.setItem("home-model-active",e),t&&a.value&&t.echartRef.resize(),a.value&&(o.value=!0),a.value&&"iostat"===e){a.value=!1;var n=j("iostat","data");null==t||t.setConfig(I(n))}A((function(){t&&t.echartRef.resize()}))}))}}})),ca={class:"flex items-center h-[5.3rem] absolute right-[1.6rem] z-100 whitespace-nowrap"},fa={class:"mr-4 text-[#999]"},pa={class:"mr-5 unit-select flex"},da=je(o({__name:"index",setup:function(e){var t=ua(),n=b(t),r=n.loading,a=n.iostatConfig,o=n.resource,i=n.unitList,l=n.activeName,s=n.netConfig,u=n.netUnit,c=n.netRefs,f=n.iostatRefs;return p((function(){t.initChart()})),function(e,n){var p=_e,d=be,x=we,b=ke,w=O,C=z("bt-loading");return v(),k(w,{class:"relative module-box !mb-[0px]",shadow:"always","body-style":{padding:0,display:"flex"}},{default:_((function(){return[y("div",ca,[y("span",fa,g("net"===m(l)?"网卡":"磁盘"),1),(v(!0),h(F,null,R(m(o),(function(e,n){return G((v(),k(d,{key:n,modelValue:e.selectVal,"onUpdate:modelValue":function(t){return e.selectVal=t},placeholder:"请选择","fit-input-width":!0,onChange:m(t).onSelectChange,size:"small",class:"!min-w-[150px]"},{default:_((function(){return[(v(!0),h(F,null,R(e.selectList,(function(e){return v(),k(p,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])),[[te,"".concat(n)==m(l)]])})),128))]),S(b,{class:"relative home-reset-tab w-full",modelValue:m(l),"onUpdate:modelValue":n[2]||(n[2]=function(e){return U(l)?l.value=e:null}),onTabClick:m(t).onTabsChange},{default:_((function(){return[S(x,{label:"流量",name:"net",class:"h-[414px]"},{default:_((function(){return[G((v(),h("div",null,[S(sa,{"model-value":m(s),info:m(o).net.info,ref_key:"netRefs",ref:c},{default:_((function(){return[y("div",pa,[n[3]||(n[3]=y("span",{class:"mr-[4px] text-[#999]"}," 单位 ",-1)),S(d,{modelValue:m(u),"onUpdate:modelValue":n[0]||(n[0]=function(e){return U(u)?u.value=e:null}),size:"small",class:"w-[8rem]",onChange:n[1]||(n[1]=function(e){return m(t).onNetUnitChange()}),placeholder:"请选择"},{default:_((function(){return[(v(!0),h(F,null,R(m(i),(function(e){return v(),k(p,{key:e.value,label:e.label,value:e.value,disabled:e.disable},null,8,["label","value","disabled"])})),128))]})),_:1},8,["modelValue"])])]})),_:1},8,["model-value","info"])])),[[C,m(r)],[C,"正在获取流量信息，请稍候...","title"]])]})),_:1}),S(x,{label:"磁盘IO",name:"iostat",lazy:!0},{default:_((function(){return[G((v(),h("div",null,[S(sa,{ref_key:"iostatRefs",ref:f,"model-value":m(a),info:m(o).iostat.info},null,8,["model-value","info"])])),[[C,m(r)],[C,"正在获取磁盘IO信息，请稍候...","title"]])]})),_:1})]})),_:1},8,["modelValue","onTabClick"])]})),_:1})}}}),[["__scopeId","data-v-9ed3a3ad"]]),ma=B("RECOMMEND-STORE",(function(){var e=Se().payment,t=c(e.value),n=t.authType,r=t.authExpirationTime,a=s(!1),o=s([["time","5分钟极速响应"],["refund","15天无理由退款"],["plunge","30+款付费插件"],["function","20+企业版专享功能"],["certificate","2张SSL商用证书（年付）"],["message","1000条免费短信（年付）"]]),i=s(["多对一技术支持","全年5次安全排查","5分钟极速响应","30+款付费插件","20+企业版专享功能","1000条免费短信（年付）","2张SSL商用证书（年付）","专享企业服务群（年付）","WAF防火墙","更换授权IP","客服优先响应","15+款付费插件","15天无理由退款"]),l=s([0,0,0,0,0,0,0,0,1,1,1,1,1]),u=s([0,0,1,1,1,1,1,1,1,1,1,1,1]),f=s([1,1,1,1,1,1,1,1,1,1,1,1,1]),p=s(!1),d=s(!0);return{plusPrivilegeList:f,ltdPrivilegeList:u,proPrivilegeList:l,privilegeList:i,limitTimeShow:p,advantageList:o,recommendShow:d,showPrivilege:a,authType:n,authExpirationTime:r,setRecommendHide:function(e){var t=((new Date).getTime()+864e5*e).toString();localStorage.setItem("HOME-RECOMMEND-HIDE-TIME",t),d.value=!1},checkRecommendHide:function(){var e=parseInt(localStorage.getItem("HOME-RECOMMEND-HIDE-TIME")||"0");e&&(d.value=e<(new Date).getTime())},openProduct:function(e){return dt({sourceId:e})}}})),va={key:0,class:"h-auto"},ha={class:"absolute left-0 right-0 flex items-center px-[16px]"},ya={class:"text-[#FC6D26]"},ga={class:"advantage-list"},xa={class:"text-[#888] text-[1.3rem]"},ba={class:"absolute left-0 right-0 flex items-center px-[16px]"},wa={class:"flex items-center"},ka={class:"relative"},_a={class:"advantage-list"},Sa={class:"text-[#888] text-[1.3rem]"},Ca={class:"p-[24px] flex justify-center flex-col items-center"},Pa={class:"flex items-center mt-[20px]"},Ia={class:"flex-col items-center border border-[rgb(221,221,221)] justify-center w-[22rem]"},Ta={class:"flex flex-col text-[1.4rem] text-[#666] function-text"},La={class:"flex-col border border-[#FFEFD0] items-center bg-[#fff8eb] justify-center w-[22rem]"},ja={class:"text-[2rem] text-[#333] font-medium h-[9.4rem] leading-[9.4rem] text-center"},Oa={class:"flex flex-col text-[1.4rem] text-[#666] pro-text"},Ea={key:0,class:"svgtofont-el-close text-[red] text-[3px]l font-bold"},Ba={key:1,class:"svgtofont-el-check text-[#feaa04] text-[18px] font-bold"},Da={key:0,class:"recommend-left"},Aa={class:"text-[#E5A734] flex justify-center font-bold"},Fa={class:"flex flex-col text-[1.4rem] text-[#666] ltd-text"},Ra={key:0,class:"svgtofont-el-close text-[red] text-[18px] font-bold"},Ma={key:1,class:"svgtofont-el-check text-[#feaa04] text-[18px] font-bold"},Va={key:0,class:"svgtofont-el-close text-[red] text-[18px] font-bold"},Ha={key:1,class:"svgtofont-el-check text-[#feaa04] text-[18px] font-bold"},Ua=o({__name:"index",setup:function(e){var t=ma(),n=b(t),r=n.plusPrivilegeList,a=n.ltdPrivilegeList,o=n.proPrivilegeList,i=n.privilegeList,l=n.limitTimeShow,s=n.advantageList,u=n.recommendShow,c=n.showPrivilege,f=n.authType,d=n.authExpirationTime;return p((function(){t.checkRecommendHide()})),function(e,n){var p=lt,b=Oe,w=st;return m(u)?(v(),h("div",va,["ltd"===m(f)?(v(),h("div",{key:0,class:"advantage-view relative flex items-center",onMouseover:n[2]||(n[2]=function(e){return l.value=!0}),onMouseleave:n[3]||(n[3]=function(e){return l.value=!1})},[y("div",ha,[y("div",{class:"flex items-center text-[1.3rem] mr-[4rem] w-[26.6rem] flex-shrink-0 cursor-pointer",onClick:n[0]||(n[0]=function(e){return m(t).openProduct(28)})},[S(p,{src:"/vip/vip-ltd-new.svg",class:"mt-[4px] w-[7.0rem] h-2rem"}),n[11]||(n[11]=y("span",{class:"ml-[8px]"},"到期时间：",-1)),y("span",ya,g(m(it)(m(d),"yyyy-MM-dd")),1),S(b,{class:"ml-[8px]",size:"12px"},{default:_((function(){return n[10]||(n[10]=[I("续费")])})),_:1})]),y("div",ga,[(v(!0),h(F,null,R(m(s),(function(e,t){return v(),h("div",{class:"advantage-item",key:t},[y("i",{class:P("svgtofont-free-".concat(e[0],"-icon text-[1.8rem]  mr-[4px] text-[#9e6700]"))},null,2),y("span",xa,g(e[1]),1)])})),128))])]),G(y("div",{class:"day-not-display",onClick:n[1]||(n[1]=function(e){return m(t).setRecommendHide(3)})},n[12]||(n[12]=[y("i",{class:"svgtofont-el-close"},null,-1),y("span",null,"近3天不再显示",-1)]),512),[[te,m(l)]])],32)):"free"===m(f)?(v(),h("div",{key:1,class:"advantage-view re-ad-bg relative flex items-center",onMouseover:n[6]||(n[6]=function(e){return l.value=!0}),onMouseleave:n[7]||(n[7]=function(e){return l.value=!1})},[y("div",ba,[y("div",wa,[y("div",ka,[n[14]||(n[14]=y("i",{class:"svgtofont-free-recommend absolute !text-[3.2rem] text-[#ed0000] -top-[10px] -left-[3px]"},null,-1)),y("button",{class:"product-payment-btn",onClick:n[4]||(n[4]=function(e){return m(t).openProduct(27)})},n[13]||(n[13]=[y("span",{class:"ml-[1.2rem text-[1.4rem] cursor-pointer"}," 立即升级 ",-1)]))]),S(p,{src:"/advantage/ltd-privilege.svg",class:"flex flex-shrink-0 w-[10rem] mx-[16px]"})]),y("div",_a,[(v(!0),h(F,null,R(m(s),(function(e,t){return v(),h("div",{class:"advantage-item",key:t},[y("i",{class:P("svgtofont-free-".concat(e[0],"-icon text-[1.8rem] mr-[4px] text-[#9e6700]"))},null,2),y("span",Sa,g(e[1]),1)])})),128))])]),G(y("div",{class:"day-not-display",onClick:n[5]||(n[5]=function(e){return m(t).setRecommendHide(1)})},n[15]||(n[15]=[y("i",{class:"svgtofont-el-close"},null,-1),I("近24小时不再显示")]),512),[[te,m(l)]])],32)):x("",!0),S(w,{modelValue:m(c),"onUpdate:modelValue":n[9]||(n[9]=function(e){return U(c)?c.value=e:null}),area:96},{default:_((function(){return[y("div",Ca,[S(p,{src:"/advantage/privilege-contrast.png"}),y("div",Pa,[y("div",Ia,[n[16]||(n[16]=y("p",{class:"text-[2rem] text-[#333] font-bold h-[9.4rem] leading-[9.4rem] text-center"},"功能特权",-1)),y("ul",Ta,[(v(!0),h(F,null,R(m(i),(function(e,t){return v(),h("li",{class:"px-[24px] h-[4rem] leading-[4rem]",key:t},g(e),1)})),128))])]),y("div",La,[y("div",ja,[y("p",null,[S(p,{src:"/advantage/privilege-pro.svg",class:"mr-[8px]"}),n[17]||(n[17]=I("专业版"))])]),y("ul",Oa,[(v(!0),h(F,null,R(m(o),(function(e,t){return v(),h("li",{class:"px-[24px] h-[4rem] leading-[4rem] text-center",key:t},[e?(v(),h("i",Ba)):(v(),h("i",Ea))])})),128))])]),(v(),h(F,null,R(2,(function(e,o){return y("div",{class:P(["w-[22rem] bg-[#272a2c] flex-col relative",o?"":"border-2 border-[#787878] h-[64.6rem] shadow"]),key:o},[0===o?(v(),h("span",Da)):x("",!0),y("div",{class:P(["text-[2rem] flex flex-col justify-center items-center",o?" h-[9.4rem]":" h-[11rem]"])},[y("div",Aa,[S(p,{class:"mr-[8px]",src:"/advantage/privilege-diamond.svg"}),y("span",{class:P(o?"":"linear")},g(o?"企业运维托管":"企业版"),3)]),y("button",{class:P(["px-[20px] py-[4px]",o?"linear text-border privilege-button font-bold":"button-linear privilege-button"]),onClick:n[8]||(n[8]=function(e){return m(t).openProduct(45)})},"立即购买",2)],2),y("ul",Fa,[0===o?(v(!0),h(F,{key:0},R(m(a),(function(e,t){return v(),h("li",{key:t},[e?(v(),h("i",Ma)):(v(),h("i",Ra))])})),128)):x("",!0),0!=o?(v(!0),h(F,{key:1},R(m(r),(function(e,t){return v(),h("li",{key:t},[e?x("",!0):(v(),h("i",Va)),e?(v(),h("i",Ha)):x("",!0)])})),128)):x("",!0)])],2)})),64))])])]})),_:1},8,["modelValue"])])):x("",!0)}}}),Na=je(Ua,[["__scopeId","data-v-6eee3609"]]),za=o({__name:"index",setup:function(e){var t=Se().getAlarmData,n=xt(),r=b(n).panelInfo,a=c(r.value),o=a.isSetup,i=a.isRestart,l=null;return E((function(){return o.value}),(function(e){e||n.recommendInstallDialog()}),{immediate:!0,deep:!0}),p(d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.monitorLoginInfo(),l=ut({idle:36e5,request:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getSystemInfo();case 2:return e.abrupt("return",i.value);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),timeout:3e3,retries:3}),n.getHomeConfig(),ct({promises:[t,n.getUpdateInfo],delay:1e3});case 4:case"end":return e.stop()}}),e)})))),Y((function(){var e;null===(e=l)||void 0===e||e.stop()})),function(e,t){var n=ae,r=oe;return v(),h("section",null,[S(r,{span:24},{default:_((function(){return[S(n,{span:24},{default:_((function(){return[S(Ft),S(Qt),S(wr),S(Fr)]})),_:1})]})),_:1}),S(r,{gutter:15,span:24},{default:_((function(){return[S(n,{md:12,sm:24,span:12,xs:24},{default:_((function(){return[S(ra,{class:"h-[48rem] mb-0"})]})),_:1}),S(n,{md:12,sm:24,span:12,xs:24},{default:_((function(){return[S(da,{class:"h-[48rem] mb-0"})]})),_:1})]})),_:1}),S(Na,{class:"mt-[1.6rem]"})])}}}),qa=Object.freeze(Object.defineProperty({__proto__:null,default:za},Symbol.toStringTag,{value:"Module"}));e("i",qa)}}}))}();
