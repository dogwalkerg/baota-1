import{c as e,r as l,h as a,o,k as t,l as r,q as s,y as c,v as n,p as i,J as d,M as p,z as m,F as u,e as h,x as f,I as k,aX as v,C as b,D as x,bG as y,P as C,aw as g,a7 as _,a4 as V,A as w,b5 as j}from"./base-lib.js?v=1734676359";import{u as E,bZ as U,aI as q,aU as z,b as S,e as N}from"./utils-lib.js?v=1734676359";import{q as T}from"./validator.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./index91.js?v=1734676359";import"./column.js?v=1734676359";const D={class:"nps-survey-box"},I={class:"nps-survey-banner"},J={style:{"vertical-align":"4px"}},M={class:"px-[4rem] text-center !relative"},P={key:0,class:"px-[4rem] mt-[2rem] vertical-top"},R={class:"my-[1rem]"},A={class:"inline-block cardView"},L=["onMouseover"],O={class:"mt-[4px] ml-[7.6rem]"},F={key:0},G={key:1,class:"px-[4rem] mt-[2rem]"},H={class:"mb-1rem"},X={class:"w-[36rem] ml-[7.6rem] inline-block"},Z={class:"flex flex-col items-center p-[2rem] mt-[1.2rem]"},$=N(e({__name:"index",props:{compData:{default:()=>({})}},emits:["close"],setup(e,{emit:N}){const{payment:$}=E(),B=S(),K=N,Q=e,{id:W,type:Y,name:ee,softName:le,description:ae,isNoRate:oe,title:te,isCard:re,isShowPhone:se}=Q.compData,ce=l("top-0"),ne=l(""),ie=l(0),de=l(),pe=[{text:"很不满意",color:"#ef0808",borderColor:"#ef080842",bgColor:"#ef08080d"},{text:"不满意",color:"#ef0808",borderColor:"#ef080842",bgColor:"#ef08080d"},{text:"一般",color:"#f0ad4e",borderColor:"#f7be5642",bgColor:"#f7be562b"},{text:"满意",color:"#20a53a",borderColor:"#69be3d42",bgColor:"#69be3d2b"},{text:"非常满意",color:"#20a53a",borderColor:"#69be3d42",bgColor:"#69be3d2b"}],me=l(0),ue=l(""),he=l([{text:"软件和互联网",checked:!0},{text:"事业单位",checked:!1},{text:"传统企业",checked:!1},{text:"创业公司",checked:!1},{text:"个人",checked:!1},{text:"其他",checked:!1}]),fe=l(""),ke=l([[{role:"软件开发",check:!1},{role:"建站",check:!1},{role:"互联网服务",check:!1},{role:"软件服务",check:!1}],[{role:"政府单位",check:!1},{role:"政企单位",check:!1},{role:"医院",check:!1},{role:"学校",check:!1}],[{role:"工业",check:!1},{role:"服务",check:!1},{role:"餐饮",check:!1},{role:"制造业等",check:!1}],[{role:"创业公司",check:!1}],[{role:"个人站长",check:!1},{role:"学生",check:!1}]]),ve=te||(ee?"您对".concat(ee,"有什么改进的方向和建议?"):"宝塔面板需求反馈收集"),be=ae||"如果您在使用过程中遇到任何问题或功能不完善，请将您的问题或需求详细描述给我们，我们将尽力为您解决或完善。",xe=a({phone:"",status:!1}),ye=async()=>{let e={product_type:Y,software_name:le||"panel",rate:ie.value},l={};if(oe||null!==ie.value&&0!==ie.value)if(""!==ne.value)try{if(l[W]=ne.value,5!=me.value?l[1e3]=ue.value:l[1e3]=fe.value,e.questions=JSON.stringify(l),xe.status){if(!xe.phone)return void B.error("请留下您的手机号码方便后续回访~");let l=U(xe.phone);e.feedback=JSON.stringify(l?{phone:xe.phone}:{email:xe.phone})}await q(e),T(),K("close")}catch(a){}else B.error("请输入您的需求");else B.error("打个分数再提交吧，麻烦您了~")},Ce=l();return o((()=>{if(!oe){ce.value="top-34";const e=de.value.$el.querySelectorAll(".el-rate__item");e.forEach(((l,a)=>{const o=document.createElement("div"),t=pe[a];o.innerText=t.text,o.classList.add("rate-tips"),o.style.color=t.color,o.style.borderColor=t.borderColor,o.style.backgroundColor=t.bgColor,l.appendChild(o),[1,3,5].includes(a)||(o.style.display="block"),l.addEventListener("mouseover",(()=>{e.forEach((e=>{e.querySelector(".rate-tips").style.display="none"})),ie.value=a+1,o.style.display="block"}))}))}setTimeout((()=>{var e;null==(e=Ce.value)||e.focus()}),400)})),(e,l)=>{const a=y,o=C,E=g,U=j,q=z,S=_,N=V,T=w;return t(),r("div",D,[s("div",I,[s("span",null,[l[5]||(l[5]=s("i",null,null,-1)),l[6]||(l[6]=c()),s("span",J,n(i(ve)),1)])]),s("div",M,[i(oe)?m("",!0):(t(),d(a,{key:0,ref_key:"rate",ref:de,class:"mt-[8px] mb-[3rem]",modelValue:i(ie),"onUpdate:modelValue":l[0]||(l[0]=e=>p(ie)?ie.value=e:null),colors:["#ef0808","#f0ad4e","#20a53a"],texts:["很不满意","不满意","一般","满意","非常满意"],"aria-label":"Rate",size:"large"},null,8,["modelValue"])),s("span",{class:u(["text-[red] absolute left-12",i(ce)])},"*",2),h(E,{placement:"top-start",width:"440","popper-class":"tips !bg-[#20a53a] !text-white !text-[1.2rem] !p-12px !leading-[2rem]",trigger:"click","visible-arrow":!0,content:i(be)},{reference:f((()=>[h(o,{ref_key:"inputRef",ref:Ce,type:"textarea",rows:5,modelValue:i(ne),"onUpdate:modelValue":l[1]||(l[1]=e=>p(ne)?ne.value=e:null),placeholder:i(be)},null,8,["modelValue","placeholder"])])),_:1},8,["content"])]),i(re)?(t(),r("div",P,[s("div",R,[l[7]||(l[7]=s("span",{class:"text-[1.3rem] text-[#666] align-top"},"您所属行业：",-1)),s("div",A,[(t(!0),r(k,null,v(i(he),((e,l)=>(t(),r("span",{key:l,class:u(["inline-block text-[1.3rem] h-[1.7rem] cardTitle align-super",{active:e.checked}]),onMouseover:a=>((e,l)=>{me.value=l,he.value.forEach((e=>{e.checked=!1})),e.checked=!0})(e,l)},n(e.text),43,L)))),128))]),s("div",O,[5==i(me)?(t(),r("span",F,[h(o,{modelValue:i(fe),"onUpdate:modelValue":l[2]||(l[2]=e=>p(fe)?fe.value=e:null),placeholder:"您的行业是",class:"!w-[36rem]"},null,8,["modelValue"])])):(t(!0),r(k,{key:1},v(i(ke)[i(me)],((e,l)=>(t(),d(U,{class:u(e.check?"active":""),size:"small",key:l,type:"info",onClick:l=>(e=>{ue.value=e.role,ke.value.forEach((e=>{e.forEach((e=>{e.check=!1}))})),e.check=!0})(e),effect:"plain"},{default:f((()=>[c(n(e.role),1)])),_:2},1032,["class","onClick"])))),128))])])])):m("",!0),"ltd"===i($).authType&&i(se)?(t(),r("div",G,[s("div",H,[l[8]||(l[8]=s("span",{class:"text-[1.3rem] text-[#666]"},"是否愿意接受回访：",-1)),h(q,{size:"small",modelValue:i(xe).status,"onUpdate:modelValue":l[3]||(l[3]=e=>i(xe).status=e)},null,8,["modelValue"])]),h(N,{ref:"formPhone","label-position":"top",model:i(xe)},{default:f((()=>[b(h(S,{label:"",prop:"phone"},{default:f((()=>[s("span",X,[h(o,{modelValue:i(xe).phone,"onUpdate:modelValue":l[4]||(l[4]=e=>i(xe).phone=e),placeholder:"请留下手机号码或邮箱"},null,8,["modelValue"])])])),_:1},512),[[x,i(xe).status]])])),_:1},8,["model"])])):m("",!0),l[10]||(l[10]=s("div",{class:"mt-[2.4rem] text-[1.3rem] text-primary leading-[4.6rem] flex justify-center"},"我们特别重视您的需求反馈，我们会每周进行需求评审，希望能更好的帮到您",-1)),s("div",Z,[h(T,{class:"w-[12.5rem] !py-12px !px-20px !h-auto",size:"large",type:"primary",onClick:ye},{default:f((()=>l[9]||(l[9]=[c("提交")]))),_:1})])])}}}),[["__scopeId","data-v-b064ed58"]]);export{$ as default};
