import{bb as a,M as t,G as s,o as e,ah as o}from"./utils-lib.js?v=1734676359";import{u as i}from"./useStore9.js?v=1734676359";import{u as l}from"./useStore12.js?v=1734676359";import{s as r}from"./base-lib.js?v=1734676359";import{addDomain as n,removeDomain as u}from"./site.js?v=1734676359";import{c as m}from"./useController3.js?v=1734676359";const{localRow:c}=r(i()),{isRefreshDomain:d,domain:v,tabActive:p}=r(l()),h=async()=>{try{const{data:t}=await a({table:"domain",list:"True",search:c.value.id});return{data:t,total:0}}catch(t){return{data:[],total:0,other:{}}}},y=async()=>{""!==v.value.trim()?s({loading:"正在添加域名，请稍后...",request:n({id:c.value.id,webname:c.value.name,domain:v.value.trim().split("\n").join(",")}),success:a=>{var t,s;m({title:"域名添加结果",resultData:(null==(t=null==a?void 0:a.data)?void 0:t.domains)||(null==(s=null==a?void 0:a.data)?void 0:s.data)||[],autoTitle:"添加域名完成"}),v.value="",d.value=!0}}):t.error("域名不能为空!")},b=async a=>{try{await e({icon:"warning-filled",title:"批量删除",content:"同时删除选中的域名，是否继续？",type:"calc"});let t=[];return await Promise.all(a.map((async a=>{const s={id:c.value.id,webname:c.value.name,domain:a.name,port:a.port};try{const e=await u(s);t.push({name:a.name,msg:e.msg,status:e.status})}catch(e){o(e)}}))),m({resultData:t,autoTitle:"删除域名完成"}),d.value=!0,{status:!0,msg:"删除域名成功"}}catch(t){return{status:!1,msg:"删除域名失败"}}},w=async a=>{await u({id:c.value.id,webname:c.value.name,domain:a.name,port:a.port}),d.value=!0},f=async()=>{c.value.php_version_status||(p.value="php")},g=async()=>{c.value.php_version_status=!0};export{b as a,w as d,h as g,f as i,y as o,g as u};
