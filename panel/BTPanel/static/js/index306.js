import{_ as a}from"./index90.js?v=1734676359";import{h as e,r as s,c as t,k as l,l as n,e as r,x as o,q as m,p as i,y as u,A as c}from"./base-lib.js?v=1734676359";import{G as p,o as d,b as v,bX as f,an as b,j as h}from"./utils-lib.js?v=1734676359";import{getPyModules as j,setPyModules as y}from"./site.js?v=1734676359";import{u as x}from"./useStore7.js?v=1734676359";import{u as _}from"./column.js?v=1734676359";import"./__commonjsHelpers__.js?v=1734676359";import"./index91.js?v=1734676359";const w=v(),{rowData:g}=x(),V=e({name:"",version:""}),q=s(!1),k=async()=>{try{const a=await p({request:j({name:g.value.name}),data:[Array,a=>a.map((a=>({name:a[0],version:a[1]})))]});return Array.isArray(a)?{data:a,total:a.length}:{data:[],total:0}}catch(a){return{data:[],total:0}}},A=async a=>{const e={name:g.value.name,act:"uninstall",p:a.name,v:a.version};await d({title:"卸载项目环境模块",content:"卸载".concat(a.name,"后，模块相关的全局变量将无法调用，是否继续？"),icon:"warning-filled"});(await p({loading:"正在卸载，请稍后...",request:y(e),message:!0})).status&&(q.value=!0)},C=async()=>{if(""===V.name)return void w.error("请输入模块名称");(await p({loading:"正在安装，请稍后...",request:y({name:g.value.name,act:"install",p:V.name,v:V.version}),message:!0})).status&&(V.name="",V.version="",q.value=!0)},D={class:"relative p-[16px]"},U={class:"flex items-center"},B=t({__name:"index",props:{compData:{default:()=>{}}},setup(e){const{BtTable:s}=f({request:k,columns:[{label:"模块名",prop:"name"},{label:"版本",prop:"version"},_([{onClick:A,title:"卸载"}])],extension:[b(q)]});return(e,t)=>{const p=h,d=c,v=a;return l(),n("div",D,[r(v,null,{"header-left":o((()=>[m("div",U,[r(p,{modelValue:i(V).name,"onUpdate:modelValue":t[0]||(t[0]=a=>i(V).name=a),placeholder:"虚拟环境模块名称",clearable:"",class:"mr-1rem",width:"27rem"},null,8,["modelValue"]),r(p,{modelValue:i(V).version,"onUpdate:modelValue":t[1]||(t[1]=a=>i(V).version=a),placeholder:"模块版本",clearable:"",width:"16rem"},null,8,["modelValue"]),r(d,{type:"primary",class:"!ml-[2rem]",onClick:i(C)},{default:o((()=>t[2]||(t[2]=[u("安装模块")]))),_:1},8,["onClick"])])])),content:o((()=>[r(i(s),{"max-height":400})])),_:1})])}}});export{B as default};
